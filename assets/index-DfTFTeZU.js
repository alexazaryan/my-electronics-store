var cN=Object.defineProperty;var uN=(n,e,t)=>e in n?cN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var wg=(n,e,t)=>uN(n,typeof e!="symbol"?e+"":e,t);import{r as sv,g as av,a as hN}from"./react-DbHEDQBy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var Tg={exports:{}},bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function dN(){if(eT)return bu;eT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:o}}return bu.Fragment=e,bu.jsx=t,bu.jsxs=t,bu}var tT;function fN(){return tT||(tT=1,Tg.exports=dN()),Tg.exports}var v=fN(),V=sv();const _a=av(V);var bg={exports:{}},Su={},Sg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function pN(){return nT||(nT=1,function(n){function e(re,se){var ce=re.length;re.push(se);e:for(;0<ce;){var ue=ce-1>>>1,Pe=re[ue];if(0<a(Pe,se))re[ue]=se,re[ce]=Pe,ce=ue;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var se=re[0],ce=re.pop();if(ce!==se){re[0]=ce;e:for(var ue=0,Pe=re.length,be=Pe>>>1;ue<be;){var ve=2*(ue+1)-1,le=re[ve],ge=ve+1,je=re[ge];if(0>a(le,ce))ge<Pe&&0>a(je,le)?(re[ue]=je,re[ge]=ce,ue=ge):(re[ue]=le,re[ve]=ce,ue=ve);else if(ge<Pe&&0>a(je,ce))re[ue]=je,re[ge]=ce,ue=ge;else break e}}return se}function a(re,se){var ce=re.sortIndex-se.sortIndex;return ce!==0?ce:re.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],m=[],g=1,E=null,C=3,x=!1,O=!1,j=!1,D=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function q(re){for(var se=t(m);se!==null;){if(se.callback===null)i(m);else if(se.startTime<=re)i(m),se.sortIndex=se.expirationTime,e(p,se);else break;se=t(m)}}function z(re){if(j=!1,q(re),!O)if(t(p)!==null)O=!0,Ae();else{var se=t(m);se!==null&&Le(z,se.startTime-re)}}var Y=!1,W=-1,R=5,T=-1;function w(){return!(n.unstable_now()-T<R)}function A(){if(Y){var re=n.unstable_now();T=re;var se=!0;try{e:{O=!1,j&&(j=!1,U(W),W=-1),x=!0;var ce=C;try{t:{for(q(re),E=t(p);E!==null&&!(E.expirationTime>re&&w());){var ue=E.callback;if(typeof ue=="function"){E.callback=null,C=E.priorityLevel;var Pe=ue(E.expirationTime<=re);if(re=n.unstable_now(),typeof Pe=="function"){E.callback=Pe,q(re),se=!0;break t}E===t(p)&&i(p),q(re)}else i(p);E=t(p)}if(E!==null)se=!0;else{var be=t(m);be!==null&&Le(z,be.startTime-re),se=!1}}break e}finally{E=null,C=ce,x=!1}se=void 0}}finally{se?k():Y=!1}}}var k;if(typeof $=="function")k=function(){$(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=A,k=function(){M.postMessage(null)}}else k=function(){D(A,0)};function Ae(){Y||(Y=!0,k())}function Le(re,se){W=D(function(){re(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){O||x||(O=!0,Ae())},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(re){switch(C){case 1:case 2:case 3:var se=3;break;default:se=C}var ce=C;C=se;try{return re()}finally{C=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,se){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ce=C;C=re;try{return se()}finally{C=ce}},n.unstable_scheduleCallback=function(re,se,ce){var ue=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ue+ce:ue):ce=ue,re){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ce+Pe,re={id:g++,callback:se,priorityLevel:re,startTime:ce,expirationTime:Pe,sortIndex:-1},ce>ue?(re.sortIndex=ce,e(m,re),t(p)===null&&re===t(m)&&(j?(U(W),W=-1):j=!0,Le(z,ce-ue))):(re.sortIndex=Pe,e(p,re),O||x||(O=!0,Ae())),re},n.unstable_shouldYield=w,n.unstable_wrapCallback=function(re){var se=C;return function(){var ce=C;C=se;try{return re.apply(this,arguments)}finally{C=ce}}}}(Cg)),Cg}var iT;function mN(){return iT||(iT=1,Sg.exports=pN()),Sg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function _N(){if(rT)return Su;rT=1;var n=mN(),e=sv(),t=hN();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),z=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function W(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var R=Symbol.for("react.client.reference");function T(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===R?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case p:return"Fragment";case h:return"Portal";case g:return"Profiler";case m:return"StrictMode";case j:return"Suspense";case D:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Provider";case C:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return s=r.displayName||null,s!==null?s:T(r.type)||"Memo";case $:s=r._payload,r=r._init;try{return T(r(s))}catch{}}return null}var w=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign,k,P;function M(r){if(k===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);k=s&&s[1]||"",P=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+r+P}var Ae=!1;function Le(r,s){if(!r||Ae)return"";Ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var Q=Z}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(Z){Q=Z}r.call(ie.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],I=_[1];if(S&&I){var L=S.split(`
`),F=I.split(`
`);for(f=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===L.length||f===F.length)for(u=L.length-1,f=F.length-1;1<=u&&0<=f&&L[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(L[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||L[u]!==F[f]){var J=`
`+L[u].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=u&&0<=f);break}}}finally{Ae=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?M(l):""}function re(r){switch(r.tag){case 26:case 27:case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return r=Le(r.type,!1),r;case 11:return r=Le(r.type.render,!1),r;case 1:return r=Le(r.type,!0),r;default:return""}}function se(r){try{var s="";do s+=re(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ce(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function ue(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Pe(r){if(ce(r)!==r)throw Error(i(188))}function be(r){var s=r.alternate;if(!s){if(s=ce(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,u=s;;){var f=l.return;if(f===null)break;var _=f.alternate;if(_===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===l)return Pe(f),r;if(_===u)return Pe(f),s;_=_.sibling}throw Error(i(188))}if(l.return!==u.return)l=f,u=_;else{for(var S=!1,I=f.child;I;){if(I===l){S=!0,l=f,u=_;break}if(I===u){S=!0,u=f,l=_;break}I=I.sibling}if(!S){for(I=_.child;I;){if(I===l){S=!0,l=_,u=f;break}if(I===u){S=!0,u=_,l=f;break}I=I.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function ve(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=ve(r),s!==null)return s;r=r.sibling}return null}var le=Array.isArray,ge=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je={pending:!1,data:null,method:null,action:null},It=[],Rt=-1;function Re(r){return{current:r}}function Ee(r){0>Rt||(r.current=It[Rt],It[Rt]=null,Rt--)}function we(r,s){Rt++,It[Rt]=r.current,r.current=s}var pe=Re(null),rt=Re(null),st=Re(null),Ke=Re(null);function Ye(r,s){switch(we(st,s),we(rt,r),we(pe,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?xw(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=xw(r),s=Nw(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ee(pe),we(pe,s)}function ke(){Ee(pe),Ee(rt),Ee(st)}function Cn(r){r.memoizedState!==null&&we(Ke,r);var s=pe.current,l=Nw(s,r.type);s!==l&&(we(rt,r),we(pe,l))}function Ne(r){rt.current===r&&(Ee(pe),Ee(rt)),Ke.current===r&&(Ee(Ke),yu._currentValue=je)}var dt=Object.prototype.hasOwnProperty,On=n.unstable_scheduleCallback,si=n.unstable_cancelCallback,Qn=n.unstable_shouldYield,Li=n.unstable_requestPaint,ht=n.unstable_now,Bn=n.unstable_getCurrentPriorityLevel,Be=n.unstable_ImmediatePriority,it=n.unstable_UserBlockingPriority,Zt=n.unstable_NormalPriority,Is=n.unstable_LowPriority,xs=n.unstable_IdlePriority,tr=n.log,hn=n.unstable_setDisableYieldValue,Yn=null,Jt=null;function wc(r){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Yn,r,void 0,(r.current.flags&128)===128)}catch{}}function nr(r){if(typeof tr=="function"&&hn(r),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Yn,r)}catch{}}var Fn=Math.clz32?Math.clz32:Wh,Tc=Math.log,Kh=Math.LN2;function Wh(r){return r>>>=0,r===0?32:31-(Tc(r)/Kh|0)|0}var ir=128,Ns=4194304;function Vi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function _i(r,s){var l=r.pendingLanes;if(l===0)return 0;var u=0,f=r.suspendedLanes,_=r.pingedLanes,S=r.warmLanes;r=r.finishedLanes!==0;var I=l&134217727;return I!==0?(l=I&~f,l!==0?u=Vi(l):(_&=I,_!==0?u=Vi(_):r||(S=I&~S,S!==0&&(u=Vi(S))))):(I=l&~f,I!==0?u=Vi(I):_!==0?u=Vi(_):r||(S=l&~S,S!==0&&(u=Vi(S)))),u===0?0:s!==0&&s!==u&&(s&f)===0&&(f=u&-u,S=s&-s,f>=S||f===32&&(S&4194176)!==0)?s:u}function ks(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function $o(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bc(){var r=ir;return ir<<=1,(ir&4194176)===0&&(ir=128),r}function Ds(){var r=Ns;return Ns<<=1,(Ns&62914560)===0&&(Ns=4194304),r}function Go(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Ut(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Qh(r,s,l,u,f,_){var S=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var I=r.entanglements,L=r.expirationTimes,F=r.hiddenUpdates;for(l=S&~l;0<l;){var J=31-Fn(l),ie=1<<J;I[J]=0,L[J]=-1;var Q=F[J];if(Q!==null)for(F[J]=null,J=0;J<Q.length;J++){var Z=Q[J];Z!==null&&(Z.lane&=-536870913)}l&=~ie}u!==0&&Os(r,u,0),_!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=_&~(S&~s))}function Os(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Fn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194218}function Ms(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var u=31-Fn(l),f=1<<u;f&s|r[u]&s&&(r[u]|=s),l&=~f}}function Yh(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Xh(){var r=ge.p;return r!==0?r:(r=window.event,r===void 0?32:Ww(r.type))}function Ps(r,s){var l=ge.p;try{return ge.p=r,s()}finally{ge.p=l}}var rr=Math.random().toString(36).slice(2),dn="__reactFiber$"+rr,en="__reactProps$"+rr,xr="__reactContainer$"+rr,qa="__reactEvents$"+rr,Ko="__reactListeners$"+rr,sr="__reactHandles$"+rr,Sc="__reactResources$"+rr,Ls="__reactMarker$"+rr;function Ha(r){delete r[dn],delete r[en],delete r[qa],delete r[Ko],delete r[sr]}function ji(r){var s=r[dn];if(s)return s;for(var l=r.parentNode;l;){if(s=l[xr]||l[dn]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Ow(r);r!==null;){if(l=r[dn])return l;r=Ow(r)}return s}r=l,l=r.parentNode}return null}function Nr(r){if(r=r[dn]||r[xr]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Vs(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function js(r){var s=r[Sc];return s||(s=r[Sc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(r){r[Ls]=!0}var Cc=new Set,Wo={};function ai(r,s){Xn(r,s),Xn(r+"Capture",s)}function Xn(r,s){for(Wo[r]=s,r=0;r<s.length;r++)Cc.add(s[r])}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ac={},Rc={};function Zh(r){return dt.call(Rc,r)?!0:dt.call(Ac,r)?!1:Cm.test(r)?Rc[r]=!0:(Ac[r]=!0,!1)}function Us(r,s,l){if(Zh(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function zs(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function gi(r,s,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+u)}}function qn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Jh(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Am(r){var s=Jh(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,_=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){u=""+S,_.call(this,S)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function $a(r){r._valueTracker||(r._valueTracker=Am(r))}function Ic(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return r&&(u=Jh(r)?r.checked?"true":"false":r.value),r=u,r!==l?(s.setValue(r),!0):!1}function Qo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var kr=/[\n"\\]/g;function Ot(r){return r.replace(kr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Bs(r,s,l,u,f,_,S,I){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+qn(s)):r.value!==""+qn(s)&&(r.value=""+qn(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?Yo(r,S,qn(s)):l!=null?Yo(r,S,qn(l)):u!=null&&r.removeAttribute("value"),f==null&&_!=null&&(r.defaultChecked=!!_),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+qn(I):r.removeAttribute("name")}function Ga(r,s,l,u,f,_,S,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+qn(l):"",s=s!=null?""+qn(s):l,I||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S)}function Yo(r,s,l){s==="number"&&Qo(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function at(r,s,l,u){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&u&&(r[l].defaultSelected=!0)}else{for(l=""+qn(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Ka(r,s,l){if(s!=null&&(s=""+qn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+qn(l):""}function Fs(r,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(i(92));if(le(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=qn(s),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function yi(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Rm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xc(r,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,l):typeof l!="number"||l===0||Rm.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function ed(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&l[f]!==u&&xc(r,f,u)}else for(var _ in s)s.hasOwnProperty(_)&&xc(r,_,s[_])}function Nc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(r){return xm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var vi=null;function Xo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Dr=null,Or=null;function Mr(r){var s=Nr(r);if(s&&(r=s.stateNode)){var l=r[en]||null;e:switch(r=s.stateNode,s.type){case"input":if(Bs(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ot(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==r&&u.form===r.form){var f=u[en]||null;if(!f)throw Error(i(90));Bs(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===r.form&&Ic(u)}break e;case"textarea":Ka(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&at(r,!!l.multiple,s,!1)}}}var kc=!1;function td(r,s,l){if(kc)return r(s,l);kc=!0;try{var u=r(s);return u}finally{if(kc=!1,(Dr!==null||Or!==null)&&(Gd(),Dr&&(s=Dr,r=Or,Or=Dr=null,Mr(s),r)))for(s=0;s<r.length;s++)Mr(r[s])}}function Wa(r,s){var l=r.stateNode;if(l===null)return null;var u=l[en]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Ei=!1;if(oi)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Ei=!1}var or=null,qs=null,Pr=null;function Dc(){if(Pr)return Pr;var r,s=qs,l=s.length,u,f="value"in or?or.value:or.textContent,_=f.length;for(r=0;r<l&&s[r]===f[r];r++);var S=l-r;for(u=1;u<=S&&s[l-u]===f[_-u];u++);return Pr=f.slice(r,1<u?1-u:void 0)}function lr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function cr(){return!0}function Oc(){return!1}function fn(r){function s(l,u,f,_,S){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(l=r[I],this[I]=l?l(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?cr:Oc,this.isPropagationStopped=Oc,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),s}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=fn(ft),Ya=A({},ft,{view:0,detail:0}),nd=fn(Ya),Jo,el,ur,Xa=A({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eo,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ur&&(ur&&r.type==="mousemove"?(Jo=r.screenX-ur.screenX,el=r.screenY-ur.screenY):el=Jo=0,ur=r),Jo)},movementY:function(r){return"movementY"in r?r.movementY:el}}),wi=fn(Xa),id=A({},Xa,{dataTransfer:0}),Nm=fn(id),Za=A({},Ya,{relatedTarget:0}),tl=fn(Za),Mc=A({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),nl=fn(Mc),rd=A({},ft,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),il=fn(rd),km=A({},ft,{data:0}),Pc=fn(km),Ja={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ad[r])?!!s[r]:!1}function eo(){return Lc}var od=A({},Ya,{key:function(r){if(r.key){var s=Ja[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=lr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eo,charCode:function(r){return r.type==="keypress"?lr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?lr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),rl=fn(od),ld=A({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vc=fn(ld),Lr=A({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eo}),cd=fn(Lr),ud=A({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),hd=fn(ud),dd=A({},Xa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),sl=fn(dd),Hn=A({},ft,{newState:0,oldState:0}),fd=fn(Hn),pd=[9,13,27,32],hr=oi&&"CompositionEvent"in window,d=null;oi&&"documentMode"in document&&(d=document.documentMode);var y=oi&&"TextEvent"in window&&!d,b=oi&&(!hr||d&&8<d&&11>=d),N=" ",G=!1;function X(r,s){switch(r){case"keyup":return pd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Je=!1;function tn(r,s){switch(r){case"compositionend":return ae(s);case"keypress":return s.which!==32?null:(G=!0,N);case"textInput":return r=s.data,r===N&&G?null:r;default:return null}}function et(r,s){if(Je)return r==="compositionend"||!hr&&X(r,s)?(r=Dc(),Pr=qs=or=null,Je=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return b&&s.locale!=="ko"?null:s.data;default:return null}}var pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nn(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!pn[r.type]:s==="textarea"}function Vr(r,s,l,u){Dr?Or?Or.push(u):Or=[u]:Dr=u,s=Xd(s,"onChange"),0<s.length&&(l=new Zo("onChange","change",null,l,u),r.push({event:l,listeners:s}))}var An=null,dr=null;function jc(r){Sw(r,0)}function md(r){var s=Vs(r);if(Ic(s))return r}function J0(r,s){if(r==="change")return s}var eE=!1;if(oi){var Dm;if(oi){var Om="oninput"in document;if(!Om){var tE=document.createElement("div");tE.setAttribute("oninput","return;"),Om=typeof tE.oninput=="function"}Dm=Om}else Dm=!1;eE=Dm&&(!document.documentMode||9<document.documentMode)}function nE(){An&&(An.detachEvent("onpropertychange",iE),dr=An=null)}function iE(r){if(r.propertyName==="value"&&md(dr)){var s=[];Vr(s,dr,r,Xo(r)),td(jc,s)}}function U2(r,s,l){r==="focusin"?(nE(),An=s,dr=l,An.attachEvent("onpropertychange",iE)):r==="focusout"&&nE()}function z2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return md(dr)}function B2(r,s){if(r==="click")return md(s)}function F2(r,s){if(r==="input"||r==="change")return md(s)}function q2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var li=typeof Object.is=="function"?Object.is:q2;function Uc(r,s){if(li(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!dt.call(s,f)||!li(r[f],s[f]))return!1}return!0}function rE(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function sE(r,s){var l=rE(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=s&&u>=s)return{node:l,offset:s-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rE(l)}}function aE(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?aE(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function oE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Qo(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Qo(r.document)}return s}function Mm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function H2(r,s){var l=oE(s);s=r.focusedElem;var u=r.selectionRange;if(l!==s&&s&&s.ownerDocument&&aE(s.ownerDocument.documentElement,s)){if(u!==null&&Mm(s)){if(r=u.start,l=u.end,l===void 0&&(l=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(l,s.value.length);else if(l=(r=s.ownerDocument||document)&&r.defaultView||window,l.getSelection){l=l.getSelection();var f=s.textContent.length,_=Math.min(u.start,f);u=u.end===void 0?_:Math.min(u.end,f),!l.extend&&_>u&&(f=u,u=_,_=f),f=sE(s,_);var S=sE(s,u);f&&S&&(l.rangeCount!==1||l.anchorNode!==f.node||l.anchorOffset!==f.offset||l.focusNode!==S.node||l.focusOffset!==S.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),l.removeAllRanges(),_>u?(l.addRange(r),l.extend(S.node,S.offset)):(r.setEnd(S.node,S.offset),l.addRange(r)))}}for(r=[],l=s;l=l.parentNode;)l.nodeType===1&&r.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)l=r[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var $2=oi&&"documentMode"in document&&11>=document.documentMode,al=null,Pm=null,zc=null,Lm=!1;function lE(r,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Lm||al==null||al!==Qo(u)||(u=al,"selectionStart"in u&&Mm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zc&&Uc(zc,u)||(zc=u,u=Xd(Pm,"onSelect"),0<u.length&&(s=new Zo("onSelect","select",null,s,l),r.push({event:s,listeners:u}),s.target=al)))}function to(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ol={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionrun:to("Transition","TransitionRun"),transitionstart:to("Transition","TransitionStart"),transitioncancel:to("Transition","TransitionCancel"),transitionend:to("Transition","TransitionEnd")},Vm={},cE={};oi&&(cE=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function no(r){if(Vm[r])return Vm[r];if(!ol[r])return r;var s=ol[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in cE)return Vm[r]=s[l];return r}var uE=no("animationend"),hE=no("animationiteration"),dE=no("animationstart"),G2=no("transitionrun"),K2=no("transitionstart"),W2=no("transitioncancel"),fE=no("transitionend"),pE=new Map,mE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ui(r,s){pE.set(r,s),ai(s,[r])}var Ti=[],ll=0,jm=0;function _d(){for(var r=ll,s=jm=ll=0;s<r;){var l=Ti[s];Ti[s++]=null;var u=Ti[s];Ti[s++]=null;var f=Ti[s];Ti[s++]=null;var _=Ti[s];if(Ti[s++]=null,u!==null&&f!==null){var S=u.pending;S===null?f.next=f:(f.next=S.next,S.next=f),u.pending=f}_!==0&&_E(l,f,_)}}function gd(r,s,l,u){Ti[ll++]=r,Ti[ll++]=s,Ti[ll++]=l,Ti[ll++]=u,jm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Um(r,s,l,u){return gd(r,s,l,u),yd(r)}function Hs(r,s){return gd(r,null,null,s),yd(r)}function _E(r,s,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var f=!1,_=r.return;_!==null;)_.childLanes|=l,u=_.alternate,u!==null&&(u.childLanes|=l),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(f=!0)),r=_,_=_.return;f&&s!==null&&r.tag===3&&(_=r.stateNode,f=31-Fn(l),_=_.hiddenUpdates,r=_[f],r===null?_[f]=[s]:r.push(s),s.lane=l|536870912)}function yd(r){if(50<hu)throw hu=0,$_=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var cl={},gE=new WeakMap;function bi(r,s){if(typeof r=="object"&&r!==null){var l=gE.get(r);return l!==void 0?l:(s={value:r,source:s,stack:se(s)},gE.set(r,s),s)}return{value:r,source:s,stack:se(s)}}var ul=[],hl=0,vd=null,Ed=0,Si=[],Ci=0,io=null,jr=1,Ur="";function ro(r,s){ul[hl++]=Ed,ul[hl++]=vd,vd=r,Ed=s}function yE(r,s,l){Si[Ci++]=jr,Si[Ci++]=Ur,Si[Ci++]=io,io=r;var u=jr;r=Ur;var f=32-Fn(u)-1;u&=~(1<<f),l+=1;var _=32-Fn(s)+f;if(30<_){var S=f-f%5;_=(u&(1<<S)-1).toString(32),u>>=S,f-=S,jr=1<<32-Fn(s)+f|l<<f|u,Ur=_+r}else jr=1<<_|l<<f|u,Ur=r}function zm(r){r.return!==null&&(ro(r,1),yE(r,1,0))}function Bm(r){for(;r===vd;)vd=ul[--hl],ul[hl]=null,Ed=ul[--hl],ul[hl]=null;for(;r===io;)io=Si[--Ci],Si[Ci]=null,Ur=Si[--Ci],Si[Ci]=null,jr=Si[--Ci],Si[Ci]=null}var $n=null,Rn=null,ot=!1,zi=null,fr=!1,Fm=Error(i(519));function so(r){var s=Error(i(418,""));throw qc(bi(s,r)),Fm}function vE(r){var s=r.stateNode,l=r.type,u=r.memoizedProps;switch(s[dn]=r,s[en]=u,l){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(l=0;l<fu.length;l++)Xe(fu[l],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),Ga(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),$a(s);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),Fs(s,u.value,u.defaultValue,u.children),$a(s)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||Iw(s.textContent,l)?(u.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),u.onScroll!=null&&Xe("scroll",s),u.onScrollEnd!=null&&Xe("scrollend",s),u.onClick!=null&&(s.onclick=Zd),s=!0):s=!1,s||so(r)}function EE(r){for($n=r.return;$n;)switch($n.tag){case 3:case 27:fr=!0;return;case 5:case 13:fr=!1;return;default:$n=$n.return}}function Bc(r){if(r!==$n)return!1;if(!ot)return EE(r),ot=!0,!1;var s=!1,l;if((l=r.tag!==3&&r.tag!==27)&&((l=r.tag===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||lg(r.type,r.memoizedProps)),l=!l),l&&(s=!0),s&&Rn&&so(r),EE(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){Rn=Fi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}Rn=null}}else Rn=$n?Fi(r.stateNode.nextSibling):null;return!0}function Fc(){Rn=$n=null,ot=!1}function qc(r){zi===null?zi=[r]:zi.push(r)}var Hc=Error(i(460)),wE=Error(i(474)),qm={then:function(){}};function TE(r){return r=r.status,r==="fulfilled"||r==="rejected"}function wd(){}function bE(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(wd,wd),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Hc?Error(i(483)):r;default:if(typeof s.status=="string")s.then(wd,wd);else{if(r=Et,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Hc?Error(i(483)):r}throw $c=s,Hc}}var $c=null;function SE(){if($c===null)throw Error(i(459));var r=$c;return $c=null,r}var dl=null,Gc=0;function Td(r){var s=Gc;return Gc+=1,dl===null&&(dl=[]),bE(dl,r,s)}function Kc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function bd(r,s){throw s.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function CE(r){var s=r._init;return s(r._payload)}function AE(r){function s(H,B){if(r){var K=H.deletions;K===null?(H.deletions=[B],H.flags|=16):K.push(B)}}function l(H,B){if(!r)return null;for(;B!==null;)s(H,B),B=B.sibling;return null}function u(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function f(H,B){return H=na(H,B),H.index=0,H.sibling=null,H}function _(H,B,K){return H.index=K,r?(K=H.alternate,K!==null?(K=K.index,K<B?(H.flags|=33554434,B):K):(H.flags|=33554434,B)):(H.flags|=1048576,B)}function S(H){return r&&H.alternate===null&&(H.flags|=33554434),H}function I(H,B,K,te){return B===null||B.tag!==6?(B=V_(K,H.mode,te),B.return=H,B):(B=f(B,K),B.return=H,B)}function L(H,B,K,te){var fe=K.type;return fe===p?J(H,B,K.props.children,te,K.key):B!==null&&(B.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===$&&CE(fe)===B.type)?(B=f(B,K.props),Kc(B,K),B.return=H,B):(B=Bd(K.type,K.key,K.props,null,H.mode,te),Kc(B,K),B.return=H,B)}function F(H,B,K,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=j_(K,H.mode,te),B.return=H,B):(B=f(B,K.children||[]),B.return=H,B)}function J(H,B,K,te,fe){return B===null||B.tag!==7?(B=_o(K,H.mode,te,fe),B.return=H,B):(B=f(B,K),B.return=H,B)}function ie(H,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=V_(""+B,H.mode,K),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case c:return K=Bd(B.type,B.key,B.props,null,H.mode,K),Kc(K,B),K.return=H,K;case h:return B=j_(B,H.mode,K),B.return=H,B;case $:var te=B._init;return B=te(B._payload),ie(H,B,K)}if(le(B)||W(B))return B=_o(B,H.mode,K,null),B.return=H,B;if(typeof B.then=="function")return ie(H,Td(B),K);if(B.$$typeof===x)return ie(H,jd(H,B),K);bd(H,B)}return null}function Q(H,B,K,te){var fe=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return fe!==null?null:I(H,B,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case c:return K.key===fe?L(H,B,K,te):null;case h:return K.key===fe?F(H,B,K,te):null;case $:return fe=K._init,K=fe(K._payload),Q(H,B,K,te)}if(le(K)||W(K))return fe!==null?null:J(H,B,K,te,null);if(typeof K.then=="function")return Q(H,B,Td(K),te);if(K.$$typeof===x)return Q(H,B,jd(H,K),te);bd(H,K)}return null}function Z(H,B,K,te,fe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return H=H.get(K)||null,I(B,H,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case c:return H=H.get(te.key===null?K:te.key)||null,L(B,H,te,fe);case h:return H=H.get(te.key===null?K:te.key)||null,F(B,H,te,fe);case $:var Fe=te._init;return te=Fe(te._payload),Z(H,B,K,te,fe)}if(le(te)||W(te))return H=H.get(K)||null,J(B,H,te,fe,null);if(typeof te.then=="function")return Z(H,B,K,Td(te),fe);if(te.$$typeof===x)return Z(H,B,K,jd(B,te),fe);bd(B,te)}return null}function me(H,B,K,te){for(var fe=null,Fe=null,_e=B,Te=B=0,gn=null;_e!==null&&Te<K.length;Te++){_e.index>Te?(gn=_e,_e=null):gn=_e.sibling;var lt=Q(H,_e,K[Te],te);if(lt===null){_e===null&&(_e=gn);break}r&&_e&&lt.alternate===null&&s(H,_e),B=_(lt,B,Te),Fe===null?fe=lt:Fe.sibling=lt,Fe=lt,_e=gn}if(Te===K.length)return l(H,_e),ot&&ro(H,Te),fe;if(_e===null){for(;Te<K.length;Te++)_e=ie(H,K[Te],te),_e!==null&&(B=_(_e,B,Te),Fe===null?fe=_e:Fe.sibling=_e,Fe=_e);return ot&&ro(H,Te),fe}for(_e=u(_e);Te<K.length;Te++)gn=Z(_e,H,Te,K[Te],te),gn!==null&&(r&&gn.alternate!==null&&_e.delete(gn.key===null?Te:gn.key),B=_(gn,B,Te),Fe===null?fe=gn:Fe.sibling=gn,Fe=gn);return r&&_e.forEach(function(ca){return s(H,ca)}),ot&&ro(H,Te),fe}function Oe(H,B,K,te){if(K==null)throw Error(i(151));for(var fe=null,Fe=null,_e=B,Te=B=0,gn=null,lt=K.next();_e!==null&&!lt.done;Te++,lt=K.next()){_e.index>Te?(gn=_e,_e=null):gn=_e.sibling;var ca=Q(H,_e,lt.value,te);if(ca===null){_e===null&&(_e=gn);break}r&&_e&&ca.alternate===null&&s(H,_e),B=_(ca,B,Te),Fe===null?fe=ca:Fe.sibling=ca,Fe=ca,_e=gn}if(lt.done)return l(H,_e),ot&&ro(H,Te),fe;if(_e===null){for(;!lt.done;Te++,lt=K.next())lt=ie(H,lt.value,te),lt!==null&&(B=_(lt,B,Te),Fe===null?fe=lt:Fe.sibling=lt,Fe=lt);return ot&&ro(H,Te),fe}for(_e=u(_e);!lt.done;Te++,lt=K.next())lt=Z(_e,H,Te,lt.value,te),lt!==null&&(r&&lt.alternate!==null&&_e.delete(lt.key===null?Te:lt.key),B=_(lt,B,Te),Fe===null?fe=lt:Fe.sibling=lt,Fe=lt);return r&&_e.forEach(function(lN){return s(H,lN)}),ot&&ro(H,Te),fe}function Lt(H,B,K,te){if(typeof K=="object"&&K!==null&&K.type===p&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case c:e:{for(var fe=K.key;B!==null;){if(B.key===fe){if(fe=K.type,fe===p){if(B.tag===7){l(H,B.sibling),te=f(B,K.props.children),te.return=H,H=te;break e}}else if(B.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===$&&CE(fe)===B.type){l(H,B.sibling),te=f(B,K.props),Kc(te,K),te.return=H,H=te;break e}l(H,B);break}else s(H,B);B=B.sibling}K.type===p?(te=_o(K.props.children,H.mode,te,K.key),te.return=H,H=te):(te=Bd(K.type,K.key,K.props,null,H.mode,te),Kc(te,K),te.return=H,H=te)}return S(H);case h:e:{for(fe=K.key;B!==null;){if(B.key===fe)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){l(H,B.sibling),te=f(B,K.children||[]),te.return=H,H=te;break e}else{l(H,B);break}else s(H,B);B=B.sibling}te=j_(K,H.mode,te),te.return=H,H=te}return S(H);case $:return fe=K._init,K=fe(K._payload),Lt(H,B,K,te)}if(le(K))return me(H,B,K,te);if(W(K)){if(fe=W(K),typeof fe!="function")throw Error(i(150));return K=fe.call(K),Oe(H,B,K,te)}if(typeof K.then=="function")return Lt(H,B,Td(K),te);if(K.$$typeof===x)return Lt(H,B,jd(H,K),te);bd(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(l(H,B.sibling),te=f(B,K),te.return=H,H=te):(l(H,B),te=V_(K,H.mode,te),te.return=H,H=te),S(H)):l(H,B)}return function(H,B,K,te){try{Gc=0;var fe=Lt(H,B,K,te);return dl=null,fe}catch(_e){if(_e===Hc)throw _e;var Fe=xi(29,_e,null,H.mode);return Fe.lanes=te,Fe.return=H,Fe}finally{}}}var ao=AE(!0),RE=AE(!1),fl=Re(null),Sd=Re(0);function IE(r,s){r=Yr,we(Sd,r),we(fl,s),Yr=r|s.baseLanes}function Hm(){we(Sd,Yr),we(fl,fl.current)}function $m(){Yr=Sd.current,Ee(fl),Ee(Sd)}var Ai=Re(null),pr=null;function $s(r){var s=r.alternate;we(rn,rn.current&1),we(Ai,r),pr===null&&(s===null||fl.current!==null||s.memoizedState!==null)&&(pr=r)}function xE(r){if(r.tag===22){if(we(rn,rn.current),we(Ai,r),pr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(pr=r)}}else Gs()}function Gs(){we(rn,rn.current),we(Ai,Ai.current)}function zr(r){Ee(Ai),pr===r&&(pr=null),Ee(rn)}var rn=Re(0);function Cd(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Q2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},Y2=n.unstable_scheduleCallback,X2=n.unstable_NormalPriority,sn={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gm(){return{controller:new Q2,data:new Map,refCount:0}}function Wc(r){r.refCount--,r.refCount===0&&Y2(X2,function(){r.controller.abort()})}var Qc=null,Km=0,pl=0,ml=null;function Z2(r,s){if(Qc===null){var l=Qc=[];Km=0,pl=J_(),ml={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Km++,s.then(NE,NE),s}function NE(){if(--Km===0&&Qc!==null){ml!==null&&(ml.status="fulfilled");var r=Qc;Qc=null,pl=0,ml=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function J2(r,s){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<l.length;f++)(0,l[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}var kE=w.S;w.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Z2(r,s),kE!==null&&kE(r,s)};var oo=Re(null);function Wm(){var r=oo.current;return r!==null?r:Et.pooledCache}function Ad(r,s){s===null?we(oo,oo.current):we(oo,s.pool)}function DE(){var r=Wm();return r===null?null:{parent:sn._currentValue,pool:r}}var Ks=0,Ue=null,mt=null,Ht=null,Rd=!1,_l=!1,lo=!1,Id=0,Yc=0,gl=null,ex=0;function zt(){throw Error(i(321))}function Qm(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!li(r[l],s[l]))return!1;return!0}function Ym(r,s,l,u,f,_){return Ks=_,Ue=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,w.H=r===null||r.memoizedState===null?co:Ws,lo=!1,_=l(u,f),lo=!1,_l&&(_=ME(s,l,u,f)),OE(r),_}function OE(r){w.H=mr;var s=mt!==null&&mt.next!==null;if(Ks=0,Ht=mt=Ue=null,Rd=!1,Yc=0,gl=null,s)throw Error(i(300));r===null||mn||(r=r.dependencies,r!==null&&Vd(r)&&(mn=!0))}function ME(r,s,l,u){Ue=r;var f=0;do{if(_l&&(gl=null),Yc=0,_l=!1,25<=f)throw Error(i(301));if(f+=1,Ht=mt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}w.H=uo,_=s(l,u)}while(_l);return _}function tx(){var r=w.H,s=r.useState()[0];return s=typeof s.then=="function"?Xc(s):s,r=r.useState()[0],(mt!==null?mt.memoizedState:null)!==r&&(Ue.flags|=1024),s}function Xm(){var r=Id!==0;return Id=0,r}function Zm(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Jm(r){if(Rd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rd=!1}Ks=0,Ht=mt=Ue=null,_l=!1,Yc=Id=0,gl=null}function Zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ue.memoizedState=Ht=r:Ht=Ht.next=r,Ht}function $t(){if(mt===null){var r=Ue.alternate;r=r!==null?r.memoizedState:null}else r=mt.next;var s=Ht===null?Ue.memoizedState:Ht.next;if(s!==null)Ht=s,mt=r;else{if(r===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));mt=r,r={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Ht===null?Ue.memoizedState=Ht=r:Ht=Ht.next=r}return Ht}var xd;xd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Xc(r){var s=Yc;return Yc+=1,gl===null&&(gl=[]),r=bE(gl,r,s),s=Ue,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,w.H=s===null||s.memoizedState===null?co:Ws),r}function Nd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Xc(r);if(r.$$typeof===x)return Mn(r)}throw Error(i(438,String(r)))}function e_(r){var s=null,l=Ue.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=Ue.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=xd(),Ue.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),u=0;u<r;u++)l[u]=z;return s.index++,l}function Br(r,s){return typeof s=="function"?s(r):s}function kd(r){var s=$t();return t_(s,mt,r)}function t_(r,s,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var f=r.baseQueue,_=u.pending;if(_!==null){if(f!==null){var S=f.next;f.next=_.next,_.next=S}s.baseQueue=f=_,u.pending=null}if(_=r.baseState,f===null)r.memoizedState=_;else{s=f.next;var I=S=null,L=null,F=s,J=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?(tt&ie)===ie:(Ks&ie)===ie){var Q=F.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===pl&&(J=!0);else if((Ks&Q)===Q){F=F.next,Q===pl&&(J=!0);continue}else ie={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(I=L=ie,S=_):L=L.next=ie,Ue.lanes|=Q,ia|=Q;ie=F.action,lo&&l(_,ie),_=F.hasEagerState?F.eagerState:l(_,ie)}else Q={lane:ie,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(I=L=Q,S=_):L=L.next=Q,Ue.lanes|=ie,ia|=ie;F=F.next}while(F!==null&&F!==s);if(L===null?S=_:L.next=I,!li(_,r.memoizedState)&&(mn=!0,J&&(l=ml,l!==null)))throw l;r.memoizedState=_,r.baseState=S,r.baseQueue=L,u.lastRenderedState=_}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function n_(r){var s=$t(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,f=l.pending,_=s.memoizedState;if(f!==null){l.pending=null;var S=f=f.next;do _=r(_,S.action),S=S.next;while(S!==f);li(_,s.memoizedState)||(mn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,u]}function PE(r,s,l){var u=Ue,f=$t(),_=ot;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var S=!li((mt||f).memoizedState,l);if(S&&(f.memoizedState=l,mn=!0),f=f.queue,s_(jE.bind(null,u,f,r),[r]),f.getSnapshot!==s||S||Ht!==null&&Ht.memoizedState.tag&1){if(u.flags|=2048,yl(9,VE.bind(null,u,f,l,s),{destroy:void 0},null),Et===null)throw Error(i(349));_||(Ks&60)!==0||LE(u,s,l)}return l}function LE(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Ue.updateQueue,s===null?(s=xd(),Ue.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function VE(r,s,l,u){s.value=l,s.getSnapshot=u,UE(s)&&zE(r)}function jE(r,s,l){return l(function(){UE(s)&&zE(r)})}function UE(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!li(r,l)}catch{return!0}}function zE(r){var s=Hs(r,2);s!==null&&Gn(s,r,2)}function i_(r){var s=Zn();if(typeof r=="function"){var l=r;if(r=l(),lo){nr(!0);try{l()}finally{nr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:r},s}function BE(r,s,l,u){return r.baseState=l,t_(r,mt,typeof u=="function"?u:Br)}function nx(r,s,l,u,f){if(Md(r))throw Error(i(485));if(r=s.action,r!==null){var _={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};w.T!==null?l(!0):_.isTransition=!1,u(_),l=s.pending,l===null?(_.next=s.pending=_,FE(s,_)):(_.next=l.next,s.pending=l.next=_)}}function FE(r,s){var l=s.action,u=s.payload,f=r.state;if(s.isTransition){var _=w.T,S={};w.T=S;try{var I=l(f,u),L=w.S;L!==null&&L(S,I),qE(r,s,I)}catch(F){r_(r,s,F)}finally{w.T=_}}else try{_=l(f,u),qE(r,s,_)}catch(F){r_(r,s,F)}}function qE(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){HE(r,s,u)},function(u){return r_(r,s,u)}):HE(r,s,l)}function HE(r,s,l){s.status="fulfilled",s.value=l,$E(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,FE(r,l)))}function r_(r,s,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,$E(s),s=s.next;while(s!==u)}r.action=null}function $E(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function GE(r,s){return s}function KE(r,s){if(ot){var l=Et.formState;if(l!==null){e:{var u=Ue;if(ot){if(Rn){t:{for(var f=Rn,_=fr;f.nodeType!==8;){if(!_){f=null;break t}if(f=Fi(f.nextSibling),f===null){f=null;break t}}_=f.data,f=_==="F!"||_==="F"?f:null}if(f){Rn=Fi(f.nextSibling),u=f.data==="F!";break e}}so(u)}u=!1}u&&(s=l[0])}}return l=Zn(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GE,lastRenderedState:s},l.queue=u,l=h1.bind(null,Ue,u),u.dispatch=l,u=i_(!1),_=u_.bind(null,Ue,!1,u.queue),u=Zn(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,l=nx.bind(null,Ue,f,_,l),f.dispatch=l,u.memoizedState=r,[s,l,!1]}function WE(r){var s=$t();return QE(s,mt,r)}function QE(r,s,l){s=t_(r,s,GE)[0],r=kd(Br)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Xc(s):s;var u=$t(),f=u.queue,_=f.dispatch;return l!==u.memoizedState&&(Ue.flags|=2048,yl(9,ix.bind(null,f,l),{destroy:void 0},null)),[s,_,r]}function ix(r,s){r.action=s}function YE(r){var s=$t(),l=mt;if(l!==null)return QE(s,l,r);$t(),s=s.memoizedState,l=$t();var u=l.queue.dispatch;return l.memoizedState=r,[s,u,!1]}function yl(r,s,l,u){return r={tag:r,create:s,inst:l,deps:u,next:null},s=Ue.updateQueue,s===null&&(s=xd(),Ue.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,s.lastEffect=r),r}function XE(){return $t().memoizedState}function Dd(r,s,l,u){var f=Zn();Ue.flags|=r,f.memoizedState=yl(1|s,l,{destroy:void 0},u===void 0?null:u)}function Od(r,s,l,u){var f=$t();u=u===void 0?null:u;var _=f.memoizedState.inst;mt!==null&&u!==null&&Qm(u,mt.memoizedState.deps)?f.memoizedState=yl(s,l,_,u):(Ue.flags|=r,f.memoizedState=yl(1|s,l,_,u))}function ZE(r,s){Dd(8390656,8,r,s)}function s_(r,s){Od(2048,8,r,s)}function JE(r,s){return Od(4,2,r,s)}function e1(r,s){return Od(4,4,r,s)}function t1(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function n1(r,s,l){l=l!=null?l.concat([r]):null,Od(4,4,t1.bind(null,s,r),l)}function a_(){}function i1(r,s){var l=$t();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Qm(s,u[1])?u[0]:(l.memoizedState=[r,s],r)}function r1(r,s){var l=$t();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Qm(s,u[1]))return u[0];if(u=r(),lo){nr(!0);try{r()}finally{nr(!1)}}return l.memoizedState=[u,s],u}function o_(r,s,l){return l===void 0||(Ks&1073741824)!==0?r.memoizedState=s:(r.memoizedState=l,r=aw(),Ue.lanes|=r,ia|=r,l)}function s1(r,s,l,u){return li(l,s)?l:fl.current!==null?(r=o_(r,l,u),li(r,s)||(mn=!0),r):(Ks&42)===0?(mn=!0,r.memoizedState=l):(r=aw(),Ue.lanes|=r,ia|=r,s)}function a1(r,s,l,u,f){var _=ge.p;ge.p=_!==0&&8>_?_:8;var S=w.T,I={};w.T=I,u_(r,!1,s,l);try{var L=f(),F=w.S;if(F!==null&&F(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var J=J2(L,u);Zc(r,s,J,di(r))}else Zc(r,s,u,di(r))}catch(ie){Zc(r,s,{then:function(){},status:"rejected",reason:ie},di())}finally{ge.p=_,w.T=S}}function rx(){}function l_(r,s,l,u){if(r.tag!==5)throw Error(i(476));var f=o1(r).queue;a1(r,f,s,je,l===null?rx:function(){return l1(r),l(u)})}function o1(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:je,baseState:je,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:je},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function l1(r){var s=o1(r).next.queue;Zc(r,s,{},di())}function c_(){return Mn(yu)}function c1(){return $t().memoizedState}function u1(){return $t().memoizedState}function sx(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=di();r=Xs(l);var u=Zs(s,r,l);u!==null&&(Gn(u,s,l),tu(u,s,l)),s={cache:Gm()},r.payload=s;return}s=s.return}}function ax(r,s,l){var u=di();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Md(r)?d1(s,l):(l=Um(r,s,l,u),l!==null&&(Gn(l,r,u),f1(l,s,u)))}function h1(r,s,l){var u=di();Zc(r,s,l,u)}function Zc(r,s,l,u){var f={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Md(r))d1(s,f);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,I=_(S,l);if(f.hasEagerState=!0,f.eagerState=I,li(I,S))return gd(r,s,f,0),Et===null&&_d(),!1}catch{}finally{}if(l=Um(r,s,f,u),l!==null)return Gn(l,r,u),f1(l,s,u),!0}return!1}function u_(r,s,l,u){if(u={lane:2,revertLane:J_(),action:u,hasEagerState:!1,eagerState:null,next:null},Md(r)){if(s)throw Error(i(479))}else s=Um(r,l,u,2),s!==null&&Gn(s,r,2)}function Md(r){var s=r.alternate;return r===Ue||s!==null&&s===Ue}function d1(r,s){_l=Rd=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function f1(r,s,l){if((l&4194176)!==0){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,Ms(r,l)}}var mr={readContext:Mn,use:Nd,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt};mr.useCacheRefresh=zt,mr.useMemoCache=zt,mr.useHostTransitionStatus=zt,mr.useFormState=zt,mr.useActionState=zt,mr.useOptimistic=zt;var co={readContext:Mn,use:Nd,useCallback:function(r,s){return Zn().memoizedState=[r,s===void 0?null:s],r},useContext:Mn,useEffect:ZE,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,Dd(4194308,4,t1.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Dd(4194308,4,r,s)},useInsertionEffect:function(r,s){Dd(4,2,r,s)},useMemo:function(r,s){var l=Zn();s=s===void 0?null:s;var u=r();if(lo){nr(!0);try{r()}finally{nr(!1)}}return l.memoizedState=[u,s],u},useReducer:function(r,s,l){var u=Zn();if(l!==void 0){var f=l(s);if(lo){nr(!0);try{l(s)}finally{nr(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=ax.bind(null,Ue,r),[u.memoizedState,r]},useRef:function(r){var s=Zn();return r={current:r},s.memoizedState=r},useState:function(r){r=i_(r);var s=r.queue,l=h1.bind(null,Ue,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:a_,useDeferredValue:function(r,s){var l=Zn();return o_(l,r,s)},useTransition:function(){var r=i_(!1);return r=a1.bind(null,Ue,r.queue,!0,!1),Zn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var u=Ue,f=Zn();if(ot){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Et===null)throw Error(i(349));(tt&60)!==0||LE(u,s,l)}f.memoizedState=l;var _={value:l,getSnapshot:s};return f.queue=_,ZE(jE.bind(null,u,_,r),[r]),u.flags|=2048,yl(9,VE.bind(null,u,_,l,s),{destroy:void 0},null),l},useId:function(){var r=Zn(),s=Et.identifierPrefix;if(ot){var l=Ur,u=jr;l=(u&~(1<<32-Fn(u)-1)).toString(32)+l,s=":"+s+"R"+l,l=Id++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=ex++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return Zn().memoizedState=sx.bind(null,Ue)}};co.useMemoCache=e_,co.useHostTransitionStatus=c_,co.useFormState=KE,co.useActionState=KE,co.useOptimistic=function(r){var s=Zn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=u_.bind(null,Ue,!0,l),l.dispatch=s,[r,s]};var Ws={readContext:Mn,use:Nd,useCallback:i1,useContext:Mn,useEffect:s_,useImperativeHandle:n1,useInsertionEffect:JE,useLayoutEffect:e1,useMemo:r1,useReducer:kd,useRef:XE,useState:function(){return kd(Br)},useDebugValue:a_,useDeferredValue:function(r,s){var l=$t();return s1(l,mt.memoizedState,r,s)},useTransition:function(){var r=kd(Br)[0],s=$t().memoizedState;return[typeof r=="boolean"?r:Xc(r),s]},useSyncExternalStore:PE,useId:c1};Ws.useCacheRefresh=u1,Ws.useMemoCache=e_,Ws.useHostTransitionStatus=c_,Ws.useFormState=WE,Ws.useActionState=WE,Ws.useOptimistic=function(r,s){var l=$t();return BE(l,mt,r,s)};var uo={readContext:Mn,use:Nd,useCallback:i1,useContext:Mn,useEffect:s_,useImperativeHandle:n1,useInsertionEffect:JE,useLayoutEffect:e1,useMemo:r1,useReducer:n_,useRef:XE,useState:function(){return n_(Br)},useDebugValue:a_,useDeferredValue:function(r,s){var l=$t();return mt===null?o_(l,r,s):s1(l,mt.memoizedState,r,s)},useTransition:function(){var r=n_(Br)[0],s=$t().memoizedState;return[typeof r=="boolean"?r:Xc(r),s]},useSyncExternalStore:PE,useId:c1};uo.useCacheRefresh=u1,uo.useMemoCache=e_,uo.useHostTransitionStatus=c_,uo.useFormState=YE,uo.useActionState=YE,uo.useOptimistic=function(r,s){var l=$t();return mt!==null?BE(l,mt,r,s):(l.baseState=r,[r,l.queue.dispatch])};function h_(r,s,l,u){s=r.memoizedState,l=l(u,s),l=l==null?s:A({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var d_={isMounted:function(r){return(r=r._reactInternals)?ce(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var u=di(),f=Xs(u);f.payload=s,l!=null&&(f.callback=l),s=Zs(r,f,u),s!==null&&(Gn(s,r,u),tu(s,r,u))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var u=di(),f=Xs(u);f.tag=1,f.payload=s,l!=null&&(f.callback=l),s=Zs(r,f,u),s!==null&&(Gn(s,r,u),tu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=di(),u=Xs(l);u.tag=2,s!=null&&(u.callback=s),s=Zs(r,u,l),s!==null&&(Gn(s,r,l),tu(s,r,l))}};function p1(r,s,l,u,f,_,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,_,S):s.prototype&&s.prototype.isPureReactComponent?!Uc(l,u)||!Uc(f,_):!0}function m1(r,s,l,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==r&&d_.enqueueReplaceState(s,s.state,null)}function ho(r,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(r=r.defaultProps){l===s&&(l=A({},l));for(var f in r)l[f]===void 0&&(l[f]=r[f])}return l}var Pd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function _1(r){Pd(r)}function g1(r){console.error(r)}function y1(r){Pd(r)}function Ld(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function v1(r,s,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function f_(r,s,l){return l=Xs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ld(r,s)},l}function E1(r){return r=Xs(r),r.tag=3,r}function w1(r,s,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var _=u.value;r.payload=function(){return f(_)},r.callback=function(){v1(s,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){v1(s,l,u),typeof f!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function ox(r,s,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&eu(s,l,f,!0),l=Ai.current,l!==null){switch(l.tag){case 13:return pr===null?W_():l.alternate===null&&Pt===0&&(Pt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===qm?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),Y_(r,u,f)),!1;case 22:return l.flags|=65536,u===qm?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),Y_(r,u,f)),!1}throw Error(i(435,l.tag))}return Y_(r,u,f),W_(),!1}if(ot)return s=Ai.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Fm&&(r=Error(i(422),{cause:u}),qc(bi(r,l)))):(u!==Fm&&(s=Error(i(423),{cause:u}),qc(bi(s,l))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=bi(u,l),f=f_(r.stateNode,u,f),I_(r,f),Pt!==4&&(Pt=2)),!1;var _=Error(i(520),{cause:u});if(_=bi(_,l),cu===null?cu=[_]:cu.push(_),Pt!==4&&(Pt=2),s===null)return!0;u=bi(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=f&-f,l.lanes|=r,r=f_(l.stateNode,u,r),I_(l,r),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ra===null||!ra.has(_))))return l.flags|=65536,f&=-f,l.lanes|=f,f=E1(f),w1(f,r,l,u),I_(l,f),!1}l=l.return}while(l!==null);return!1}var T1=Error(i(461)),mn=!1;function In(r,s,l,u){s.child=r===null?RE(s,null,l,u):ao(s,r.child,l,u)}function b1(r,s,l,u,f){l=l.render;var _=s.ref;if("ref"in u){var S={};for(var I in u)I!=="ref"&&(S[I]=u[I])}else S=u;return po(s),u=Ym(r,s,l,S,_,f),I=Xm(),r!==null&&!mn?(Zm(r,s,f),Fr(r,s,f)):(ot&&I&&zm(s),s.flags|=1,In(r,s,u,f),s.child)}function S1(r,s,l,u,f){if(r===null){var _=l.type;return typeof _=="function"&&!L_(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,C1(r,s,_,u,f)):(r=Bd(l.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(_=r.child,!T_(r,f)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:Uc,l(S,u)&&r.ref===s.ref)return Fr(r,s,f)}return s.flags|=1,r=na(_,u),r.ref=s.ref,r.return=s,s.child=r}function C1(r,s,l,u,f){if(r!==null){var _=r.memoizedProps;if(Uc(_,u)&&r.ref===s.ref)if(mn=!1,s.pendingProps=u=_,T_(r,f))(r.flags&131072)!==0&&(mn=!0);else return s.lanes=r.lanes,Fr(r,s,f)}return p_(r,s,l,u,f)}function A1(r,s,l){var u=s.pendingProps,f=u.children,_=(s.stateNode._pendingVisibility&2)!==0,S=r!==null?r.memoizedState:null;if(Jc(r,s),u.mode==="hidden"||_){if((s.flags&128)!==0){if(u=S!==null?S.baseLanes|l:l,r!==null){for(f=s.child=r.child,_=0;f!==null;)_=_|f.lanes|f.childLanes,f=f.sibling;s.childLanes=_&~u}else s.childLanes=0,s.child=null;return R1(r,s,u,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ad(s,S!==null?S.cachePool:null),S!==null?IE(s,S):Hm(),xE(s);else return s.lanes=s.childLanes=536870912,R1(r,s,S!==null?S.baseLanes|l:l,l)}else S!==null?(Ad(s,S.cachePool),IE(s,S),Gs(),s.memoizedState=null):(r!==null&&Ad(s,null),Hm(),Gs());return In(r,s,f,l),s.child}function R1(r,s,l,u){var f=Wm();return f=f===null?null:{parent:sn._currentValue,pool:f},s.memoizedState={baseLanes:l,cachePool:f},r!==null&&Ad(s,null),Hm(),xE(s),r!==null&&eu(r,s,u,!0),null}function Jc(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=2097664)}}function p_(r,s,l,u,f){return po(s),l=Ym(r,s,l,u,void 0,f),u=Xm(),r!==null&&!mn?(Zm(r,s,f),Fr(r,s,f)):(ot&&u&&zm(s),s.flags|=1,In(r,s,l,f),s.child)}function I1(r,s,l,u,f,_){return po(s),s.updateQueue=null,l=ME(s,u,l,f),OE(r),u=Xm(),r!==null&&!mn?(Zm(r,s,_),Fr(r,s,_)):(ot&&u&&zm(s),s.flags|=1,In(r,s,l,_),s.child)}function x1(r,s,l,u,f){if(po(s),s.stateNode===null){var _=cl,S=l.contextType;typeof S=="object"&&S!==null&&(_=Mn(S)),_=new l(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=d_,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},A_(s),S=l.contextType,_.context=typeof S=="object"&&S!==null?Mn(S):cl,_.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(h_(s,l,S,u),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&d_.enqueueReplaceState(_,_.state,null),iu(s,u,_,f),nu(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){_=s.stateNode;var I=s.memoizedProps,L=ho(l,I);_.props=L;var F=_.context,J=l.contextType;S=cl,typeof J=="object"&&J!==null&&(S=Mn(J));var ie=l.getDerivedStateFromProps;J=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||F!==S)&&m1(s,_,u,S),Ys=!1;var Q=s.memoizedState;_.state=Q,iu(s,u,_,f),nu(),F=s.memoizedState,I||Q!==F||Ys?(typeof ie=="function"&&(h_(s,l,ie,u),F=s.memoizedState),(L=Ys||p1(s,l,L,u,Q,F,S))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=F),_.props=u,_.state=F,_.context=S,u=L):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,R_(r,s),S=s.memoizedProps,J=ho(l,S),_.props=J,ie=s.pendingProps,Q=_.context,F=l.contextType,L=cl,typeof F=="object"&&F!==null&&(L=Mn(F)),I=l.getDerivedStateFromProps,(F=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==ie||Q!==L)&&m1(s,_,u,L),Ys=!1,Q=s.memoizedState,_.state=Q,iu(s,u,_,f),nu();var Z=s.memoizedState;S!==ie||Q!==Z||Ys||r!==null&&r.dependencies!==null&&Vd(r.dependencies)?(typeof I=="function"&&(h_(s,l,I,u),Z=s.memoizedState),(J=Ys||p1(s,l,J,u,Q,Z,L)||r!==null&&r.dependencies!==null&&Vd(r.dependencies))?(F||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Z,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Z,L)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Z),_.props=u,_.state=Z,_.context=L,u=J):(typeof _.componentDidUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),u=!1)}return _=u,Jc(r,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,r!==null&&u?(s.child=ao(s,r.child,null,f),s.child=ao(s,null,l,f)):In(r,s,l,f),s.memoizedState=_.state,r=s.child):r=Fr(r,s,f),r}function N1(r,s,l,u){return Fc(),s.flags|=256,In(r,s,l,u),s.child}var m_={dehydrated:null,treeContext:null,retryLane:0};function __(r){return{baseLanes:r,cachePool:DE()}}function g_(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Ni),r}function k1(r,s,l){var u=s.pendingProps,f=!1,_=(s.flags&128)!==0,S;if((S=_)||(S=r!==null&&r.memoizedState===null?!1:(rn.current&2)!==0),S&&(f=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(ot){if(f?$s(s):Gs(),ot){var I=Rn,L;if(L=I){e:{for(L=I,I=fr;L.nodeType!==8;){if(!I){I=null;break e}if(L=Fi(L.nextSibling),L===null){I=null;break e}}I=L}I!==null?(s.memoizedState={dehydrated:I,treeContext:io!==null?{id:jr,overflow:Ur}:null,retryLane:536870912},L=xi(18,null,null,0),L.stateNode=I,L.return=s,s.child=L,$n=s,Rn=null,L=!0):L=!1}L||so(s)}if(I=s.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return I.data==="$!"?s.lanes=16:s.lanes=536870912,null;zr(s)}return I=u.children,u=u.fallback,f?(Gs(),f=s.mode,I=v_({mode:"hidden",children:I},f),u=_o(u,f,l,null),I.return=s,u.return=s,I.sibling=u,s.child=I,f=s.child,f.memoizedState=__(l),f.childLanes=g_(r,S,l),s.memoizedState=m_,u):($s(s),y_(s,I))}if(L=r.memoizedState,L!==null&&(I=L.dehydrated,I!==null)){if(_)s.flags&256?($s(s),s.flags&=-257,s=E_(r,s,l)):s.memoizedState!==null?(Gs(),s.child=r.child,s.flags|=128,s=null):(Gs(),f=u.fallback,I=s.mode,u=v_({mode:"visible",children:u.children},I),f=_o(f,I,l,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,ao(s,r.child,null,l),u=s.child,u.memoizedState=__(l),u.childLanes=g_(r,S,l),s.memoizedState=m_,s=f);else if($s(s),I.data==="$!"){if(S=I.nextSibling&&I.nextSibling.dataset,S)var F=S.dgst;S=F,u=Error(i(419)),u.stack="",u.digest=S,qc({value:u,source:null,stack:null}),s=E_(r,s,l)}else if(mn||eu(r,s,l,!1),S=(l&r.childLanes)!==0,mn||S){if(S=Et,S!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(S.suspendedLanes|l))!==0?0:u,u!==0&&u!==L.retryLane)throw L.retryLane=u,Hs(r,u),Gn(S,r,u),T1}I.data==="$?"||W_(),s=E_(r,s,l)}else I.data==="$?"?(s.flags|=128,s.child=r.child,s=Tx.bind(null,r),I._reactRetry=s,s=null):(r=L.treeContext,Rn=Fi(I.nextSibling),$n=s,ot=!0,zi=null,fr=!1,r!==null&&(Si[Ci++]=jr,Si[Ci++]=Ur,Si[Ci++]=io,jr=r.id,Ur=r.overflow,io=s),s=y_(s,u.children),s.flags|=4096);return s}return f?(Gs(),f=u.fallback,I=s.mode,L=r.child,F=L.sibling,u=na(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&31457280,F!==null?f=na(F,f):(f=_o(f,I,l,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,I=r.child.memoizedState,I===null?I=__(l):(L=I.cachePool,L!==null?(F=sn._currentValue,L=L.parent!==F?{parent:F,pool:F}:L):L=DE(),I={baseLanes:I.baseLanes|l,cachePool:L}),f.memoizedState=I,f.childLanes=g_(r,S,l),s.memoizedState=m_,u):($s(s),l=r.child,r=l.sibling,l=na(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=l,s.memoizedState=null,l)}function y_(r,s){return s=v_({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function v_(r,s){return iw(r,s,0,null)}function E_(r,s,l){return ao(s,r.child,null,l),r=y_(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function D1(r,s,l){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),S_(r.return,s,l)}function w_(r,s,l,u,f){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=l,_.tailMode=f)}function O1(r,s,l){var u=s.pendingProps,f=u.revealOrder,_=u.tail;if(In(r,s,u.children,l),u=rn.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&D1(r,l,s);else if(r.tag===19)D1(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(we(rn,u),f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Cd(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),w_(s,!1,f,l,_);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Cd(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}w_(s,!0,l,null,_);break;case"together":w_(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Fr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),ia|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(eu(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=na(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=na(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function T_(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Vd(r)))}function lx(r,s,l){switch(s.tag){case 3:Ye(s,s.stateNode.containerInfo),Qs(s,sn,r.memoizedState.cache),Fc();break;case 27:case 5:Cn(s);break;case 4:Ye(s,s.stateNode.containerInfo);break;case 10:Qs(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?($s(s),s.flags|=128,null):(l&s.child.childLanes)!==0?k1(r,s,l):($s(s),r=Fr(r,s,l),r!==null?r.sibling:null);$s(s);break;case 19:var f=(r.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(eu(r,s,l,!1),u=(l&s.childLanes)!==0),f){if(u)return O1(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),we(rn,rn.current),u)break;return null;case 22:case 23:return s.lanes=0,A1(r,s,l);case 24:Qs(s,sn,r.memoizedState.cache)}return Fr(r,s,l)}function M1(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)mn=!0;else{if(!T_(r,l)&&(s.flags&128)===0)return mn=!1,lx(r,s,l);mn=(r.flags&131072)!==0}else mn=!1,ot&&(s.flags&1048576)!==0&&yE(s,Ed,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")L_(u)?(r=ho(u,r),s.tag=1,s=x1(null,s,u,r,l)):(s.tag=0,s=p_(null,s,u,r,l));else{if(u!=null){if(f=u.$$typeof,f===O){s.tag=11,s=b1(null,s,u,r,l);break e}else if(f===U){s.tag=14,s=S1(null,s,u,r,l);break e}}throw s=T(u)||u,Error(i(306,s,""))}}return s;case 0:return p_(r,s,s.type,s.pendingProps,l);case 1:return u=s.type,f=ho(u,s.pendingProps),x1(r,s,u,f,l);case 3:e:{if(Ye(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var _=s.pendingProps;f=s.memoizedState,u=f.element,R_(r,s),iu(s,_,null,l);var S=s.memoizedState;if(_=S.cache,Qs(s,sn,_),_!==f.cache&&C_(s,[sn],l,!0),nu(),_=S.element,f.isDehydrated)if(f={element:_,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=N1(r,s,_,l);break e}else if(_!==u){u=bi(Error(i(424)),s),qc(u),s=N1(r,s,_,l);break e}else for(Rn=Fi(s.stateNode.containerInfo.firstChild),$n=s,ot=!0,zi=null,fr=!0,l=RE(s,null,_,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Fc(),_===u){s=Fr(r,s,l);break e}In(r,s,_,l)}s=s.child}return s;case 26:return Jc(r,s),r===null?(l=Vw(s.type,null,s.pendingProps,null))?s.memoizedState=l:ot||(l=s.type,r=s.pendingProps,u=Jd(st.current).createElement(l),u[dn]=s,u[en]=r,xn(u,l,r),xt(u),s.stateNode=u):s.memoizedState=Vw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Cn(s),r===null&&ot&&(u=s.stateNode=Mw(s.type,s.pendingProps,st.current),$n=s,fr=!0,Rn=Fi(u.firstChild)),u=s.pendingProps.children,r!==null||ot?In(r,s,u,l):s.child=ao(s,null,u,l),Jc(r,s),s.child;case 5:return r===null&&ot&&((f=u=Rn)&&(u=jx(u,s.type,s.pendingProps,fr),u!==null?(s.stateNode=u,$n=s,Rn=Fi(u.firstChild),fr=!1,f=!0):f=!1),f||so(s)),Cn(s),f=s.type,_=s.pendingProps,S=r!==null?r.memoizedProps:null,u=_.children,lg(f,_)?u=null:S!==null&&lg(f,S)&&(s.flags|=32),s.memoizedState!==null&&(f=Ym(r,s,tx,null,null,l),yu._currentValue=f),Jc(r,s),In(r,s,u,l),s.child;case 6:return r===null&&ot&&((r=l=Rn)&&(l=Ux(l,s.pendingProps,fr),l!==null?(s.stateNode=l,$n=s,Rn=null,r=!0):r=!1),r||so(s)),null;case 13:return k1(r,s,l);case 4:return Ye(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ao(s,null,u,l):In(r,s,u,l),s.child;case 11:return b1(r,s,s.type,s.pendingProps,l);case 7:return In(r,s,s.pendingProps,l),s.child;case 8:return In(r,s,s.pendingProps.children,l),s.child;case 12:return In(r,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,Qs(s,s.type,u.value),In(r,s,u.children,l),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,po(s),f=Mn(f),u=u(f),s.flags|=1,In(r,s,u,l),s.child;case 14:return S1(r,s,s.type,s.pendingProps,l);case 15:return C1(r,s,s.type,s.pendingProps,l);case 19:return O1(r,s,l);case 22:return A1(r,s,l);case 24:return po(s),u=Mn(sn),r===null?(f=Wm(),f===null&&(f=Et,_=Gm(),f.pooledCache=_,_.refCount++,_!==null&&(f.pooledCacheLanes|=l),f=_),s.memoizedState={parent:u,cache:f},A_(s),Qs(s,sn,f)):((r.lanes&l)!==0&&(R_(r,s),iu(s,null,null,l),nu()),f=r.memoizedState,_=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Qs(s,sn,u)):(u=_.cache,Qs(s,sn,u),u!==f.cache&&C_(s,[sn],l,!0))),In(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var b_=Re(null),fo=null,qr=null;function Qs(r,s,l){we(b_,s._currentValue),s._currentValue=l}function Hr(r){r._currentValue=b_.current,Ee(b_)}function S_(r,s,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===l)break;r=r.return}}function C_(r,s,l,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var _=f.dependencies;if(_!==null){var S=f.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=f;for(var L=0;L<s.length;L++)if(I.context===s[L]){_.lanes|=l,I=_.alternate,I!==null&&(I.lanes|=l),S_(_.return,l,r),u||(S=null);break e}_=I.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=l,_=S.alternate,_!==null&&(_.lanes|=l),S_(S,l,r),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===r){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function eu(r,s,l,u){r=null;for(var f=s,_=!1;f!==null;){if(!_){if((f.flags&524288)!==0)_=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var I=f.type;li(f.pendingProps.value,S.value)||(r!==null?r.push(I):r=[I])}}else if(f===Ke.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(yu):r=[yu])}f=f.return}r!==null&&C_(s,r,l,u),s.flags|=262144}function Vd(r){for(r=r.firstContext;r!==null;){if(!li(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function po(r){fo=r,qr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Mn(r){return P1(fo,r)}function jd(r,s){return fo===null&&po(r),P1(r,s)}function P1(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},qr===null){if(r===null)throw Error(i(308));qr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else qr=qr.next=s;return l}var Ys=!1;function A_(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R_(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Xs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zs(r,s,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(kt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=yd(r),_E(r,null,l),s}return gd(r,u,s,l),yd(r)}function tu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194176)!==0)){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,Ms(r,l)}}function I_(r,s){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?f=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?f=_=s:_=_.next=s}else f=_=s;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var x_=!1;function nu(){if(x_){var r=ml;if(r!==null)throw r}}function iu(r,s,l,u){x_=!1;var f=r.updateQueue;Ys=!1;var _=f.firstBaseUpdate,S=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var L=I,F=L.next;L.next=null,S===null?_=F:S.next=F,S=L;var J=r.alternate;J!==null&&(J=J.updateQueue,I=J.lastBaseUpdate,I!==S&&(I===null?J.firstBaseUpdate=F:I.next=F,J.lastBaseUpdate=L))}if(_!==null){var ie=f.baseState;S=0,J=F=L=null,I=_;do{var Q=I.lane&-536870913,Z=Q!==I.lane;if(Z?(tt&Q)===Q:(u&Q)===Q){Q!==0&&Q===pl&&(x_=!0),J!==null&&(J=J.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=r,Oe=I;Q=s;var Lt=l;switch(Oe.tag){case 1:if(me=Oe.payload,typeof me=="function"){ie=me.call(Lt,ie,Q);break e}ie=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Oe.payload,Q=typeof me=="function"?me.call(Lt,ie,Q):me,Q==null)break e;ie=A({},ie,Q);break e;case 2:Ys=!0}}Q=I.callback,Q!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},J===null?(F=J=Z,L=ie):J=J.next=Z,S|=Q;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);J===null&&(L=ie),f.baseState=L,f.firstBaseUpdate=F,f.lastBaseUpdate=J,_===null&&(f.shared.lanes=0),ia|=S,r.lanes=S,r.memoizedState=ie}}function L1(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function V1(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)L1(l[r],s)}function ru(r,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&r)===r){u=void 0;var _=l.create,S=l.inst;u=_(),S.destroy=u}l=l.next}while(l!==f)}}catch(I){gt(s,s.return,I)}}function Js(r,s,l){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var _=f.next;u=_;do{if((u.tag&r)===r){var S=u.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,f=s;var L=l;try{I()}catch(F){gt(f,L,F)}}}u=u.next}while(u!==_)}}catch(F){gt(s,s.return,F)}}function j1(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{V1(s,l)}catch(u){gt(r,r.return,u)}}}function U1(r,s,l){l.props=ho(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){gt(r,s,u)}}function mo(r,s){try{var l=r.ref;if(l!==null){var u=r.stateNode;switch(r.tag){case 26:case 27:case 5:var f=u;break;default:f=u}typeof l=="function"?r.refCleanup=l(f):l.current=f}}catch(_){gt(r,s,_)}}function ci(r,s){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){gt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){gt(r,s,f)}else l.current=null}function z1(r){var s=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(f){gt(r,r.return,f)}}function B1(r,s,l){try{var u=r.stateNode;Ox(u,r.type,l,s),u[en]=s}catch(f){gt(r,r.return,f)}}function F1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function N_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||F1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function k_(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Zd));else if(u!==4&&u!==27&&(r=r.child,r!==null))for(k_(r,s,l),r=r.sibling;r!==null;)k_(r,s,l),r=r.sibling}function Ud(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(u!==4&&u!==27&&(r=r.child,r!==null))for(Ud(r,s,l),r=r.sibling;r!==null;)Ud(r,s,l),r=r.sibling}var $r=!1,Mt=!1,D_=!1,q1=typeof WeakSet=="function"?WeakSet:Set,_n=null,H1=!1;function cx(r,s){if(r=r.containerInfo,ag=af,r=oE(r),Mm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var S=0,I=-1,L=-1,F=0,J=0,ie=r,Q=null;t:for(;;){for(var Z;ie!==l||f!==0&&ie.nodeType!==3||(I=S+f),ie!==_||u!==0&&ie.nodeType!==3||(L=S+u),ie.nodeType===3&&(S+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)Q=ie,ie=Z;for(;;){if(ie===r)break t;if(Q===l&&++F===f&&(I=S),Q===_&&++J===u&&(L=S),(Z=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=Z}l=I===-1||L===-1?null:{start:I,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(og={focusedElem:r,selectionRange:l},af=!1,_n=s;_n!==null;)if(s=_n,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,_n=r;else for(;_n!==null;){switch(s=_n,_=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,l=s,f=_.memoizedProps,_=_.memoizedState,u=l.stateNode;try{var me=ho(l.type,f,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(me,_),u.__reactInternalSnapshotBeforeUpdate=r}catch(Oe){gt(l,l.return,Oe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)hg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":hg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,_n=r;break}_n=s.return}return me=H1,H1=!1,me}function $1(r,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Kr(r,l),u&4&&ru(5,l);break;case 1:if(Kr(r,l),u&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(I){gt(l,l.return,I)}else{var f=ho(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(I){gt(l,l.return,I)}}u&64&&j1(l),u&512&&mo(l,l.return);break;case 3:if(Kr(r,l),u&64&&(u=l.updateQueue,u!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{V1(u,r)}catch(I){gt(l,l.return,I)}}break;case 26:Kr(r,l),u&512&&mo(l,l.return);break;case 27:case 5:Kr(r,l),s===null&&u&4&&z1(l),u&512&&mo(l,l.return);break;case 12:Kr(r,l);break;case 13:Kr(r,l),u&4&&W1(r,l);break;case 22:if(f=l.memoizedState!==null||$r,!f){s=s!==null&&s.memoizedState!==null||Mt;var _=$r,S=Mt;$r=f,(Mt=s)&&!S?ea(r,l,(l.subtreeFlags&8772)!==0):Kr(r,l),$r=_,Mt=S}u&512&&(l.memoizedProps.mode==="manual"?mo(l,l.return):ci(l,l.return));break;default:Kr(r,l)}}function G1(r){var s=r.alternate;s!==null&&(r.alternate=null,G1(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ha(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Gt=null,ui=!1;function Gr(r,s,l){for(l=l.child;l!==null;)K1(r,s,l),l=l.sibling}function K1(r,s,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Yn,l)}catch{}switch(l.tag){case 26:Mt||ci(l,s),Gr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||ci(l,s);var u=Gt,f=ui;for(Gt=l.stateNode,Gr(r,s,l),l=l.stateNode,s=l.attributes;s.length;)l.removeAttributeNode(s[0]);Ha(l),Gt=u,ui=f;break;case 5:Mt||ci(l,s);case 6:f=Gt;var _=ui;if(Gt=null,Gr(r,s,l),Gt=f,ui=_,Gt!==null)if(ui)try{r=Gt,u=l.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)}catch(S){gt(l,s,S)}else try{Gt.removeChild(l.stateNode)}catch(S){gt(l,s,S)}break;case 18:Gt!==null&&(ui?(s=Gt,l=l.stateNode,s.nodeType===8?ug(s.parentNode,l):s.nodeType===1&&ug(s,l),Tu(s)):ug(Gt,l.stateNode));break;case 4:u=Gt,f=ui,Gt=l.stateNode.containerInfo,ui=!0,Gr(r,s,l),Gt=u,ui=f;break;case 0:case 11:case 14:case 15:Mt||Js(2,l,s),Mt||Js(4,l,s),Gr(r,s,l);break;case 1:Mt||(ci(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&U1(l,s,u)),Gr(r,s,l);break;case 21:Gr(r,s,l);break;case 22:Mt||ci(l,s),Mt=(u=Mt)||l.memoizedState!==null,Gr(r,s,l),Mt=u;break;default:Gr(r,s,l)}}function W1(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Tu(r)}catch(l){gt(s,s.return,l)}}function ux(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new q1),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new q1),s;default:throw Error(i(435,r.tag))}}function O_(r,s){var l=ux(r);s.forEach(function(u){var f=bx.bind(null,r,u);l.has(u)||(l.add(u),u.then(f,f))})}function Ri(r,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],_=r,S=s,I=S;e:for(;I!==null;){switch(I.tag){case 27:case 5:Gt=I.stateNode,ui=!1;break e;case 3:Gt=I.stateNode.containerInfo,ui=!0;break e;case 4:Gt=I.stateNode.containerInfo,ui=!0;break e}I=I.return}if(Gt===null)throw Error(i(160));K1(_,S,f),Gt=null,ui=!1,_=f.alternate,_!==null&&(_.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Q1(s,r),s=s.sibling}var Bi=null;function Q1(r,s){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ri(s,r),Ii(r),u&4&&(Js(3,r,r.return),ru(3,r),Js(5,r,r.return));break;case 1:Ri(s,r),Ii(r),u&512&&(Mt||l===null||ci(l,l.return)),u&64&&$r&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var f=Bi;if(Ri(s,r),Ii(r),u&512&&(Mt||l===null||ci(l,l.return)),u&4){var _=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":_=f.getElementsByTagName("title")[0],(!_||_[Ls]||_[dn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=f.createElement(u),f.head.insertBefore(_,f.querySelector("head > title"))),xn(_,u,l),_[dn]=r,xt(_),u=_;break e;case"link":var S=zw("link","href",f).get(u+(l.href||""));if(S){for(var I=0;I<S.length;I++)if(_=S[I],_.getAttribute("href")===(l.href==null?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(I,1);break t}}_=f.createElement(u),xn(_,u,l),f.head.appendChild(_);break;case"meta":if(S=zw("meta","content",f).get(u+(l.content||""))){for(I=0;I<S.length;I++)if(_=S[I],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(I,1);break t}}_=f.createElement(u),xn(_,u,l),f.head.appendChild(_);break;default:throw Error(i(468,u))}_[dn]=r,xt(_),u=_}r.stateNode=u}else Bw(f,r.type,r.stateNode);else r.stateNode=Uw(f,u,r.memoizedProps);else _!==u?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,u===null?Bw(f,r.type,r.stateNode):Uw(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&B1(r,r.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&r.alternate===null){f=r.stateNode,_=r.memoizedProps;try{for(var L=f.firstChild;L;){var F=L.nextSibling,J=L.nodeName;L[Ls]||J==="HEAD"||J==="BODY"||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&L.rel.toLowerCase()==="stylesheet"||f.removeChild(L),L=F}for(var ie=r.type,Q=f.attributes;Q.length;)f.removeAttributeNode(Q[0]);xn(f,ie,_),f[dn]=r,f[en]=_}catch(me){gt(r,r.return,me)}}case 5:if(Ri(s,r),Ii(r),u&512&&(Mt||l===null||ci(l,l.return)),r.flags&32){f=r.stateNode;try{yi(f,"")}catch(me){gt(r,r.return,me)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,B1(r,f,l!==null?l.memoizedProps:f)),u&1024&&(D_=!0);break;case 6:if(Ri(s,r),Ii(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(me){gt(r,r.return,me)}}break;case 3:if(nf=null,f=Bi,Bi=ef(s.containerInfo),Ri(s,r),Bi=f,Ii(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Tu(s.containerInfo)}catch(me){gt(r,r.return,me)}D_&&(D_=!1,Y1(r));break;case 4:u=Bi,Bi=ef(r.stateNode.containerInfo),Ri(s,r),Ii(r),Bi=u;break;case 12:Ri(s,r),Ii(r);break;case 13:Ri(s,r),Ii(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(F_=ht()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,O_(r,u)));break;case 22:if(u&512&&(Mt||l===null||ci(l,l.return)),L=r.memoizedState!==null,F=l!==null&&l.memoizedState!==null,J=$r,ie=Mt,$r=J||L,Mt=ie||F,Ri(s,r),Mt=ie,$r=J,Ii(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,u&8192&&(s._visibility=L?s._visibility&-2:s._visibility|1,L&&(s=$r||Mt,l===null||F||s||vl(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(l=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(l===null){F=l=s;try{if(f=F.stateNode,L)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=F.stateNode,I=F.memoizedProps.style;var Z=I!=null&&I.hasOwnProperty("display")?I.display:null;S.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(me){gt(F,F.return,me)}}}else if(s.tag===6){if(l===null){F=s;try{F.stateNode.nodeValue=L?"":F.memoizedProps}catch(me){gt(F,F.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,O_(r,l))));break;case 19:Ri(s,r),Ii(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,O_(r,u)));break;case 21:break;default:Ri(s,r),Ii(r)}}function Ii(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var l=r.return;l!==null;){if(F1(l)){var u=l;break e}l=l.return}throw Error(i(160))}switch(u.tag){case 27:var f=u.stateNode,_=N_(r);Ud(r,_,f);break;case 5:var S=u.stateNode;u.flags&32&&(yi(S,""),u.flags&=-33);var I=N_(r);Ud(r,I,S);break;case 3:case 4:var L=u.stateNode.containerInfo,F=N_(r);k_(r,F,L);break;default:throw Error(i(161))}}}catch(J){gt(r,r.return,J)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Y1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Y1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Kr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)$1(r,s.alternate,s),s=s.sibling}function vl(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Js(4,s,s.return),vl(s);break;case 1:ci(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&U1(s,s.return,l),vl(s);break;case 26:case 27:case 5:ci(s,s.return),vl(s);break;case 22:ci(s,s.return),s.memoizedState===null&&vl(s);break;default:vl(s)}r=r.sibling}}function ea(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,_=s,S=_.flags;switch(_.tag){case 0:case 11:case 15:ea(f,_,l),ru(4,_);break;case 1:if(ea(f,_,l),u=_,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){gt(u,u.return,F)}if(u=_,f=u.updateQueue,f!==null){var I=u.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)L1(L[f],I)}catch(F){gt(u,u.return,F)}}l&&S&64&&j1(_),mo(_,_.return);break;case 26:case 27:case 5:ea(f,_,l),l&&u===null&&S&4&&z1(_),mo(_,_.return);break;case 12:ea(f,_,l);break;case 13:ea(f,_,l),l&&S&4&&W1(f,_);break;case 22:_.memoizedState===null&&ea(f,_,l),mo(_,_.return);break;default:ea(f,_,l)}s=s.sibling}}function M_(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Wc(l))}function P_(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Wc(r))}function ta(r,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)X1(r,s,l,u),s=s.sibling}function X1(r,s,l,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ta(r,s,l,u),f&2048&&ru(9,s);break;case 3:ta(r,s,l,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Wc(r)));break;case 12:if(f&2048){ta(r,s,l,u),r=s.stateNode;try{var _=s.memoizedProps,S=_.id,I=_.onPostCommit;typeof I=="function"&&I(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){gt(s,s.return,L)}}else ta(r,s,l,u);break;case 23:break;case 22:_=s.stateNode,s.memoizedState!==null?_._visibility&4?ta(r,s,l,u):su(r,s):_._visibility&4?ta(r,s,l,u):(_._visibility|=4,El(r,s,l,u,(s.subtreeFlags&10256)!==0)),f&2048&&M_(s.alternate,s);break;case 24:ta(r,s,l,u),f&2048&&P_(s.alternate,s);break;default:ta(r,s,l,u)}}function El(r,s,l,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=r,S=s,I=l,L=u,F=S.flags;switch(S.tag){case 0:case 11:case 15:El(_,S,I,L,f),ru(8,S);break;case 23:break;case 22:var J=S.stateNode;S.memoizedState!==null?J._visibility&4?El(_,S,I,L,f):su(_,S):(J._visibility|=4,El(_,S,I,L,f)),f&&F&2048&&M_(S.alternate,S);break;case 24:El(_,S,I,L,f),f&&F&2048&&P_(S.alternate,S);break;default:El(_,S,I,L,f)}s=s.sibling}}function su(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,u=s,f=u.flags;switch(u.tag){case 22:su(l,u),f&2048&&M_(u.alternate,u);break;case 24:su(l,u),f&2048&&P_(u.alternate,u);break;default:su(l,u)}s=s.sibling}}var au=8192;function wl(r){if(r.subtreeFlags&au)for(r=r.child;r!==null;)Z1(r),r=r.sibling}function Z1(r){switch(r.tag){case 26:wl(r),r.flags&au&&r.memoizedState!==null&&Zx(Bi,r.memoizedState,r.memoizedProps);break;case 5:wl(r);break;case 3:case 4:var s=Bi;Bi=ef(r.stateNode.containerInfo),wl(r),Bi=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=au,au=16777216,wl(r),au=s):wl(r));break;default:wl(r)}}function J1(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ou(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];_n=u,tw(u,r)}J1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ew(r),r=r.sibling}function ew(r){switch(r.tag){case 0:case 11:case 15:ou(r),r.flags&2048&&Js(9,r,r.return);break;case 3:ou(r);break;case 12:ou(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,zd(r)):ou(r);break;default:ou(r)}}function zd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];_n=u,tw(u,r)}J1(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Js(8,s,s.return),zd(s);break;case 22:l=s.stateNode,l._visibility&4&&(l._visibility&=-5,zd(s));break;default:zd(s)}r=r.sibling}}function tw(r,s){for(;_n!==null;){var l=_n;switch(l.tag){case 0:case 11:case 15:Js(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,_n=u;else e:for(l=r;_n!==null;){u=_n;var f=u.sibling,_=u.return;if(G1(u),u===l){_n=null;break e}if(f!==null){f.return=_,_n=f;break e}_n=_}}}function hx(r,s,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(r,s,l,u){return new hx(r,s,l,u)}function L_(r){return r=r.prototype,!(!r||!r.isReactComponent)}function na(r,s){var l=r.alternate;return l===null?(l=xi(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&31457280,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function nw(r,s){r.flags&=31457282;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Bd(r,s,l,u,f,_){var S=0;if(u=r,typeof r=="function")L_(r)&&(S=1);else if(typeof r=="string")S=Yx(r,l,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case p:return _o(l.children,f,_,s);case m:S=8,f|=24;break;case g:return r=xi(12,l,s,f|2),r.elementType=g,r.lanes=_,r;case j:return r=xi(13,l,s,f),r.elementType=j,r.lanes=_,r;case D:return r=xi(19,l,s,f),r.elementType=D,r.lanes=_,r;case q:return iw(l,f,_,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:case x:S=10;break e;case C:S=9;break e;case O:S=11;break e;case U:S=14;break e;case $:S=16,u=null;break e}S=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=xi(S,l,s,f),s.elementType=r,s.type=u,s.lanes=_,s}function _o(r,s,l,u){return r=xi(7,r,u,s),r.lanes=l,r}function iw(r,s,l,u){r=xi(22,r,u,s),r.elementType=q,r.lanes=l;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=f._current;if(_===null)throw Error(i(456));if((f._pendingVisibility&2)===0){var S=Hs(_,2);S!==null&&(f._pendingVisibility|=2,Gn(S,_,2))}},attach:function(){var _=f._current;if(_===null)throw Error(i(456));if((f._pendingVisibility&2)!==0){var S=Hs(_,2);S!==null&&(f._pendingVisibility&=-3,Gn(S,_,2))}}};return r.stateNode=f,r}function V_(r,s,l){return r=xi(6,r,null,s),r.lanes=l,r}function j_(r,s,l){return s=xi(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Wr(r){r.flags|=4}function rw(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Fw(s)){if(s=Ai.current,s!==null&&((tt&4194176)===tt?pr!==null:(tt&62914560)!==tt&&(tt&536870912)===0||s!==pr))throw $c=qm,wE;r.flags|=8192}}function Fd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ds():536870912,r.lanes|=s,bl|=s)}function lu(r,s){if(!ot)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Nt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&31457280,u|=f.flags&31457280,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=l,s}function dx(r,s,l){var u=s.pendingProps;switch(Bm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return l=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Hr(sn),ke(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Bc(s)?Wr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zi!==null&&(G_(zi),zi=null))),Nt(s),null;case 26:return l=s.memoizedState,r===null?(Wr(s),l!==null?(Nt(s),rw(s,l)):(Nt(s),s.flags&=-16777217)):l?l!==r.memoizedState?(Wr(s),Nt(s),rw(s,l)):(Nt(s),s.flags&=-16777217):(r.memoizedProps!==u&&Wr(s),Nt(s),s.flags&=-16777217),null;case 27:Ne(s),l=st.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Wr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}r=pe.current,Bc(s)?vE(s):(r=Mw(f,u,l),s.stateNode=r,Wr(s))}return Nt(s),null;case 5:if(Ne(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Wr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}if(r=pe.current,Bc(s))vE(s);else{switch(f=Jd(st.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(l,{is:u.is}):f.createElement(l)}}r[dn]=s,r[en]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(xn(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Wr(s)}}return Nt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Wr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=st.current,Bc(s)){if(r=s.stateNode,l=s.memoizedProps,u=null,f=$n,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[dn]=s,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Iw(r.nodeValue,l)),r||so(s)}else r=Jd(r).createTextNode(u),r[dn]=s,s.stateNode=r}return Nt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Bc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[dn]=s}else Fc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),f=!1}else zi!==null&&(G_(zi),zi=null),f=!0;if(!f)return s.flags&256?(zr(s),s):(zr(s),null)}if(zr(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var _=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==f&&(u.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),Fd(s,s.updateQueue),Nt(s),null;case 4:return ke(),r===null&&ig(s.stateNode.containerInfo),Nt(s),null;case 10:return Hr(s.type),Nt(s),null;case 19:if(Ee(rn),f=s.memoizedState,f===null)return Nt(s),null;if(u=(s.flags&128)!==0,_=f.rendering,_===null)if(u)lu(f,!1);else{if(Pt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=Cd(r),_!==null){for(s.flags|=128,lu(f,!1),r=_.updateQueue,s.updateQueue=r,Fd(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)nw(l,r),l=l.sibling;return we(rn,rn.current&1|2),s.child}r=r.sibling}f.tail!==null&&ht()>qd&&(s.flags|=128,u=!0,lu(f,!1),s.lanes=4194304)}else{if(!u)if(r=Cd(_),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Fd(s,r),lu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!ot)return Nt(s),null}else 2*ht()-f.renderingStartTime>qd&&l!==536870912&&(s.flags|=128,u=!0,lu(f,!1),s.lanes=4194304);f.isBackwards?(_.sibling=s.child,s.child=_):(r=f.last,r!==null?r.sibling=_:s.child=_,f.last=_)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=ht(),s.sibling=null,r=rn.current,we(rn,u?r&1|2:r&1),s):(Nt(s),null);case 22:case 23:return zr(s),$m(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),l=s.updateQueue,l!==null&&Fd(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),r!==null&&Ee(oo),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Hr(sn),Nt(s),null;case 25:return null}throw Error(i(156,s.tag))}function fx(r,s){switch(Bm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Hr(sn),ke(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ne(s),null;case 13:if(zr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Fc()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ee(rn),null;case 4:return ke(),null;case 10:return Hr(s.type),null;case 22:case 23:return zr(s),$m(),r!==null&&Ee(oo),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Hr(sn),null;case 25:return null;default:return null}}function sw(r,s){switch(Bm(s),s.tag){case 3:Hr(sn),ke();break;case 26:case 27:case 5:Ne(s);break;case 4:ke();break;case 13:zr(s);break;case 19:Ee(rn);break;case 10:Hr(s.type);break;case 22:case 23:zr(s),$m(),r!==null&&Ee(oo);break;case 24:Hr(sn)}}var px={getCacheForType:function(r){var s=Mn(sn),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},mx=typeof WeakMap=="function"?WeakMap:Map,kt=0,Et=null,He=null,tt=0,wt=0,hi=null,Qr=!1,Tl=!1,U_=!1,Yr=0,Pt=0,ia=0,go=0,z_=0,Ni=0,bl=0,cu=null,_r=null,B_=!1,F_=0,qd=1/0,Hd=null,ra=null,$d=!1,yo=null,uu=0,q_=0,H_=null,hu=0,$_=null;function di(){if((kt&2)!==0&&tt!==0)return tt&-tt;if(w.T!==null){var r=pl;return r!==0?r:J_()}return Xh()}function aw(){Ni===0&&(Ni=(tt&536870912)===0||ot?bc():536870912);var r=Ai.current;return r!==null&&(r.flags|=32),Ni}function Gn(r,s,l){(r===Et&&wt===2||r.cancelPendingCommit!==null)&&(Sl(r,0),Xr(r,tt,Ni,!1)),Ut(r,l),((kt&2)===0||r!==Et)&&(r===Et&&((kt&2)===0&&(go|=l),Pt===4&&Xr(r,tt,Ni,!1)),gr(r))}function ow(r,s,l){if((kt&6)!==0)throw Error(i(327));var u=!l&&(s&60)===0&&(s&r.expiredLanes)===0||ks(r,s),f=u?yx(r,s):Q_(r,s,!0),_=u;do{if(f===0){Tl&&!u&&Xr(r,s,0,!1);break}else if(f===6)Xr(r,s,0,!Qr);else{if(l=r.current.alternate,_&&!_x(l)){f=Q_(r,s,!1),_=!1;continue}if(f===2){if(_=s,r.errorRecoveryDisabledLanes&_)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var I=r;f=cu;var L=I.current.memoizedState.isDehydrated;if(L&&(Sl(I,S).flags|=256),S=Q_(I,S,!1),S!==2){if(U_&&!L){I.errorRecoveryDisabledLanes|=_,go|=_,f=4;break e}_=_r,_r=f,_!==null&&G_(_)}f=S}if(_=!1,f!==2)continue}}if(f===1){Sl(r,0),Xr(r,s,0,!0);break}e:{switch(u=r,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){Xr(u,s,Ni,!Qr);break e}break;case 2:_r=null;break;case 3:case 5:break;default:throw Error(i(329))}if(u.finishedWork=l,u.finishedLanes=s,(s&62914560)===s&&(_=F_+300-ht(),10<_)){if(Xr(u,s,Ni,!Qr),_i(u,0)!==0)break e;u.timeoutHandle=kw(lw.bind(null,u,l,_r,Hd,B_,s,Ni,go,bl,Qr,2,-0,0),_);break e}lw(u,l,_r,Hd,B_,s,Ni,go,bl,Qr,0,-0,0)}}break}while(!0);gr(r)}function G_(r){_r===null?_r=r:_r.push.apply(_r,r)}function lw(r,s,l,u,f,_,S,I,L,F,J,ie,Q){var Z=s.subtreeFlags;if((Z&8192||(Z&16785408)===16785408)&&(gu={stylesheets:null,count:0,unsuspend:Xx},Z1(s),s=Jx(),s!==null)){r.cancelPendingCommit=s(mw.bind(null,r,l,u,f,S,I,L,1,ie,Q)),Xr(r,_,S,!F);return}mw(r,l,u,f,S,I,L,J,ie,Q)}function _x(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],_=f.getSnapshot;f=f.value;try{if(!li(_(),f))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xr(r,s,l,u){s&=~z_,s&=~go,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var _=31-Fn(f),S=1<<_;u[_]=-1,f&=~S}l!==0&&Os(r,l,s)}function Gd(){return(kt&6)===0?(du(0),!1):!0}function K_(){if(He!==null){if(wt===0)var r=He.return;else r=He,qr=fo=null,Jm(r),dl=null,Gc=0,r=He;for(;r!==null;)sw(r.alternate,r),r=r.return;He=null}}function Sl(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,Px(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),K_(),Et=r,He=l=na(r.current,null),tt=s,wt=0,hi=null,Qr=!1,Tl=ks(r,s),U_=!1,bl=Ni=z_=go=ia=Pt=0,_r=cu=null,B_=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-Fn(u),_=1<<f;s|=r[f],u&=~_}return Yr=s,_d(),l}function cw(r,s){Ue=null,w.H=mr,s===Hc?(s=SE(),wt=3):s===wE?(s=SE(),wt=4):wt=s===T1?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,hi=s,He===null&&(Pt=1,Ld(r,bi(s,r.current)))}function uw(){var r=w.H;return w.H=mr,r===null?mr:r}function hw(){var r=w.A;return w.A=px,r}function W_(){Pt=4,Qr||(tt&4194176)!==tt&&Ai.current!==null||(Tl=!0),(ia&134217727)===0&&(go&134217727)===0||Et===null||Xr(Et,tt,Ni,!1)}function Q_(r,s,l){var u=kt;kt|=2;var f=uw(),_=hw();(Et!==r||tt!==s)&&(Hd=null,Sl(r,s)),s=!1;var S=Pt;e:do try{if(wt!==0&&He!==null){var I=He,L=hi;switch(wt){case 8:K_(),S=6;break e;case 3:case 2:case 6:Ai.current===null&&(s=!0);var F=wt;if(wt=0,hi=null,Cl(r,I,L,F),l&&Tl){S=0;break e}break;default:F=wt,wt=0,hi=null,Cl(r,I,L,F)}}gx(),S=Pt;break}catch(J){cw(r,J)}while(!0);return s&&r.shellSuspendCounter++,qr=fo=null,kt=u,w.H=f,w.A=_,He===null&&(Et=null,tt=0,_d()),S}function gx(){for(;He!==null;)dw(He)}function yx(r,s){var l=kt;kt|=2;var u=uw(),f=hw();Et!==r||tt!==s?(Hd=null,qd=ht()+500,Sl(r,s)):Tl=ks(r,s);e:do try{if(wt!==0&&He!==null){s=He;var _=hi;t:switch(wt){case 1:wt=0,hi=null,Cl(r,s,_,1);break;case 2:if(TE(_)){wt=0,hi=null,fw(s);break}s=function(){wt===2&&Et===r&&(wt=7),gr(r)},_.then(s,s);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:TE(_)?(wt=0,hi=null,fw(s)):(wt=0,hi=null,Cl(r,s,_,7));break;case 5:var S=null;switch(He.tag){case 26:S=He.memoizedState;case 5:case 27:var I=He;if(!S||Fw(S)){wt=0,hi=null;var L=I.sibling;if(L!==null)He=L;else{var F=I.return;F!==null?(He=F,Kd(F)):He=null}break t}}wt=0,hi=null,Cl(r,s,_,5);break;case 6:wt=0,hi=null,Cl(r,s,_,6);break;case 8:K_(),Pt=6;break e;default:throw Error(i(462))}}vx();break}catch(J){cw(r,J)}while(!0);return qr=fo=null,w.H=u,w.A=f,kt=l,He!==null?0:(Et=null,tt=0,_d(),Pt)}function vx(){for(;He!==null&&!Qn();)dw(He)}function dw(r){var s=M1(r.alternate,r,Yr);r.memoizedProps=r.pendingProps,s===null?Kd(r):He=s}function fw(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=I1(l,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=I1(l,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:Jm(s);default:sw(l,s),s=He=nw(s,Yr),s=M1(l,s,Yr)}r.memoizedProps=r.pendingProps,s===null?Kd(r):He=s}function Cl(r,s,l,u){qr=fo=null,Jm(s),dl=null,Gc=0;var f=s.return;try{if(ox(r,f,s,l,tt)){Pt=1,Ld(r,bi(l,r.current)),He=null;return}}catch(_){if(f!==null)throw He=f,_;Pt=1,Ld(r,bi(l,r.current)),He=null;return}s.flags&32768?(ot||u===1?r=!0:Tl||(tt&536870912)!==0?r=!1:(Qr=r=!0,(u===2||u===3||u===6)&&(u=Ai.current,u!==null&&u.tag===13&&(u.flags|=16384))),pw(s,r)):Kd(s)}function Kd(r){var s=r;do{if((s.flags&32768)!==0){pw(s,Qr);return}r=s.return;var l=dx(s.alternate,s,Yr);if(l!==null){He=l;return}if(s=s.sibling,s!==null){He=s;return}He=s=r}while(s!==null);Pt===0&&(Pt=5)}function pw(r,s){do{var l=fx(r.alternate,r);if(l!==null){l.flags&=32767,He=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){He=r;return}He=r=l}while(r!==null);Pt=6,He=null}function mw(r,s,l,u,f,_,S,I,L,F){var J=w.T,ie=ge.p;try{ge.p=2,w.T=null,Ex(r,s,l,u,ie,f,_,S,I,L,F)}finally{w.T=J,ge.p=ie}}function Ex(r,s,l,u,f,_,S,I){do Al();while(yo!==null);if((kt&6)!==0)throw Error(i(327));var L=r.finishedWork;if(u=r.finishedLanes,L===null)return null;if(r.finishedWork=null,r.finishedLanes=0,L===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var F=L.lanes|L.childLanes;if(F|=jm,Qh(r,u,F,_,S,I),r===Et&&(He=Et=null,tt=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||$d||($d=!0,q_=F,H_=l,Sx(Zt,function(){return Al(),null})),l=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||l?(l=w.T,w.T=null,_=ge.p,ge.p=2,S=kt,kt|=4,cx(r,L),Q1(L,r),H2(og,r.containerInfo),af=!!ag,og=ag=null,r.current=L,$1(r,L.alternate,L),Li(),kt=S,ge.p=_,w.T=l):r.current=L,$d?($d=!1,yo=r,uu=u):_w(r,F),F=r.pendingLanes,F===0&&(ra=null),wc(L.stateNode),gr(r),s!==null)for(f=r.onRecoverableError,L=0;L<s.length;L++)F=s[L],f(F.value,{componentStack:F.stack});return(uu&3)!==0&&Al(),F=r.pendingLanes,(u&4194218)!==0&&(F&42)!==0?r===$_?hu++:(hu=0,$_=r):hu=0,du(0),null}function _w(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Wc(s)))}function Al(){if(yo!==null){var r=yo,s=q_;q_=0;var l=Yh(uu),u=w.T,f=ge.p;try{if(ge.p=32>l?32:l,w.T=null,yo===null)var _=!1;else{l=H_,H_=null;var S=yo,I=uu;if(yo=null,uu=0,(kt&6)!==0)throw Error(i(331));var L=kt;if(kt|=4,ew(S.current),X1(S,S.current,I,l),kt=L,du(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Yn,S)}catch{}_=!0}return _}finally{ge.p=f,w.T=u,_w(r,s)}}return!1}function gw(r,s,l){s=bi(l,s),s=f_(r.stateNode,s,2),r=Zs(r,s,2),r!==null&&(Ut(r,2),gr(r))}function gt(r,s,l){if(r.tag===3)gw(r,r,l);else for(;s!==null;){if(s.tag===3){gw(s,r,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ra===null||!ra.has(u))){r=bi(l,r),l=E1(2),u=Zs(s,l,2),u!==null&&(w1(l,u,s,r),Ut(u,2),gr(u));break}}s=s.return}}function Y_(r,s,l){var u=r.pingCache;if(u===null){u=r.pingCache=new mx;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(l)||(U_=!0,f.add(l),r=wx.bind(null,r,s,l),s.then(r,r))}function wx(r,s,l){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Et===r&&(tt&l)===l&&(Pt===4||Pt===3&&(tt&62914560)===tt&&300>ht()-F_?(kt&2)===0&&Sl(r,0):z_|=l,bl===tt&&(bl=0)),gr(r)}function yw(r,s){s===0&&(s=Ds()),r=Hs(r,s),r!==null&&(Ut(r,s),gr(r))}function Tx(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),yw(r,l)}function bx(r,s){var l=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),yw(r,l)}function Sx(r,s){return On(r,s)}var Wd=null,Rl=null,X_=!1,Qd=!1,Z_=!1,vo=0;function gr(r){r!==Rl&&r.next===null&&(Rl===null?Wd=Rl=r:Rl=Rl.next=r),Qd=!0,X_||(X_=!0,Ax(Cx))}function du(r,s){if(!Z_&&Qd){Z_=!0;do for(var l=!1,u=Wd;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var _=0;else{var S=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-Fn(42|r)+1)-1,_&=f&~(S&~I),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(l=!0,ww(u,_))}else _=tt,_=_i(u,u===Et?_:0),(_&3)===0||ks(u,_)||(l=!0,ww(u,_));u=u.next}while(l);Z_=!1}}function Cx(){Qd=X_=!1;var r=0;vo!==0&&(Mx()&&(r=vo),vo=0);for(var s=ht(),l=null,u=Wd;u!==null;){var f=u.next,_=vw(u,s);_===0?(u.next=null,l===null?Wd=f:l.next=f,f===null&&(Rl=l)):(l=u,(r!==0||(_&3)!==0)&&(Qd=!0)),u=f}du(r)}function vw(r,s){for(var l=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var S=31-Fn(_),I=1<<S,L=f[S];L===-1?((I&l)===0||(I&u)!==0)&&(f[S]=$o(I,s)):L<=s&&(r.expiredLanes|=I),_&=~I}if(s=Et,l=tt,l=_i(r,r===s?l:0),u=r.callbackNode,l===0||r===s&&wt===2||r.cancelPendingCommit!==null)return u!==null&&u!==null&&si(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ks(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(u!==null&&si(u),Yh(l)){case 2:case 8:l=it;break;case 32:l=Zt;break;case 268435456:l=xs;break;default:l=Zt}return u=Ew.bind(null,r),l=On(l,u),r.callbackPriority=s,r.callbackNode=l,s}return u!==null&&u!==null&&si(u),r.callbackPriority=2,r.callbackNode=null,2}function Ew(r,s){var l=r.callbackNode;if(Al()&&r.callbackNode!==l)return null;var u=tt;return u=_i(r,r===Et?u:0),u===0?null:(ow(r,u,s),vw(r,ht()),r.callbackNode!=null&&r.callbackNode===l?Ew.bind(null,r):null)}function ww(r,s){if(Al())return null;ow(r,s,!0)}function Ax(r){Lx(function(){(kt&6)!==0?On(Be,r):r()})}function J_(){return vo===0&&(vo=bc()),vo}function Tw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ar(""+r)}function bw(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function Rx(r,s,l,u,f){if(s==="submit"&&l&&l.stateNode===f){var _=Tw((f[en]||null).action),S=u.submitter;S&&(s=(s=S[en]||null)?Tw(s.formAction):S.getAttribute("formAction"),s!==null&&(_=s,S=null));var I=new Zo("action","action",null,u,f);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vo!==0){var L=S?bw(f,S):new FormData(f);l_(l,{pending:!0,data:L,method:f.method,action:_},null,L)}}else typeof _=="function"&&(I.preventDefault(),L=S?bw(f,S):new FormData(f),l_(l,{pending:!0,data:L,method:f.method,action:_},_,L))},currentTarget:f}]})}}for(var eg=0;eg<mE.length;eg++){var tg=mE[eg],Ix=tg.toLowerCase(),xx=tg[0].toUpperCase()+tg.slice(1);Ui(Ix,"on"+xx)}Ui(uE,"onAnimationEnd"),Ui(hE,"onAnimationIteration"),Ui(dE,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(G2,"onTransitionRun"),Ui(K2,"onTransitionStart"),Ui(W2,"onTransitionCancel"),Ui(fE,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function Sw(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],f=u.event;u=u.listeners;e:{var _=void 0;if(s)for(var S=u.length-1;0<=S;S--){var I=u[S],L=I.instance,F=I.currentTarget;if(I=I.listener,L!==_&&f.isPropagationStopped())break e;_=I,f.currentTarget=F;try{_(f)}catch(J){Pd(J)}f.currentTarget=null,_=L}else for(S=0;S<u.length;S++){if(I=u[S],L=I.instance,F=I.currentTarget,I=I.listener,L!==_&&f.isPropagationStopped())break e;_=I,f.currentTarget=F;try{_(f)}catch(J){Pd(J)}f.currentTarget=null,_=L}}}}function Xe(r,s){var l=s[qa];l===void 0&&(l=s[qa]=new Set);var u=r+"__bubble";l.has(u)||(Cw(s,r,2,!1),l.add(u))}function ng(r,s,l){var u=0;s&&(u|=4),Cw(l,r,u,s)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function ig(r){if(!r[Yd]){r[Yd]=!0,Cc.forEach(function(l){l!=="selectionchange"&&(Nx.has(l)||ng(l,!1,r),ng(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Yd]||(s[Yd]=!0,ng("selectionchange",!1,s))}}function Cw(r,s,l,u){switch(Ww(s)){case 2:var f=nN;break;case 8:f=iN;break;default:f=_g}l=f.bind(null,s,l,r),f=void 0,!Ei||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function rg(r,s,l,u,f){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var I=u.stateNode.containerInfo;if(I===f||I.nodeType===8&&I.parentNode===f)break;if(S===4)for(S=u.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;S=S.return}for(;I!==null;){if(S=ji(I),S===null)return;if(L=S.tag,L===5||L===6||L===26||L===27){u=_=S;continue e}I=I.parentNode}}u=u.return}td(function(){var F=_,J=Xo(l),ie=[];e:{var Q=pE.get(r);if(Q!==void 0){var Z=Zo,me=r;switch(r){case"keypress":if(lr(l)===0)break e;case"keydown":case"keyup":Z=rl;break;case"focusin":me="focus",Z=tl;break;case"focusout":me="blur",Z=tl;break;case"beforeblur":case"afterblur":Z=tl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=wi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=cd;break;case uE:case hE:case dE:Z=nl;break;case fE:Z=hd;break;case"scroll":case"scrollend":Z=nd;break;case"wheel":Z=sl;break;case"copy":case"cut":case"paste":Z=il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Vc;break;case"toggle":case"beforetoggle":Z=fd}var Oe=(s&4)!==0,Lt=!Oe&&(r==="scroll"||r==="scrollend"),H=Oe?Q!==null?Q+"Capture":null:Q;Oe=[];for(var B=F,K;B!==null;){var te=B;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||H===null||(te=Wa(B,H),te!=null&&Oe.push(pu(B,te,K))),Lt)break;B=B.return}0<Oe.length&&(Q=new Z(Q,me,null,l,J),ie.push({event:Q,listeners:Oe}))}}if((s&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",Q&&l!==vi&&(me=l.relatedTarget||l.fromElement)&&(ji(me)||me[xr]))break e;if((Z||Q)&&(Q=J.window===J?J:(Q=J.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(me=l.relatedTarget||l.toElement,Z=F,me=me?ji(me):null,me!==null&&(Lt=ce(me),Oe=me.tag,me!==Lt||Oe!==5&&Oe!==27&&Oe!==6)&&(me=null)):(Z=null,me=F),Z!==me)){if(Oe=wi,te="onMouseLeave",H="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Oe=Vc,te="onPointerLeave",H="onPointerEnter",B="pointer"),Lt=Z==null?Q:Vs(Z),K=me==null?Q:Vs(me),Q=new Oe(te,B+"leave",Z,l,J),Q.target=Lt,Q.relatedTarget=K,te=null,ji(J)===F&&(Oe=new Oe(H,B+"enter",me,l,J),Oe.target=K,Oe.relatedTarget=Lt,te=Oe),Lt=te,Z&&me)t:{for(Oe=Z,H=me,B=0,K=Oe;K;K=Il(K))B++;for(K=0,te=H;te;te=Il(te))K++;for(;0<B-K;)Oe=Il(Oe),B--;for(;0<K-B;)H=Il(H),K--;for(;B--;){if(Oe===H||H!==null&&Oe===H.alternate)break t;Oe=Il(Oe),H=Il(H)}Oe=null}else Oe=null;Z!==null&&Aw(ie,Q,Z,Oe,!1),me!==null&&Lt!==null&&Aw(ie,Lt,me,Oe,!0)}}e:{if(Q=F?Vs(F):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var fe=J0;else if(nn(Q))if(eE)fe=F2;else{fe=z2;var Fe=U2}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&Nc(F.elementType)&&(fe=J0):fe=B2;if(fe&&(fe=fe(r,F))){Vr(ie,fe,l,J);break e}Fe&&Fe(r,Q,F),r==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&Yo(Q,"number",Q.value)}switch(Fe=F?Vs(F):window,r){case"focusin":(nn(Fe)||Fe.contentEditable==="true")&&(al=Fe,Pm=F,zc=null);break;case"focusout":zc=Pm=al=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,lE(ie,l,J);break;case"selectionchange":if($2)break;case"keydown":case"keyup":lE(ie,l,J)}var _e;if(hr)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Je?X(r,l)&&(Te="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(b&&l.locale!=="ko"&&(Je||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Je&&(_e=Dc()):(or=J,qs="value"in or?or.value:or.textContent,Je=!0)),Fe=Xd(F,Te),0<Fe.length&&(Te=new Pc(Te,r,null,l,J),ie.push({event:Te,listeners:Fe}),_e?Te.data=_e:(_e=ae(l),_e!==null&&(Te.data=_e)))),(_e=y?tn(r,l):et(r,l))&&(Te=Xd(F,"onBeforeInput"),0<Te.length&&(Fe=new Pc("onBeforeInput","beforeinput",null,l,J),ie.push({event:Fe,listeners:Te}),Fe.data=_e)),Rx(ie,r,F,l,J)}Sw(ie,s)})}function pu(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Xd(r,s){for(var l=s+"Capture",u=[];r!==null;){var f=r,_=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||_===null||(f=Wa(r,l),f!=null&&u.unshift(pu(r,f,_)),f=Wa(r,s),f!=null&&u.push(pu(r,f,_))),r=r.return}return u}function Il(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Aw(r,s,l,u,f){for(var _=s._reactName,S=[];l!==null&&l!==u;){var I=l,L=I.alternate,F=I.stateNode;if(I=I.tag,L!==null&&L===u)break;I!==5&&I!==26&&I!==27||F===null||(L=F,f?(F=Wa(l,_),F!=null&&S.unshift(pu(l,F,L))):f||(F=Wa(l,_),F!=null&&S.push(pu(l,F,L)))),l=l.return}S.length!==0&&r.push({event:s,listeners:S})}var kx=/\r\n?/g,Dx=/\u0000|\uFFFD/g;function Rw(r){return(typeof r=="string"?r:""+r).replace(kx,`
`).replace(Dx,"")}function Iw(r,s){return s=Rw(s),Rw(r)===s}function Zd(){}function _t(r,s,l,u,f,_){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||yi(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&yi(r,""+u);break;case"className":zs(r,"class",u);break;case"tabIndex":zs(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":zs(r,l,u);break;case"style":ed(r,u,_);break;case"data":if(s!=="object"){zs(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=ar(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&_t(r,s,"name",f.name,f,null),_t(r,s,"formEncType",f.formEncType,f,null),_t(r,s,"formMethod",f.formMethod,f,null),_t(r,s,"formTarget",f.formTarget,f,null)):(_t(r,s,"encType",f.encType,f,null),_t(r,s,"method",f.method,f,null),_t(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=ar(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Zd);break;case"onScroll":u!=null&&Xe("scroll",r);break;case"onScrollEnd":u!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=ar(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),Us(r,"popover",u);break;case"xlinkActuate":gi(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":gi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":gi(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":gi(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":gi(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":gi(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":gi(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":gi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":gi(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Us(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Im.get(l)||l,Us(r,l,u))}}function sg(r,s,l,u,f,_){switch(l){case"style":ed(r,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?yi(r,u):(typeof u=="number"||typeof u=="bigint")&&yi(r,""+u);break;case"onScroll":u!=null&&Xe("scroll",r);break;case"onScrollEnd":u!=null&&Xe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),s=l.slice(2,f?l.length-7:void 0),_=r[en]||null,_=_!=null?_[l]:null,typeof _=="function"&&r.removeEventListener(s,_,f),typeof u=="function")){typeof _!="function"&&_!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,u,f);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Us(r,l,u)}}}function xn(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var u=!1,f=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:_t(r,s,_,S,l,null)}}f&&_t(r,s,"srcSet",l.srcSet,l,null),u&&_t(r,s,"src",l.src,l,null);return;case"input":Xe("invalid",r);var I=_=S=f=null,L=null,F=null;for(u in l)if(l.hasOwnProperty(u)){var J=l[u];if(J!=null)switch(u){case"name":f=J;break;case"type":S=J;break;case"checked":L=J;break;case"defaultChecked":F=J;break;case"value":_=J;break;case"defaultValue":I=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:_t(r,s,u,J,l,null)}}Ga(r,_,I,L,F,S,f,!1),$a(r);return;case"select":Xe("invalid",r),u=S=_=null;for(f in l)if(l.hasOwnProperty(f)&&(I=l[f],I!=null))switch(f){case"value":_=I;break;case"defaultValue":S=I;break;case"multiple":u=I;default:_t(r,s,f,I,l,null)}s=_,l=S,r.multiple=!!u,s!=null?at(r,!!u,s,!1):l!=null&&at(r,!!u,l,!0);return;case"textarea":Xe("invalid",r),_=f=u=null;for(S in l)if(l.hasOwnProperty(S)&&(I=l[S],I!=null))switch(S){case"value":u=I;break;case"defaultValue":f=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:_t(r,s,S,I,l,null)}Fs(r,u,f,_),$a(r);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(u=l[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_t(r,s,L,u,l,null)}return;case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(u=0;u<fu.length;u++)Xe(fu[u],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:_t(r,s,F,u,l,null)}return;default:if(Nc(s)){for(J in l)l.hasOwnProperty(J)&&(u=l[J],u!==void 0&&sg(r,s,J,u,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(u=l[I],u!=null&&_t(r,s,I,u,l,null))}function Ox(r,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,_=null,S=null,I=null,L=null,F=null,J=null;for(Z in l){var ie=l[Z];if(l.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ie;default:u.hasOwnProperty(Z)||_t(r,s,Z,null,u,ie)}}for(var Q in u){var Z=u[Q];if(ie=l[Q],u.hasOwnProperty(Q)&&(Z!=null||ie!=null))switch(Q){case"type":_=Z;break;case"name":f=Z;break;case"checked":F=Z;break;case"defaultChecked":J=Z;break;case"value":S=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==ie&&_t(r,s,Q,Z,u,ie)}}Bs(r,S,I,L,F,J,_,f);return;case"select":Z=S=I=Q=null;for(_ in l)if(L=l[_],l.hasOwnProperty(_)&&L!=null)switch(_){case"value":break;case"multiple":Z=L;default:u.hasOwnProperty(_)||_t(r,s,_,null,u,L)}for(f in u)if(_=u[f],L=l[f],u.hasOwnProperty(f)&&(_!=null||L!=null))switch(f){case"value":Q=_;break;case"defaultValue":I=_;break;case"multiple":S=_;default:_!==L&&_t(r,s,f,_,u,L)}s=I,l=S,u=Z,Q!=null?at(r,!!l,Q,!1):!!u!=!!l&&(s!=null?at(r,!!l,s,!0):at(r,!!l,l?[]:"",!1));return;case"textarea":Z=Q=null;for(I in l)if(f=l[I],l.hasOwnProperty(I)&&f!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:_t(r,s,I,null,u,f)}for(S in u)if(f=u[S],_=l[S],u.hasOwnProperty(S)&&(f!=null||_!=null))switch(S){case"value":Q=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==_&&_t(r,s,S,f,u,_)}Ka(r,Q,Z);return;case"option":for(var me in l)if(Q=l[me],l.hasOwnProperty(me)&&Q!=null&&!u.hasOwnProperty(me))switch(me){case"selected":r.selected=!1;break;default:_t(r,s,me,null,u,Q)}for(L in u)if(Q=u[L],Z=l[L],u.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":r.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_t(r,s,L,Q,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in l)Q=l[Oe],l.hasOwnProperty(Oe)&&Q!=null&&!u.hasOwnProperty(Oe)&&_t(r,s,Oe,null,u,Q);for(F in u)if(Q=u[F],Z=l[F],u.hasOwnProperty(F)&&Q!==Z&&(Q!=null||Z!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:_t(r,s,F,Q,u,Z)}return;default:if(Nc(s)){for(var Lt in l)Q=l[Lt],l.hasOwnProperty(Lt)&&Q!==void 0&&!u.hasOwnProperty(Lt)&&sg(r,s,Lt,void 0,u,Q);for(J in u)Q=u[J],Z=l[J],!u.hasOwnProperty(J)||Q===Z||Q===void 0&&Z===void 0||sg(r,s,J,Q,u,Z);return}}for(var H in l)Q=l[H],l.hasOwnProperty(H)&&Q!=null&&!u.hasOwnProperty(H)&&_t(r,s,H,null,u,Q);for(ie in u)Q=u[ie],Z=l[ie],!u.hasOwnProperty(ie)||Q===Z||Q==null&&Z==null||_t(r,s,ie,Q,u,Z)}var ag=null,og=null;function Jd(r){return r.nodeType===9?r:r.ownerDocument}function xw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function lg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cg=null;function Mx(){var r=window.event;return r&&r.type==="popstate"?r===cg?!1:(cg=r,!0):(cg=null,!1)}var kw=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,Dw=typeof Promise=="function"?Promise:void 0,Lx=typeof queueMicrotask=="function"?queueMicrotask:typeof Dw<"u"?function(r){return Dw.resolve(null).then(r).catch(Vx)}:kw;function Vx(r){setTimeout(function(){throw r})}function ug(r,s){var l=s,u=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(u===0){r.removeChild(f),Tu(s);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=f}while(l);Tu(s)}function hg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":hg(l),Ha(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function jx(r,s,l,u){for(;r.nodeType===1;){var f=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ls])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==f.rel||r.getAttribute("href")!==(f.href==null?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var _=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Fi(r.nextSibling),r===null)break}return null}function Ux(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Fi(r.nextSibling),r===null))return null;return r}function Fi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function Ow(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function Mw(r,s,l){switch(s=Jd(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var ki=new Map,Pw=new Set;function ef(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Zr=ge.d;ge.d={f:zx,r:Bx,D:Fx,C:qx,L:Hx,m:$x,X:Kx,S:Gx,M:Wx};function zx(){var r=Zr.f(),s=Gd();return r||s}function Bx(r){var s=Nr(r);s!==null&&s.tag===5&&s.type==="form"?l1(s):Zr.r(r)}var xl=typeof document>"u"?null:document;function Lw(r,s,l){var u=xl;if(u&&typeof s=="string"&&s){var f=Ot(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Pw.has(f)||(Pw.add(f),r={rel:r,crossOrigin:l,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),xn(s,"link",r),xt(s),u.head.appendChild(s)))}}function Fx(r){Zr.D(r),Lw("dns-prefetch",r,null)}function qx(r,s){Zr.C(r,s),Lw("preconnect",r,s)}function Hx(r,s,l){Zr.L(r,s,l);var u=xl;if(u&&r&&s){var f='link[rel="preload"][as="'+Ot(s)+'"]';s==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Ot(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Ot(l.imageSizes)+'"]')):f+='[href="'+Ot(r)+'"]';var _=f;switch(s){case"style":_=Nl(r);break;case"script":_=kl(r)}ki.has(_)||(r=A({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),ki.set(_,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(mu(_))||s==="script"&&u.querySelector(_u(_))||(s=u.createElement("link"),xn(s,"link",r),xt(s),u.head.appendChild(s)))}}function $x(r,s){Zr.m(r,s);var l=xl;if(l&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ot(u)+'"][href="'+Ot(r)+'"]',_=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=kl(r)}if(!ki.has(_)&&(r=A({rel:"modulepreload",href:r},s),ki.set(_,r),l.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_u(_)))return}u=l.createElement("link"),xn(u,"link",r),xt(u),l.head.appendChild(u)}}}function Gx(r,s,l){Zr.S(r,s,l);var u=xl;if(u&&r){var f=js(u).hoistableStyles,_=Nl(r);s=s||"default";var S=f.get(_);if(!S){var I={loading:0,preload:null};if(S=u.querySelector(mu(_)))I.loading=5;else{r=A({rel:"stylesheet",href:r,"data-precedence":s},l),(l=ki.get(_))&&dg(r,l);var L=S=u.createElement("link");xt(L),xn(L,"link",r),L._p=new Promise(function(F,J){L.onload=F,L.onerror=J}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,tf(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:I},f.set(_,S)}}}function Kx(r,s){Zr.X(r,s);var l=xl;if(l&&r){var u=js(l).hoistableScripts,f=kl(r),_=u.get(f);_||(_=l.querySelector(_u(f)),_||(r=A({src:r,async:!0},s),(s=ki.get(f))&&fg(r,s),_=l.createElement("script"),xt(_),xn(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(f,_))}}function Wx(r,s){Zr.M(r,s);var l=xl;if(l&&r){var u=js(l).hoistableScripts,f=kl(r),_=u.get(f);_||(_=l.querySelector(_u(f)),_||(r=A({src:r,async:!0,type:"module"},s),(s=ki.get(f))&&fg(r,s),_=l.createElement("script"),xt(_),xn(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(f,_))}}function Vw(r,s,l,u){var f=(f=st.current)?ef(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Nl(l.href),l=js(f).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Nl(l.href);var _=js(f).hoistableStyles,S=_.get(r);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,S),(_=f.querySelector(mu(r)))&&!_._p&&(S.instance=_,S.state.loading=5),ki.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ki.set(r,l),_||Qx(f,r,l,S.state))),s&&u===null)throw Error(i(528,""));return S}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=kl(l),l=js(f).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Nl(r){return'href="'+Ot(r)+'"'}function mu(r){return'link[rel="stylesheet"]['+r+"]"}function jw(r){return A({},r,{"data-precedence":r.precedence,precedence:null})}function Qx(r,s,l,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),xn(s,"link",l),xt(s),r.head.appendChild(s))}function kl(r){return'[src="'+Ot(r)+'"]'}function _u(r){return"script[async]"+r}function Uw(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Ot(l.href)+'"]');if(u)return s.instance=u,xt(u),u;var f=A({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),xt(u),xn(u,"style",f),tf(u,l.precedence,r),s.instance=u;case"stylesheet":f=Nl(l.href);var _=r.querySelector(mu(f));if(_)return s.state.loading|=4,s.instance=_,xt(_),_;u=jw(l),(f=ki.get(f))&&dg(u,f),_=(r.ownerDocument||r).createElement("link"),xt(_);var S=_;return S._p=new Promise(function(I,L){S.onload=I,S.onerror=L}),xn(_,"link",u),s.state.loading|=4,tf(_,l.precedence,r),s.instance=_;case"script":return _=kl(l.src),(f=r.querySelector(_u(_)))?(s.instance=f,xt(f),f):(u=l,(f=ki.get(_))&&(u=A({},l),fg(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),xt(f),xn(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,tf(u,l.precedence,r));return s.instance}function tf(r,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,_=f,S=0;S<u.length;S++){var I=u[S];if(I.dataset.precedence===s)_=I;else if(_!==f)break}_?_.parentNode.insertBefore(r,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function dg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function fg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var nf=null;function zw(r,s,l){if(nf===null){var u=new Map,f=nf=new Map;f.set(l,u)}else f=nf,u=f.get(l),u||(u=new Map,f.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),f=0;f<l.length;f++){var _=l[f];if(!(_[Ls]||_[dn]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(s)||"";S=r+S;var I=u.get(S);I?I.push(_):u.set(S,[_])}}return u}function Bw(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function Yx(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Fw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var gu=null;function Xx(){}function Zx(r,s,l){if(gu===null)throw Error(i(475));var u=gu;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Nl(l.href),_=r.querySelector(mu(f));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=rf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=_,xt(_);return}_=r.ownerDocument||r,l=jw(l),(f=ki.get(f))&&dg(l,f),_=_.createElement("link"),xt(_);var S=_;S._p=new Promise(function(I,L){S.onload=I,S.onerror=L}),xn(_,"link",l),s.instance=_}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=rf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function Jx(){if(gu===null)throw Error(i(475));var r=gu;return r.stylesheets&&r.count===0&&pg(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&pg(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function rf(){if(this.count--,this.count===0){if(this.stylesheets)pg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var sf=null;function pg(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,sf=new Map,s.forEach(eN,r),sf=null,rf.call(r))}function eN(r,s){if(!(s.state.loading&4)){var l=sf.get(r);if(l)var u=l.get(null);else{l=new Map,sf.set(r,l);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<f.length;_++){var S=f[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}f=s.instance,S=f.getAttribute("data-precedence"),_=l.get(S)||u,_===u&&l.set(null,f),l.set(S,f),this.count++,u=rf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),_?_.parentNode.insertBefore(f,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var yu={$$typeof:x,Provider:null,Consumer:null,_currentValue:je,_currentValue2:je,_threadCount:0};function tN(r,s,l,u,f,_,S,I){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Go(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Go(0),this.hiddenUpdates=Go(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function qw(r,s,l,u,f,_,S,I,L,F,J,ie){return r=new tN(r,s,l,S,I,L,F,ie),s=1,_===!0&&(s|=24),_=xi(3,null,null,s),r.current=_,_.stateNode=r,s=Gm(),s.refCount++,r.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:l,cache:s},A_(_),r}function Hw(r){return r?(r=cl,r):cl}function $w(r,s,l,u,f,_){f=Hw(f),u.context===null?u.context=f:u.pendingContext=f,u=Xs(s),u.payload={element:l},_=_===void 0?null:_,_!==null&&(u.callback=_),l=Zs(r,u,s),l!==null&&(Gn(l,r,s),tu(l,r,s))}function Gw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function mg(r,s){Gw(r,s),(r=r.alternate)&&Gw(r,s)}function Kw(r){if(r.tag===13){var s=Hs(r,67108864);s!==null&&Gn(s,r,67108864),mg(r,67108864)}}var af=!0;function nN(r,s,l,u){var f=w.T;w.T=null;var _=ge.p;try{ge.p=2,_g(r,s,l,u)}finally{ge.p=_,w.T=f}}function iN(r,s,l,u){var f=w.T;w.T=null;var _=ge.p;try{ge.p=8,_g(r,s,l,u)}finally{ge.p=_,w.T=f}}function _g(r,s,l,u){if(af){var f=gg(u);if(f===null)rg(r,s,u,of,l),Qw(r,u);else if(sN(f,r,s,l,u))u.stopPropagation();else if(Qw(r,u),s&4&&-1<rN.indexOf(r)){for(;f!==null;){var _=Nr(f);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Vi(_.pendingLanes);if(S!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var L=1<<31-Fn(S);I.entanglements[1]|=L,S&=~L}gr(_),(kt&6)===0&&(qd=ht()+500,du(0))}}break;case 13:I=Hs(_,2),I!==null&&Gn(I,_,2),Gd(),mg(_,2)}if(_=gg(u),_===null&&rg(r,s,u,of,l),_===f)break;f=_}f!==null&&u.stopPropagation()}else rg(r,s,u,null,l)}}function gg(r){return r=Xo(r),yg(r)}var of=null;function yg(r){if(of=null,r=ji(r),r!==null){var s=ce(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=ue(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return of=r,null}function Ww(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case Be:return 2;case it:return 8;case Zt:case Is:return 32;case xs:return 268435456;default:return 32}default:return 32}}var vg=!1,sa=null,aa=null,oa=null,vu=new Map,Eu=new Map,la=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qw(r,s){switch(r){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":vu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(s.pointerId)}}function wu(r,s,l,u,f,_){return r===null||r.nativeEvent!==_?(r={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:_,targetContainers:[f]},s!==null&&(s=Nr(s),s!==null&&Kw(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function sN(r,s,l,u,f){switch(s){case"focusin":return sa=wu(sa,r,s,l,u,f),!0;case"dragenter":return aa=wu(aa,r,s,l,u,f),!0;case"mouseover":return oa=wu(oa,r,s,l,u,f),!0;case"pointerover":var _=f.pointerId;return vu.set(_,wu(vu.get(_)||null,r,s,l,u,f)),!0;case"gotpointercapture":return _=f.pointerId,Eu.set(_,wu(Eu.get(_)||null,r,s,l,u,f)),!0}return!1}function Yw(r){var s=ji(r.target);if(s!==null){var l=ce(s);if(l!==null){if(s=l.tag,s===13){if(s=ue(l),s!==null){r.blockedOn=s,Ps(r.priority,function(){if(l.tag===13){var u=di(),f=Hs(l,u);f!==null&&Gn(f,l,u),mg(l,u)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function lf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=gg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);vi=u,l.target.dispatchEvent(u),vi=null}else return s=Nr(l),s!==null&&Kw(s),r.blockedOn=l,!1;s.shift()}return!0}function Xw(r,s,l){lf(r)&&l.delete(s)}function aN(){vg=!1,sa!==null&&lf(sa)&&(sa=null),aa!==null&&lf(aa)&&(aa=null),oa!==null&&lf(oa)&&(oa=null),vu.forEach(Xw),Eu.forEach(Xw)}function cf(r,s){r.blockedOn===s&&(r.blockedOn=null,vg||(vg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aN)))}var uf=null;function Zw(r){uf!==r&&(uf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uf===r&&(uf=null);for(var s=0;s<r.length;s+=3){var l=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(yg(u||l)===null)continue;break}var _=Nr(l);_!==null&&(r.splice(s,3),s-=3,l_(_,{pending:!0,data:f,method:l.method,action:u},u,f))}}))}function Tu(r){function s(L){return cf(L,r)}sa!==null&&cf(sa,r),aa!==null&&cf(aa,r),oa!==null&&cf(oa,r),vu.forEach(s),Eu.forEach(s);for(var l=0;l<la.length;l++){var u=la[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<la.length&&(l=la[0],l.blockedOn===null);)Yw(l),l.blockedOn===null&&la.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var f=l[u],_=l[u+1],S=f[en]||null;if(typeof _=="function")S||Zw(l);else if(S){var I=null;if(_&&_.hasAttribute("formAction")){if(f=_,S=_[en]||null)I=S.formAction;else if(yg(f)!==null)continue}else I=S.action;typeof I=="function"?l[u+1]=I:(l.splice(u,3),u-=3),Zw(l)}}}function Eg(r){this._internalRoot=r}hf.prototype.render=Eg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,u=di();$w(l,u,r,s,null,null)},hf.prototype.unmount=Eg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&Al(),$w(r.current,2,null,r,null,null),Gd(),s[xr]=null}};function hf(r){this._internalRoot=r}hf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Xh();r={blockedOn:null,target:r,priority:s};for(var l=0;l<la.length&&s!==0&&s<la[l].priority;l++);la.splice(l,0,r),l===0&&Yw(r)}};var Jw=e.version;if(Jw!=="19.0.0")throw Error(i(527,Jw,"19.0.0"));ge.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=be(s),r=r!==null?ve(r):null,r=r===null?null:r.stateNode,r};var oN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:ji,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{Yn=df.inject(oN),Jt=df}catch{}}return Su.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,u="",f=_1,_=g1,S=y1,I=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(I=s.unstable_transitionCallbacks)),s=qw(r,1,!1,null,null,l,u,f,_,S,I,null),r[xr]=s.current,ig(r.nodeType===8?r.parentNode:r),new Eg(s)},Su.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var u=!1,f="",_=_1,S=g1,I=y1,L=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),s=qw(r,1,!0,s,l??null,u,f,_,S,I,L,F),s.context=Hw(null),l=s.current,u=di(),f=Xs(u),f.callback=null,Zs(l,f,u),s.current.lanes=u,Ut(s,u),gr(s),r[xr]=s.current,ig(r),new hf(s)},Su.version="19.0.0",Su}var sT;function gN(){if(sT)return bg.exports;sT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bg.exports=_N(),bg.exports}var yN=gN(),Cu={},aT;function vN(){if(aT)return Cu;aT=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.parse=c,Cu.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function c(C,x){const O=new o,j=C.length;if(j<2)return O;const D=(x==null?void 0:x.decode)||g;let U=0;do{const $=C.indexOf("=",U);if($===-1)break;const q=C.indexOf(";",U),z=q===-1?j:q;if($>z){U=C.lastIndexOf(";",$-1)+1;continue}const Y=h(C,U,$),W=p(C,$,Y),R=C.slice(Y,W);if(O[R]===void 0){let T=h(C,$+1,z),w=p(C,z,T);const A=D(C.slice(T,w));O[R]=A}U=z+1}while(U<j);return O}function h(C,x,O){do{const j=C.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<O);return O}function p(C,x,O){for(;x>O;){const j=C.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return O}function m(C,x,O){const j=(O==null?void 0:O.encode)||encodeURIComponent;if(!n.test(C))throw new TypeError(`argument name is invalid: ${C}`);const D=j(x);if(!e.test(D))throw new TypeError(`argument val is invalid: ${x}`);let U=C+"="+D;if(!O)return U;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);U+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);U+="; Domain="+O.domain}if(O.path){if(!i.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);U+="; Path="+O.path}if(O.expires){if(!E(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);U+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(U+="; HttpOnly"),O.secure&&(U+="; Secure"),O.partitioned&&(U+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return U}function g(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function E(C){return a.call(C)==="[object Date]"}return Cu}vN();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oT="popstate";function EN(n={}){function e(a,o){let{pathname:c="/",search:h="",hash:p=""}=jo(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),oy("",{pathname:c,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(a,o){let c=a.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let p=a.location.href,m=p.indexOf("#");h=m===-1?p:p.slice(0,m)}return h+"#"+(typeof o=="string"?o:th(o))}function i(a,o){Xi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return TN(e,t,i,n)}function Dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Xi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wN(){return Math.random().toString(36).substring(2,10)}function lT(n,e){return{usr:n.state,key:n.key,idx:e}}function oy(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:t,key:e&&e.key||i||wN()}}function th({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function TN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,h="POP",p=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function E(){h="POP";let D=g(),U=D==null?null:D-m;m=D,p&&p({action:h,location:j.location,delta:U})}function C(D,U){h="PUSH";let $=oy(j.location,D,U);t&&t($,D),m=g()+1;let q=lT($,m),z=j.createHref($);try{c.pushState(q,"",z)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(z)}o&&p&&p({action:h,location:j.location,delta:1})}function x(D,U){h="REPLACE";let $=oy(j.location,D,U);t&&t($,D),m=g();let q=lT($,m),z=j.createHref($);c.replaceState(q,"",z),o&&p&&p({action:h,location:j.location,delta:0})}function O(D){let U=a.location.origin!=="null"?a.location.origin:a.location.href,$=typeof D=="string"?D:th(D);return $=$.replace(/ $/,"%20"),Dt(U,`No window.location.(origin|href) available to create URL for href: ${$}`),new URL($,U)}let j={get action(){return h},get location(){return n(a,c)},listen(D){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(oT,E),p=D,()=>{a.removeEventListener(oT,E),p=null}},createHref(D){return e(a,D)},createURL:O,encodeLocation(D){let U=O(D);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:C,replace:x,go(D){return c.go(D)}};return j}function GS(n,e,t="/"){return bN(n,e,t,!1)}function bN(n,e,t,i){let a=typeof e=="string"?jo(e):e,o=Sa(a.pathname||"/",t);if(o==null)return null;let c=KS(n);SN(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let m=PN(o);h=ON(c[p],m,i)}return h}function KS(n,e=[],t=[],i=""){let a=(o,c,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};p.relativePath.startsWith("/")&&(Dt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let m=ls([i,p.relativePath]),g=t.concat(p);o.children&&o.children.length>0&&(Dt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),KS(o.children,e,g,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:kN(m,o.index),routesMeta:g})};return n.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,c);else for(let p of WS(o.path))a(o,c,p)}),e}function WS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=WS(i.join("/")),h=[];return h.push(...c.map(p=>p===""?o:[o,p].join("/"))),a&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function SN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:DN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var CN=/^:[\w-]+$/,AN=3,RN=2,IN=1,xN=10,NN=-2,cT=n=>n==="*";function kN(n,e){let t=n.split("/"),i=t.length;return t.some(cT)&&(i+=NN),e&&(i+=RN),t.filter(a=>!cT(a)).reduce((a,o)=>a+(CN.test(o)?AN:o===""?IN:xN),i)}function DN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function ON(n,e,t=!1){let{routesMeta:i}=n,a={},o="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],m=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",E=Ff({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),C=p.route;if(!E&&m&&t&&!i[i.length-1].route.index&&(E=Ff({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:ls([o,E.pathname]),pathnameBase:UN(ls([o,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(o=ls([o,E.pathnameBase]))}return c}function Ff(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=MN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((m,{paramName:g,isOptional:E},C)=>{if(g==="*"){let O=h[C]||"";c=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const x=h[C];return E&&!x?m[g]=void 0:m[g]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function MN(n,e=!1,t=!0){Xi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function PN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Sa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function LN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?jo(n):n;return{pathname:t?t.startsWith("/")?t:VN(t,e):e,search:zN(i),hash:BN(a)}}function VN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ag(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function QS(n){let e=jN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function YS(n,e,t,i=!1){let a;typeof n=="string"?a=jo(n):(a={...n},Dt(!a.pathname||!a.pathname.includes("?"),Ag("?","pathname","search",a)),Dt(!a.pathname||!a.pathname.includes("#"),Ag("#","pathname","hash",a)),Dt(!a.search||!a.search.includes("#"),Ag("#","search","hash",a)));let o=n===""||a.pathname==="",c=o?"/":a.pathname,h;if(c==null)h=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let C=c.split("/");for(;C[0]==="..";)C.shift(),E-=1;a.pathname=C.join("/")}h=E>=0?e[E]:"/"}let p=LN(a,h),m=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}var ls=n=>n.join("/").replace(/\/\/+/g,"/"),UN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var XS=["POST","PUT","PATCH","DELETE"];new Set(XS);var qN=["GET",...XS];new Set(qN);var cc=V.createContext(null);cc.displayName="DataRouter";var kp=V.createContext(null);kp.displayName="DataRouterState";var ZS=V.createContext({isTransitioning:!1});ZS.displayName="ViewTransition";var HN=V.createContext(new Map);HN.displayName="Fetchers";var $N=V.createContext(null);$N.displayName="Await";var Ar=V.createContext(null);Ar.displayName="Navigation";var Ah=V.createContext(null);Ah.displayName="Location";var er=V.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var ov=V.createContext(null);ov.displayName="RouteError";function GN(n,{relative:e}={}){Dt(Rh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(Ar),{hash:a,pathname:o,search:c}=Ih(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:ls([t,o])),i.createHref({pathname:h,search:c,hash:a})}function Rh(){return V.useContext(Ah)!=null}function Ts(){return Dt(Rh(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Ah).location}var JS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eC(n){V.useContext(Ar).static||V.useLayoutEffect(n)}function bs(){let{isDataRoute:n}=V.useContext(er);return n?lk():KN()}function KN(){Dt(Rh(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(cc),{basename:e,navigator:t}=V.useContext(Ar),{matches:i}=V.useContext(er),{pathname:a}=Ts(),o=JSON.stringify(QS(i)),c=V.useRef(!1);return eC(()=>{c.current=!0}),V.useCallback((p,m={})=>{if(Xi(c.current,JS),!c.current)return;if(typeof p=="number"){t.go(p);return}let g=YS(p,JSON.parse(o),a,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ls([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,o,a,n])}var WN=V.createContext(null);function QN(n){let e=V.useContext(er).outlet;return e&&V.createElement(WN.Provider,{value:n},e)}function YN(){let{matches:n}=V.useContext(er),e=n[n.length-1];return e?e.params:{}}function Ih(n,{relative:e}={}){let{matches:t}=V.useContext(er),{pathname:i}=Ts(),a=JSON.stringify(QS(t));return V.useMemo(()=>YS(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function XN(n,e){return tC(n,e)}function tC(n,e,t,i){var $;Dt(Rh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=V.useContext(Ar),{matches:c}=V.useContext(er),h=c[c.length-1],p=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",E=h&&h.route;{let q=E&&E.path||"";nC(m,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let C=Ts(),x;if(e){let q=typeof e=="string"?jo(e):e;Dt(g==="/"||(($=q.pathname)==null?void 0:$.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),x=q}else x=C;let O=x.pathname||"/",j=O;if(g!=="/"){let q=g.replace(/^\//,"").split("/");j="/"+O.replace(/^\//,"").split("/").slice(q.length).join("/")}let D=!o&&t&&t.matches&&t.matches.length>0?t.matches:GS(n,{pathname:j});Xi(E||D!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Xi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=nk(D&&D.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:ls([g,a.encodeLocation?a.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:ls([g,a.encodeLocation?a.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),c,t,i);return e&&U?V.createElement(Ah.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},U):U}function ZN(){let n=ok(),e=FN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:o},"ErrorBoundary")," or"," ",V.createElement("code",{style:o},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,c)}var JN=V.createElement(ZN,null),ek=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(er.Provider,{value:this.props.routeContext},V.createElement(ov.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tk({routeContext:n,match:e,children:t}){let i=V.useContext(cc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(er.Provider,{value:n},t)}function nk(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t==null?void 0:t.errors;if(o!=null){let p=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Dt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:g,errors:E}=t,C=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||C){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,m,g)=>{let E,C=!1,x=null,O=null;t&&(E=o&&m.route.id?o[m.route.id]:void 0,x=m.route.errorElement||JN,c&&(h<0&&g===0?(nC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,O=null):h===g&&(C=!0,O=m.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,g+1)),D=()=>{let U;return E?U=x:C?U=O:m.route.Component?U=V.createElement(m.route.Component,null):m.route.element?U=m.route.element:U=p,V.createElement(tk,{match:m,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:U})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?V.createElement(ek,{location:t.location,revalidation:t.revalidation,component:x,error:E,children:D(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):D()},null)}function lv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ik(n){let e=V.useContext(cc);return Dt(e,lv(n)),e}function rk(n){let e=V.useContext(kp);return Dt(e,lv(n)),e}function sk(n){let e=V.useContext(er);return Dt(e,lv(n)),e}function cv(n){let e=sk(n),t=e.matches[e.matches.length-1];return Dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ak(){return cv("useRouteId")}function ok(){var i;let n=V.useContext(ov),e=rk("useRouteError"),t=cv("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function lk(){let{router:n}=ik("useNavigate"),e=cv("useNavigate"),t=V.useRef(!1);return eC(()=>{t.current=!0}),V.useCallback(async(a,o={})=>{Xi(t.current,JS),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var uT={};function nC(n,e,t){!e&&!uT[n]&&(uT[n]=!0,Xi(!1,t))}V.memo(ck);function ck({routes:n,future:e,state:t}){return tC(n,void 0,t,e)}function uk(n){return QN(n.context)}function jl(n){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hk({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){Dt(!Rh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=V.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof t=="string"&&(t=jo(t));let{pathname:p="/",search:m="",hash:g="",state:E=null,key:C="default"}=t,x=V.useMemo(()=>{let O=Sa(p,c);return O==null?null:{location:{pathname:O,search:m,hash:g,state:E,key:C},navigationType:i}},[c,p,m,g,E,C,i]);return Xi(x!=null,`<Router basename="${c}"> is not able to match the URL "${p}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:V.createElement(Ar.Provider,{value:h},V.createElement(Ah.Provider,{children:e,value:x}))}function dk({children:n,location:e}){return XN(ly(n),e)}function ly(n,e=[]){let t=[];return V.Children.forEach(n,(i,a)=>{if(!V.isValidElement(i))return;let o=[...e,a];if(i.type===V.Fragment){t.push.apply(t,ly(i.props.children,o));return}Dt(i.type===jl,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=ly(i.props.children,o)),t.push(c)}),t}var Rf="get",If="application/x-www-form-urlencoded";function Dp(n){return n!=null&&typeof n.tagName=="string"}function fk(n){return Dp(n)&&n.tagName.toLowerCase()==="button"}function pk(n){return Dp(n)&&n.tagName.toLowerCase()==="form"}function mk(n){return Dp(n)&&n.tagName.toLowerCase()==="input"}function _k(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function gk(n,e){return n.button===0&&(!e||e==="_self")&&!_k(n)}var ff=null;function yk(){if(ff===null)try{new FormData(document.createElement("form"),0),ff=!1}catch{ff=!0}return ff}var vk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rg(n){return n!=null&&!vk.has(n)?(Xi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):n}function Ek(n,e){let t,i,a,o,c;if(pk(n)){let h=n.getAttribute("action");i=h?Sa(h,e):null,t=n.getAttribute("method")||Rf,a=Rg(n.getAttribute("enctype"))||If,o=new FormData(n)}else if(fk(n)||mk(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(i=p?Sa(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Rf,a=Rg(n.getAttribute("formenctype"))||Rg(h.getAttribute("enctype"))||If,o=new FormData(h,n),!yk()){let{name:m,type:g,value:E}=n;if(g==="image"){let C=m?`${m}.`:"";o.append(`${C}x`,"0"),o.append(`${C}y`,"0")}else m&&o.append(m,E)}}else{if(Dp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Rf,i=null,a=If,c=n}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:c}}function uv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function wk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Tk(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bk(n,e,t){let i=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await wk(o,t);return c.links?c.links():[]}return[]}));return Rk(i.flat(1).filter(Tk).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function hT(n,e,t,i,a,o){let c=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,h=(p,m)=>{var g;return t[m].pathname!==p.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return o==="assets"?e.filter((p,m)=>c(p,m)||h(p,m)):o==="data"?e.filter((p,m)=>{var E;let g=i.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(c(p,m)||h(p,m))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function Sk(n,e,{includeHydrateFallback:t}={}){return Ck(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function Ck(n){return[...new Set(n)]}function Ak(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Rk(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let o=JSON.stringify(Ak(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function Ik(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function xk(){let n=V.useContext(cc);return uv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Nk(){let n=V.useContext(kp);return uv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var hv=V.createContext(void 0);hv.displayName="FrameworkContext";function iC(){let n=V.useContext(hv);return uv(n,"You must render this element inside a <HydratedRouter> element"),n}function kk(n,e){let t=V.useContext(hv),[i,a]=V.useState(!1),[o,c]=V.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:m,onMouseLeave:g,onTouchStart:E}=e,C=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=U=>{U.forEach($=>{c($.isIntersecting)})},D=new IntersectionObserver(j,{threshold:.5});return C.current&&D.observe(C.current),()=>{D.disconnect()}}},[n]),V.useEffect(()=>{if(i){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[i]);let x=()=>{a(!0)},O=()=>{a(!1),c(!1)};return t?n!=="intent"?[o,C,{}]:[o,C,{onFocus:Au(h,x),onBlur:Au(p,O),onMouseEnter:Au(m,x),onMouseLeave:Au(g,O),onTouchStart:Au(E,x)}]:[!1,C,{}]}function Au(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Dk({page:n,...e}){let{router:t}=xk(),i=V.useMemo(()=>GS(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(Mk,{page:n,matches:i,...e}):null}function Ok(n){let{manifest:e,routeModules:t}=iC(),[i,a]=V.useState([]);return V.useEffect(()=>{let o=!1;return bk(n,e,t).then(c=>{o||a(c)}),()=>{o=!0}},[n,e,t]),i}function Mk({page:n,matches:e,...t}){let i=Ts(),{manifest:a,routeModules:o}=iC(),{loaderData:c,matches:h}=Nk(),p=V.useMemo(()=>hT(n,e,h,a,i,"data"),[n,e,h,a,i]),m=V.useMemo(()=>hT(n,e,h,a,i,"assets"),[n,e,h,a,i]),g=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let x=new Set,O=!1;if(e.forEach(D=>{var $;let U=a.routes[D.route.id];!U||!U.hasLoader||(!p.some(q=>q.route.id===D.route.id)&&D.route.id in c&&(($=o[D.route.id])!=null&&$.shouldRevalidate)||U.hasClientLoader?O=!0:x.add(D.route.id))}),x.size===0)return[];let j=Ik(n);return O&&x.size>0&&j.searchParams.set("_routes",e.filter(D=>x.has(D.route.id)).map(D=>D.route.id).join(",")),[j.pathname+j.search]},[c,i,a,p,e,n,o]),E=V.useMemo(()=>Sk(m,a),[m,a]),C=Ok(m);return V.createElement(V.Fragment,null,g.map(x=>V.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),E.map(x=>V.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),C.map(({key:x,link:O})=>V.createElement("link",{key:x,...O})))}function Pk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rC&&(window.__reactRouterVersion="7.2.0")}catch{}function Lk({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=EN({window:t,v5Compat:!0}));let a=i.current,[o,c]=V.useState({action:a.action,location:a.location}),h=V.useCallback(p=>{V.startTransition(()=>c(p))},[c]);return V.useLayoutEffect(()=>a.listen(h),[a,h]),V.createElement(hk,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a})}var sC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Op=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:h,target:p,to:m,preventScrollReset:g,viewTransition:E,...C},x){let{basename:O}=V.useContext(Ar),j=typeof m=="string"&&sC.test(m),D,U=!1;if(typeof m=="string"&&j&&(D=m,rC))try{let w=new URL(window.location.href),A=m.startsWith("//")?new URL(w.protocol+m):new URL(m),k=Sa(A.pathname,O);A.origin===w.origin&&k!=null?m=k+A.search+A.hash:U=!0}catch{Xi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=GN(m,{relative:a}),[q,z,Y]=kk(i,C),W=zk(m,{replace:c,state:h,target:p,preventScrollReset:g,relative:a,viewTransition:E});function R(w){e&&e(w),w.defaultPrevented||W(w)}let T=V.createElement("a",{...C,...Y,href:D||$,onClick:U||o?e:R,ref:Pk(x,z),target:p,"data-discover":!j&&t==="render"?"true":void 0});return q&&!j?V.createElement(V.Fragment,null,T,V.createElement(Dk,{page:$})):T});Op.displayName="Link";var Vk=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:h,children:p,...m},g){let E=Ih(c,{relative:m.relative}),C=Ts(),x=V.useContext(kp),{navigator:O,basename:j}=V.useContext(Ar),D=x!=null&&$k(E)&&h===!0,U=O.encodeLocation?O.encodeLocation(E).pathname:E.pathname,$=C.pathname,q=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||($=$.toLowerCase(),q=q?q.toLowerCase():null,U=U.toLowerCase()),q&&j&&(q=Sa(q,j)||q);const z=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let Y=$===U||!a&&$.startsWith(U)&&$.charAt(z)==="/",W=q!=null&&(q===U||!a&&q.startsWith(U)&&q.charAt(U.length)==="/"),R={isActive:Y,isPending:W,isTransitioning:D},T=Y?e:void 0,w;typeof i=="function"?w=i(R):w=[i,Y?"active":null,W?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(R):o;return V.createElement(Op,{...m,"aria-current":T,className:w,ref:g,style:A,to:c,viewTransition:h},typeof p=="function"?p(R):p)});Vk.displayName="NavLink";var jk=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:c=Rf,action:h,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:E,...C},x)=>{let O=qk(),j=Hk(h,{relative:m}),D=c.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&sC.test(h),$=q=>{if(p&&p(q),q.defaultPrevented)return;q.preventDefault();let z=q.nativeEvent.submitter,Y=(z==null?void 0:z.getAttribute("formmethod"))||c;O(z||q.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:a,state:o,relative:m,preventScrollReset:g,viewTransition:E})};return V.createElement("form",{ref:x,method:D,action:j,onSubmit:i?p:$,...C,"data-discover":!U&&n==="render"?"true":void 0})});jk.displayName="Form";function Uk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aC(n){let e=V.useContext(cc);return Dt(e,Uk(n)),e}function zk(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:c}={}){let h=bs(),p=Ts(),m=Ih(n,{relative:o});return V.useCallback(g=>{if(gk(g,e)){g.preventDefault();let E=t!==void 0?t:th(p)===th(m);h(n,{replace:E,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[p,h,m,t,i,e,n,a,o,c])}var Bk=0,Fk=()=>`__${String(++Bk)}__`;function qk(){let{router:n}=aC("useSubmit"),{basename:e}=V.useContext(Ar),t=ak();return V.useCallback(async(i,a={})=>{let{action:o,method:c,encType:h,formData:p,body:m}=Ek(i,e);if(a.navigate===!1){let g=a.fetcherKey||Fk();await n.fetch(g,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function Hk(n,{relative:e}={}){let{basename:t}=V.useContext(Ar),i=V.useContext(er);Dt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Ih(n||".",{relative:e})},c=Ts();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),p=h.getAll("index");if(p.some(g=>g==="")){h.delete("index"),p.filter(E=>E).forEach(E=>h.append("index",E));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ls([t,o.pathname])),th(o)}function $k(n,e={}){let t=V.useContext(ZS);Dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=aC("useViewTransitionState"),a=Ih(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Sa(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Sa(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ff(a.pathname,c)!=null||Ff(a.pathname,o)!=null}new TextEncoder;var Ig={exports:{}},xg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT;function Gk(){if(dT)return xg;dT=1;var n=sv();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,o=n.useEffect,c=n.useMemo,h=n.useDebugValue;return xg.useSyncExternalStoreWithSelector=function(p,m,g,E,C){var x=a(null);if(x.current===null){var O={hasValue:!1,value:null};x.current=O}else O=x.current;x=c(function(){function D(Y){if(!U){if(U=!0,$=Y,Y=E(Y),C!==void 0&&O.hasValue){var W=O.value;if(C(W,Y))return q=W}return q=Y}if(W=q,t($,Y))return W;var R=E(Y);return C!==void 0&&C(W,R)?($=Y,W):($=Y,q=R)}var U=!1,$,q,z=g===void 0?null:g;return[function(){return D(m())},z===null?void 0:function(){return D(z())}]},[m,g,E,C]);var j=i(p,x[0],x[1]);return o(function(){O.hasValue=!0,O.value=j},[j]),h(j),j},xg}var fT;function Kk(){return fT||(fT=1,Ig.exports=Gk()),Ig.exports}var Wk=Kk();function Qk(n){n()}function Yk(){let n=null,e=null;return{clear(){n=null,e=null},notify(){Qk(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var pT={notify(){},get:()=>[]};function Xk(n,e){let t,i=pT,a=0,o=!1;function c(j){g();const D=i.subscribe(j);let U=!1;return()=>{U||(U=!0,D(),E())}}function h(){i.notify()}function p(){O.onStateChange&&O.onStateChange()}function m(){return o}function g(){a++,t||(t=n.subscribe(p),i=Yk())}function E(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=pT)}function C(){o||(o=!0,g())}function x(){o&&(o=!1,E())}const O={addNestedSub:c,notifyNestedSubs:h,handleChangeWrapper:p,isSubscribed:m,trySubscribe:C,tryUnsubscribe:x,getListeners:()=>i};return O}var Zk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jk=Zk(),eD=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tD=eD(),nD=()=>Jk||tD?V.useLayoutEffect:V.useEffect,iD=nD(),Ng=Symbol.for("react-redux-context"),kg=typeof globalThis<"u"?globalThis:{};function rD(){if(!V.createContext)return{};const n=kg[Ng]??(kg[Ng]=new Map);let e=n.get(V.createContext);return e||(e=V.createContext(null),n.set(V.createContext,e)),e}var Ca=rD();function sD(n){const{children:e,context:t,serverState:i,store:a}=n,o=V.useMemo(()=>{const p=Xk(a);return{store:a,subscription:p,getServerState:i?()=>i:void 0}},[a,i]),c=V.useMemo(()=>a.getState(),[a]);iD(()=>{const{subscription:p}=o;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==a.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[o,c]);const h=t||Ca;return V.createElement(h.Provider,{value:o},e)}var aD=sD;function dv(n=Ca){return function(){return V.useContext(n)}}var oC=dv();function lC(n=Ca){const e=n===Ca?oC:dv(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var oD=lC();function lD(n=Ca){const e=n===Ca?oD:lC(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Sn=lD(),cD=(n,e)=>n===e;function uD(n=Ca){const e=n===Ca?oC:dv(n),t=(i,a={})=>{const{equalityFn:o=cD}=typeof a=="function"?{equalityFn:a}:a,c=e(),{store:h,subscription:p,getServerState:m}=c;V.useRef(!0);const g=V.useCallback({[i.name](C){return i(C)}}[i.name],[i]),E=Wk.useSyncExternalStoreWithSelector(p.addNestedSub,h.getState,m||h.getState,g,o);return V.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var Ie=uD();function Nn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var hD=typeof Symbol=="function"&&Symbol.observable||"@@observable",mT=hD,Dg=()=>Math.random().toString(36).substring(7).split("").join("."),dD={INIT:`@@redux/INIT${Dg()}`,REPLACE:`@@redux/REPLACE${Dg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Dg()}`},qf=dD;function fv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function cC(n,e,t){if(typeof n!="function")throw new Error(Nn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Nn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Nn(1));return t(cC)(n,e)}let i=n,a=e,o=new Map,c=o,h=0,p=!1;function m(){c===o&&(c=new Map,o.forEach((D,U)=>{c.set(U,D)}))}function g(){if(p)throw new Error(Nn(3));return a}function E(D){if(typeof D!="function")throw new Error(Nn(4));if(p)throw new Error(Nn(5));let U=!0;m();const $=h++;return c.set($,D),function(){if(U){if(p)throw new Error(Nn(6));U=!1,m(),c.delete($),o=null}}}function C(D){if(!fv(D))throw new Error(Nn(7));if(typeof D.type>"u")throw new Error(Nn(8));if(typeof D.type!="string")throw new Error(Nn(17));if(p)throw new Error(Nn(9));try{p=!0,a=i(a,D)}finally{p=!1}return(o=c).forEach($=>{$()}),D}function x(D){if(typeof D!="function")throw new Error(Nn(10));i=D,C({type:qf.REPLACE})}function O(){const D=E;return{subscribe(U){if(typeof U!="object"||U===null)throw new Error(Nn(11));function $(){const z=U;z.next&&z.next(g())}return $(),{unsubscribe:D($)}},[mT](){return this}}}return C({type:qf.INIT}),{dispatch:C,subscribe:E,getState:g,replaceReducer:x,[mT]:O}}function fD(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:qf.INIT})>"u")throw new Error(Nn(12));if(typeof t(void 0,{type:qf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Nn(13))})}function pD(n){const e=Object.keys(n),t={};for(let o=0;o<e.length;o++){const c=e[o];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let a;try{fD(t)}catch(o){a=o}return function(c={},h){if(a)throw a;let p=!1;const m={};for(let g=0;g<i.length;g++){const E=i[g],C=t[E],x=c[E],O=C(x,h);if(typeof O>"u")throw h&&h.type,new Error(Nn(14));m[E]=O,p=p||O!==x}return p=p||i.length!==Object.keys(c).length,p?m:c}}function Hf(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function mD(...n){return e=>(t,i)=>{const a=e(t,i);let o=()=>{throw new Error(Nn(15))};const c={getState:a.getState,dispatch:(p,...m)=>o(p,...m)},h=n.map(p=>p(c));return o=Hf(...h)(a.dispatch),{...a,dispatch:o}}}function _D(n){return fv(n)&&"type"in n&&typeof n.type=="string"}var uC=Symbol.for("immer-nothing"),_T=Symbol.for("immer-draftable"),pi=Symbol.for("immer-state");function Hi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Xl=Object.getPrototypeOf;function Io(n){return!!n&&!!n[pi]}function ps(n){var e;return n?hC(n)||Array.isArray(n)||!!n[_T]||!!((e=n.constructor)!=null&&e[_T])||Pp(n)||Lp(n):!1}var gD=Object.prototype.constructor.toString();function hC(n){if(!n||typeof n!="object")return!1;const e=Xl(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===gD}function $f(n,e){Mp(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function Mp(n){const e=n[pi];return e?e.type_:Array.isArray(n)?1:Pp(n)?2:Lp(n)?3:0}function cy(n,e){return Mp(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function dC(n,e,t){const i=Mp(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function yD(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Pp(n){return n instanceof Map}function Lp(n){return n instanceof Set}function To(n){return n.copy_||n.base_}function uy(n,e){if(Pp(n))return new Map(n);if(Lp(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=hC(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[pi];let a=Reflect.ownKeys(i);for(let o=0;o<a.length;o++){const c=a[o],h=i[c];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[c]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[c]})}return Object.create(Xl(n),i)}else{const i=Xl(n);if(i!==null&&t)return{...n};const a=Object.create(i);return Object.assign(a,n)}}function pv(n,e=!1){return Vp(n)||Io(n)||!ps(n)||(Mp(n)>1&&(n.set=n.add=n.clear=n.delete=vD),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>pv(i,!0))),n}function vD(){Hi(2)}function Vp(n){return Object.isFrozen(n)}var ED={};function xo(n){const e=ED[n];return e||Hi(0,n),e}var nh;function fC(){return nh}function wD(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gT(n,e){e&&(xo("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function hy(n){dy(n),n.drafts_.forEach(TD),n.drafts_=null}function dy(n){n===nh&&(nh=n.parent_)}function yT(n){return nh=wD(nh,n)}function TD(n){const e=n[pi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vT(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[pi].modified_&&(hy(e),Hi(4)),ps(n)&&(n=Gf(e,n),e.parent_||Kf(e,n)),e.patches_&&xo("Patches").generateReplacementPatches_(t[pi].base_,n,e.patches_,e.inversePatches_)):n=Gf(e,t,[]),hy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==uC?n:void 0}function Gf(n,e,t){if(Vp(e))return e;const i=e[pi];if(!i)return $f(e,(a,o)=>ET(n,i,e,a,o,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return Kf(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,c=!1;i.type_===3&&(o=new Set(a),a.clear(),c=!0),$f(o,(h,p)=>ET(n,i,a,h,p,t,c)),Kf(n,a,!1),t&&n.patches_&&xo("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function ET(n,e,t,i,a,o,c){if(Io(a)){const h=o&&e&&e.type_!==3&&!cy(e.assigned_,i)?o.concat(i):void 0,p=Gf(n,a,h);if(dC(t,i,p),Io(p))n.canAutoFreeze_=!1;else return}else c&&t.add(a);if(ps(a)&&!Vp(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Gf(n,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&Kf(n,a)}}function Kf(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&pv(e,t)}function bD(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:fC(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,o=mv;t&&(a=[i],o=ih);const{revoke:c,proxy:h}=Proxy.revocable(a,o);return i.draft_=h,i.revoke_=c,h}var mv={get(n,e){if(e===pi)return n;const t=To(n);if(!cy(t,e))return SD(n,t,e);const i=t[e];return n.finalized_||!ps(i)?i:i===Og(n.base_,e)?(Mg(n),n.copy_[e]=py(i,n)):i},has(n,e){return e in To(n)},ownKeys(n){return Reflect.ownKeys(To(n))},set(n,e,t){const i=pC(To(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=Og(To(n),e),o=a==null?void 0:a[pi];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(yD(t,a)&&(t!==void 0||cy(n.base_,e)))return!0;Mg(n),fy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Og(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Mg(n),fy(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=To(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Hi(11)},getPrototypeOf(n){return Xl(n.base_)},setPrototypeOf(){Hi(12)}},ih={};$f(mv,(n,e)=>{ih[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ih.deleteProperty=function(n,e){return ih.set.call(this,n,e,void 0)};ih.set=function(n,e,t){return mv.set.call(this,n[0],e,t,n[0])};function Og(n,e){const t=n[pi];return(t?To(t):n)[e]}function SD(n,e,t){var a;const i=pC(e,t);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function pC(n,e){if(!(e in n))return;let t=Xl(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Xl(t)}}function fy(n){n.modified_||(n.modified_=!0,n.parent_&&fy(n.parent_))}function Mg(n){n.copy_||(n.copy_=uy(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var CD=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const c=this;return function(p=o,...m){return c.produce(p,g=>t.call(this,g,...m))}}typeof t!="function"&&Hi(6),i!==void 0&&typeof i!="function"&&Hi(7);let a;if(ps(e)){const o=yT(this),c=py(e,void 0);let h=!0;try{a=t(c),h=!1}finally{h?hy(o):dy(o)}return gT(o,i),vT(a,o)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===uC&&(a=void 0),this.autoFreeze_&&pv(a,!0),i){const o=[],c=[];xo("Patches").generateReplacementPatches_(e,a,o,c),i(o,c)}return a}else Hi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(c,...h)=>this.produceWithPatches(c,p=>e(p,...h));let i,a;return[this.produce(e,t,(c,h)=>{i=c,a=h}),i,a]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){ps(n)||Hi(8),Io(n)&&(n=AD(n));const e=yT(this),t=py(n,void 0);return t[pi].isManual_=!0,dy(e),t}finishDraft(n,e){const t=n&&n[pi];(!t||!t.isManual_)&&Hi(9);const{scope_:i}=t;return gT(i,e),vT(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=xo("Patches").applyPatches_;return Io(n)?i(n,e):this.produce(n,a=>i(a,e))}};function py(n,e){const t=Pp(n)?xo("MapSet").proxyMap_(n,e):Lp(n)?xo("MapSet").proxySet_(n,e):bD(n,e);return(e?e.scope_:fC()).drafts_.push(t),t}function AD(n){return Io(n)||Hi(10,n),mC(n)}function mC(n){if(!ps(n)||Vp(n))return n;const e=n[pi];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=uy(n,e.scope_.immer_.useStrictShallowCopy_)}else t=uy(n,!0);return $f(t,(i,a)=>{dC(t,i,mC(a))}),e&&(e.finalized_=!1),t}var mi=new CD,_C=mi.produce;mi.produceWithPatches.bind(mi);mi.setAutoFreeze.bind(mi);mi.setUseStrictShallowCopy.bind(mi);mi.applyPatches.bind(mi);mi.createDraft.bind(mi);mi.finishDraft.bind(mi);function gC(n){return({dispatch:t,getState:i})=>a=>o=>typeof o=="function"?o(t,i,n):a(o)}var RD=gC(),ID=gC,xD=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hf:Hf.apply(null,arguments)},ND=n=>n&&typeof n.match=="function";function zu(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(cs(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>_D(i)&&i.type===n,t}var yC=class Ou extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ou.prototype)}static get[Symbol.species](){return Ou}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ou(...e[0].concat(this)):new Ou(...e.concat(this))}};function wT(n){return ps(n)?_C(n,()=>{}):n}function TT(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function kD(n){return typeof n=="boolean"}var DD=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=e??{};let c=new yC;return t&&(kD(t)?c.push(RD):c.push(ID(t.extraArgument))),c},OD="RTK_autoBatch",bT=n=>e=>{setTimeout(e,n)},MD=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,o=!1,c=!1;const h=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bT(10):n.type==="callback"?n.queueNotification:bT(n.timeout),m=()=>{c=!1,o&&(o=!1,h.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const E=()=>a&&g(),C=i.subscribe(E);return h.add(g),()=>{C(),h.delete(g)}},dispatch(g){var E;try{return a=!((E=g==null?void 0:g.meta)!=null&&E[OD]),o=!a,o&&(c||(c=!0,p(m))),i.dispatch(g)}finally{a=!0}}})},PD=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new yC(n);return i&&a.push(MD(typeof i=="object"?i:void 0)),a};function LD(n){const e=DD(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:o=void 0,enhancers:c=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(fv(t))h=pD(t);else throw new Error(cs(1));let p;typeof i=="function"?p=i(e):p=e();let m=Hf;a&&(m=xD({trace:!1,...typeof a=="object"&&a}));const g=mD(...p),E=PD(g);let C=typeof c=="function"?c(E):E();const x=m(...C);return cC(h,o,x)}function vC(n){const e={},t=[];let i;const a={addCase(o,c){const h=typeof o=="string"?o:o.type;if(!h)throw new Error(cs(28));if(h in e)throw new Error(cs(29));return e[h]=c,a},addMatcher(o,c){return t.push({matcher:o,reducer:c}),a},addDefaultCase(o){return i=o,a}};return n(a),[e,t,i]}function VD(n){return typeof n=="function"}function jD(n,e){let[t,i,a]=vC(e),o;if(VD(n))o=()=>wT(n());else{const h=wT(n);o=()=>h}function c(h=o(),p){let m=[t[p.type],...i.filter(({matcher:g})=>g(p)).map(({reducer:g})=>g)];return m.filter(g=>!!g).length===0&&(m=[a]),m.reduce((g,E)=>{if(E)if(Io(g)){const x=E(g,p);return x===void 0?g:x}else{if(ps(g))return _C(g,C=>E(C,p));{const C=E(g,p);if(C===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return g},h)}return c.getInitialState=o,c}var UD=(n,e)=>ND(n)?n.match(e):n(e);function zD(...n){return e=>n.some(t=>UD(t,e))}var BD="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",FD=(n=21)=>{let e="",t=n;for(;t--;)e+=BD[Math.random()*64|0];return e},qD=["name","message","stack","code"],Pg=class{constructor(n,e){wg(this,"_type");this.payload=n,this.meta=e}},ST=class{constructor(n,e){wg(this,"_type");this.payload=n,this.meta=e}},HD=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of qD)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},Va=(()=>{function n(e,t,i){const a=zu(e+"/fulfilled",(p,m,g,E)=>({payload:p,meta:{...E||{},arg:g,requestId:m,requestStatus:"fulfilled"}})),o=zu(e+"/pending",(p,m,g)=>({payload:void 0,meta:{...g||{},arg:m,requestId:p,requestStatus:"pending"}})),c=zu(e+"/rejected",(p,m,g,E,C)=>({payload:E,error:(i&&i.serializeError||HD)(p||"Rejected"),meta:{...C||{},arg:g,requestId:m,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function h(p){return(m,g,E)=>{const C=i!=null&&i.idGenerator?i.idGenerator(p):FD(),x=new AbortController;let O,j;function D($){j=$,x.abort()}const U=async function(){var z,Y;let $;try{let W=(z=i==null?void 0:i.condition)==null?void 0:z.call(i,p,{getState:g,extra:E});if(GD(W)&&(W=await W),W===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const R=new Promise((T,w)=>{O=()=>{w({name:"AbortError",message:j||"Aborted"})},x.signal.addEventListener("abort",O)});m(o(C,p,(Y=i==null?void 0:i.getPendingMeta)==null?void 0:Y.call(i,{requestId:C,arg:p},{getState:g,extra:E}))),$=await Promise.race([R,Promise.resolve(t(p,{dispatch:m,getState:g,extra:E,requestId:C,signal:x.signal,abort:D,rejectWithValue:(T,w)=>new Pg(T,w),fulfillWithValue:(T,w)=>new ST(T,w)})).then(T=>{if(T instanceof Pg)throw T;return T instanceof ST?a(T.payload,C,p,T.meta):a(T,C,p)})])}catch(W){$=W instanceof Pg?c(null,C,p,W.payload,W.meta):c(W,C,p)}finally{O&&x.signal.removeEventListener("abort",O)}return i&&!i.dispatchConditionRejection&&c.match($)&&$.meta.condition||m($),$}();return Object.assign(U,{abort:D,requestId:C,arg:p,unwrap(){return U.then($D)}})}}return Object.assign(h,{pending:o,rejected:c,fulfilled:a,settled:zD(c,a),typePrefix:e})}return n.withTypes=()=>n,n})();function $D(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function GD(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var KD=Symbol.for("rtk-slice-createasyncthunk");function WD(n,e){return`${n}/${e}`}function QD({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[KD];return function(a){const{name:o,reducerPath:c=o}=a;if(!o)throw new Error(cs(11));const h=(typeof a.reducers=="function"?a.reducers(XD()):a.reducers)||{},p=Object.keys(h),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(q,z){const Y=typeof q=="string"?q:q.type;if(!Y)throw new Error(cs(12));if(Y in m.sliceCaseReducersByType)throw new Error(cs(13));return m.sliceCaseReducersByType[Y]=z,g},addMatcher(q,z){return m.sliceMatchers.push({matcher:q,reducer:z}),g},exposeAction(q,z){return m.actionCreators[q]=z,g},exposeCaseReducer(q,z){return m.sliceCaseReducersByName[q]=z,g}};p.forEach(q=>{const z=h[q],Y={reducerName:q,type:WD(o,q),createNotation:typeof a.reducers=="function"};JD(z)?tO(Y,z,g,e):ZD(Y,z,g)});function E(){const[q={},z=[],Y=void 0]=typeof a.extraReducers=="function"?vC(a.extraReducers):[a.extraReducers],W={...q,...m.sliceCaseReducersByType};return jD(a.initialState,R=>{for(let T in W)R.addCase(T,W[T]);for(let T of m.sliceMatchers)R.addMatcher(T.matcher,T.reducer);for(let T of z)R.addMatcher(T.matcher,T.reducer);Y&&R.addDefaultCase(Y)})}const C=q=>q,x=new Map;let O;function j(q,z){return O||(O=E()),O(q,z)}function D(){return O||(O=E()),O.getInitialState()}function U(q,z=!1){function Y(R){let T=R[q];return typeof T>"u"&&z&&(T=D()),T}function W(R=C){const T=TT(x,z,()=>new WeakMap);return TT(T,R,()=>{const w={};for(const[A,k]of Object.entries(a.selectors??{}))w[A]=YD(k,R,D,z);return w})}return{reducerPath:q,getSelectors:W,get selectors(){return W(Y)},selectSlice:Y}}const $={name:o,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:D,...U(c),injectInto(q,{reducerPath:z,...Y}={}){const W=z??c;return q.inject({reducerPath:W,reducer:j},Y),{...$,...U(W,!0)}}};return $}}function YD(n,e,t,i){function a(o,...c){let h=e(o);return typeof h>"u"&&i&&(h=t()),n(h,...c)}return a.unwrapped=n,a}var Ss=QD();function XD(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function ZD({type:n,reducerName:e,createNotation:t},i,a){let o,c;if("reducer"in i){if(t&&!eO(i))throw new Error(cs(17));o=i.reducer,c=i.prepare}else o=i;a.addCase(n,o).exposeCaseReducer(e,o).exposeAction(e,c?zu(n,c):zu(n))}function JD(n){return n._reducerDefinitionType==="asyncThunk"}function eO(n){return n._reducerDefinitionType==="reducerWithPrepare"}function tO({type:n,reducerName:e},t,i,a){if(!a)throw new Error(cs(18));const{payloadCreator:o,fulfilled:c,pending:h,rejected:p,settled:m,options:g}=t,E=a(n,o,g);i.exposeAction(e,E),c&&i.addCase(E.fulfilled,c),h&&i.addCase(E.pending,h),p&&i.addCase(E.rejected,p),m&&i.addMatcher(E.settled,m),i.exposeCaseReducer(e,{fulfilled:c||pf,pending:h||pf,rejected:p||pf,settled:m||pf})}function pf(){}function cs(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const EC=Ss({name:"menu",initialState:{isMenuVisible:!1,isRegistrationVisible:!1,isNewsSectionVisible:!1,isCategoryListVisible:!1,isSettingsVisible:!1,isOrderHistoryVisible:!1,isOrderModalOpen:!1,isFavoritesVisible:!1,selectedCategory:null},reducers:{toggleMenu:n=>{n.isMenuVisible=!n.isMenuVisible},closeMenu:n=>{n.isMenuVisible=!1},toggleRegistration:(n,e)=>{n.isRegistrationVisible=e.payload??!n.isRegistrationVisible},toggleNewsSection:(n,e)=>{n.isNewsSectionVisible=e.payload??!n.isNewsSectionVisible},toggleCategoryList:(n,e)=>{n.isCategoryListVisible=e.payload??!n.isCategoryListVisible},toggleSettingsPanel:(n,e)=>{n.isSettingsVisible=e.payload??!n.isSettingsVisible},toggleOrderHistory:(n,e)=>{n.isOrderHistoryVisible=e.payload??!n.isOrderHistoryVisible},toggleFavorites:(n,e)=>{n.isFavoritesVisible=e.payload??!n.isFavoritesVisible},toggleOrderModal:(n,e)=>{n.isOrderModalOpen=e.payload??!n.isOrderModalOpen}}}),{toggleMenu:nO,closeMenu:CT,toggleFavorites:No,toggleRegistration:rh,toggleNewsSection:my,toggleCategoryList:Wf,toggleSettingsPanel:_y,toggleOrderHistory:gy,toggleOrderModal:AT}=EC.actions,iO=EC.reducer,rO=()=>{};var RT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(n,e){if(!n)throw uc(e)},uc=function(n){return new Error("Firebase Database ("+wC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},sO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],h=n[t++],p=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const o=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},_v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,h=c?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,g=o>>2,E=(o&3)<<4|h>>4;let C=(h&15)<<2|m>>6,x=m&63;p||(x=64,c||(C=64)),i.push(t[g],t[E],t[C],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||m==null||E==null)throw new aO;const C=o<<2|h>>4;if(i.push(C),m!==64){const x=h<<4&240|m>>2;if(i.push(x),E!==64){const O=m<<6&192|E;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class aO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bC=function(n){const e=TC(n);return _v.encodeByteArray(e,!0)},Qf=function(n){return bC(n).replace(/\./g,"")},Yf=function(n){try{return _v.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(n){return SC(void 0,n)}function SC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!lO(t)||(n[t]=SC(n[t],e[t]));return n}function lO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=()=>cO().__FIREBASE_DEFAULTS__,hO=()=>{if(typeof process>"u"||typeof RT>"u")return;const n=RT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yf(n[1]);return e&&JSON.parse(e)},jp=()=>{try{return rO()||uO()||hO()||dO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},CC=n=>{var e,t;return(t=(e=jp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},gv=n=>{const e=CC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},AC=()=>{var n;return(n=jp())===null||n===void 0?void 0:n.config},RC=n=>{var e;return(e=jp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qf(JSON.stringify(t)),Qf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function fO(){var n;const e=(n=jp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _O(){const n=zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gO(){return wC.NODE_ADMIN===!0}function yO(){return!fO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vO(){try{return typeof indexedDB=="object"}catch{return!1}}function EO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="FirebaseError";class Rr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=wO,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xh.prototype.create)}}class xh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?TO(o,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Rr(a,h,i)}}function TO(n,e){return n.replace(bO,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const bO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(n){return JSON.parse(n)}function ln(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=function(n){let e={},t={},i={},a="";try{const o=n.split(".");e=sh(Yf(o[0])||""),t=sh(Yf(o[1])||""),a=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},SO=function(n){const e=xC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},CO=function(n){const e=xC(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Zl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function yy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xf(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function Aa(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=n[a],c=e[a];if(IT(o)&&IT(c)){if(!Aa(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function IT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Pu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)i[E]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let E=0;E<16;E++)i[E]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let E=16;E<80;E++){const C=i[E-3]^i[E-8]^i[E-14]^i[E-16];i[E]=(C<<1|C>>>31)&4294967295}let a=this.chain_[0],o=this.chain_[1],c=this.chain_[2],h=this.chain_[3],p=this.chain_[4],m,g;for(let E=0;E<80;E++){E<40?E<20?(m=h^o&(c^h),g=1518500249):(m=o^c^h,g=1859775393):E<60?(m=o&c|h&(o|c),g=2400959708):(m=o^c^h,g=3395469782);const C=(a<<5|a>>>27)+m+p+g+i[E]&4294967295;p=h,h=c,c=(o<<30|o>>>2)&4294967295,o=a,a=C}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const o=this.buf_;let c=this.inbuf_;for(;a<t;){if(c===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(o[c]=e.charCodeAt(a),++c,++a,c===this.blockSize){this.compress_(o),c=0;break}}else for(;a<t;)if(o[c]=e[a],++c,++a,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[a]>>o&255,++i;return e}}function RO(n,e){const t=new IO(n,e);return t.subscribe.bind(t)}class IO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");xO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Lg),a.error===void 0&&(a.error=Lg),a.complete===void 0&&(a.complete=Lg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lg(){}function Ev(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const o=a-55296;i++,oe(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;a=65536+(o<<10)+c}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},zp=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class ms{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Up;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OO(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DO(n){return n===bo?void 0:n}function OO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const PO={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},LO=$e.INFO,VO={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},jO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=VO[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bp{constructor(e){this.name=e,this._logLevel=LO,this._logHandler=jO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const UO=(n,e)=>e.some(t=>n instanceof t);let xT,NT;function zO(){return xT||(xT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BO(){return NT||(NT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NC=new WeakMap,vy=new WeakMap,kC=new WeakMap,Vg=new WeakMap,wv=new WeakMap;function FO(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(ga(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&NC.set(t,n)}).catch(()=>{}),wv.set(e,n),e}function qO(n){if(vy.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});vy.set(n,e)}let Ey={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ga(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HO(n){Ey=n(Ey)}function $O(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jg(this),e,...t);return kC.set(i,e.sort?e.sort():[e]),ga(i)}:BO().includes(n)?function(...e){return n.apply(jg(this),e),ga(NC.get(this))}:function(...e){return ga(n.apply(jg(this),e))}}function GO(n){return typeof n=="function"?$O(n):(n instanceof IDBTransaction&&qO(n),UO(n,zO())?new Proxy(n,Ey):n)}function ga(n){if(n instanceof IDBRequest)return FO(n);if(Vg.has(n))return Vg.get(n);const e=GO(n);return e!==n&&(Vg.set(n,e),wv.set(e,n)),e}const jg=n=>wv.get(n);function KO(n,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),h=ga(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ga(c.result),p.oldVersion,p.newVersion,ga(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{o&&p.addEventListener("close",()=>o()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const WO=["get","getKey","getAll","getAllKeys","count"],QO=["put","add","delete","clear"],Ug=new Map;function kT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ug.get(e))return Ug.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=QO.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||WO.includes(t)))return;const o=async function(c,...h){const p=this.transaction(c,a?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&p.done]))[0]};return Ug.set(e,o),o}HO(n=>({...n,get:(e,t,i)=>kT(e,t)||n.get(e,t,i),has:(e,t)=>!!kT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function XO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wy="@firebase/app",DT="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Bp("@firebase/app"),ZO="@firebase/app-compat",JO="@firebase/analytics-compat",e4="@firebase/analytics",t4="@firebase/app-check-compat",n4="@firebase/app-check",i4="@firebase/auth",r4="@firebase/auth-compat",s4="@firebase/database",a4="@firebase/data-connect",o4="@firebase/database-compat",l4="@firebase/functions",c4="@firebase/functions-compat",u4="@firebase/installations",h4="@firebase/installations-compat",d4="@firebase/messaging",f4="@firebase/messaging-compat",p4="@firebase/performance",m4="@firebase/performance-compat",_4="@firebase/remote-config",g4="@firebase/remote-config-compat",y4="@firebase/storage",v4="@firebase/storage-compat",E4="@firebase/firestore",w4="@firebase/vertexai",T4="@firebase/firestore-compat",b4="firebase",S4="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="[DEFAULT]",C4={[wy]:"fire-core",[ZO]:"fire-core-compat",[e4]:"fire-analytics",[JO]:"fire-analytics-compat",[n4]:"fire-app-check",[t4]:"fire-app-check-compat",[i4]:"fire-auth",[r4]:"fire-auth-compat",[s4]:"fire-rtdb",[a4]:"fire-data-connect",[o4]:"fire-rtdb-compat",[l4]:"fire-fn",[c4]:"fire-fn-compat",[u4]:"fire-iid",[h4]:"fire-iid-compat",[d4]:"fire-fcm",[f4]:"fire-fcm-compat",[p4]:"fire-perf",[m4]:"fire-perf-compat",[_4]:"fire-rc",[g4]:"fire-rc-compat",[y4]:"fire-gcs",[v4]:"fire-gcs-compat",[E4]:"fire-fst",[T4]:"fire-fst-compat",[w4]:"fire-vertex","fire-js":"fire-js",[b4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new Map,A4=new Map,by=new Map;function OT(n,e){try{n.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ra(n){const e=n.name;if(by.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;by.set(e,n);for(const t of Zf.values())OT(t,n);for(const t of A4.values())OT(t,n);return!0}function Nh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ei(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new xh("app","Firebase",R4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=S4;function DC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ty,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw ya.create("bad-app-name",{appName:String(a)});if(t||(t=AC()),!t)throw ya.create("no-options");const o=Zf.get(a);if(o){if(Aa(t,o.options)&&Aa(i,o.config))return o;throw ya.create("duplicate-app",{appName:a})}const c=new MO(a);for(const p of by.values())c.addComponent(p);const h=new I4(t,i,c);return Zf.set(a,h),h}function Fp(n=Ty){const e=Zf.get(n);if(!e&&n===Ty&&AC())return DC();if(!e)throw ya.create("no-app",{appName:n});return e}function Mi(n,e,t){var i;let a=(i=C4[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(h.join(" "));return}Ra(new ms(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",N4=1,ah="firebase-heartbeat-store";let zg=null;function OC(){return zg||(zg=KO(x4,N4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ah)}catch(t){console.warn(t)}}}}).catch(n=>{throw ya.create("idb-open",{originalErrorMessage:n.message})})),zg}async function k4(n){try{const t=(await OC()).transaction(ah),i=await t.objectStore(ah).get(MC(n));return await t.done,i}catch(e){if(e instanceof Rr)_s.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(t.message)}}}async function MT(n,e){try{const i=(await OC()).transaction(ah,"readwrite");await i.objectStore(ah).put(e,MC(n)),await i.done}catch(t){if(t instanceof Rr)_s.warn(t.message);else{const i=ya.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_s.warn(i.message)}}}function MC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=1024,O4=30;class M4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new L4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=PT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>O4){const c=V4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_s.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=PT(),{heartbeatsToSend:i,unsentEntries:a}=P4(this._heartbeatsCache.heartbeats),o=Qf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return _s.warn(t),""}}}function PT(){return new Date().toISOString().substring(0,10)}function P4(n,e=D4){const t=[];let i=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),LT(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),LT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class L4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vO()?EO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await k4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function LT(n){return Qf(JSON.stringify({version:2,heartbeats:n})).length}function V4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n){Ra(new ms("platform-logger",e=>new YO(e),"PRIVATE")),Ra(new ms("heartbeat",e=>new M4(e),"PRIVATE")),Mi(wy,DT,n),Mi(wy,DT,"esm2017"),Mi("fire-js","")}j4("");var U4="firebase",z4="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(U4,z4,"app");var VT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var va,PC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function w(){}w.prototype=T.prototype,R.D=T.prototype,R.prototype=new w,R.prototype.constructor=R,R.C=function(A,k,P){for(var M=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)M[Ae-2]=arguments[Ae];return T.prototype[k].apply(A,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,T,w){w||(w=0);var A=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)A[k]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(k=0;16>k;++k)A[k]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=R.g[0],w=R.g[1],k=R.g[2];var P=R.g[3],M=T+(P^w&(k^P))+A[0]+3614090360&4294967295;T=w+(M<<7&4294967295|M>>>25),M=P+(k^T&(w^k))+A[1]+3905402710&4294967295,P=T+(M<<12&4294967295|M>>>20),M=k+(w^P&(T^w))+A[2]+606105819&4294967295,k=P+(M<<17&4294967295|M>>>15),M=w+(T^k&(P^T))+A[3]+3250441966&4294967295,w=k+(M<<22&4294967295|M>>>10),M=T+(P^w&(k^P))+A[4]+4118548399&4294967295,T=w+(M<<7&4294967295|M>>>25),M=P+(k^T&(w^k))+A[5]+1200080426&4294967295,P=T+(M<<12&4294967295|M>>>20),M=k+(w^P&(T^w))+A[6]+2821735955&4294967295,k=P+(M<<17&4294967295|M>>>15),M=w+(T^k&(P^T))+A[7]+4249261313&4294967295,w=k+(M<<22&4294967295|M>>>10),M=T+(P^w&(k^P))+A[8]+1770035416&4294967295,T=w+(M<<7&4294967295|M>>>25),M=P+(k^T&(w^k))+A[9]+2336552879&4294967295,P=T+(M<<12&4294967295|M>>>20),M=k+(w^P&(T^w))+A[10]+4294925233&4294967295,k=P+(M<<17&4294967295|M>>>15),M=w+(T^k&(P^T))+A[11]+2304563134&4294967295,w=k+(M<<22&4294967295|M>>>10),M=T+(P^w&(k^P))+A[12]+1804603682&4294967295,T=w+(M<<7&4294967295|M>>>25),M=P+(k^T&(w^k))+A[13]+4254626195&4294967295,P=T+(M<<12&4294967295|M>>>20),M=k+(w^P&(T^w))+A[14]+2792965006&4294967295,k=P+(M<<17&4294967295|M>>>15),M=w+(T^k&(P^T))+A[15]+1236535329&4294967295,w=k+(M<<22&4294967295|M>>>10),M=T+(k^P&(w^k))+A[1]+4129170786&4294967295,T=w+(M<<5&4294967295|M>>>27),M=P+(w^k&(T^w))+A[6]+3225465664&4294967295,P=T+(M<<9&4294967295|M>>>23),M=k+(T^w&(P^T))+A[11]+643717713&4294967295,k=P+(M<<14&4294967295|M>>>18),M=w+(P^T&(k^P))+A[0]+3921069994&4294967295,w=k+(M<<20&4294967295|M>>>12),M=T+(k^P&(w^k))+A[5]+3593408605&4294967295,T=w+(M<<5&4294967295|M>>>27),M=P+(w^k&(T^w))+A[10]+38016083&4294967295,P=T+(M<<9&4294967295|M>>>23),M=k+(T^w&(P^T))+A[15]+3634488961&4294967295,k=P+(M<<14&4294967295|M>>>18),M=w+(P^T&(k^P))+A[4]+3889429448&4294967295,w=k+(M<<20&4294967295|M>>>12),M=T+(k^P&(w^k))+A[9]+568446438&4294967295,T=w+(M<<5&4294967295|M>>>27),M=P+(w^k&(T^w))+A[14]+3275163606&4294967295,P=T+(M<<9&4294967295|M>>>23),M=k+(T^w&(P^T))+A[3]+4107603335&4294967295,k=P+(M<<14&4294967295|M>>>18),M=w+(P^T&(k^P))+A[8]+1163531501&4294967295,w=k+(M<<20&4294967295|M>>>12),M=T+(k^P&(w^k))+A[13]+2850285829&4294967295,T=w+(M<<5&4294967295|M>>>27),M=P+(w^k&(T^w))+A[2]+4243563512&4294967295,P=T+(M<<9&4294967295|M>>>23),M=k+(T^w&(P^T))+A[7]+1735328473&4294967295,k=P+(M<<14&4294967295|M>>>18),M=w+(P^T&(k^P))+A[12]+2368359562&4294967295,w=k+(M<<20&4294967295|M>>>12),M=T+(w^k^P)+A[5]+4294588738&4294967295,T=w+(M<<4&4294967295|M>>>28),M=P+(T^w^k)+A[8]+2272392833&4294967295,P=T+(M<<11&4294967295|M>>>21),M=k+(P^T^w)+A[11]+1839030562&4294967295,k=P+(M<<16&4294967295|M>>>16),M=w+(k^P^T)+A[14]+4259657740&4294967295,w=k+(M<<23&4294967295|M>>>9),M=T+(w^k^P)+A[1]+2763975236&4294967295,T=w+(M<<4&4294967295|M>>>28),M=P+(T^w^k)+A[4]+1272893353&4294967295,P=T+(M<<11&4294967295|M>>>21),M=k+(P^T^w)+A[7]+4139469664&4294967295,k=P+(M<<16&4294967295|M>>>16),M=w+(k^P^T)+A[10]+3200236656&4294967295,w=k+(M<<23&4294967295|M>>>9),M=T+(w^k^P)+A[13]+681279174&4294967295,T=w+(M<<4&4294967295|M>>>28),M=P+(T^w^k)+A[0]+3936430074&4294967295,P=T+(M<<11&4294967295|M>>>21),M=k+(P^T^w)+A[3]+3572445317&4294967295,k=P+(M<<16&4294967295|M>>>16),M=w+(k^P^T)+A[6]+76029189&4294967295,w=k+(M<<23&4294967295|M>>>9),M=T+(w^k^P)+A[9]+3654602809&4294967295,T=w+(M<<4&4294967295|M>>>28),M=P+(T^w^k)+A[12]+3873151461&4294967295,P=T+(M<<11&4294967295|M>>>21),M=k+(P^T^w)+A[15]+530742520&4294967295,k=P+(M<<16&4294967295|M>>>16),M=w+(k^P^T)+A[2]+3299628645&4294967295,w=k+(M<<23&4294967295|M>>>9),M=T+(k^(w|~P))+A[0]+4096336452&4294967295,T=w+(M<<6&4294967295|M>>>26),M=P+(w^(T|~k))+A[7]+1126891415&4294967295,P=T+(M<<10&4294967295|M>>>22),M=k+(T^(P|~w))+A[14]+2878612391&4294967295,k=P+(M<<15&4294967295|M>>>17),M=w+(P^(k|~T))+A[5]+4237533241&4294967295,w=k+(M<<21&4294967295|M>>>11),M=T+(k^(w|~P))+A[12]+1700485571&4294967295,T=w+(M<<6&4294967295|M>>>26),M=P+(w^(T|~k))+A[3]+2399980690&4294967295,P=T+(M<<10&4294967295|M>>>22),M=k+(T^(P|~w))+A[10]+4293915773&4294967295,k=P+(M<<15&4294967295|M>>>17),M=w+(P^(k|~T))+A[1]+2240044497&4294967295,w=k+(M<<21&4294967295|M>>>11),M=T+(k^(w|~P))+A[8]+1873313359&4294967295,T=w+(M<<6&4294967295|M>>>26),M=P+(w^(T|~k))+A[15]+4264355552&4294967295,P=T+(M<<10&4294967295|M>>>22),M=k+(T^(P|~w))+A[6]+2734768916&4294967295,k=P+(M<<15&4294967295|M>>>17),M=w+(P^(k|~T))+A[13]+1309151649&4294967295,w=k+(M<<21&4294967295|M>>>11),M=T+(k^(w|~P))+A[4]+4149444226&4294967295,T=w+(M<<6&4294967295|M>>>26),M=P+(w^(T|~k))+A[11]+3174756917&4294967295,P=T+(M<<10&4294967295|M>>>22),M=k+(T^(P|~w))+A[2]+718787259&4294967295,k=P+(M<<15&4294967295|M>>>17),M=w+(P^(k|~T))+A[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(k+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+P&4294967295}i.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var w=T-this.blockSize,A=this.B,k=this.h,P=0;P<T;){if(k==0)for(;P<=w;)a(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<T;)if(A[k++]=R.charCodeAt(P++),k==this.blockSize){a(this,A),k=0;break}}else for(;P<T;)if(A[k++]=R[P++],k==this.blockSize){a(this,A),k=0;break}}this.h=k,this.o+=T},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var w=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=w&255,w/=256;for(this.u(R),R=Array(16),T=w=0;4>T;++T)for(var A=0;32>A;A+=8)R[w++]=this.g[T]>>>A&255;return R};function o(R,T){var w=h;return Object.prototype.hasOwnProperty.call(w,R)?w[R]:w[R]=T(R)}function c(R,T){this.h=T;for(var w=[],A=!0,k=R.length-1;0<=k;k--){var P=R[k]|0;A&&P==T||(w[k]=P,A=!1)}this.g=w}var h={};function p(R){return-128<=R&&128>R?o(R,function(T){return new c([T|0],0>T?-1:0)}):new c([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return E;if(0>R)return D(m(-R));for(var T=[],w=1,A=0;R>=w;A++)T[A]=R/w|0,w*=4294967296;return new c(T,0)}function g(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return D(g(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=m(Math.pow(T,8)),A=E,k=0;k<R.length;k+=8){var P=Math.min(8,R.length-k),M=parseInt(R.substring(k,k+P),T);8>P?(P=m(Math.pow(T,P)),A=A.j(P).add(m(M))):(A=A.j(w),A=A.add(m(M)))}return A}var E=p(0),C=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-D(this).m();for(var R=0,T=1,w=0;w<this.g.length;w++){var A=this.i(w);R+=(0<=A?A:4294967296+A)*T,T*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O(this))return"0";if(j(this))return"-"+D(this).toString(R);for(var T=m(Math.pow(R,6)),w=this,A="";;){var k=z(w,T).g;w=U(w,k.j(T));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(R);if(w=k,O(w))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function O(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function j(R){return R.h==-1}n.l=function(R){return R=U(this,R),j(R)?-1:O(R)?0:1};function D(R){for(var T=R.g.length,w=[],A=0;A<T;A++)w[A]=~R.g[A];return new c(w,~R.h).add(C)}n.abs=function(){return j(this)?D(this):this},n.add=function(R){for(var T=Math.max(this.g.length,R.g.length),w=[],A=0,k=0;k<=T;k++){var P=A+(this.i(k)&65535)+(R.i(k)&65535),M=(P>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);A=M>>>16,P&=65535,M&=65535,w[k]=M<<16|P}return new c(w,w[w.length-1]&-2147483648?-1:0)};function U(R,T){return R.add(D(T))}n.j=function(R){if(O(this)||O(R))return E;if(j(this))return j(R)?D(this).j(D(R)):D(D(this).j(R));if(j(R))return D(this.j(D(R)));if(0>this.l(x)&&0>R.l(x))return m(this.m()*R.m());for(var T=this.g.length+R.g.length,w=[],A=0;A<2*T;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<R.g.length;k++){var P=this.i(A)>>>16,M=this.i(A)&65535,Ae=R.i(k)>>>16,Le=R.i(k)&65535;w[2*A+2*k]+=M*Le,$(w,2*A+2*k),w[2*A+2*k+1]+=P*Le,$(w,2*A+2*k+1),w[2*A+2*k+1]+=M*Ae,$(w,2*A+2*k+1),w[2*A+2*k+2]+=P*Ae,$(w,2*A+2*k+2)}for(A=0;A<T;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=T;A<2*T;A++)w[A]=0;return new c(w,0)};function $(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function q(R,T){this.g=R,this.h=T}function z(R,T){if(O(T))throw Error("division by zero");if(O(R))return new q(E,E);if(j(R))return T=z(D(R),T),new q(D(T.g),D(T.h));if(j(T))return T=z(R,D(T)),new q(D(T.g),T.h);if(30<R.g.length){if(j(R)||j(T))throw Error("slowDivide_ only works with positive integers.");for(var w=C,A=T;0>=A.l(R);)w=Y(w),A=Y(A);var k=W(w,1),P=W(A,1);for(A=W(A,2),w=W(w,2);!O(A);){var M=P.add(A);0>=M.l(R)&&(k=k.add(w),P=M),A=W(A,1),w=W(w,1)}return T=U(R,k.j(T)),new q(k,T)}for(k=E;0<=R.l(T);){for(w=Math.max(1,Math.floor(R.m()/T.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=m(w),M=P.j(T);j(M)||0<M.l(R);)w-=A,P=m(w),M=P.j(T);O(P)&&(P=C),k=k.add(P),R=U(R,M)}return new q(k,R)}n.A=function(R){return z(this,R).h},n.and=function(R){for(var T=Math.max(this.g.length,R.g.length),w=[],A=0;A<T;A++)w[A]=this.i(A)&R.i(A);return new c(w,this.h&R.h)},n.or=function(R){for(var T=Math.max(this.g.length,R.g.length),w=[],A=0;A<T;A++)w[A]=this.i(A)|R.i(A);return new c(w,this.h|R.h)},n.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),w=[],A=0;A<T;A++)w[A]=this.i(A)^R.i(A);return new c(w,this.h^R.h)};function Y(R){for(var T=R.g.length+1,w=[],A=0;A<T;A++)w[A]=R.i(A)<<1|R.i(A-1)>>>31;return new c(w,R.h)}function W(R,T){var w=T>>5;T%=32;for(var A=R.g.length-w,k=[],P=0;P<A;P++)k[P]=0<T?R.i(P+w)>>>T|R.i(P+w+1)<<32-T:R.i(P+w);return new c(k,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,PC=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,va=c}).apply(typeof VT<"u"?VT:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LC,Lu,VC,xf,Sy,jC,UC,zC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,b){return d==Array.prototype||d==Object.prototype||(d[y]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function a(d,y){if(y)e:{var b=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var G=d[N];if(!(G in b))break e;b=b[G]}d=d[d.length-1],N=b[d],y=y(N),y!=N&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}function o(d,y){d instanceof String&&(d+="");var b=0,N=!1,G={next:function(){if(!N&&b<d.length){var X=b++;return{value:y(X,d[X]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(d){return d||function(){return o(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function m(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,b){return d.call.apply(d.bind,arguments)}function E(d,y,b){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),d.apply(y,G)}}return function(){return d.apply(y,arguments)}}function C(d,y,b){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:E,C.apply(null,arguments)}function x(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function O(d,y){function b(){}b.prototype=y.prototype,d.aa=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(N,G,X){for(var ae=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ae[Je-2]=arguments[Je];return y.prototype[G].apply(N,ae)}}function j(d){const y=d.length;if(0<y){const b=Array(y);for(let N=0;N<y;N++)b[N]=d[N];return b}return[]}function D(d,y){for(let b=1;b<arguments.length;b++){const N=arguments[b];if(p(N)){const G=d.length||0,X=N.length||0;d.length=G+X;for(let ae=0;ae<X;ae++)d[G+ae]=N[ae]}else d.push(N)}}class U{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(d){return/^[\s\xa0]*$/.test(d)}function q(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function z(d){return z[" "](d),d}z[" "]=function(){};var Y=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function W(d,y,b){for(const N in d)y.call(b,d[N],N,d)}function R(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function T(d){const y={};for(const b in d)y[b]=d[b];return y}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,y){let b,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(b in N)d[b]=N[b];for(let X=0;X<w.length;X++)b=w[X],Object.prototype.hasOwnProperty.call(N,b)&&(d[b]=N[b])}}function k(d){var y=1;d=d.split(":");const b=[];for(;0<y&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function P(d){h.setTimeout(()=>{throw d},0)}function M(){var d=ue;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Ae{constructor(){this.h=this.g=null}add(y,b){const N=Le.get();N.set(y,b),this.h?this.h.next=N:this.g=N,this.h=N}}var Le=new U(()=>new re,d=>d.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ce=!1,ue=new Ae,Pe=()=>{const d=h.Promise.resolve(void 0);se=()=>{d.then(be)}};var be=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(b){P(b)}var y=Le;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}ce=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return d}();function je(d,y){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(Y){e:{try{z(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:It[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&je.aa.h.call(this)}}O(je,le);var It={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),Re=0;function Ee(d,y,b,N,G){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!N,this.ha=G,this.key=++Re,this.da=this.fa=!1}function we(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function pe(d){this.src=d,this.g={},this.h=0}pe.prototype.add=function(d,y,b,N,G){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var ae=st(d,y,N,G);return-1<ae?(y=d[ae],b||(y.fa=!1)):(y=new Ee(y,this.src,X,!!N,G),y.fa=b,d.push(y)),y};function rt(d,y){var b=y.type;if(b in d.g){var N=d.g[b],G=Array.prototype.indexOf.call(N,y,void 0),X;(X=0<=G)&&Array.prototype.splice.call(N,G,1),X&&(we(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function st(d,y,b,N){for(var G=0;G<d.length;++G){var X=d[G];if(!X.da&&X.listener==y&&X.capture==!!b&&X.ha==N)return G}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Ye={};function ke(d,y,b,N,G){if(Array.isArray(y)){for(var X=0;X<y.length;X++)ke(d,y[X],b,N,G);return null}return b=Bn(b),d&&d[Rt]?d.K(y,b,m(N)?!!N.capture:!1,G):Cn(d,y,b,!1,N,G)}function Cn(d,y,b,N,G,X){if(!y)throw Error("Invalid event type");var ae=m(G)?!!G.capture:!!G,Je=Li(d);if(Je||(d[Ke]=Je=new pe(d)),b=Je.add(y,b,N,ae,X),b.proxy)return b;if(N=Ne(),b.proxy=N,N.src=d,N.listener=b,d.addEventListener)ge||(G=ae),G===void 0&&(G=!1),d.addEventListener(y.toString(),N,G);else if(d.attachEvent)d.attachEvent(si(y.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Ne(){function d(b){return y.call(d.src,d.listener,b)}const y=Qn;return d}function dt(d,y,b,N,G){if(Array.isArray(y))for(var X=0;X<y.length;X++)dt(d,y[X],b,N,G);else N=m(N)?!!N.capture:!!N,b=Bn(b),d&&d[Rt]?(d=d.i,y=String(y).toString(),y in d.g&&(X=d.g[y],b=st(X,b,N,G),-1<b&&(we(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete d.g[y],d.h--)))):d&&(d=Li(d))&&(y=d.g[y.toString()],d=-1,y&&(d=st(y,b,N,G)),(b=-1<d?y[d]:null)&&On(b))}function On(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Rt])rt(y.i,d);else{var b=d.type,N=d.proxy;y.removeEventListener?y.removeEventListener(b,N,d.capture):y.detachEvent?y.detachEvent(si(b),N):y.addListener&&y.removeListener&&y.removeListener(N),(b=Li(y))?(rt(b,d),b.h==0&&(b.src=null,y[Ke]=null)):we(d)}}}function si(d){return d in Ye?Ye[d]:Ye[d]="on"+d}function Qn(d,y){if(d.da)d=!0;else{y=new je(y,this);var b=d.listener,N=d.ha||d.src;d.fa&&On(d),d=b.call(N,y)}return d}function Li(d){return d=d[Ke],d instanceof pe?d:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bn(d){return typeof d=="function"?d:(d[ht]||(d[ht]=function(y){return d.handleEvent(y)}),d[ht])}function Be(){ve.call(this),this.i=new pe(this),this.M=this,this.F=null}O(Be,ve),Be.prototype[Rt]=!0,Be.prototype.removeEventListener=function(d,y,b,N){dt(this,d,y,b,N)};function it(d,y){var b,N=d.F;if(N)for(b=[];N;N=N.F)b.push(N);if(d=d.M,N=y.type||y,typeof y=="string")y=new le(y,d);else if(y instanceof le)y.target=y.target||d;else{var G=y;y=new le(N,d),A(y,G)}if(G=!0,b)for(var X=b.length-1;0<=X;X--){var ae=y.g=b[X];G=Zt(ae,N,!0,y)&&G}if(ae=y.g=d,G=Zt(ae,N,!0,y)&&G,G=Zt(ae,N,!1,y)&&G,b)for(X=0;X<b.length;X++)ae=y.g=b[X],G=Zt(ae,N,!1,y)&&G}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var b=d.g[y],N=0;N<b.length;N++)we(b[N]);delete d.g[y],d.h--}}this.F=null},Be.prototype.K=function(d,y,b,N){return this.i.add(String(d),y,!1,b,N)},Be.prototype.L=function(d,y,b,N){return this.i.add(String(d),y,!0,b,N)};function Zt(d,y,b,N){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,X=0;X<y.length;++X){var ae=y[X];if(ae&&!ae.da&&ae.capture==b){var Je=ae.listener,tn=ae.ha||ae.src;ae.fa&&rt(d.i,ae),G=Je.call(tn,N)!==!1&&G}}return G&&!N.defaultPrevented}function Is(d,y,b){if(typeof d=="function")b&&(d=C(d,b));else if(d&&typeof d.handleEvent=="function")d=C(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(d,y||0)}function xs(d){d.g=Is(()=>{d.g=null,d.i&&(d.i=!1,xs(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class tr extends ve{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:xs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(d){ve.call(this),this.h=d,this.g={}}O(hn,ve);var Yn=[];function Jt(d){W(d.g,function(y,b){this.g.hasOwnProperty(b)&&On(y)},d),d.g={}}hn.prototype.N=function(){hn.aa.N.call(this),Jt(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wc=h.JSON.stringify,nr=h.JSON.parse,Fn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Tc(){}Tc.prototype.h=null;function Kh(d){return d.h||(d.h=d.i())}function Wh(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ns(){le.call(this,"d")}O(Ns,le);function Vi(){le.call(this,"c")}O(Vi,le);var _i={},ks=null;function $o(){return ks=ks||new Be}_i.La="serverreachability";function bc(d){le.call(this,_i.La,d)}O(bc,le);function Ds(d){const y=$o();it(y,new bc(y))}_i.STAT_EVENT="statevent";function Go(d,y){le.call(this,_i.STAT_EVENT,d),this.stat=y}O(Go,le);function Ut(d){const y=$o();it(y,new Go(y,d))}_i.Ma="timingevent";function Qh(d,y){le.call(this,_i.Ma,d),this.size=y}O(Qh,le);function Os(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function Yh(d,y,b,N,G,X){d.info(function(){if(d.g)if(X)for(var ae="",Je=X.split("&"),tn=0;tn<Je.length;tn++){var et=Je[tn].split("=");if(1<et.length){var pn=et[0];et=et[1];var nn=pn.split("_");ae=2<=nn.length&&nn[1]=="type"?ae+(pn+"="+et+"&"):ae+(pn+"=redacted&")}}else ae=null;else ae=X;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+y+`
`+b+`
`+ae})}function Xh(d,y,b,N,G,X,ae){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+y+`
`+b+`
`+X+" "+ae})}function Ps(d,y,b,N){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+dn(d,b)+(N?" "+N:"")})}function rr(d,y){d.info(function(){return"TIMEOUT: "+y})}Ms.prototype.info=function(){};function dn(d,y){if(!d.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var N=b[d];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ae=1;ae<G.length;ae++)G[ae]=""}}}}return wc(b)}catch{return y}}var en={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qa;function Ko(){}O(Ko,Tc),Ko.prototype.g=function(){return new XMLHttpRequest},Ko.prototype.i=function(){return{}},qa=new Ko;function sr(d,y,b,N){this.j=d,this.i=y,this.l=b,this.R=N||1,this.U=new hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sc}function Sc(){this.i=null,this.g="",this.h=!1}var Ls={},Ha={};function ji(d,y,b){d.L=1,d.v=Ka(Ot(y)),d.m=b,d.P=!0,Nr(d,null)}function Nr(d,y){d.F=Date.now(),xt(d),d.A=Ot(d.v);var b=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),Or(b.i,"t",N),d.C=0,b=d.j.J,d.h=new Sc,d.g=hd(d.j,b?y:null,!d.m),0<d.O&&(d.M=new tr(C(d.Y,d,d.g),d.O)),y=d.U,b=d.g,N=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(Yn[0]=G.toString()),G=Yn);for(var X=0;X<G.length;X++){var ae=ke(b,G[X],N||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Ds(),Yh(d.i,d.u,d.A,d.l,d.R,d.m)}sr.prototype.ca=function(d){d=d.target;const y=this.M;y&&wi(d)==3?y.j():this.Y(d)},sr.prototype.Y=function(d){try{if(d==this.g)e:{const nn=wi(this.g);var y=this.g.Ba();const Vr=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||id(this.g)))){this.J||nn!=4||y==7||(y==8||0>=Vr?Ds(3):Ds(2)),Wo(this);var b=this.g.Z();this.X=b;t:if(Vs(this)){var N=id(this.g);d="";var G=N.length,X=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),ai(this);var ae="";break t}this.h.i=new h.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,d+=this.h.i.decode(N[y],{stream:!(X&&y==G-1)});N.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=b==200,Xh(this.i,this.u,this.A,this.l,this.R,nn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,tn=this.g;if((Je=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Je)){var et=Je;break t}}et=null}if(b=et)Ps(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oi(this,b);else{this.o=!1,this.s=3,Ut(12),Xn(this),ai(this);break e}}if(this.P){b=!0;let An;for(;!this.J&&this.C<ae.length;)if(An=js(this,ae),An==Ha){nn==4&&(this.s=4,Ut(14),b=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Ls){this.s=4,Ut(15),Ps(this.i,this.l,ae,"[Invalid Chunk]"),b=!1;break}else Ps(this.i,this.l,An,null),oi(this,An);if(Vs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||ae.length!=0||this.h.h||(this.s=1,Ut(16),b=!1),this.o=this.o&&b,!b)Ps(this.i,this.l,ae,"[Invalid Chunked Response]"),Xn(this),ai(this);else if(0<ae.length&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.ba&&!pn.M&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),eo(pn),pn.M=!0,Ut(11))}}else Ps(this.i,this.l,ae,null),oi(this,ae);nn==4&&Xn(this),this.o&&!this.J&&(nn==4?ld(this.j,this):(this.o=!1,xt(this)))}else Nm(this.g),b==400&&0<ae.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Xn(this),ai(this)}}}catch{}finally{}};function Vs(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function js(d,y){var b=d.C,N=y.indexOf(`
`,b);return N==-1?Ha:(b=Number(y.substring(b,N)),isNaN(b)?Ls:(N+=1,N+b>y.length?Ha:(y=y.slice(N,N+b),d.C=N+b,y)))}sr.prototype.cancel=function(){this.J=!0,Xn(this)};function xt(d){d.S=Date.now()+d.I,Cc(d,d.I)}function Cc(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Os(C(d.ba,d),y)}function Wo(d){d.B&&(h.clearTimeout(d.B),d.B=null)}sr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(rr(this.i,this.A),this.L!=2&&(Ds(),Ut(17)),Xn(this),this.s=2,ai(this)):Cc(this,this.S-d)};function ai(d){d.j.G==0||d.J||ld(d.j,d)}function Xn(d){Wo(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Jt(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function oi(d,y){try{var b=d.j;if(b.G!=0&&(b.g==d||Us(b.h,d))){if(!d.K&&Us(b.h,d)&&b.G==3){try{var N=b.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)rl(b),nl(b);else break e;Lc(b),Ut(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&b.v==0&&!b.C&&(b.C=Os(C(b.Za,b),6e3));if(1>=Zh(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Lr(b,11)}else if((d.K||b.g==d)&&rl(b),!$(y))for(G=b.Da.g.parse(y),y=0;y<G.length;y++){let et=G[y];if(b.T=et[0],et=et[1],b.G==2)if(et[0]=="c"){b.K=et[1],b.ia=et[2];const pn=et[3];pn!=null&&(b.la=pn,b.j.info("VER="+b.la));const nn=et[4];nn!=null&&(b.Aa=nn,b.j.info("SVER="+b.Aa));const Vr=et[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(N=1.5*Vr,b.L=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const An=d.g;if(An){const dr=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dr){var X=N.h;X.g||dr.indexOf("spdy")==-1&&dr.indexOf("quic")==-1&&dr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(zs(X,X.h),X.h=null))}if(N.D){const jc=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;jc&&(N.ya=jc,at(N.I,N.D,jc))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),N=b;var ae=d;if(N.qa=ud(N,N.J?N.ia:null,N.W),ae.K){gi(N.h,ae);var Je=ae,tn=N.L;tn&&(Je.I=tn),Je.B&&(Wo(Je),xt(Je)),N.g=ae}else ad(N);0<b.i.length&&il(b)}else et[0]!="stop"&&et[0]!="close"||Lr(b,7);else b.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Lr(b,7):Mc(b):et[0]!="noop"&&b.l&&b.l.ta(et),b.v=0)}}Ds(4)}catch{}}var Cm=class{constructor(d,y){this.g=d,this.map=y}};function Ac(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Zh(d){return d.h?1:d.g?d.g.size:0}function Us(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function zs(d,y){d.g?d.g.add(y):d.h=y}function gi(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Ac.prototype.cancel=function(){if(this.i=qn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function qn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.D);return y}return j(d.i)}function Jh(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var y=[],b=d.length,N=0;N<b;N++)y.push(d[N]);return y}y=[],b=0;for(N in d)y[b++]=d[N];return y}function Am(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var y=[];d=d.length;for(var b=0;b<d;b++)y.push(b);return y}y=[],b=0;for(const N in d)y[b++]=N;return y}}}function $a(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var b=Am(d),N=Jh(d),G=N.length,X=0;X<G;X++)y.call(void 0,N[X],b&&b[X],d)}var Ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(d,y){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var N=d[b].indexOf("="),G=null;if(0<=N){var X=d[b].substring(0,N);G=d[b].substring(N+1)}else X=d[b];y(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function kr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof kr){this.h=d.h,Bs(this,d.j),this.o=d.o,this.g=d.g,Ga(this,d.s),this.l=d.l;var y=d.i,b=new ar;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Yo(this,b),this.m=d.m}else d&&(y=String(d).match(Ic))?(this.h=!1,Bs(this,y[1]||"",!0),this.o=Fs(y[2]||""),this.g=Fs(y[3]||"",!0),Ga(this,y[4]),this.l=Fs(y[5]||"",!0),Yo(this,y[6]||"",!0),this.m=Fs(y[7]||"")):(this.h=!1,this.i=new ar(null,this.h))}kr.prototype.toString=function(){var d=[],y=this.j;y&&d.push(yi(y,xc,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(yi(y,xc,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(yi(b,b.charAt(0)=="/"?Nc:ed,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",yi(b,xm)),d.join("")};function Ot(d){return new kr(d)}function Bs(d,y,b){d.j=b?Fs(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Ga(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Yo(d,y,b){y instanceof ar?(d.i=y,kc(d.i,d.h)):(b||(y=yi(y,Im)),d.i=new ar(y,d.h))}function at(d,y,b){d.i.set(y,b)}function Ka(d){return at(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fs(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function yi(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,Rm),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Rm(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var xc=/[#\/\?@]/g,ed=/[#\?:]/g,Nc=/[#\?]/g,Im=/[#\?@]/g,xm=/#/g;function ar(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function vi(d){d.g||(d.g=new Map,d.h=0,d.i&&Qo(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=ar.prototype,n.add=function(d,y){vi(this),this.i=null,d=Mr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function Xo(d,y){vi(d),y=Mr(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Dr(d,y){return vi(d),y=Mr(d,y),d.g.has(y)}n.forEach=function(d,y){vi(this),this.g.forEach(function(b,N){b.forEach(function(G){d.call(y,G,N,this)},this)},this)},n.na=function(){vi(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let N=0;N<y.length;N++){const G=d[N];for(let X=0;X<G.length;X++)b.push(y[N])}return b},n.V=function(d){vi(this);let y=[];if(typeof d=="string")Dr(this,d)&&(y=y.concat(this.g.get(Mr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)y=y.concat(d[b])}return y},n.set=function(d,y){return vi(this),this.i=null,d=Mr(this,d),Dr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Or(d,y,b){Xo(d,y),0<b.length&&(d.i=null,d.g.set(Mr(d,y),j(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var N=y[b];const X=encodeURIComponent(String(N)),ae=this.V(N);for(N=0;N<ae.length;N++){var G=X;ae[N]!==""&&(G+="="+encodeURIComponent(String(ae[N]))),d.push(G)}}return this.i=d.join("&")};function Mr(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function kc(d,y){y&&!d.j&&(vi(d),d.i=null,d.g.forEach(function(b,N){var G=N.toLowerCase();N!=G&&(Xo(this,N),Or(this,G,b))},d)),d.j=y}function td(d,y){const b=new Ms;if(h.Image){const N=new Image;N.onload=x(Ei,b,"TestLoadImage: loaded",!0,y,N),N.onerror=x(Ei,b,"TestLoadImage: error",!1,y,N),N.onabort=x(Ei,b,"TestLoadImage: abort",!1,y,N),N.ontimeout=x(Ei,b,"TestLoadImage: timeout",!1,y,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else y(!1)}function Wa(d,y){const b=new Ms,N=new AbortController,G=setTimeout(()=>{N.abort(),Ei(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:N.signal}).then(X=>{clearTimeout(G),X.ok?Ei(b,"TestPingServer: ok",!0,y):Ei(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Ei(b,"TestPingServer: error",!1,y)})}function Ei(d,y,b,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(b)}catch{}}function Qa(){this.g=new Fn}function or(d,y,b){const N=b||"";try{$a(d,function(G,X){let ae=G;m(G)&&(ae=wc(G)),y.push(N+X+"="+encodeURIComponent(ae))})}catch(G){throw y.push(N+"type="+encodeURIComponent("_badmap")),G}}function qs(d){this.l=d.Ub||null,this.j=d.eb||!1}O(qs,Tc),qs.prototype.g=function(){return new Pr(this.l,this.j)},qs.prototype.i=function(d){return function(){return d}}({});function Pr(d,y){Be.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Pr,Be),n=Pr.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,cr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dc(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dc(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?lr(this):cr(this),this.readyState==3&&Dc(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,lr(this))},n.Qa=function(d){this.g&&(this.response=d,lr(this))},n.ga=function(){this.g&&lr(this)};function lr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,cr(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function cr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Oc(d){let y="";return W(d,function(b,N){y+=N,y+=":",y+=b,y+=`\r
`}),y}function fn(d,y,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=Oc(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):at(d,y,b))}function ft(d){Be.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ft,Be);var Zo=/^https?$/i,Ya=["POST","PUT"];n=ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qa.g(),this.v=this.o?Kh(this.o):Kh(qa),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(X){nd(this,X);return}if(d=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)b.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const X of N.keys())b.set(X,N.get(X));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),G=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ya,y,void 0))||N||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ae]of b)this.g.setRequestHeader(X,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xa(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){nd(this,X)}};function nd(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Jo(d),ur(d)}function Jo(d){d.A||(d.A=!0,it(d,"complete"),it(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,it(this,"complete"),it(this,"abort"),ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?el(this):this.bb())},n.bb=function(){el(this)};function el(d){if(d.h&&typeof c<"u"&&(!d.v[1]||wi(d)!=4||d.Z()!=2)){if(d.u&&wi(d)==4)Is(d.Ea,0,d);else if(it(d,"readystatechange"),wi(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var N;if(N=ae===0){var G=String(d.D).match(Ic)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),N=!Zo.test(G?G.toLowerCase():"")}b=N}if(b)it(d,"complete"),it(d,"success");else{d.m=6;try{var X=2<wi(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Jo(d)}}finally{ur(d)}}}}function ur(d,y){if(d.g){Xa(d);const b=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||it(d,"ready");try{b.onreadystatechange=N}catch{}}}function Xa(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function wi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),nr(y)}};function id(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Nm(d){const y={};d=(d.g&&2<=wi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if($(d[N]))continue;var b=k(d[N]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=y[G]||[];y[G]=X,X.push(b)}R(y,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Za(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function tl(d){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Za("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Za("baseRetryDelayMs",5e3,d),this.cb=Za("retryDelaySeedMs",1e4,d),this.Wa=Za("forwardChannelMaxRetries",2,d),this.wa=Za("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ac(d&&d.concurrentRequestLimit),this.Da=new Qa,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tl.prototype,n.la=8,n.G=1,n.connect=function(d,y,b,N){Ut(0),this.W=d,this.H=y||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.I=ud(this,null,this.W),il(this)};function Mc(d){if(rd(d),d.G==3){var y=d.U++,b=Ot(d.I);if(at(b,"SID",d.K),at(b,"RID",y),at(b,"TYPE","terminate"),Ja(d,b),y=new sr(d,d.j,y),y.L=2,y.v=Ka(Ot(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=hd(y.j,null),y.g.ea(y.v)),y.F=Date.now(),xt(y)}cd(d)}function nl(d){d.g&&(eo(d),d.g.cancel(),d.g=null)}function rd(d){nl(d),d.u&&(h.clearTimeout(d.u),d.u=null),rl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function il(d){if(!Rc(d.h)&&!d.s){d.s=!0;var y=d.Ga;se||Pe(),ce||(se(),ce=!0),ue.add(y,d),d.B=0}}function km(d,y){return Zh(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Os(C(d.Ga,d,y),Vc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new sr(this,this.j,d);let X=this.o;if(this.S&&(X?(X=T(X),A(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=sd(this,G,y),b=Ot(this.I),at(b,"RID",d),at(b,"CVER",22),this.D&&at(b,"X-HTTP-Session-Id",this.D),Ja(this,b),X&&(this.O?y="headers="+encodeURIComponent(String(Oc(X)))+"&"+y:this.m&&fn(b,this.m,X)),zs(this.h,G),this.Ua&&at(b,"TYPE","init"),this.P?(at(b,"$req",y),at(b,"SID","null"),G.T=!0,ji(G,b,null)):ji(G,b,y),this.G=2}}else this.G==3&&(d?Pc(this,d):this.i.length==0||Rc(this.h)||Pc(this))};function Pc(d,y){var b;y?b=y.l:b=d.U++;const N=Ot(d.I);at(N,"SID",d.K),at(N,"RID",b),at(N,"AID",d.T),Ja(d,N),d.m&&d.o&&fn(N,d.m,d.o),b=new sr(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),y&&(d.i=y.D.concat(d.i)),y=sd(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),zs(d.h,b),ji(b,N,y)}function Ja(d,y){d.H&&W(d.H,function(b,N){at(y,N,b)}),d.l&&$a({},function(b,N){at(y,N,b)})}function sd(d,y,b){b=Math.min(d.i.length,b);var N=d.l?C(d.l.Na,d.l,d):null;e:{var G=d.i;let X=-1;for(;;){const ae=["count="+b];X==-1?0<b?(X=G[0].g,ae.push("ofs="+X)):X=0:ae.push("ofs="+X);let Je=!0;for(let tn=0;tn<b;tn++){let et=G[tn].g;const pn=G[tn].map;if(et-=X,0>et)X=Math.max(0,G[tn].g-100),Je=!1;else try{or(pn,ae,"req"+et+"_")}catch{N&&N(pn)}}if(Je){N=ae.join("&");break e}}}return d=d.i.splice(0,b),y.D=d,N}function ad(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;se||Pe(),ce||(se(),ce=!0),ue.add(y,d),d.v=0}}function Lc(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Os(C(d.Fa,d),Vc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,od(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Os(C(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),nl(this),od(this))};function eo(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function od(d){d.g=new sr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Ot(d.qa);at(y,"RID","rpc"),at(y,"SID",d.K),at(y,"AID",d.T),at(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&at(y,"TO",d.ja),at(y,"TYPE","xmlhttp"),Ja(d,y),d.m&&d.o&&fn(y,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Ka(Ot(y)),b.m=null,b.P=!0,Nr(b,d)}n.Za=function(){this.C!=null&&(this.C=null,nl(this),Lc(this),Ut(19))};function rl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function ld(d,y){var b=null;if(d.g==y){rl(d),eo(d),d.g=null;var N=2}else if(Us(d.h,y))b=y.D,gi(d.h,y),N=1;else return;if(d.G!=0){if(y.o)if(N==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var G=d.B;N=$o(),it(N,new Qh(N,b)),il(d)}else ad(d);else if(G=y.s,G==3||G==0&&0<y.X||!(N==1&&km(d,y)||N==2&&Lc(d)))switch(b&&0<b.length&&(y=d.h,y.i=y.i.concat(b)),G){case 1:Lr(d,5);break;case 4:Lr(d,10);break;case 3:Lr(d,6);break;default:Lr(d,2)}}}function Vc(d,y){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*y}function Lr(d,y){if(d.j.info("Error code "+y),y==2){var b=C(d.fb,d),N=d.Xa;const G=!N;N=new kr(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Bs(N,"https"),Ka(N),G?td(N.toString(),b):Wa(N.toString(),b)}else Ut(2);d.G=0,d.l&&d.l.sa(y),cd(d),rd(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function cd(d){if(d.G=0,d.ka=[],d.l){const y=qn(d.h);(y.length!=0||d.i.length!=0)&&(D(d.ka,y),D(d.ka,d.i),d.h.i.length=0,j(d.i),d.i.length=0),d.l.ra()}}function ud(d,y,b){var N=b instanceof kr?Ot(b):new kr(b);if(N.g!="")y&&(N.g=y+"."+N.g),Ga(N,N.s);else{var G=h.location;N=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var X=new kr(null);N&&Bs(X,N),y&&(X.g=y),G&&Ga(X,G),b&&(X.l=b),N=X}return b=d.D,y=d.ya,b&&y&&at(N,b,y),at(N,"VER",d.la),Ja(d,N),N}function hd(d,y,b){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new ft(new qs({eb:b})):new ft(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dd(){}n=dd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sl(){}sl.prototype.g=function(d,y){return new Hn(d,y)};function Hn(d,y){Be.call(this),this.g=new tl(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!$(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!$(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new hr(this)}O(Hn,Be),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Mc(this.g)},Hn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=wc(d),d=b);y.i.push(new Cm(y.Ya++,d)),y.G==3&&il(y)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Mc(this.g),delete this.g,Hn.aa.N.call(this)};function fd(d){Ns.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}O(fd,Ns);function pd(){Vi.call(this),this.status=1}O(pd,Vi);function hr(d){this.g=d}O(hr,dd),hr.prototype.ua=function(){it(this.g,"a")},hr.prototype.ta=function(d){it(this.g,new fd(d))},hr.prototype.sa=function(d){it(this.g,new pd)},hr.prototype.ra=function(){it(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,zC=function(){return new sl},UC=function(){return $o()},jC=_i,Sy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,xf=en,xr.COMPLETE="complete",VC=xr,Wh.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Lu=Wh,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,LC=ft}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});const jT="@firebase/firestore",UT="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new Bp("@firebase/firestore");function Ul(){return ko.logLevel}function de(n,...e){if(ko.logLevel<=$e.DEBUG){const t=e.map(Tv);ko.debug(`Firestore (${dc}): ${n}`,...t)}}function gs(n,...e){if(ko.logLevel<=$e.ERROR){const t=e.map(Tv);ko.error(`Firestore (${dc}): ${n}`,...t)}}function Jl(n,...e){if(ko.logLevel<=$e.WARN){const t=e.map(Tv);ko.warn(`Firestore (${dc}): ${n}`,...t)}}function Tv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+n;throw gs(e),new Error(e)}function pt(n,e){n||xe()}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ln.UNAUTHENTICATED))}shutdown(){}}class F4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q4{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let o=new us;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new us,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=o;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},h=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new us)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string"),new BC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Ln(e)}}class H4{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class $4{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new H4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G4{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ei(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0);const i=o=>{o.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.R;return this.R=o.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const a=o=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?a(o):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new zT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt(typeof t.token=="string"),this.R=t.token,new zT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=K4(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<t&&(i+=e.charAt(a[o]%62))}return i}}function Ze(n,e){return n<e?-1:n>e?1:0}function ec(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=-62135596800,FT=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*FT);return new Qt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<BT)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FT}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-BT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Qt(0,0))}static max(){return new De(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="__name__";class yr{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(),i===void 0?i=e.length-t:i>e.length-t&&xe(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const o=yr.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=yr.isNumericId(e),a=yr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?yr.extractNumericId(e).compare(yr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return va.fromString(e.substring(4,e.length-2))}}class bt extends yr{construct(e,t,i){return new bt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new bt(t)}static emptyPath(){return new bt([])}}const W4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends yr{construct(e,t,i){return new kn(e,t,i)}static isValidIdentifier(e){return W4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qT}static keyField(){return new kn([qT])}static fromServerFormat(e){const t=[];let i="",a=0;const o=()=>{if(i.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(o(),a++)}if(o(),c)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(bt.fromString(e))}static fromName(e){return new ye(bt.fromString(e).popFirst(5))}static empty(){return new ye(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new bt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=-1;function Q4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=De.fromTimestamp(i===1e9?new Qt(t+1,0):new Qt(t,i));return new Ia(a,ye.empty(),e)}function Y4(n){return new Ia(n.readTime,n.key,oh)}class Ia{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ia(De.min(),ye.empty(),oh)}static max(){return new Ia(De.max(),ye.empty(),oh)}}function X4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==Z4)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,i)=>{t(e)})}static reject(e){return new ne((t,i)=>{i(e)})}static waitFor(e){return new ne((t,i)=>{let a=0,o=0,c=!1;e.forEach(h=>{++a,h.next(()=>{++o,c&&o===a&&t()},p=>i(p))}),c=!0,o===a&&t()})}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next(a=>a?ne.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,o)=>{i.push(t.call(this,a,o))}),this.waitFor(i)}static mapArray(e,t){return new ne((i,a)=>{const o=e.length,c=new Array(o);let h=0;for(let p=0;p<o;p++){const m=p;t(e[m]).next(g=>{c[m]=g,++h,h===o&&i(c)},g=>a(g))}})}static doWhile(e,t){return new ne((i,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):i()};o()})}}function e5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}qp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=-1;function Hp(n){return n==null}function Jf(n){return n===0&&1/n==-1/0}function t5(n){return typeof n=="number"&&Number.isInteger(n)&&!Jf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="";function n5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HT(e)),e=i5(n.get(t),e);return HT(e)}function i5(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case qC:t+="";break;default:t+=o}}return t}function HT(n){return n+qC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xt=class Cy{constructor(e,t){this.comparator=e,this.root=t||Ea.EMPTY}insert(e,t){return new Cy(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ea.BLACK,null,null))}remove(e){return new Cy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ea.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _f(this.root,e,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _f(this.root,e,this.comparator,!0)}},_f=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ea=class ns{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??ns.RED,this.left=a??ns.EMPTY,this.right=o??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,o){return new ns(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return ns.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}};Ea.EMPTY=null,Ea.RED=!0,Ea.BLACK=!1;Ea.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,t,i,a,o){return this}insert(e,t,i){return new Ea(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GT(this.data.getIterator())}getIteratorFrom(e){return new GT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class GT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new fi([])}unionWith(e){let t=new un(kn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $C("Invalid base64 string: "+o):o}}(e);return new Dn(t)}static fromUint8Array(e){const t=function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o}(e);return new Dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const r5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(n){if(pt(!!n),typeof n=="string"){let e=0;const t=r5.exec(n);if(pt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(n.seconds),nanos:qt(n.nanos)}}function qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Na(n){return typeof n=="string"?Dn.fromBase64String(n):Dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="server_timestamp",KC="__type__",WC="__previous_value__",QC="__local_write_time__";function Sv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[KC])===null||t===void 0?void 0:t.stringValue)===GC}function $p(n){const e=n.mapValue.fields[WC];return Sv(e)?$p(e):e}function lh(n){const e=xa(n.mapValue.fields[QC].timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,t,i,a,o,c,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}}const ep="(default)";class ch{constructor(e,t){this.projectId=e,this.database=t||ep}static empty(){return new ch("","")}get isDefaultDatabase(){return this.database===ep}isEqual(e){return e instanceof ch&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__type__",a5="__max__",gf={mapValue:{}},XC="__vector__",tp="value";function ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sv(n)?4:l5(n)?9007199254740991:o5(n)?10:11:xe()}function br(n,e){if(n===e)return!0;const t=ka(n);if(t!==ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lh(n).isEqual(lh(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=xa(a.timestampValue),h=xa(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return Na(a.bytesValue).isEqual(Na(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return qt(a.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(a.geoPointValue.longitude)===qt(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return qt(a.integerValue)===qt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=qt(a.doubleValue),h=qt(o.doubleValue);return c===h?Jf(c)===Jf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if($T(c)!==$T(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!br(c[p],h[p])))return!1;return!0}(n,e);default:return xe()}}function uh(n,e){return(n.values||[]).find(t=>br(t,e))!==void 0}function tc(n,e){if(n===e)return 0;const t=ka(n),i=ka(e);if(t!==i)return Ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=qt(o.integerValue||o.doubleValue),p=qt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return KT(n.timestampValue,e.timestampValue);case 4:return KT(lh(n),lh(e));case 5:return Ze(n.stringValue,e.stringValue);case 6:return function(o,c){const h=Na(o),p=Na(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),p=c.split("/");for(let m=0;m<h.length&&m<p.length;m++){const g=Ze(h[m],p[m]);if(g!==0)return g}return Ze(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=Ze(qt(o.latitude),qt(c.latitude));return h!==0?h:Ze(qt(o.longitude),qt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return WT(n.arrayValue,e.arrayValue);case 10:return function(o,c){var h,p,m,g;const E=o.fields||{},C=c.fields||{},x=(h=E[tp])===null||h===void 0?void 0:h.arrayValue,O=(p=C[tp])===null||p===void 0?void 0:p.arrayValue,j=Ze(((m=x==null?void 0:x.values)===null||m===void 0?void 0:m.length)||0,((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0);return j!==0?j:WT(x,O)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===gf.mapValue&&c===gf.mapValue)return 0;if(o===gf.mapValue)return 1;if(c===gf.mapValue)return-1;const h=o.fields||{},p=Object.keys(h),m=c.fields||{},g=Object.keys(m);p.sort(),g.sort();for(let E=0;E<p.length&&E<g.length;++E){const C=Ze(p[E],g[E]);if(C!==0)return C;const x=tc(h[p[E]],m[g[E]]);if(x!==0)return x}return Ze(p.length,g.length)}(n.mapValue,e.mapValue);default:throw xe()}}function KT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=xa(n),i=xa(e),a=Ze(t.seconds,i.seconds);return a!==0?a:Ze(t.nanos,i.nanos)}function WT(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const o=tc(t[a],i[a]);if(o)return o}return Ze(t.length,i.length)}function nc(n){return Ay(n)}function Ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=xa(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Na(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const o of t.values||[])a?a=!1:i+=",",i+=Ay(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of i)o?o=!1:a+=",",a+=`${c}:${Ay(t.fields[c])}`;return a+"}"}(n.mapValue):xe()}function Nf(n){switch(ka(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$p(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return Na(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+Nf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ua(i.fields,(o,c)=>{a+=o.length+Nf(c)}),a}(n.mapValue);default:throw xe()}}function QT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ry(n){return!!n&&"integerValue"in n}function Cv(n){return!!n&&"arrayValue"in n}function YT(n){return!!n&&"nullValue"in n}function XT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kf(n){return!!n&&"mapValue"in n}function o5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[YC])===null||t===void 0?void 0:t.stringValue)===XC}function Bu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Bu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function l5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===a5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(t)}setAll(e){let t=kn.emptyPath(),i={},a=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=h.popLast()}c?i[h.lastSegment()]=Bu(c):a.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,a)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];kf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ua(t,(a,o)=>e[a]=o);for(const a of i)delete e[a]}clone(){return new ti(Bu(this.value))}}function ZC(n){const e=[];return Ua(n.fields,(t,i)=>{const a=new kn([t]);if(kf(i)){const o=ZC(i.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)}),new fi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,i,a,o,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Vn(e,0,De.min(),De.min(),De.min(),ti.empty(),0)}static newFoundDocument(e,t,i,a){return new Vn(e,1,t,De.min(),i,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,De.min(),De.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,De.min(),De.min(),ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t){this.position=e,this.inclusive=t}}function ZT(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?i=ye.comparator(ye.fromName(c.referenceValue),t.key):i=tc(c,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function JT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!br(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function c5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{}class Wt extends JC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new h5(e,t,i):t==="array-contains"?new p5(e,i):t==="in"?new m5(e,i):t==="not-in"?new _5(e,i):t==="array-contains-any"?new g5(e,i):new Wt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new d5(e,i):new f5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(tc(t,this.value)):t!==null&&ka(this.value)===ka(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends JC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Zi(e,t)}matches(e){return eA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function eA(n){return n.op==="and"}function tA(n){return u5(n)&&eA(n)}function u5(n){for(const e of n.filters)if(e instanceof Zi)return!1;return!0}function Iy(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(tA(n))return n.filters.map(e=>Iy(e)).join(",");{const e=n.filters.map(t=>Iy(t)).join(",");return`${n.op}(${e})`}}function nA(n,e){return n instanceof Wt?function(i,a){return a instanceof Wt&&i.op===a.op&&i.field.isEqual(a.field)&&br(i.value,a.value)}(n,e):n instanceof Zi?function(i,a){return a instanceof Zi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,c,h)=>o&&nA(c,a.filters[h]),!0):!1}(n,e):void xe()}function iA(n){return n instanceof Wt?function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`}(n):n instanceof Zi?function(t){return t.op.toString()+" {"+t.getFilters().map(iA).join(" ,")+"}"}(n):"Filter"}class h5 extends Wt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class d5 extends Wt{constructor(e,t){super(e,"in",t),this.keys=rA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class f5 extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=rA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class p5 extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cv(t)&&uh(t.arrayValue,this.value)}}class m5 extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uh(this.value.arrayValue,t)}}class _5 extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!uh(this.value.arrayValue,t)}}class g5 extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>uh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t=null,i=[],a=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.le=null}}function eb(n,e=null,t=[],i=[],a=null,o=null,c=null){return new y5(n,e,t,i,a,o,c)}function Av(n){const e=Me(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Iy(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Hp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>nc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>nc(i)).join(",")),e.le=t}return e.le}function Rv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JT(n.startAt,e.startAt)&&JT(n.endAt,e.endAt)}function xy(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t=null,i=[],a=[],o=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function v5(n,e,t,i,a,o,c,h){return new Uo(n,e,t,i,a,o,c,h)}function Gp(n){return new Uo(n)}function tb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sA(n){return n.collectionGroup!==null}function Fu(n){const e=Me(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new un(kn.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new hh(o,i))}),t.has(kn.keyField().canonicalString())||e.he.push(new hh(kn.keyField(),i))}return e.he}function vr(n){const e=Me(n);return e.Pe||(e.Pe=E5(e,Fu(n))),e.Pe}function E5(n,e){if(n.limitType==="F")return eb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new hh(a.field,o)});const t=n.endAt?new np(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new np(n.startAt.position,n.startAt.inclusive):null;return eb(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ny(n,e){const t=n.filters.concat([e]);return new Uo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ky(n,e,t){return new Uo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kp(n,e){return Rv(vr(n),vr(e))&&n.limitType===e.limitType}function aA(n){return`${Av(vr(n))}|lt:${n.limitType}`}function zl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>iA(a)).join(", ")}]`),Hp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>nc(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>nc(a)).join(",")),`Target(${i})`}(vr(n))}; limitType=${n.limitType})`}function Wp(n,e){return e.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ye.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,a){for(const o of Fu(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(c,h,p){const m=ZT(c,h,p);return c.inclusive?m<=0:m<0}(i.startAt,Fu(i),a)||i.endAt&&!function(c,h,p){const m=ZT(c,h,p);return c.inclusive?m>=0:m>0}(i.endAt,Fu(i),a))}(n,e)}function w5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oA(n){return(e,t)=>{let i=!1;for(const a of Fu(n)){const o=T5(a,e,t);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function T5(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):function(o,c,h){const p=c.data.field(o),m=h.data.field(o);return p!==null&&m!==null?tc(p,m):xe()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(t,i)=>{for(const[a,o]of i)e(a,o)})}isEmpty(){return HC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new Xt(ye.comparator);function ys(){return b5}const lA=new Xt(ye.comparator);function Vu(...n){let e=lA;for(const t of n)e=e.insert(t.key,t);return e}function cA(n){let e=lA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Co(){return qu()}function uA(){return qu()}function qu(){return new zo(n=>n.toString(),(n,e)=>n.isEqual(e))}const S5=new Xt(ye.comparator),C5=new un(ye.comparator);function Qe(...n){let e=C5;for(const t of n)e=e.add(t);return e}const A5=new un(Ze);function R5(){return A5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jf(e)?"-0":e}}function hA(n){return{integerValue:""+n}}function I5(n,e){return t5(e)?hA(e):Iv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this._=void 0}}function x5(n,e,t){return n instanceof dh?function(a,o){const c={fields:{[KC]:{stringValue:GC},[QC]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Sv(o)&&(o=$p(o)),o&&(c.fields[WC]=o),{mapValue:c}}(t,e):n instanceof fh?fA(n,e):n instanceof ph?pA(n,e):function(a,o){const c=dA(a,o),h=nb(c)+nb(a.Ie);return Ry(c)&&Ry(a.Ie)?hA(h):Iv(a.serializer,h)}(n,e)}function N5(n,e,t){return n instanceof fh?fA(n,e):n instanceof ph?pA(n,e):t}function dA(n,e){return n instanceof ip?function(i){return Ry(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class dh extends Qp{}class fh extends Qp{constructor(e){super(),this.elements=e}}function fA(n,e){const t=mA(e);for(const i of n.elements)t.some(a=>br(a,i))||t.push(i);return{arrayValue:{values:t}}}class ph extends Qp{constructor(e){super(),this.elements=e}}function pA(n,e){let t=mA(e);for(const i of n.elements)t=t.filter(a=>!br(a,i));return{arrayValue:{values:t}}}class ip extends Qp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function nb(n){return qt(n.integerValue||n.doubleValue)}function mA(n){return Cv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,t){this.field=e,this.transform=t}}function D5(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof fh&&a instanceof fh||i instanceof ph&&a instanceof ph?ec(i.elements,a.elements,br):i instanceof ip&&a instanceof ip?br(i.Ie,a.Ie):i instanceof dh&&a instanceof dh}(n.transform,e.transform)}class O5{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yp{}function _A(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xv(n.key,Pi.none()):new kh(n.key,n.data,Pi.none());{const t=n.data,i=ti.empty();let a=new un(kn.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?i.delete(o):i.set(o,c),a=a.add(o)}return new za(n.key,i,new fi(a.toArray()),Pi.none())}}function M5(n,e,t){n instanceof kh?function(a,o,c){const h=a.value.clone(),p=rb(a.fieldTransforms,o,c.transformResults);h.setAll(p),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof za?function(a,o,c){if(!Df(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=rb(a.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(gA(a)),p.setAll(h),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Hu(n,e,t,i){return n instanceof kh?function(o,c,h,p){if(!Df(o.precondition,c))return h;const m=o.value.clone(),g=sb(o.fieldTransforms,p,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof za?function(o,c,h,p){if(!Df(o.precondition,c))return h;const m=sb(o.fieldTransforms,p,c),g=c.data;return g.setAll(gA(o)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(o,c,h){return Df(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function P5(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),o=dA(i.transform,a||null);o!=null&&(t===null&&(t=ti.empty()),t.set(i.field,o))}return t||null}function ib(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&ec(i,a,(o,c)=>D5(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kh extends Yp{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class za extends Yp{constructor(e,t,i,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function gA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function rb(n,e,t){const i=new Map;pt(n.length===t.length);for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,h=e.data.field(o.field);i.set(o.field,N5(c,h,t[a]))}return i}function sb(n,e,t){const i=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);i.set(a.field,x5(o,c,e))}return i}class xv extends Yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L5 extends Yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&M5(o,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=uA();return this.mutations.forEach(a=>{const o=e.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(a.key)?null:h;const p=_A(c,h);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(t,i)=>ib(t,i))&&ec(this.baseMutations,e.baseMutations,(t,i)=>ib(t,i))}}class Nv{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){pt(e.mutations.length===i.length);let a=function(){return S5}();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,i[c].version);return new Nv(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,nt;function z5(n){switch(n){case ee.OK:return xe();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return xe()}}function yA(n){if(n===void 0)return gs("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Kt.OK:return ee.OK;case Kt.CANCELLED:return ee.CANCELLED;case Kt.UNKNOWN:return ee.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ee.INTERNAL;case Kt.UNAVAILABLE:return ee.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ee.NOT_FOUND;case Kt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Kt.ABORTED:return ee.ABORTED;case Kt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Kt.DATA_LOSS:return ee.DATA_LOSS;default:return xe()}}(nt=Kt||(Kt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new va([4294967295,4294967295],0);function ab(n){const e=B5().encode(n),t=new PC;return t.update(e),new Uint8Array(t.digest())}function ob(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new va([t,i],0),new va([a,o],0)]}class kv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(i<0)throw new ju(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=va.fromNumber(this.Ee)}Ae(e,t,i){let a=e.add(t.multiply(va.fromNumber(i)));return a.compare(F5)===1&&(a=new va([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=ab(e),[i,a]=ob(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(i,a,o);if(!this.Re(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new kv(o,a,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ee===0)return;const t=ab(e),[i,a]=ob(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(i,a,o);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t,i,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Xp(De.min(),a,new Xt(Ze),ys(),Qe())}}class Dh{constructor(e,t,i,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dh(i,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,a){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=a}}class vA{constructor(e,t){this.targetId=e,this.ge=t}}class EA{constructor(e,t,i=Dn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class lb{constructor(){this.pe=0,this.ye=cb(),this.we=Dn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Qe(),t=Qe(),i=Qe();return this.ye.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:xe()}}),new Dh(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=cb()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,pt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class q5{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ys(),this.$e=yf(),this.Ke=yf(),this.Ue=new Xt(Ze)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,i=e.ge.count,a=this.Xe(t);if(a){const o=a.target;if(xy(o))if(i===0){const c=new ye(o.path);this.ze(t,c,Vn.newNoDocument(c,De.min()))}else pt(i===1);else{const c=this.et(t);if(c!==i){const h=this.tt(e),p=h?this.nt(h,e,c):1;if(p!==0){this.Ye(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=t;let c,h;try{c=Na(i).toUint8Array()}catch(p){if(p instanceof $C)return Jl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new kv(c,a,o)}catch(p){return Jl(p instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let a=0;return i.forEach(o=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((o,c)=>{const h=this.Xe(c);if(h){if(o.current&&xy(h.target)){const p=new ye(h.target.path);this._t(p).has(c)||this.ut(c,p)||this.ze(c,p,Vn.newNoDocument(p,e))}o.ve&&(t.set(c,o.Fe()),o.Me())}});let i=Qe();this.Ke.forEach((o,c)=>{let h=!0;c.forEachWhile(p=>{const m=this.Xe(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.Qe.forEach((o,c)=>c.setReadTime(e));const a=new Xp(e,t,this.Ue,this.Qe,i);return this.Qe=ys(),this.$e=yf(),this.Ke=yf(),this.Ue=new Xt(Ze),a}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new lb,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new un(Ze),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new un(Ze),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new lb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function yf(){return new Xt(ye.comparator)}function cb(){return new Xt(ye.comparator)}const H5={asc:"ASCENDING",desc:"DESCENDING"},$5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G5={and:"AND",or:"OR"};class K5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dy(n,e){return n.useProto3Json||Hp(e)?e:{value:e}}function rp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function W5(n,e){return rp(n,e.toTimestamp())}function Er(n){return pt(!!n),De.fromTimestamp(function(t){const i=xa(t);return new Qt(i.seconds,i.nanos)}(n))}function Dv(n,e){return Oy(n,e).canonicalString()}function Oy(n,e){const t=function(a){return new bt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TA(n){const e=bt.fromString(n);return pt(RA(e)),e}function My(n,e){return Dv(n.databaseId,e.path)}function Bg(n,e){const t=TA(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(SA(t))}function bA(n,e){return Dv(n.databaseId,e)}function Q5(n){const e=TA(n);return e.length===4?bt.emptyPath():SA(e)}function Py(n){return new bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SA(n){return pt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ub(n,e,t){return{name:My(n,e),fields:t.value.mapValue.fields}}function Y5(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(m,g){return m.useProto3Json?(pt(g===void 0||typeof g=="string"),Dn.fromBase64String(g||"")):(pt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Dn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const g=m.code===void 0?ee.UNKNOWN:yA(m.code);return new he(g,m.message||"")}(c);t=new EA(i,a,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Bg(n,i.document.name),o=Er(i.document.updateTime),c=i.document.createTime?Er(i.document.createTime):De.min(),h=new ti({mapValue:{fields:i.document.fields}}),p=Vn.newFoundDocument(a,o,c,h),m=i.targetIds||[],g=i.removedTargetIds||[];t=new Of(m,g,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Bg(n,i.document),o=i.readTime?Er(i.readTime):De.min(),c=Vn.newNoDocument(a,o),h=i.removedTargetIds||[];t=new Of([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Bg(n,i.document),o=i.removedTargetIds||[];t=new Of([],o,a,null)}else{if(!("filter"in e))return xe();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,c=new U5(a,o),h=i.targetId;t=new vA(h,c)}}return t}function X5(n,e){let t;if(e instanceof kh)t={update:ub(n,e.key,e.value)};else if(e instanceof xv)t={delete:My(n,e.key)};else if(e instanceof za)t={update:ub(n,e.key,e.data),updateMask:aM(e.fieldMask)};else{if(!(e instanceof L5))return xe();t={verify:My(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof dh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof fh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ph)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ip)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw xe()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:W5(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xe()}(n,e.precondition)),t}function Z5(n,e){return n&&n.length>0?(pt(e!==void 0),n.map(t=>function(a,o){let c=a.updateTime?Er(a.updateTime):Er(o);return c.isEqual(De.min())&&(c=Er(o)),new O5(c,a.transformResults||[])}(t,e))):[]}function J5(n,e){return{documents:[bA(n,e.path)]}}function eM(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=bA(n,a);const o=function(m){if(m.length!==0)return AA(Zi.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(g=>function(C){return{field:Bl(C.field),direction:iM(C.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Dy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:a}}function tM(n){let e=Q5(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){pt(i===1);const g=t.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(E){const C=CA(E);return C instanceof Zi&&tA(C)?C.getFilters():[C]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(C=>function(O){return new hh(Fl(O.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(C))}(t.orderBy));let h=null;t.limit&&(h=function(E){let C;return C=typeof E=="object"?E.value:E,Hp(C)?null:C}(t.limit));let p=null;t.startAt&&(p=function(E){const C=!!E.before,x=E.values||[];return new np(x,C)}(t.startAt));let m=null;return t.endAt&&(m=function(E){const C=!E.before,x=E.values||[];return new np(x,C)}(t.endAt)),v5(e,a,c,o,h,"F",p,m)}function nM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Fl(t.unaryFilter.field);return Wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Fl(t.unaryFilter.field);return Wt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Fl(t.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Fl(t.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(n):n.fieldFilter!==void 0?function(t){return Wt.create(Fl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Zi.create(t.compositeFilter.filters.map(i=>CA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe()}}(t.compositeFilter.op))}(n):xe()}function iM(n){return H5[n]}function rM(n){return $5[n]}function sM(n){return G5[n]}function Bl(n){return{fieldPath:n.canonicalString()}}function Fl(n){return kn.fromServerFormat(n.fieldPath)}function AA(n){return n instanceof Wt?function(t){if(t.op==="=="){if(XT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NAN"}};if(YT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(XT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NAN"}};if(YT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(t.field),op:rM(t.op),value:t.value}}}(n):n instanceof Zi?function(t){const i=t.getFilters().map(a=>AA(a));return i.length===1?i[0]:{compositeFilter:{op:sM(t.op),filters:i}}}(n):xe()}function aM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t,i,a,o=De.min(),c=De.min(),h=Dn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.Tt=e}}function lM(n){const e=tM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ky(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.Tn=new uM}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ia.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class uM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new un(bt.comparator),o=!a.has(i);return this.index[t]=a.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new un(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IA=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(IA,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new ic(0)}static Un(){return new ic(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="LruGarbageCollector",hM=1048576;function fb([n,e],[t,i]){const a=Ze(n,t);return a===0?Ze(e,i):a}class dM{constructor(e){this.Hn=e,this.buffer=new un(fb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();fb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(db,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pc(t)?de(db,"Ignoring IndexedDB error during garbage collection: ",t):await fc(t)}await this.er(3e5)})}}class pM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(qp.ae);const i=new dM(t);return this.tr.forEachTarget(e,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(hb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hb):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,a,o,c,h,p,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a))).next(E=>(i=E,h=Date.now(),this.removeTargets(e,i,t))).next(E=>(o=E,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(m=Date.now(),Ul()<=$e.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(p-h)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:E})))}}function mM(n,e){return new pM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.changes=new zo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Hu(i.mutation,a,fi.empty(),Qt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qe()){const a=Co();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(o=>{let c=Vu();return o.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qe()))}populateOverlays(e,t,i){const a=[];return i.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,a){let o=ys();const c=qu(),h=function(){return qu()}();return t.forEach((p,m)=>{const g=i.get(m.key);a.has(m.key)&&(g===void 0||g.mutation instanceof za)?o=o.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Hu(g.mutation,m,g.mutation.getFieldMask(),Qt.now())):c.set(m.key,fi.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((m,g)=>c.set(m,g)),t.forEach((m,g)=>{var E;return h.set(m,new gM(g,(E=c.get(m))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,t){const i=qu();let a=new Xt((c,h)=>c-h),o=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let g=i.get(p)||fi.empty();g=h.applyToLocalView(m,g),i.set(p,g);const E=(a.get(h.batchId)||Qe()).add(p);a=a.insert(h.batchId,E)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,g=p.value,E=uA();g.forEach(C=>{if(!o.has(C)){const x=_A(t.get(C),i.get(C));x!==null&&E.set(C,x),o=o.add(C)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return ne.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-o.size):ne.resolve(Co());let h=oh,p=o;return c.next(m=>ne.forEach(m,(g,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next(C=>{p=p.insert(g,C)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,p,m,Qe())).next(g=>({batchId:h,changes:cA(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let a=Vu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const o=t.collectionGroup;let c=Vu();return this.indexManager.getCollectionParents(e,o).next(h=>ne.forEach(h,p=>{const m=function(E,C){return new Uo(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next(g=>{g.forEach((E,C)=>{c=c.insert(E,C)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,a))).next(c=>{o.forEach((p,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,Vn.newInvalidDocument(g)))});let h=Vu();return c.forEach((p,m)=>{const g=o.get(p);g!==void 0&&Hu(g.mutation,m,fi.empty(),Qt.now()),Wp(t,m)&&(h=h.insert(p,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Er(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:lM(a.bundledQuery),readTime:Er(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this.overlays=new Xt(ye.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Co();return ne.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const a=Co(),o=t.length+1,c=new ye(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>i&&a.set(p.getKey(),p)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let o=new Xt((m,g)=>m-g);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let g=o.get(m.largestBatchId);g===null&&(g=Co(),o=o.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=Co(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,g)=>h.set(m,g)),!(h.size()>=a)););return ne.resolve(h)}Et(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new j5(t,i));let o=this.Rr.get(t);o===void 0&&(o=Qe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.Vr=new un(En.mr),this.gr=new un(En.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new En(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new En(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new ye(new bt([])),i=new En(t,e),a=new En(t,e+1),o=[];return this.gr.forEachInRange([i,a],c=>{this.wr(c),o.push(c.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ye(new bt([])),i=new En(t,e),a=new En(t,e+1);let o=Qe();return this.gr.forEachInRange([i,a],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new En(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class En{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ye.comparator(e.key,t.key)||Ze(e.Cr,t.Cr)}static pr(e,t){return Ze(e.Cr,t.Cr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new un(En.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new V5(o,t,i,a);this.mutationQueue.push(c);for(const h of a)this.Mr=this.Mr.add(new En(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Nr(i),o=a<0?0:a;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?bv:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new En(t,0),a=new En(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,a],c=>{const h=this.Or(c.Cr);o.push(h)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new un(Ze);return t.forEach(a=>{const o=new En(a,0),c=new En(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,c],h=>{i=i.add(h.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let o=i;ye.isDocumentKey(o)||(o=o.child(""));const c=new En(new ye(o),0);let h=new un(Ze);return this.Mr.forEachWhile(p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(p.Cr)),!0)},c),ne.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const a=this.Or(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){pt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(t.mutations,a=>{const o=new En(a.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new En(t,0),a=this.Mr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.kr=e,this.docs=function(){return new Xt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),o=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let i=ys();return t.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():Vn.newInvalidDocument(a))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let o=ys();const c=t.path,h=new ye(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:g}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||X4(Y4(g),i)<=0||(a.has(g.key)||Wp(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,i,a){xe()}qr(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new SM(this)}getSize(e){return ne.resolve(this.size)}}class SM extends _M{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.persistence=e,this.Qr=new zo(t=>Av(t),Rv),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Ov,this.targetCount=0,this.Ur=ic.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new ic(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let a=0;const o=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),ne.waitFor(o).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(c=>{o.push(a.markPotentiallyOrphaned(e,c))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new qp(0),this.zr=!1,this.zr=!0,this.jr=new wM,this.referenceDelegate=e(this),this.Hr=new CM(this),this.indexManager=new cM,this.remoteDocumentCache=function(a){return new bM(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new oM(t),this.Yr=new vM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new TM(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const a=new AM(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(o=>this.referenceDelegate.Xr(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class AM extends J4{constructor(e){super(),this.currentSequenceNumber=e}}class Mv{constructor(e){this.persistence=e,this.ti=new Ov,this.ni=null}static ri(e){return new Mv(e)}get ii(){if(this.ni)return this.ni;throw xe()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const a=ye.fromPath(i);return this.si(e,a).next(o=>{o||t.removeEntry(a,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class sp{constructor(e,t){this.persistence=e,this.oi=new zo(i=>n5(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=mM(this,t)}static ri(e,t){return new sp(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(i,a)=>this.ar(e,i,a).next(o=>o?ne.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(h=>{h||(i++,o.removeEntry(c,De.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}ar(e,t,i){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return ne.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=a}static Yi(e,t){let i=Qe(),a=Qe();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Pv(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return yO()?8:e5(zn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,a){const o={result:null};return this.rs(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ss(e,t,a,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new RM;return this._s(e,t,c).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,c,h.size)})}).next(()=>o.result)}us(e,t,i,a){return i.documentReadCount<this.es?(Ul()<=$e.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(Ul()<=$e.DEBUG&&de("QueryEngine","Query:",zl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(Ul()<=$e.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(t))):ne.resolve())}rs(e,t){if(tb(t))return ne.resolve(null);let i=vr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=ky(t,null,"F"),i=vr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const c=Qe(...o);return this.ns.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const m=this.cs(t,h);return this.ls(t,m,c,p.readTime)?this.rs(e,ky(t,null,"F")):this.hs(e,m,t,p)}))})))}ss(e,t,i,a){return tb(t)||a.isEqual(De.min())?ne.resolve(null):this.ns.getDocuments(e,i).next(o=>{const c=this.cs(t,o);return this.ls(t,c,i,a)?ne.resolve(null):(Ul()<=$e.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zl(t)),this.hs(e,c,t,Q4(a,oh)).next(h=>h))})}cs(e,t){let i=new un(oA(e));return t.forEach((a,o)=>{Wp(e,o)&&(i=i.add(o))}),i}ls(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}_s(e,t,i){return Ul()<=$e.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",zl(t)),this.ns.getDocumentsMatchingQuery(e,t,Ia.min(),i)}hs(e,t,i,a){return this.ns.getDocumentsMatchingQuery(e,i,a).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LocalStore",xM=3e8;class NM{constructor(e,t,i,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new Xt(Ze),this.Is=new zo(o=>Av(o),Rv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yM(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function kM(n,e,t,i){return new NM(n,e,t,i)}async function NA(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let p=Qe();for(const m of a){c.push(m.batchId);for(const g of m.mutations)p=p.add(g.key)}for(const m of o){h.push(m.batchId);for(const g of m.mutations)p=p.add(g.key)}return t.localDocuments.getDocuments(i,p).next(m=>({Rs:m,removedBatchIds:c,addedBatchIds:h}))})})}function DM(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,m,g){const E=m.batch,C=E.keys();let x=ne.resolve();return C.forEach(O=>{x=x.next(()=>g.getEntry(p,O)).next(j=>{const D=m.docVersions.get(O);pt(D!==null),j.version.compareTo(D)<0&&(E.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),g.addEntry(j)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(p,E))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=Qe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function kA(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function OM(n,e){const t=Me(n),i=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const h=[];e.targetChanges.forEach((g,E)=>{const C=a.get(E);if(!C)return;h.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,E).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,E)));let x=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(Dn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,i)),a=a.insert(E,x),function(j,D,U){return j.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=xM?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(C,x,g)&&h.push(t.Hr.updateTargetData(o,x))});let p=ys(),m=Qe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),h.push(MM(o,c,e.documentUpdates).next(g=>{p=g.Vs,m=g.fs})),!i.isEqual(De.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(E=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(g)}return ne.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,m)).next(()=>p)}).then(o=>(t.Ts=a,o))}function MM(n,e,t){let i=Qe(),a=Qe();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let c=ys();return t.forEach((h,p)=>{const m=o.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):de(Lv,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Vs:c,fs:a}})}function PM(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=bv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function LM(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Hr.getTargetData(i,e).next(o=>o?(a=o,ne.resolve(a)):t.Hr.allocateTargetId(i).next(c=>(a=new ma(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function Ly(n,e,t){const i=Me(n),a=i.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!pc(c))throw c;de(Lv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ts=i.Ts.remove(e),i.Is.delete(a.target)}function pb(n,e,t){const i=Me(n);let a=De.min(),o=Qe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,g){const E=Me(p),C=E.Is.get(g);return C!==void 0?ne.resolve(E.Ts.get(C)):E.Hr.getTargetData(m,g)}(i,c,vr(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{o=p})}).next(()=>i.Ps.getDocumentsMatchingQuery(c,e,t?a:De.min(),t?o:Qe())).next(h=>(VM(i,w5(e),h),{documents:h,gs:o})))}function VM(n,e,t){let i=n.Es.get(e)||De.min();t.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(e,i)}class mb{constructor(){this.activeTargetIds=R5()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jM{constructor(){this.ho=new mb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new mb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="ConnectivityMonitor";class gb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(_b,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(_b,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function Vy(){return vf===null?vf=function(){return 268435456+Math.round(2147483648*Math.random())}():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="RestConnection",zM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===ep?`project_id=${i}`:`project_id=${i}&database_id=${a}`}bo(e,t,i,a,o){const c=Vy(),h=this.So(e,t.toUriEncodedString());de(Fg,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,a,o),this.vo(e,h,p,i).then(m=>(de(Fg,`Received RPC '${e}' ${c}: `,m),m),m=>{throw Jl(Fg,`RPC '${e}' ${c} failed with error: `,m,"url: ",h,"request:",i),m})}Co(e,t,i,a,o,c){return this.bo(e,t,i,a,o)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),i&&i.headers.forEach((a,o)=>e[o]=a)}So(e,t){const i=zM[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class qM extends BM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,a){const o=Vy();return new Promise((c,h)=>{const p=new LC;p.setWithCredentials(!0),p.listenOnce(VC.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case xf.NO_ERROR:const g=p.getResponseJson();de(Pn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case xf.TIMEOUT:de(Pn,`RPC '${e}' ${o} timed out`),h(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const E=p.getStatus();if(de(Pn,`RPC '${e}' ${o} failed with status:`,E,"response text:",p.getResponseText()),E>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const x=C==null?void 0:C.error;if(x&&x.status&&x.message){const O=function(D){const U=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(U)>=0?U:ee.UNKNOWN}(x.status);h(new he(O,x.message))}else h(new he(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new he(ee.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{de(Pn,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(a);de(Pn,`RPC '${e}' ${o} sending request:`,a),p.send(t,"POST",m,i,15)})}Wo(e,t,i){const a=Vy(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zC(),h=UC(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const g=o.join("");de(Pn,`Creating RPC '${e}' stream ${a}: ${g}`,p);const E=c.createWebChannel(g,p);let C=!1,x=!1;const O=new FM({Fo:D=>{x?de(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(C||(de(Pn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),C=!0),de(Pn,`RPC '${e}' stream ${a} sending:`,D),E.send(D))},Mo:()=>E.close()}),j=(D,U,$)=>{D.listen(U,q=>{try{$(q)}catch(z){setTimeout(()=>{throw z},0)}})};return j(E,Lu.EventType.OPEN,()=>{x||(de(Pn,`RPC '${e}' stream ${a} transport opened.`),O.Qo())}),j(E,Lu.EventType.CLOSE,()=>{x||(x=!0,de(Pn,`RPC '${e}' stream ${a} transport closed`),O.Ko())}),j(E,Lu.EventType.ERROR,D=>{x||(x=!0,Jl(Pn,`RPC '${e}' stream ${a} transport errored:`,D),O.Ko(new he(ee.UNAVAILABLE,"The operation could not be completed")))}),j(E,Lu.EventType.MESSAGE,D=>{var U;if(!x){const $=D.data[0];pt(!!$);const q=$,z=(q==null?void 0:q.error)||((U=q[0])===null||U===void 0?void 0:U.error);if(z){de(Pn,`RPC '${e}' stream ${a} received error:`,z);const Y=z.status;let W=function(w){const A=Kt[w];if(A!==void 0)return yA(A)}(Y),R=z.message;W===void 0&&(W=ee.INTERNAL,R="Unknown error status: "+Y+" with message "+z.message),x=!0,O.Ko(new he(W,R)),E.close()}else de(Pn,`RPC '${e}' stream ${a} received:`,$),O.Uo($)}}),j(h,jC.STAT_EVENT,D=>{D.stat===Sy.PROXY?de(Pn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===Sy.NOPROXY&&de(Pn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.$o()},0),O}}function qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(n){return new K5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t,i=1e3,a=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=a,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-i);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="PersistentStream";class OA{constructor(e,t,i,a,o,c,h,p){this.Ti=e,this.n_=i,this.r_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new DA(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(gs(t.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===t&&this.V_(i,a)},i=>{e(()=>{const a=new he(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(yb,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(yb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HM extends OA{constructor(e,t,i,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Y5(this.serializer,e),i=function(o){if(!("targetChange"in o))return De.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?Er(c.readTime):De.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=Py(this.serializer),t.addTarget=function(o,c){let h;const p=c.target;if(h=xy(p)?{documents:J5(o,p)}:{query:eM(o,p).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=wA(o,c.resumeToken);const m=Dy(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(De.min())>0){h.readTime=rp(o,c.snapshotVersion.toTimestamp());const m=Dy(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=nM(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=Py(this.serializer),t.removeTarget=e,this.I_(t)}}class $M extends OA{constructor(e,t,i,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Z5(e.writeResults,e.commitTime),i=Er(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=Py(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>X5(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{}class KM extends GM{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.bo(e,Oy(t,i),a,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(ee.UNKNOWN,o.toString())})}Co(e,t,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(e,Oy(t,i),a,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ee.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class WM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(gs(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class QM{constructor(e,t,i,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(c=>{i.enqueueAndForget(async()=>{Bo(this)&&(de(Do,"Restarting streams for network reachability change."),await async function(p){const m=Me(p);m.W_.add(4),await Oh(m),m.j_.set("Unknown"),m.W_.delete(4),await Jp(m)}(this))})}),this.j_=new WM(i,a)}}async function Jp(n){if(Bo(n))for(const e of n.G_)await e(!0)}async function Oh(n){for(const e of n.G_)await e(!1)}function MA(n,e){const t=Me(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),zv(t)?Uv(t):mc(t).c_()&&jv(t,e))}function Vv(n,e){const t=Me(n),i=mc(t);t.U_.delete(e),i.c_()&&PA(t,e),t.U_.size===0&&(i.c_()?i.P_():Bo(t)&&t.j_.set("Unknown"))}function jv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mc(n).y_(e)}function PA(n,e){n.H_.Ne(e),mc(n).w_(e)}function Uv(n){n.H_=new q5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),mc(n).start(),n.j_.B_()}function zv(n){return Bo(n)&&!mc(n).u_()&&n.U_.size>0}function Bo(n){return Me(n).W_.size===0}function LA(n){n.H_=void 0}async function YM(n){n.j_.set("Online")}async function XM(n){n.U_.forEach((e,t)=>{jv(n,e)})}async function ZM(n,e){LA(n),zv(n)?(n.j_.q_(e),Uv(n)):n.j_.set("Unknown")}async function JM(n,e,t){if(n.j_.set("Online"),e instanceof EA&&e.state===2&&e.cause)try{await async function(a,o){const c=o.cause;for(const h of o.targetIds)a.U_.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.U_.delete(h),a.H_.removeTarget(h))}(n,e)}catch(i){de(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ap(n,i)}else if(e instanceof Of?n.H_.We(e):e instanceof vA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const i=await kA(n.localStore);t.compareTo(i)>=0&&await function(o,c){const h=o.H_.ot(c);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const g=o.U_.get(m);g&&o.U_.set(m,g.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,m)=>{const g=o.U_.get(p);if(!g)return;o.U_.set(p,g.withResumeToken(Dn.EMPTY_BYTE_STRING,g.snapshotVersion)),PA(o,p);const E=new ma(g.target,p,m,g.sequenceNumber);jv(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){de(Do,"Failed to raise snapshot:",i),await ap(n,i)}}async function ap(n,e,t){if(!pc(e))throw e;n.W_.add(1),await Oh(n),n.j_.set("Offline"),t||(t=()=>kA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(Do,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Jp(n)})}function VA(n,e){return e().catch(t=>ap(n,t,e))}async function em(n){const e=Me(n),t=Da(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:bv;for(;eP(e);)try{const a=await PM(e.localStore,i);if(a===null){e.K_.length===0&&t.P_();break}i=a.batchId,tP(e,a)}catch(a){await ap(e,a)}jA(e)&&UA(e)}function eP(n){return Bo(n)&&n.K_.length<10}function tP(n,e){n.K_.push(e);const t=Da(n);t.c_()&&t.b_&&t.S_(e.mutations)}function jA(n){return Bo(n)&&!Da(n).u_()&&n.K_.length>0}function UA(n){Da(n).start()}async function nP(n){Da(n).C_()}async function iP(n){const e=Da(n);for(const t of n.K_)e.S_(t.mutations)}async function rP(n,e,t){const i=n.K_.shift(),a=Nv.from(i,e,t);await VA(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await em(n)}async function sP(n,e){e&&Da(n).b_&&await async function(i,a){if(function(c){return z5(c)&&c!==ee.ABORTED}(a.code)){const o=i.K_.shift();Da(i).h_(),await VA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await em(i)}}(n,e),jA(n)&&UA(n)}async function vb(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),de(Do,"RemoteStore received new credentials");const i=Bo(t);t.W_.add(3),await Oh(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Jp(t)}async function aP(n,e){const t=Me(n);e?(t.W_.delete(2),await Jp(t)):e||(t.W_.add(2),await Oh(t),t.j_.set("Unknown"))}function mc(n){return n.J_||(n.J_=function(t,i,a){const o=Me(t);return o.M_(),new HM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:YM.bind(null,n),No:XM.bind(null,n),Lo:ZM.bind(null,n),p_:JM.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),zv(n)?Uv(n):n.j_.set("Unknown")):(await n.J_.stop(),LA(n))})),n.J_}function Da(n){return n.Y_||(n.Y_=function(t,i,a){const o=Me(t);return o.M_(),new $M(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:nP.bind(null,n),Lo:sP.bind(null,n),D_:iP.bind(null,n),v_:rP.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await em(n)):(await n.Y_.stop(),n.K_.length>0&&(de(Do,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t,i,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,o){const c=Date.now()+i,h=new Bv(e,t,c,a,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fv(n,e){if(gs("AsyncQueue",`${e}: ${n}`),pc(n))return new he(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Vu(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new $l;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.Z_=new Xt(ye.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):xe():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class rc{constructor(e,t,i,a,o,c,h,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,a,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new rc(e,t,$l.emptySet(t),c,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class lP{constructor(){this.queries=wb(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const a=Me(t),o=a.queries;a.queries=wb(),o.forEach((c,h)=>{for(const p of h.ta)p.onError(i)})})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function wb(){return new zo(n=>aA(n),Kp)}async function qv(n,e){const t=Me(n);let i=3;const a=e.query;let o=t.queries.get(a);o?!o.na()&&e.ra()&&(i=2):(o=new oP,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await t.onListen(a,!0);break;case 1:o.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=Fv(c,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&$v(t)}async function Hv(n,e){const t=Me(n),i=e.query;let a=3;const o=t.queries.get(i);if(o){const c=o.ta.indexOf(e);c>=0&&(o.ta.splice(c,1),o.ta.length===0?a=e.ra()?0:1:!o.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function cP(n,e){const t=Me(n);let i=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const h of c.ta)h.oa(a)&&(i=!0);c.ea=a}}i&&$v(t)}function uP(n,e,t){const i=Me(n),a=i.queries.get(e);if(a)for(const o of a.ta)o.onError(t);i.queries.delete(e)}function $v(n){n.ia.forEach(e=>{e.next()})}var jy,Tb;(Tb=jy||(jy={}))._a="default",Tb.Cache="cache";class Gv{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new rc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==jy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.key=e}}class BA{constructor(e){this.key=e}}class hP{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Qe(),this.mutatedKeys=Qe(),this.ya=oA(e),this.wa=new $l(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new Eb,a=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((g,E)=>{const C=a.get(g),x=Wp(this.query,E)?E:null,O=!!C&&this.mutatedKeys.has(C.key),j=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let D=!1;C&&x?C.data.isEqual(x.data)?O!==j&&(i.track({type:3,doc:x}),D=!0):this.va(C,x)||(i.track({type:2,doc:x}),D=!0,(p&&this.ya(x,p)>0||m&&this.ya(x,m)<0)&&(h=!0)):!C&&x?(i.track({type:0,doc:x}),D=!0):C&&!x&&(i.track({type:1,doc:C}),D=!0,(p||m)&&(h=!0)),D&&(x?(c=c.add(x),o=j?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{wa:c,Da:i,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((g,E)=>function(x,O){const j=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return j(x)-j(O)}(g.type,E.type)||this.ya(g.doc,E.doc)),this.Ca(i),a=a!=null&&a;const h=t&&!a?this.Fa():[],p=this.pa.size===0&&this.current&&!a?1:0,m=p!==this.ga;return this.ga=p,c.length!==0||m?{snapshot:new rc(this.query,e.wa,o,c,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Eb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Qe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new BA(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new zA(i))}),t}Oa(e){this.fa=e.gs,this.pa=Qe();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return rc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Kv="SyncEngine";class dP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fP{constructor(e){this.key=e,this.Ba=!1}}class pP{constructor(e,t,i,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new zo(h=>aA(h),Kp),this.qa=new Map,this.Qa=new Set,this.$a=new Xt(ye.comparator),this.Ka=new Map,this.Ua=new Ov,this.Wa={},this.Ga=new Map,this.za=ic.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function mP(n,e,t=!0){const i=KA(n);let a;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na()):a=await FA(i,e,t,!0),a}async function _P(n,e){const t=KA(n);await FA(t,e,!0,!1)}async function FA(n,e,t,i){const a=await LM(n.localStore,vr(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await gP(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&MA(n.remoteStore,a),h}async function gP(n,e,t,i,a){n.Ha=(E,C,x)=>async function(j,D,U,$){let q=D.view.Sa(U);q.ls&&(q=await pb(j.localStore,D.query,!1).then(({documents:R})=>D.view.Sa(R,q)));const z=$&&$.targetChanges.get(D.targetId),Y=$&&$.targetMismatches.get(D.targetId)!=null,W=D.view.applyChanges(q,j.isPrimaryClient,z,Y);return Sb(j,D.targetId,W.Ma),W.snapshot}(n,E,C,x);const o=await pb(n.localStore,e,!0),c=new hP(e,o.gs),h=c.Sa(o.documents),p=Dh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),m=c.applyChanges(h,n.isPrimaryClient,p);Sb(n,t,m.Ma);const g=new dP(e,t,c);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function yP(n,e,t){const i=Me(n),a=i.ka.get(e),o=i.qa.get(a.targetId);if(o.length>1)return i.qa.set(a.targetId,o.filter(c=>!Kp(c,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Ly(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Vv(i.remoteStore,a.targetId),Uy(i,a.targetId)}).catch(fc)):(Uy(i,a.targetId),await Ly(i.localStore,a.targetId,!0))}async function vP(n,e){const t=Me(n),i=t.ka.get(e),a=t.qa.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Vv(t.remoteStore,i.targetId))}async function EP(n,e,t){const i=RP(n);try{const a=await function(c,h){const p=Me(c),m=Qt.now(),g=h.reduce((x,O)=>x.add(O.key),Qe());let E,C;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let O=ys(),j=Qe();return p.ds.getEntries(x,g).next(D=>{O=D,O.forEach((U,$)=>{$.isValidDocument()||(j=j.add(U))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,O)).next(D=>{E=D;const U=[];for(const $ of h){const q=P5($,E.get($.key).overlayedDocument);q!=null&&U.push(new za($.key,q,ZC(q.value.mapValue),Pi.exists(!0)))}return p.mutationQueue.addMutationBatch(x,m,U,h)}).next(D=>{C=D;const U=D.applyToLocalDocumentSet(E,j);return p.documentOverlayCache.saveOverlays(x,D.batchId,U)})}).then(()=>({batchId:C.batchId,changes:cA(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,h,p){let m=c.Wa[c.currentUser.toKey()];m||(m=new Xt(Ze)),m=m.insert(h,p),c.Wa[c.currentUser.toKey()]=m}(i,a.batchId,t),await Mh(i,a.changes),await em(i.remoteStore)}catch(a){const o=Fv(a,"Failed to persist write");t.reject(o)}}async function qA(n,e){const t=Me(n);try{const i=await OM(t.localStore,e);e.targetChanges.forEach((a,o)=>{const c=t.Ka.get(o);c&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?pt(c.Ba):a.removedDocuments.size>0&&(pt(c.Ba),c.Ba=!1))}),await Mh(t,i,e)}catch(i){await fc(i)}}function bb(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ka.forEach((o,c)=>{const h=c.view.sa(e);h.snapshot&&a.push(h.snapshot)}),function(c,h){const p=Me(c);p.onlineState=h;let m=!1;p.queries.forEach((g,E)=>{for(const C of E.ta)C.sa(h)&&(m=!0)}),m&&$v(p)}(i.eventManager,e),a.length&&i.La.p_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wP(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Ka.get(e),o=a&&a.key;if(o){let c=new Xt(ye.comparator);c=c.insert(o,Vn.newNoDocument(o,De.min()));const h=Qe().add(o),p=new Xp(De.min(),new Map,new Xt(Ze),c,h);await qA(i,p),i.$a=i.$a.remove(o),i.Ka.delete(e),Wv(i)}else await Ly(i.localStore,e,!1).then(()=>Uy(i,e,t)).catch(fc)}async function TP(n,e){const t=Me(n),i=e.batch.batchId;try{const a=await DM(t.localStore,e);$A(t,i,null),HA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Mh(t,a)}catch(a){await fc(a)}}async function bP(n,e,t){const i=Me(n);try{const a=await function(c,h){const p=Me(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return p.mutationQueue.lookupMutationBatch(m,h).next(E=>(pt(E!==null),g=E.keys(),p.mutationQueue.removeMutationBatch(m,E))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,g,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>p.localDocuments.getDocuments(m,g))})}(i.localStore,e);$A(i,e,t),HA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Mh(i,a)}catch(a){await fc(a)}}function HA(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function $A(n,e,t){const i=Me(n);let a=i.Wa[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),i.Wa[i.currentUser.toKey()]=a}}function Uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||GA(n,i)})}function GA(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Vv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Wv(n))}function Sb(n,e,t){for(const i of t)i instanceof zA?(n.Ua.addReference(i.key,e),SP(n,i)):i instanceof BA?(de(Kv,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||GA(n,i.key)):xe()}function SP(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(de(Kv,"New document in limbo: "+t),n.Qa.add(i),Wv(n))}function Wv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ye(bt.fromString(e)),i=n.za.next();n.Ka.set(i,new fP(t)),n.$a=n.$a.insert(t,i),MA(n.remoteStore,new ma(vr(Gp(t.path)),i,"TargetPurposeLimboResolution",qp.ae))}}async function Mh(n,e,t){const i=Me(n),a=[],o=[],c=[];i.ka.isEmpty()||(i.ka.forEach((h,p)=>{c.push(i.Ha(p,e,t).then(m=>{var g;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(p.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){a.push(m);const E=Pv.Yi(p.targetId,m);o.push(E)}}))}),await Promise.all(c),i.La.p_(a),await async function(p,m){const g=Me(p);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ne.forEach(m,C=>ne.forEach(C.Hi,x=>g.persistence.referenceDelegate.addReference(E,C.targetId,x)).next(()=>ne.forEach(C.Ji,x=>g.persistence.referenceDelegate.removeReference(E,C.targetId,x)))))}catch(E){if(!pc(E))throw E;de(Lv,"Failed to update sequence numbers: "+E)}for(const E of m){const C=E.targetId;if(!E.fromCache){const x=g.Ts.get(C),O=x.snapshotVersion,j=x.withLastLimboFreeSnapshotVersion(O);g.Ts=g.Ts.insert(C,j)}}}(i.localStore,o))}async function CP(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){de(Kv,"User change. New user:",e.toKey());const i=await NA(t.localStore,e);t.currentUser=e,function(o,c){o.Ga.forEach(h=>{h.forEach(p=>{p.reject(new he(ee.CANCELLED,c))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Mh(t,i.Rs)}}function AP(n,e){const t=Me(n),i=t.Ka.get(e);if(i&&i.Ba)return Qe().add(i.key);{let a=Qe();const o=t.qa.get(e);if(!o)return a;for(const c of o){const h=t.ka.get(c);a=a.unionWith(h.view.ba)}return a}}function KA(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wP.bind(null,e),e.La.p_=cP.bind(null,e.eventManager),e.La.Ja=uP.bind(null,e.eventManager),e}function RP(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bP.bind(null,e),e}class op{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zp(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return kM(this.persistence,new IM,e.initialUser,this.serializer)}Xa(e){return new xA(Mv.ri,this.serializer)}Za(e){return new jM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}op.provider={build:()=>new op};class IP extends op{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){pt(this.persistence.referenceDelegate instanceof sp);const i=this.persistence.referenceDelegate.garbageCollector;return new fM(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new xA(i=>sp.ri(i,t),this.serializer)}}class zy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CP.bind(null,this.syncEngine),await aP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lP}()}createDatastore(e){const t=Zp(e.databaseInfo.databaseId),i=function(o){return new qM(o)}(e.databaseInfo);return function(o,c,h,p){return new KM(o,c,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,o,c,h){return new QM(i,a,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>bb(this.syncEngine,t,0),function(){return gb.D()?new gb:new UM}())}createSyncEngine(e,t){return function(a,o,c,h,p,m,g){const E=new pP(a,o,c,h,p,m);return g&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=Me(a);de(Do,"RemoteStore shutting down."),o.W_.add(5),await Oh(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zy.provider={build:()=>new zy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="FirestoreClient";class xP{constructor(e,t,i,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Ln.UNAUTHENTICATED,this.clientId=FC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{de(Oa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(de(Oa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Fv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Hg(n,e){n.asyncQueue.verifyOperationInProgress(),de(Oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await NA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Cb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await NP(n);de(Oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>vb(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>vb(e.remoteStore,a)),n._onlineComponents=e}async function NP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(Oa,"Using user provided OfflineComponentProvider");try{await Hg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ee.FAILED_PRECONDITION||a.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Jl("Error using user provided cache. Falling back to memory cache: "+t),await Hg(n,new op)}}else de(Oa,"Using default OfflineComponentProvider"),await Hg(n,new IP(void 0));return n._offlineComponents}async function WA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(Oa,"Using user provided OnlineComponentProvider"),await Cb(n,n._uninitializedComponentsProvider._online)):(de(Oa,"Using default OnlineComponentProvider"),await Cb(n,new zy))),n._onlineComponents}function kP(n){return WA(n).then(e=>e.syncEngine)}async function lp(n){const e=await WA(n),t=e.eventManager;return t.onListen=mP.bind(null,e.syncEngine),t.onUnlisten=yP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_P.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vP.bind(null,e.syncEngine),t}function DP(n,e,t={}){const i=new us;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,p,m){const g=new Qv({next:C=>{g.su(),c.enqueueAndForget(()=>Hv(o,E));const x=C.docs.has(h);!x&&C.fromCache?m.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&C.fromCache&&p&&p.source==="server"?m.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(C)},error:C=>m.reject(C)}),E=new Gv(Gp(h.path),g,{includeMetadataChanges:!0,Ta:!0});return qv(o,E)}(await lp(n),n.asyncQueue,e,t,i)),i.promise}function OP(n,e,t={}){const i=new us;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,p,m){const g=new Qv({next:C=>{g.su(),c.enqueueAndForget(()=>Hv(o,E)),C.fromCache&&p.source==="server"?m.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(C)},error:C=>m.reject(C)}),E=new Gv(h,g,{includeMetadataChanges:!0,Ta:!0});return qv(o,E)}(await lp(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(n,e,t){if(!t)throw new he(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MP(n,e,t,i){if(e===!0&&i===!0)throw new he(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Rb(n){if(!ye.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ib(n){if(ye.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe()}function Wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tm(n);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firestore.googleapis.com",xb=!0;class Nb{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YA,this.ssl=xb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:xb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hM)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new B4;switch(i.type){case"firstParty":return new $4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Ab.get(t);i&&(de("ComponentProvider","Removing Datastore"),Ab.delete(t),i.terminate())}(this),Promise.resolve()}}function PP(n,e,t,i={}){var a;const o=(n=Wn(n,Ph))._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o.host!==YA&&o.host!==h&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:i});if(!Aa(p,c)&&(n._setSettings(p),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ln.MOCK_USER;else{m=yv(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ln(E)}n._authCredentials=new F4(new BC(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Un{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class wa extends As{constructor(e,t,i){super(e,t,Gp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new ye(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function Fo(n,e,...t){if(n=St(n),Yv("collection","path",e),n instanceof Ph){const i=bt.fromString(e,...t);return Ib(i),new wa(n,null,i)}{if(!(n instanceof Un||n instanceof wa))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bt.fromString(e,...t));return Ib(i),new wa(n.firestore,null,i)}}function LP(n,e){if(n=Wn(n,Ph),Yv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,function(i){return new Uo(bt.emptyPath(),i)}(e))}function Qi(n,e,...t){if(n=St(n),arguments.length===1&&(e=FC.newId()),Yv("doc","path",e),n instanceof Ph){const i=bt.fromString(e,...t);return Rb(i),new Un(n,null,new ye(i))}{if(!(n instanceof Un||n instanceof wa))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bt.fromString(e,...t));return Rb(i),new Un(n.firestore,n instanceof wa?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="AsyncQueue";class Db{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new DA(this,"async_queue_retry"),this.bu=()=>{const i=qg();i&&de(kb,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=qg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=qg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new us;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!pc(e))throw e;de(kb,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const a=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw gs("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=Bv.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(a),a}Du(){this.gu&&xe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Ob(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class vs extends Ph{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Db,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}}function VP(n,e){const t=typeof n=="object"?n:Fp(),i=typeof n=="string"?n:ep,a=Nh(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=gv("firestore");o&&PP(a,...o)}return a}function nm(n){if(n._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jP(n),n._firestoreClient}function jP(n){var e,t,i;const a=n._freezeSettings(),o=function(h,p,m,g){return new s5(h,p,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,QA(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new xP(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sc(Dn.fromBase64String(e))}catch(t){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sc(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=/^__.*__$/;class zP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new kh(e,this.data,t,this.fieldTransforms)}}class XA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Jv{constructor(e,t,i,a,o,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Jv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.$u(e),a}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return cp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(ZA(this.Lu)&&UP.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class BP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Zp(e)}ju(e,t,i,a=!1){return new Jv({Lu:e,methodName:t,zu:i,path:kn.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sm(n){const e=n._freezeSettings(),t=Zp(n._databaseId);return new BP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JA(n,e,t,i,a,o={}){const c=n.ju(o.merge||o.mergeFields?2:0,e,t,a);t0("Data must be an object, but it was:",c,i);const h=eR(i,c);let p,m;if(o.merge)p=new fi(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const E of o.mergeFields){const C=By(e,E,t);if(!c.contains(C))throw new he(ee.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);nR(g,C)||g.push(C)}p=new fi(g),m=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,m=c.fieldTransforms;return new zP(new ti(h),p,m)}class am extends rm{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof am}}class e0 extends rm{_toFieldTransform(e){return new k5(e.path,new dh)}isEqual(e){return e instanceof e0}}function FP(n,e,t,i){const a=n.ju(1,e,t);t0("Data must be an object, but it was:",a,i);const o=[],c=ti.empty();Ua(i,(p,m)=>{const g=n0(e,p,t);m=St(m);const E=a.Ku(g);if(m instanceof am)o.push(g);else{const C=Lh(m,E);C!=null&&(o.push(g),c.set(g,C))}});const h=new fi(o);return new XA(c,h,a.fieldTransforms)}function qP(n,e,t,i,a,o){const c=n.ju(1,e,t),h=[By(e,i,t)],p=[a];if(o.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<o.length;C+=2)h.push(By(e,o[C])),p.push(o[C+1]);const m=[],g=ti.empty();for(let C=h.length-1;C>=0;--C)if(!nR(m,h[C])){const x=h[C];let O=p[C];O=St(O);const j=c.Ku(x);if(O instanceof am)m.push(x);else{const D=Lh(O,j);D!=null&&(m.push(x),g.set(x,D))}}const E=new fi(m);return new XA(g,E,c.fieldTransforms)}function HP(n,e,t,i=!1){return Lh(t,n.ju(i?4:3,e))}function Lh(n,e){if(tR(n=St(n)))return t0("Unsupported field value:",e,n),eR(n,e);if(n instanceof rm)return function(i,a){if(!ZA(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,a){const o=[];let c=0;for(const h of i){let p=Lh(h,a.Uu(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}}(n,e)}return function(i,a){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return I5(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Qt.fromDate(i);return{timestampValue:rp(a.serializer,o)}}if(i instanceof Qt){const o=new Qt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rp(a.serializer,o)}}if(i instanceof Xv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sc)return{bytesValue:wA(a.serializer,i._byteString)};if(i instanceof Un){const o=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zv)return function(c,h){return{mapValue:{fields:{[YC]:{stringValue:XC},[tp]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return Iv(h.serializer,m)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${tm(i)}`)}(n,e)}function eR(n,e){const t={};return HC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,(i,a)=>{const o=Lh(a,e.qu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function tR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qt||n instanceof Xv||n instanceof sc||n instanceof Un||n instanceof rm||n instanceof Zv)}function t0(n,e,t){if(!tR(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=tm(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function By(n,e,t){if((e=St(e))instanceof im)return e._internalPath;if(typeof e=="string")return n0(n,e);throw cp("Field path arguments must be of type string or ",n,!1,void 0,t)}const $P=new RegExp("[~\\*/\\[\\]]");function n0(n,e,t){if(e.search($P)>=0)throw cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new im(...e.split("."))._internalPath}catch{throw cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cp(n,e,t,i,a){const o=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new he(ee.INVALID_ARGUMENT,h+n+p)}function nR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,i,a,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(i0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GP extends iR{data(){return super.data()}}function i0(n,e){return typeof e=="string"?n0(n,e):e instanceof im?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}class sR extends r0{}function s0(n,e,...t){let i=[];e instanceof r0&&i.push(e),i=i.concat(t),function(o){const c=o.filter(p=>p instanceof o0).length,h=o.filter(p=>p instanceof a0).length;if(c>1||c>0&&h>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class a0 extends sR{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new a0(e,t,i)}_apply(e){const t=this._parse(e);return aR(e._query,t),new As(e.firestore,e.converter,Ny(e._query,t))}_parse(e){const t=sm(e.firestore);return function(o,c,h,p,m,g,E){let C;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Pb(E,g);const O=[];for(const j of E)O.push(Mb(p,o,j));C={arrayValue:{values:O}}}else C=Mb(p,o,E)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Pb(E,g),C=HP(h,c,E,g==="in"||g==="not-in");return Wt.create(m,g,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class o0 extends r0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new o0(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Zi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,o){let c=a;const h=o.getFlattenedFilters();for(const p of h)aR(c,p),c=Ny(c,p)}(e._query,t),new As(e.firestore,e.converter,Ny(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l0 extends sR{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new l0(e,t)}_apply(e){const t=function(a,o,c){if(a.startAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(o,c)}(e._query,this._field,this._direction);return new As(e.firestore,e.converter,function(a,o){const c=a.explicitOrderBy.concat([o]);return new Uo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function c0(n,e="asc"){const t=e,i=i0("orderBy",n);return l0._create(i,t)}function Mb(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sA(e)&&t.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(bt.fromString(t));if(!ye.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return QT(n,new ye(i))}if(t instanceof Un)return QT(n,t._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(t)}.`)}function Pb(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aR(n,e){const t=function(a,o){for(const c of a)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KP{convertValue(e,t="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ua(e,(a,o)=>{i[a]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,a;const o=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[tp].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>qt(c.doubleValue));return new Zv(o)}convertGeoPoint(e){return new Xv(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$p(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const t=xa(e);return new Qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=bt.fromString(e);pt(RA(i));const a=new ch(i.get(1),i.get(3)),o=new ye(i.popFirst(5));return a.isEqual(t)||gs(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lR extends iR{constructor(e,t,i,a,o,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(i0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Mf extends lR{data(e={}){return super.data(e)}}class cR{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Uu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Mf(this._firestore,this._userDataWriter,i.key,i,new Uu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const p=new Mf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Uu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const p=new Mf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Uu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:WP(h.type),doc:p,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function WP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n){n=Wn(n,Un);const e=Wn(n.firestore,vs);return DP(nm(e),n._key).then(t=>uR(e,n,t))}class u0 extends KP{constructor(e){super(),this.firestore=e}convertBytes(e){return new sc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function om(n){n=Wn(n,As);const e=Wn(n.firestore,vs),t=nm(e),i=new u0(e);return rR(n._query),OP(t,n._query).then(a=>new cR(e,i,n,a))}function h0(n,e,t){n=Wn(n,Un);const i=Wn(n.firestore,vs),a=oR(n.converter,e,t);return lm(i,[JA(sm(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Pi.none())])}function Eo(n,e,t,...i){n=Wn(n,Un);const a=Wn(n.firestore,vs),o=sm(a);let c;return c=typeof(e=St(e))=="string"||e instanceof im?qP(o,"updateDoc",n._key,e,t,i):FP(o,"updateDoc",n._key,e),lm(a,[c.toMutation(n._key,Pi.exists(!0))])}function $u(n){return lm(Wn(n.firestore,vs),[new xv(n._key,Pi.none())])}function d0(n,e){const t=Wn(n.firestore,vs),i=Qi(n),a=oR(n.converter,e);return lm(t,[JA(sm(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Pi.exists(!1))]).then(()=>i)}function QP(n,...e){var t,i,a;n=St(n);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Ob(e[c])||(o=e[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ob(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(a=E.complete)===null||a===void 0?void 0:a.bind(E)}let p,m,g;if(n instanceof Un)m=Wn(n.firestore,vs),g=Gp(n._key.path),p={next:E=>{e[c]&&e[c](uR(m,n,E))},error:e[c+1],complete:e[c+2]};else{const E=Wn(n,As);m=Wn(E.firestore,vs),g=E._query;const C=new u0(m);p={next:x=>{e[c]&&e[c](new cR(m,C,E,x))},error:e[c+1],complete:e[c+2]},rR(n._query)}return function(C,x,O,j){const D=new Qv(j),U=new Gv(x,D,O);return C.asyncQueue.enqueueAndForget(async()=>qv(await lp(C),U)),()=>{D.su(),C.asyncQueue.enqueueAndForget(async()=>Hv(await lp(C),U))}}(nm(m),g,h,p)}function lm(n,e){return function(i,a){const o=new us;return i.asyncQueue.enqueueAndForget(async()=>EP(await kP(i),a,o)),o.promise}(nm(n),e)}function uR(n,e,t){const i=t.docs.get(e._key),a=new u0(n);return new lR(n,a,e._key,i,new Uu(t.hasPendingWrites,t.fromCache),e.converter)}function YP(){return new e0("serverTimestamp")}(function(e,t=!0){(function(a){dc=a})(ja),Ra(new ms("firestore",(i,{instanceIdentifier:a,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new vs(new q4(i.getProvider("auth-internal")),new G4(c,i.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ch(m.options.projectId,g)}(c,a),c);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Mi(jT,UT,e),Mi(jT,UT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="firebasestorage.googleapis.com",XP="storageBucket",ZP=2*60*1e3,JP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Rr{constructor(e,t,i=0){super($g(e),`Firebase Storage: ${t} (${$g(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Sr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Sr||(Sr={}));function $g(n){return"storage/"+n}function e3(){const n="An unknown error occurred, please check the error payload for server response.";return new Ir(Sr.UNKNOWN,n)}function t3(){return new Ir(Sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n3(){return new Ir(Sr.CANCELED,"User canceled the upload/download.")}function i3(n){return new Ir(Sr.INVALID_URL,"Invalid URL '"+n+"'.")}function r3(n){return new Ir(Sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Lb(n){return new Ir(Sr.INVALID_ARGUMENT,n)}function dR(){return new Ir(Sr.APP_DELETED,"The Firebase app was deleted.")}function s3(n){return new Ir(Sr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Gi.makeFromUrl(e,t)}catch{return new Gi(e,"")}if(i.path==="")return i;throw r3(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),p={bucket:1,path:3};function m(z){z.path_=decodeURIComponent(z.path)}const g="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",x=new RegExp(`^https?://${E}/${g}/b/${a}/o${C}`,"i"),O={bucket:1,path:3},j=t===hR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",U=new RegExp(`^https?://${j}/${a}/${D}`,"i"),q=[{regex:h,indices:p,postModify:o},{regex:x,indices:O,postModify:m},{regex:U,indices:{bucket:1,path:2},postModify:m}];for(let z=0;z<q.length;z++){const Y=q[z],W=Y.regex.exec(e);if(W){const R=W[Y.indices.bucket];let T=W[Y.indices.path];T||(T=""),i=new Gi(R,T),Y.postModify(i);break}}if(i==null)throw i3(e);return i}}class a3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(n,e,t){let i=1,a=null,o=null,c=!1,h=0;function p(){return h===2}let m=!1;function g(...D){m||(m=!0,e.apply(null,D))}function E(D){a=setTimeout(()=>{a=null,n(x,p())},D)}function C(){o&&clearTimeout(o)}function x(D,...U){if(m){C();return}if(D){C(),g.call(null,D,...U);return}if(p()||c){C(),g.call(null,D,...U);return}i<64&&(i*=2);let q;h===1?(h=2,q=0):q=(i+Math.random())*1e3,E(q)}let O=!1;function j(D){O||(O=!0,C(),!m&&(a!==null?(D||(h=2),clearTimeout(a),E(0)):D||(h=1)))}return E(0),o=setTimeout(()=>{c=!0,j(!0)},t),j}function l3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n){return n!==void 0}function Vb(n,e,t,i){if(i<e)throw Lb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Lb(`Invalid value for '${n}'. Expected ${t} or less.`)}function u3(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var up;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(up||(up={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,t,i,a,o,c,h,p,m,g,E,C=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=E,this.retry=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,O)=>{this.resolve_=x,this.reject_=O,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Ef(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const p=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===up.NO_ERROR,p=o.getStatus();if(!h||h3(p,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===up.ABORT;i(!1,new Ef(!1,null,g));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new Ef(m,o))})},t=(i,a)=>{const o=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());c3(p)?o(p):o()}catch(p){c(p)}else if(h!==null){const p=e3();p.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,p)):c(p)}else if(a.canceled){const p=this.appDelete_?dR():n3();c(p)}else{const p=t3();c(p)}};this.canceled_?t(!1,new Ef(!1,null,!0)):this.backoffId_=o3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ef{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function f3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function p3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function _3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function g3(n,e,t,i,a,o,c=!0){const h=u3(n.urlParams),p=n.url+h,m=Object.assign({},n.headers);return m3(m,e),f3(m,t),p3(m,o),_3(m,i),new d3(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function v3(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this._service=e,t instanceof Gi?this._location=t:this._location=Gi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hp(e,t)}get root(){const e=new Gi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return v3(this._location.path)}get storage(){return this._service}get parent(){const e=y3(this._location.path);if(e===null)return null;const t=new Gi(this._location.bucket,e);return new hp(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw s3(e)}}function jb(n,e){const t=e==null?void 0:e[XP];return t==null?null:Gi.makeFromBucketSpec(t,n)}function E3(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:yv(a,n.app.options.projectId))}class w3{constructor(e,t,i,a,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=hR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZP,this._maxUploadRetryTime=JP,this._requests=new Set,a!=null?this._bucket=Gi.makeFromBucketSpec(a,this._host):this._bucket=jb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gi.makeFromBucketSpec(this._url,e):this._bucket=jb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Vb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Vb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hp(this,e)}_makeRequest(e,t,i,a,o=!0){if(this._deleted)return new a3(dR());{const c=g3(e,this._appId,i,a,t,this._firebaseVersion,o);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const Ub="@firebase/storage",zb="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="storage";function T3(n=Fp(),e){n=St(n);const i=Nh(n,fR).getImmediate({identifier:e}),a=gv("storage");return a&&b3(i,...a),i}function b3(n,e,t,i={}){E3(n,e,t,i)}function S3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new w3(t,i,a,e,ja)}function C3(){Ra(new ms(fR,S3,"PUBLIC").setMultipleInstances(!0)),Mi(Ub,zb,""),Mi(Ub,zb,"esm2017")}C3();function f0(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function pR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A3=pR,mR=new xh("auth","Firebase",pR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new Bp("@firebase/auth");function R3(n,...e){dp.logLevel<=$e.WARN&&dp.warn(`Auth (${ja}): ${n}`,...e)}function Pf(n,...e){dp.logLevel<=$e.ERROR&&dp.error(`Auth (${ja}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,...e){throw p0(n,...e)}function wr(n,...e){return p0(n,...e)}function _R(n,e,t){const i=Object.assign(Object.assign({},A3()),{[e]:t});return new xh("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return _R(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p0(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return mR.create(n,...e)}function Se(n,e,...t){if(!n)throw p0(e,...t)}function is(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function Es(n,e){n||is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function I3(){return Bb()==="http:"||Bb()==="https:"}function Bb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I3()||mO()||"connection"in navigator)?navigator.onLine:!0}function N3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Es(t>e,"Short delay should be less than long delay!"),this.isMobile=vv()||IC()}get(){return x3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n,e){Es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new Vh(3e4,6e4);function Ba(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fa(n,e,t,i,a={}){return yR(n,a,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const h=hc(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},o);return pO()||(m.referrerPolicy="no-referrer"),gR.fetch()(vR(n,n.config.apiHost,t,h),m)})}async function yR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},k3),e);try{const a=new M3(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw wf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw wf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw wf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw wf(n,"user-disabled",c);const g=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _R(n,g,m);Ji(n,g)}}catch(a){if(a instanceof Rr)throw a;Ji(n,"network-request-failed",{message:String(a)})}}async function jh(n,e,t,i,a={}){const o=await Fa(n,e,t,i,a);return"mfaPendingCredential"in o&&Ji(n,"multi-factor-auth-required",{_serverResponse:o}),o}function vR(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?m0(n.config,a):`${n.config.apiScheme}://${a}`}function O3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(wr(this.auth,"network-request-failed")),D3.get())})}}function wf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=wr(n,e,i);return a.customData._tokenResponse=t,a}function Fb(n){return n!==void 0&&n.enterprise!==void 0}class P3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return O3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function L3(n,e){return Fa(n,"GET","/v2/recaptchaConfig",Ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(n,e){return Fa(n,"POST","/v1/accounts:delete",e)}async function ER(n,e){return Fa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j3(n,e=!1){const t=St(n),i=await t.getIdToken(e),a=_0(i);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:a,token:i,authTime:Gu(Gg(a.auth_time)),issuedAtTime:Gu(Gg(a.iat)),expirationTime:Gu(Gg(a.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Gg(n){return Number(n)*1e3}function _0(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Yf(t);return a?JSON.parse(a):(Pf("Failed to decode base64 JWT payload"),null)}catch(a){return Pf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function qb(n){const e=_0(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Rr&&U3(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function U3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(n){var e;const t=n.auth,i=await n.getIdToken(),a=await _h(n,ER(t,{idToken:i}));Se(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?wR(o.providerUserInfo):[],h=F3(n.providerData,c),p=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),g=p?m:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new qy(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,E)}async function B3(n){const e=St(n);await fp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F3(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function wR(n){return n.map(e=>{var{providerId:t}=e,i=f0(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(n,e){const t=await yR(n,{},async()=>{const i=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=vR(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",gR.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function H3(n,e){return Fa(n,"POST","/v2/accounts:revokeToken",Ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await q3(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,c=new Gl;return i&&(Se(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Se(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rs{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,o=f0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _h(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return j3(this,e)}reload(){return B3(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await fp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await _h(this,V3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,o,c,h,p,m,g;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(a=t.email)!==null&&a!==void 0?a:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,O=(c=t.photoURL)!==null&&c!==void 0?c:void 0,j=(h=t.tenantId)!==null&&h!==void 0?h:void 0,D=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,U=(m=t.createdAt)!==null&&m!==void 0?m:void 0,$=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:q,emailVerified:z,isAnonymous:Y,providerData:W,stsTokenManager:R}=t;Se(q&&R,e,"internal-error");const T=Gl.fromJSON(this.name,R);Se(typeof q=="string",e,"internal-error"),ua(E,e.name),ua(C,e.name),Se(typeof z=="boolean",e,"internal-error"),Se(typeof Y=="boolean",e,"internal-error"),ua(x,e.name),ua(O,e.name),ua(j,e.name),ua(D,e.name),ua(U,e.name),ua($,e.name);const w=new rs({uid:q,auth:e,email:C,emailVerified:z,displayName:E,isAnonymous:Y,photoURL:O,phoneNumber:x,tenantId:j,stsTokenManager:T,createdAt:U,lastLoginAt:$});return W&&Array.isArray(W)&&(w.providerData=W.map(A=>Object.assign({},A))),D&&(w._redirectEventId=D),w}static async _fromIdTokenResponse(e,t,i=!1){const a=new Gl;a.updateFromServerResponse(t);const o=new rs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await fp(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?wR(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new Gl;h.updateFromIdToken(i);const p=new rs({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new qy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new Map;function ss(n){Es(n instanceof Function,"Expected a class definition");let e=Hb.get(n);return e?(Es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Hb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TR.type="NONE";const $b=TR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n,e,t){return`firebase:${n}:${e}:${t}`}class Kl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=Lf(this.userKey,a.apiKey,o),this.fullPersistenceKey=Lf("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?rs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Kl(ss($b),e,i);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||ss($b);const c=Lf(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(c);if(g){const E=rs._fromJSON(e,g);m!==o&&(h=E),o=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new Kl(o,e,i):(o=p[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Kl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IR(e))return"Blackberry";if(xR(e))return"Webos";if(SR(e))return"Safari";if((e.includes("chrome/")||CR(e))&&!e.includes("edge/"))return"Chrome";if(RR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function bR(n=zn()){return/firefox\//i.test(n)}function SR(n=zn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CR(n=zn()){return/crios\//i.test(n)}function AR(n=zn()){return/iemobile/i.test(n)}function RR(n=zn()){return/android/i.test(n)}function IR(n=zn()){return/blackberry/i.test(n)}function xR(n=zn()){return/webos/i.test(n)}function g0(n=zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $3(n=zn()){var e;return g0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function G3(){return _O()&&document.documentMode===10}function NR(n=zn()){return g0(n)||RR(n)||xR(n)||IR(n)||/windows phone/i.test(n)||AR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n,e=[]){let t;switch(n){case"Browser":t=Gb(zn());break;case"Worker":t=`${Gb(zn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ja}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,h)=>{try{const p=e(o);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(n,e={}){return Fa(n,"GET","/v2/passwordPolicy",Ba(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=6;class Y3{constructor(e){var t,i,a,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:Q3,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,o,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(o=p.containsUppercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kb(this),this.idTokenSubscription=new Kb(this),this.beforeStateQueue=new K3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ss(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ER(this,{idToken:e}),i=await rs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(hs(this));const t=e?St(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W3(this),t=new Y3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await H3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ss(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&R3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qo(n){return St(n)}class Kb{constructor(e){this.auth=e,this.observer=null,this.addObserver=RO(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z3(n){cm=n}function DR(n){return cm.loadJS(n)}function J3(){return cm.recaptchaEnterpriseScript}function e9(){return cm.gapiScript}function t9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class n9{constructor(){this.enterprise=new i9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class i9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const r9="recaptcha-enterprise",OR="NO_RECAPTCHA";class s9{constructor(e){this.type=r9,this.auth=qo(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{L3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new P3(p);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(p=>{h(p)})})}function a(o,c,h){const p=window.grecaptcha;Fb(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(OR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new n9().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!t&&Fb(window.grecaptcha))a(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=J3();p.length!==0&&(p+=h),DR(p).then(()=>{a(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Wb(n,e,t,i=!1,a=!1){const o=new s9(n);let c;if(a)c=OR;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Hy(n,e,t,i,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Wb(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Wb(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(n,e){const t=Nh(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Aa(o,e??{}))return a;Ji(a,"already-initialized")}return t.initialize({options:e})}function o9(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ss);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function l9(n,e,t){const i=qo(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=MR(e),{host:c,port:h}=c9(e),p=h===null?"":`:${h}`,m={url:`${o}//${c}${p}/`},g=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(Aa(m,i.config.emulator)&&Aa(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,u9()}function MR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function c9(n){const e=MR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:Qb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:Qb(c)}}}function Qb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function u9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return is("not implemented")}_getIdTokenResponse(e){return is("not implemented")}_linkToIdToken(e,t){return is("not implemented")}_getReauthenticationResolver(e){return is("not implemented")}}async function h9(n,e){return Fa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(n,e){return jh(n,"POST","/v1/accounts:signInWithPassword",Ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f9(n,e){return jh(n,"POST","/v1/accounts:signInWithEmailLink",Ba(n,e))}async function p9(n,e){return jh(n,"POST","/v1/accounts:signInWithEmailLink",Ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends y0{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new gh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new gh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hy(e,t,"signInWithPassword",d9);case"emailLink":return f9(e,{email:this._email,oobCode:this._password});default:Ji(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hy(e,i,"signUpPassword",h9);case"emailLink":return p9(e,{idToken:t,email:this._email,oobCode:this._password});default:Ji(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e){return jh(n,"POST","/v1/accounts:signInWithIdp",Ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="http://localhost";class Oo extends y0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,o=f0(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Oo(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Wl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Wl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wl(e,t)}buildRequest(){const e={requestUri:m9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g9(n){const e=Mu(Pu(n)).link,t=e?Mu(Pu(e)).deep_link_id:null,i=Mu(Pu(n)).deep_link_id;return(i?Mu(Pu(i)).link:null)||i||t||e||n}class v0{constructor(e){var t,i,a,o,c,h;const p=Mu(Pu(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,g=(i=p.oobCode)!==null&&i!==void 0?i:null,E=_9((a=p.mode)!==null&&a!==void 0?a:null);Se(m&&g&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=g,this.continueUrl=(o=p.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=g9(e);try{return new v0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.providerId=_c.PROVIDER_ID}static credential(e,t){return gh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=v0.parseLink(t);return Se(i,"argument-error"),gh._fromEmailAndCode(e,i.code,i.tenantId)}}_c.PROVIDER_ID="password";_c.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_c.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends PR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Uh{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return da.credential(t,i)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Uh{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Uh{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return pa.credential(t,i)}catch{return null}}}pa.TWITTER_SIGN_IN_METHOD="twitter.com";pa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9(n,e){return jh(n,"POST","/v1/accounts:signUp",Ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await rs._fromIdTokenResponse(e,i,a),c=Yb(i);return new Mo({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Yb(i);return new Mo({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Rr{constructor(e,t,i,a){var o;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,pp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new pp(e,t,i,a)}}function LR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?pp._fromErrorAndOperation(n,o,e,i):o})}async function v9(n,e,t=!1){const i=await _h(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E9(n,e,t=!1){const{auth:i}=n;if(ei(i.app))return Promise.reject(hs(i));const a="reauthenticate";try{const o=await _h(n,LR(i,a,e,n),t);Se(o.idToken,i,"internal-error");const c=_0(o.idToken);Se(c,i,"internal-error");const{sub:h}=c;return Se(n.uid===h,i,"user-mismatch"),Mo._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ji(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e,t=!1){if(ei(n.app))return Promise.reject(hs(n));const i="signIn",a=await LR(n,i,e),o=await Mo._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(o.user),o}async function w9(n,e){return VR(qo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(n){const e=qo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T9(n,e,t){if(ei(n.app))return Promise.reject(hs(n));const i=qo(n),c=await Hy(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y9).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jR(n),p}),h=await Mo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function b9(n,e,t){return ei(n.app)?Promise.reject(hs(n)):w9(St(n),_c.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&jR(n),i})}function S9(n,e,t,i){return St(n).onIdTokenChanged(e,t,i)}function C9(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function A9(n,e,t,i){return St(n).onAuthStateChanged(e,t,i)}function UR(n){return St(n).signOut()}const mp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mp,"1"),this.storage.removeItem(mp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=1e3,I9=10;class BR extends zR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);G3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,I9):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},R9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BR.type="LOCAL";const x9=BR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends zR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FR.type="SESSION";const qR=FR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new um(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async m=>m(t.origin,o)),p=await N9(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,p)=>{const m=E0("",20);a.port1.start();const g=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(E){const C=E;if(C.data.eventId===m)switch(C.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(C.data.response);break;default:clearTimeout(g),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function D9(n){Tr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function O9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M9(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function P9(){return HR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebaseLocalStorageDb",L9=1,_p="firebaseLocalStorage",GR="fbase_key";class zh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hm(n,e){return n.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function V9(){const n=indexedDB.deleteDatabase($R);return new zh(n).toPromise()}function $y(){const n=indexedDB.open($R,L9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_p,{keyPath:GR})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(_p)?e(i):(i.close(),await V9(),e(await $y()))})})}async function Xb(n,e,t){const i=hm(n,!0).put({[GR]:e,value:t});return new zh(i).toPromise()}async function j9(n,e){const t=hm(n,!1).get(e),i=await new zh(t).toPromise();return i===void 0?null:i.value}function Zb(n,e){const t=hm(n,!0).delete(e);return new zh(t).toPromise()}const U9=800,z9=3;class KR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $y(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>z9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=um._getInstance(P9()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await O9(),!this.activeServiceWorker)return;this.sender=new k9(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $y();return await Xb(e,mp,"1"),await Zb(e,mp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>j9(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=hm(a,!1).getAll();return new zh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KR.type="LOCAL";const B9=KR;new Vh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(n,e){return e?ss(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends y0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function q9(n){return VR(n.auth,new w0(n),n.bypassAuthState)}function H9(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),E9(t,new w0(n),n.bypassAuthState)}async function $9(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),v9(t,new w0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q9;case"linkViaPopup":case"linkViaRedirect":return $9;case"reauthViaPopup":case"reauthViaRedirect":return H9;default:Ji(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=new Vh(2e3,1e4);class ql extends WR{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=E0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G9.get())};e()}}ql.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="pendingRedirect",Vf=new Map;class W9 extends WR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Vf.get(this.auth._key());if(!e){try{const i=await Q9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Vf.set(this.auth._key(),e)}return this.bypassAuthState||Vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q9(n,e){const t=Z9(e),i=X9(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function Y9(n,e){Vf.set(n._key(),e)}function X9(n){return ss(n._redirectPersistence)}function Z9(n){return Lf(K9,n.config.apiKey,n.name)}async function J9(n,e,t=!1){if(ei(n.app))return Promise.reject(hs(n));const i=qo(n),a=F9(i,e),c=await new W9(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=10*60*1e3;class tL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!QR(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(wr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(n,e={}){return Fa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sL=/^https?/;async function aL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iL(n);for(const t of e)try{if(oL(t))return}catch{}Ji(n,"unauthorized-domain")}function oL(n){const e=Fy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!sL.test(t))return!1;if(rL.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new Vh(3e4,6e4);function eS(){const n=Tr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cL(n){return new Promise((e,t)=>{var i,a,o;function c(){eS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eS(),t(wr(n,"network-request-failed"))},timeout:lL.get()})}if(!((a=(i=Tr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=Tr().gapi)===null||o===void 0)&&o.load)c();else{const h=t9("iframefcb");return Tr()[h]=()=>{gapi.load?c():t(wr(n,"network-request-failed"))},DR(`${e9()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw jf=null,e})}let jf=null;function uL(n){return jf=jf||cL(n),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Vh(5e3,15e3),dL="__/auth/iframe",fL="emulator/auth/iframe",pL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _L(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?m0(e,fL):`https://${n.config.authDomain}/${dL}`,i={apiKey:e.apiKey,appName:n.name,v:ja},a=mL.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${hc(i).slice(1)}`}async function gL(n){const e=await uL(n),t=Tr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:_L(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pL,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=wr(n,"network-request-failed"),h=Tr().setTimeout(()=>{o(c)},hL.get());function p(){Tr().clearTimeout(h),a(i)}i.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vL=500,EL=600,wL="_blank",TL="http://localhost";class tS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bL(n,e,t,i=vL,a=EL){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},yL),{width:i.toString(),height:a.toString(),top:o,left:c}),m=zn().toLowerCase();t&&(h=CR(m)?wL:t),bR(m)&&(e=e||TL,p.scrollbars="yes");const g=Object.entries(p).reduce((C,[x,O])=>`${C}${x}=${O},`,"");if($3(m)&&h!=="_self")return SL(e||"",h),new tS(null);const E=window.open(e||"",h,g);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new tS(E)}function SL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="__/auth/handler",AL="emulator/auth/handler",RL=encodeURIComponent("fac");async function nS(n,e,t,i,a,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ja,eventId:a};if(e instanceof PR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yy(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,E]of Object.entries({}))c[g]=E}if(e instanceof Uh){const g=e.getScopes().filter(E=>E!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const p=await n._getAppCheckToken(),m=p?`#${RL}=${encodeURIComponent(p)}`:"";return`${IL(n)}?${hc(h).slice(1)}${m}`}function IL({config:n}){return n.emulator?m0(n,AL):`https://${n.authDomain}/${CL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="webStorageSupport";class xL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qR,this._completeRedirectFn=J9,this._overrideRedirectResult=Y9}async _openPopup(e,t,i,a){var o;Es((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await nS(e,t,i,Fy(),a);return bL(e,c,E0())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await nS(e,t,i,Fy(),a);return D9(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Es(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await gL(e),i=new tL(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kg,{type:Kg},a=>{var o;const c=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Kg];c!==void 0&&t(!!c),Ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NR()||SR()||g0()}}const NL=xL;var iS="@firebase/auth",rS="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OL(n){Ra(new ms("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kR(n)},m=new X3(i,a,o,p);return o9(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ra(new ms("auth-internal",e=>{const t=qo(e.getProvider("auth").getImmediate());return(i=>new kL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(iS,rS,DL(n)),Mi(iS,rS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=5*60,PL=RC("authIdTokenMaxAge")||ML;let sS=null;const LL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>PL)return;const a=t==null?void 0:t.token;sS!==a&&(sS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function VL(n=Fp()){const e=Nh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=a9(n,{popupRedirectResolver:NL,persistence:[B9,x9,qR]}),i=RC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=LL(o.toString());C9(t,c,()=>c(t.currentUser)),S9(t,h=>c(h))}}const a=CC("auth");return a&&l9(t,`http://${a}`),t}function jL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Z3({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const o=wr("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",jL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OL("Browser");var aS={};const oS="@firebase/database",lS="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YR="";function UL(n){YR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ln(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:sh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Cs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zL(e)}}catch{}return new BL},Ao=XR("localStorage"),FL=XR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Bp("@firebase/database"),qL=function(){let n=1;return function(){return n++}}(),ZR=function(n){const e=NO(n),t=new AO;t.update(e);const i=t.digest();return _v.encodeByteArray(i)},Bh=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Bh.apply(null,i):typeof i=="object"?e+=ln(i):e+=i,e+=" "}return e};let Ku=null,cS=!0;const HL=function(n,e){oe(!0,"Can't turn on custom loggers persistently."),Ql.logLevel=$e.VERBOSE,Ku=Ql.log.bind(Ql)},jn=function(...n){if(cS===!0&&(cS=!1,Ku===null&&FL.get("logging_enabled")===!0&&HL()),Ku){const e=Bh.apply(null,n);Ku(e)}},Fh=function(n){return function(...e){jn(n,...e)}},Gy=function(...n){const e="FIREBASE INTERNAL ERROR: "+Bh(...n);Ql.error(e)},ws=function(...n){const e=`FIREBASE FATAL ERROR: ${Bh(...n)}`;throw Ql.error(e),new Error(e)},ii=function(...n){const e="FIREBASE WARNING: "+Bh(...n);Ql.warn(e)},$L=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ii("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},JR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},GL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ac="[MIN_NAME]",Po="[MAX_NAME]",gc=function(n,e){if(n===e)return 0;if(n===ac||e===Po)return-1;if(e===ac||n===Po)return 1;{const t=uS(n),i=uS(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},KL=function(n,e){return n===e?0:n<e?-1:1},Ru=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ln(e))},T0=function(n){if(typeof n!="object"||n===null)return ln(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=ln(e[i]),t+=":",t+=T0(n[e[i]]);return t+="}",t},eI=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const tI=function(n){oe(!JR(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,o,c,h,p;n===0?(o=0,c=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,c=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,c=Math.round(n/Math.pow(2,1-i-t))));const m=[];for(p=t;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(p=e;p;p-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(a?1:0),m.reverse();const g=m.join("");let E="";for(p=0;p<64;p+=8){let C=parseInt(g.substr(p,8),2).toString(16);C.length===1&&(C="0"+C),E=E+C}return E.toLowerCase()},WL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},QL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function YL(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const XL=new RegExp("^-?(0*)\\d{1,10}$"),ZL=-2147483648,JL=2147483647,uS=function(n){if(XL.test(n)){const e=Number(n);if(e>=ZL&&e<=JL)return e}return null},yc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ii("Exception was thrown by user callback.",t),e},Math.floor(0))}},e6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ii(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(jn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ii(e)}}class Uf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Uf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="5",nI="v",iI="s",rI="r",sI="f",aI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oI="ls",lI="p",Ky="ac",cI="websocket",uI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,i,a,o=!1,c="",h=!1,p=!1,m=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ao.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ao.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function i6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function dI(n,e,t){oe(typeof e=="string","typeof type must == string"),oe(typeof t=="object","typeof params must == object");let i;if(e===cI)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===uI)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);i6(n)&&(t.ns=n.namespace);const a=[];return ri(t,(o,c)=>{a.push(o+"="+c)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this.counters_={}}incrementCounter(e,t=1){Cs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return oO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg={},Qg={};function S0(n){const e=n.toString();return Wg[e]||(Wg[e]=new r6),Wg[e]}function s6(n,e){const t=n.toString();return Qg[t]||(Qg[t]=e()),Qg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&yc(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="start",o6="close",l6="pLPCommand",c6="pRTLPCB",fI="id",pI="pw",mI="ser",u6="cb",h6="seg",d6="ts",f6="d",p6="dframe",_I=1870,gI=30,m6=_I-gI,_6=25e3,g6=3e4;class Hl{constructor(e,t,i,a,o,c,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fh(e),this.stats_=S0(t),this.urlFn=p=>(this.appCheckToken&&(p[Ky]=this.appCheckToken),dI(t,uI,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new a6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(g6)),GL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new C0((...o)=>{const[c,h,p,m,g]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===hS)this.id=h,this.password=p;else if(c===o6)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[hS]="t",i[mI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[u6]=this.scriptTagHolder.uniqueCallbackIdentifier),i[nI]=b0,this.transportSessionId&&(i[iI]=this.transportSessionId),this.lastSessionId&&(i[oI]=this.lastSessionId),this.applicationId&&(i[lI]=this.applicationId),this.appCheckToken&&(i[Ky]=this.appCheckToken),typeof location<"u"&&location.hostname&&aI.test(location.hostname)&&(i[rI]=sI);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hl.forceAllow_=!0}static forceDisallow(){Hl.forceDisallow_=!0}static isAvailable(){return Hl.forceAllow_?!0:!Hl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WL()&&!QL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ln(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=bC(t),a=eI(i,m6);for(let o=0;o<a.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[p6]="t",i[fI]=e,i[pI]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ln(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class C0{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qL(),window[l6+this.uniqueCallbackIdentifier]=e,window[c6+this.uniqueCallbackIdentifier]=t,this.myIFrame=C0.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){jn("frame writing exception"),h.stack&&jn(h.stack),jn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||jn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fI]=this.myID,e[pI]=this.myPW,e[mI]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gI+i.length<=_I;){const c=this.pendingSegs.shift();i=i+"&"+h6+a+"="+c.seg+"&"+d6+a+"="+c.ts+"&"+f6+a+"="+c.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(_6)),o=()=>{clearTimeout(a),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{jn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=16384,v6=45e3;let gp=null;typeof MozWebSocket<"u"?gp=MozWebSocket:typeof WebSocket<"u"&&(gp=WebSocket);class $i{constructor(e,t,i,a,o,c,h){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fh(this.connId),this.stats_=S0(t),this.connURL=$i.connectionURL_(t,c,h,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,o){const c={};return c[nI]=b0,typeof location<"u"&&location.hostname&&aI.test(location.hostname)&&(c[rI]=sI),t&&(c[iI]=t),i&&(c[oI]=i),a&&(c[Ky]=a),o&&(c[lI]=o),dI(e,cI,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ao.set("previous_websocket_failure",!0);try{let i;gO(),this.mySock=new gp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){$i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&gp!==null&&!$i.forceDisallow_}static previouslyFailed(){return Ao.isInMemoryStorage||Ao.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ao.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=sh(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=ln(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=eI(t,y6);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(v6))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}$i.responsesRequiredToBeHealthy=2;$i.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{static get ALL_TRANSPORTS(){return[Hl,$i]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=$i&&$i.isAvailable();let i=t&&!$i.previouslyFailed();if(e.webSocketOnly&&(t||ii("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$i];else{const a=this.transports_=[];for(const o of yh.ALL_TRANSPORTS)o&&o.isAvailable()&&a.push(o);yh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}yh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=6e4,w6=5e3,T6=10*1024,b6=100*1024,Yg="t",dS="d",S6="s",fS="r",C6="e",pS="o",mS="a",_S="n",gS="p",A6="h";class R6{constructor(e,t,i,a,o,c,h,p,m,g){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fh("c:"+this.id+":"),this.transportManager_=new yh(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Wu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>b6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>T6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Yg in e){const t=e[Yg];t===mS?this.upgradeIfSecondaryHealthy_():t===fS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===pS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ru("t",e),i=Ru("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:mS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_S,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ru("t",e),i=Ru("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ru(Yg,e);if(dS in e){const i=e[dS];if(t===A6){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===_S){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===S6?this.onConnectionShutdown_(i):t===fS?this.onReset_(i):t===C6?Gy("Server Error: "+i):t===pS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),b0!==i&&ii("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Wu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(E6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(w6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ao.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let o=0;o<a.length;o++)if(a[o].callback===t&&(!i||i===a[o].context)){a.splice(o,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends vI{static getInstance(){return new yp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!vv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=32,vS=768;class vt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new vt("")}function We(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ma(n){return n.pieces_.length-n.pieceNum_}function Tt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new vt(n.pieces_,e)}function EI(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function I6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function wI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function TI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new vt(e,0)}function cn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof vt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new vt(t,0)}function Ge(n){return n.pieceNum_>=n.pieces_.length}function Kn(n,e){const t=We(n),i=We(e);if(t===null)return e;if(t===i)return Kn(Tt(n),Tt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function bI(n,e){if(Ma(n)!==Ma(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ki(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ma(n)>Ma(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class x6{constructor(e,t){this.errorPrefix_=t,this.parts_=wI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=zp(this.parts_[i]);SI(this)}}function N6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=zp(e),SI(n)}function k6(n){const e=n.parts_.pop();n.byteLength_-=zp(e),n.parts_.length>0&&(n.byteLength_-=1)}function SI(n){if(n.byteLength_>vS)throw new Error(n.errorPrefix_+"has a key path longer than "+vS+" bytes ("+n.byteLength_+").");if(n.parts_.length>yS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+yS+") or object contains a cycle "+So(n))}function So(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends vI{static getInstance(){return new A0}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=1e3,D6=60*5*1e3,ES=30*1e3,O6=1.3,M6=3e4,P6="server_kill",wS=3;class ds extends yI{constructor(e,t,i,a,o,c,h,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=ds.nextPersistentConnectionId_++,this.log_=Fh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Iu,this.maxReconnectDelay_=D6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");A0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&yp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,o={r:a,a:e,b:t};this.log_(ln(o)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new Up,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,a){this.initConnection_();const o=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(c).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const o={p:i},c="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(c,o,h=>{const p=h.d,m=h.s;ds.warnOnListenWarnings_(p,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(m,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Cs(e,"w")){const i=Zl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();ii(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||CO(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ES)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=SO(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const o=a.s,c=a.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const o={p:e},c="n";a&&(o.q=i,o.t=a),this.sendRequest(c,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,c=>{a&&setTimeout(()=>{a(c.s,c.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,o){this.initConnection_();const c={p:t,d:i};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:e,request:c,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ln(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Gy("Unrecognized action received from server: "+ln(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Iu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Iu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>M6&&(this.reconnectDelay_=Iu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*O6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+ds.nextConnectionId_++,o=this.lastSessionId;let c=!1,h=null;const p=function(){h?h.close():(c=!0,i())},m=function(E){oe(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(E)};this.realtime_={close:p,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,C]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?jn("getToken() completed but was canceled"):(jn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=C&&C.token,h=new R6(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,x=>{ii(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(P6)},o))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&ii(E),p())}}}interrupt(e){jn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){jn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yy(this.interruptReasons_)&&(this.reconnectDelay_=Iu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>T0(o)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new vt(e).toString();let a;if(this.listens.has(i)){const o=this.listens.get(i);a=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){jn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wS&&(this.reconnectDelay_=ES,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){jn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+YR.replace(/\./g,"-")]=1,vv()?e["framework.cordova"]=1:IC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yp.getInstance().currentlyOnline();return yy(this.interruptReasons_)&&e}}ds.nextPersistentConnectionId_=0;ds.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new qe(ac,e),a=new qe(ac,t);return this.compare(i,a)!==0}minPost(){return qe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;class CI extends dm{static get __EMPTY_NODE(){return Tf}static set __EMPTY_NODE(e){Tf=e}compare(e,t){return gc(e.name,t.name)}isDefinedOn(e){throw uc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(Po,Tf)}makePost(e,t){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new qe(e,Tf)}toString(){return".key"}}const Yl=new CI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,i,a,o=null){this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,a&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class wn{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??wn.RED,this.left=a??ni.EMPTY_NODE,this.right=o??ni.EMPTY_NODE}copy(e,t,i,a,o){return new wn(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return o<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ni.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return ni.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}wn.RED=!0;wn.BLACK=!1;class L6{copy(e,t,i,a,o){return this}insert(e,t,i){return new wn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ni{constructor(e,t=ni.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ni(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wn.BLACK,null,null))}remove(e){return new ni(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new bf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new bf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new bf(this.root_,null,this.comparator_,!0,e)}}ni.EMPTY_NODE=new L6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(n,e){return gc(n.name,e.name)}function R0(n,e){return gc(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wy;function j6(n){Wy=n}const AI=function(n){return typeof n=="number"?"number:"+tI(n):"string:"+n},RI=function(n){if(n.isLeafNode()){const e=n.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cs(e,".sv"),"Priority must be a string or number.")}else oe(n===Wy||n.isEmpty(),"priority of unexpected type.");oe(n===Wy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TS;class vn{static set __childrenNodeConstructor(e){TS=e}static get __childrenNodeConstructor(){return TS}constructor(e,t=vn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),RI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:vn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ge(e)?this:We(e)===".priority"?this.priorityNode_:vn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:vn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=We(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(oe(i!==".priority"||Ma(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,vn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Tt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+AI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=tI(this.value_):e+=this.value_,this.lazyHash_=ZR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vn.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=vn.VALUE_TYPE_ORDER.indexOf(t),o=vn.VALUE_TYPE_ORDER.indexOf(i);return oe(a>=0,"Unknown leaf type: "+t),oe(o>=0,"Unknown leaf type: "+i),a===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}vn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let II,xI;function U6(n){II=n}function z6(n){xI=n}class B6 extends dm{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),o=i.compareTo(a);return o===0?gc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(Po,new vn("[PRIORITY-POST]",xI))}makePost(e,t){const i=II(e);return new qe(t,new vn("[PRIORITY-POST]",i))}toString(){return".priority"}}const jt=new B6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=Math.log(2);class q6{constructor(e){const t=o=>parseInt(Math.log(o)/F6,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vp=function(n,e,t,i){n.sort(e);const a=function(p,m){const g=m-p;let E,C;if(g===0)return null;if(g===1)return E=n[p],C=t?t(E):E,new wn(C,E.node,wn.BLACK,null,null);{const x=parseInt(g/2,10)+p,O=a(p,x),j=a(x+1,m);return E=n[x],C=t?t(E):E,new wn(C,E.node,wn.BLACK,O,j)}},o=function(p){let m=null,g=null,E=n.length;const C=function(O,j){const D=E-O,U=E;E-=O;const $=a(D+1,U),q=n[D],z=t?t(q):q;x(new wn(z,q.node,j,null,$))},x=function(O){m?(m.left=O,m=O):(g=O,m=O)};for(let O=0;O<p.count;++O){const j=p.nextBitIsOne(),D=Math.pow(2,p.count-(O+1));j?C(D,wn.BLACK):(C(D,wn.BLACK),C(D,wn.RED))}return g},c=new q6(n.length),h=o(c);return new ni(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;const Dl={};class as{static get Default(){return oe(Dl&&jt,"ChildrenNode.ts has not been loaded"),Xg=Xg||new as({".priority":Dl},{".priority":jt}),Xg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Zl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ni?t:null}hasIndex(e){return Cs(this.indexSet_,e.toString())}addIndex(e,t){oe(e!==Yl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const o=t.getIterator(qe.Wrap);let c=o.getNext();for(;c;)a=a||e.isDefinedOn(c.node),i.push(c),c=o.getNext();let h;a?h=vp(i,e.getCompare()):h=Dl;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const g=Object.assign({},this.indexes_);return g[p]=h,new as(g,m)}addToIndexes(e,t){const i=Xf(this.indexes_,(a,o)=>{const c=Zl(this.indexSet_,o);if(oe(c,"Missing index implementation for "+o),a===Dl)if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(qe.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&h.push(m),m=p.getNext();return h.push(e),vp(h,c.getCompare())}else return Dl;else{const h=t.get(e.name);let p=a;return h&&(p=p.remove(new qe(e.name,h))),p.insert(e,e.node)}});return new as(i,this.indexSet_)}removeFromIndexes(e,t){const i=Xf(this.indexes_,a=>{if(a===Dl)return a;{const o=t.get(e.name);return o?a.remove(new qe(e.name,o)):a}});return new as(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;class Ce{static get EMPTY_NODE(){return xu||(xu=new Ce(new ni(R0),null,as.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RI(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xu}updatePriority(e){return this.children_.isEmpty()?this:new Ce(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?xu:t}}getChild(e){const t=We(e);return t===null?this:this.getImmediateChild(t).getChild(Tt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(oe(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new qe(e,t);let a,o;t.isEmpty()?(a=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const c=a.isEmpty()?xu:this.priorityNode_;return new Ce(a,c,o)}}updateChild(e,t){const i=We(e);if(i===null)return t;{oe(We(e)!==".priority"||Ma(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Tt(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,o=!0;if(this.forEachChild(jt,(c,h)=>{t[c]=h.val(e),i++,o&&Ce.INTEGER_REGEXP_.test(c)?a=Math.max(a,Number(c)):o=!1}),!e&&o&&a<2*i){const c=[];for(const h in t)c[h]=t[h];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+AI(this.getPriority().val())+":"),this.forEachChild(jt,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":ZR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const o=a.getPredecessorKey(new qe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new qe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new qe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,qe.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)<0;)a.getNext(),o=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,qe.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)>0;)a.getNext(),o=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===qh?-1:0}withIndex(e){if(e===Yl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ce(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Yl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(jt),a=t.getIterator(jt);let o=i.getNext(),c=a.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=i.getNext(),c=a.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Yl?null:this.indexMap_.get(e.toString())}}Ce.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class H6 extends Ce{constructor(){super(new ni(R0),Ce.EMPTY_NODE,as.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ce.EMPTY_NODE}isEmpty(){return!1}}const qh=new H6;Object.defineProperties(qe,{MIN:{value:new qe(ac,Ce.EMPTY_NODE)},MAX:{value:new qe(Po,qh)}});CI.__EMPTY_NODE=Ce.EMPTY_NODE;vn.__childrenNodeConstructor=Ce;j6(qh);z6(qh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=!0;function Tn(n,e=null){if(n===null)return Ce.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new vn(t,Tn(e))}if(!(n instanceof Array)&&$6){const t=[];let i=!1;if(ri(n,(c,h)=>{if(c.substring(0,1)!=="."){const p=Tn(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new qe(c,p)))}}),t.length===0)return Ce.EMPTY_NODE;const o=vp(t,V6,c=>c.name,R0);if(i){const c=vp(t,jt.getCompare());return new Ce(o,Tn(e),new as({".priority":c},{".priority":jt}))}else return new Ce(o,Tn(e),as.Default)}else{let t=Ce.EMPTY_NODE;return ri(n,(i,a)=>{if(Cs(n,i)&&i.substring(0,1)!=="."){const o=Tn(a);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Tn(e))}}U6(Tn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6 extends dm{constructor(e){super(),this.indexPath_=e,oe(!Ge(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),o=i.compareTo(a);return o===0?gc(e.name,t.name):o}makePost(e,t){const i=Tn(e),a=Ce.EMPTY_NODE.updateChild(this.indexPath_,i);return new qe(t,a)}maxPost(){const e=Ce.EMPTY_NODE.updateChild(this.indexPath_,qh);return new qe(Po,e)}toString(){return wI(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6 extends dm{compare(e,t){const i=e.node.compareTo(t.node);return i===0?gc(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(e,t){const i=Tn(e);return new qe(t,i)}toString(){return".value"}}const W6=new K6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n){return{type:"value",snapshotNode:n}}function oc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function vh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Eh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Q6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.index_=e}updateChild(e,t,i,a,o,c){oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(vh(t,h)):oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(oc(t,i)):c.trackChildChange(Eh(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(jt,(a,o)=>{t.hasChild(a)||i.trackChildChange(vh(a,o))}),t.isLeafNode()||t.forEachChild(jt,(a,o)=>{if(e.hasChild(a)){const c=e.getImmediateChild(a);c.equals(o)||i.trackChildChange(Eh(a,o,c))}else i.trackChildChange(oc(a,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ce.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.indexedFilter_=new I0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wh.getStartPost_(e),this.endPost_=wh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,o,c){return this.matches(new qe(t,i))||(i=Ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,o,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ce.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Ce.EMPTY_NODE);const o=this;return t.forEachChild(jt,(c,h)=>{o.matches(new qe(c,h))||(a=a.updateImmediateChild(c,Ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new wh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,o,c){return this.rangedFilter_.matches(new qe(t,i))||(i=Ce.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,o,c):this.fullLimitUpdateChild_(e,t,i,o,c)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=Ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=Ce.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(Ce.EMPTY_NODE);let o;this.reverse_?o=a.getReverseIterator(this.index_):o=a.getIterator(this.index_);let c=0;for(;o.hasNext();){const h=o.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:a=a.updateImmediateChild(h.name,Ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,o){let c;if(this.reverse_){const E=this.index_.getCompare();c=(C,x)=>E(x,C)}else c=this.index_.getCompare();const h=e;oe(h.numChildren()===this.limit_,"");const p=new qe(t,i),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),g=this.rangedFilter_.matches(p);if(h.hasChild(t)){const E=h.getImmediateChild(t);let C=a.getChildAfterChild(this.index_,m,this.reverse_);for(;C!=null&&(C.name===t||h.hasChild(C.name));)C=a.getChildAfterChild(this.index_,C,this.reverse_);const x=C==null?1:c(C,p);if(g&&!i.isEmpty()&&x>=0)return o!=null&&o.trackChildChange(Eh(t,i,E)),h.updateImmediateChild(t,i);{o!=null&&o.trackChildChange(vh(t,E));const j=h.updateImmediateChild(t,Ce.EMPTY_NODE);return C!=null&&this.rangedFilter_.matches(C)?(o!=null&&o.trackChildChange(oc(C.name,C.node)),j.updateImmediateChild(C.name,C.node)):j}}else return i.isEmpty()?e:g&&c(m,p)>=0?(o!=null&&(o.trackChildChange(vh(m.name,m.node)),o.trackChildChange(oc(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(m.name,Ce.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ac}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Po}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jt}copy(){const e=new x0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function X6(n){return n.loadsAllData()?new I0(n.getIndex()):n.hasLimit()?new Y6(n):new wh(n)}function bS(n){const e={};if(n.isDefault())return e;let t;if(n.index_===jt?t="$priority":n.index_===W6?t="$value":n.index_===Yl?t="$key":(oe(n.index_ instanceof G6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ln(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=ln(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+ln(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=ln(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+ln(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SS(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==jt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends yI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=Fh("p:rest:"),this.listens_={}}listen(e,t,i,a){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=Ep.getListenId_(e,i),h={};this.listens_[c]=h;const p=bS(e._queryParams);this.restRequest_(o+".json",p,(m,g)=>{let E=g;if(m===404&&(E=null,m=null),m===null&&this.onDataUpdate_(o,E,!1,i),Zl(this.listens_,c)===h){let C;m?m===401?C="permission_denied":C="rest_error:"+m:C="ok",a(C,null)}})}unlisten(e,t){const i=Ep.getListenId_(e,t);delete this.listens_[i]}get(e){const t=bS(e._queryParams),i=e._path.toString(),a=new Up;return this.restRequest_(i+".json",t,(o,c)=>{let h=c;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,o])=>{a&&a.accessToken&&(t.auth=a.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hc(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=sh(h.responseText)}catch{ii("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,p)}else h.status!==401&&h.status!==404&&ii("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.rootNode_=Ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){return{value:null,children:new Map}}function kI(n,e,t){if(Ge(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=We(e);n.children.has(i)||n.children.set(i,wp());const a=n.children.get(i);e=Tt(e),kI(a,e,t)}}function Qy(n,e,t){n.value!==null?t(e,n.value):J6(n,(i,a)=>{const o=new vt(e.toString()+"/"+i);Qy(a,o,t)})}function J6(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ri(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=10*1e3,tV=30*1e3,nV=5*60*1e3;class iV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eV(e);const i=CS+(tV-CS)*Math.random();Wu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ri(e,(a,o)=>{o>0&&Cs(this.statsToReport_,a)&&(t[a]=o,i=!0)}),i&&this.server_.reportStats(t),Wu(this.reportStats_.bind(this),Math.floor(Math.random()*2*nV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Wi||(Wi={}));function DI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function N0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function k0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Wi.ACK_USER_WRITE,this.source=DI()}operationForChild(e){if(Ge(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vt(e));return new Tp(ut(),t,this.revert)}}else return oe(We(this.path)===e,"operationForChild called for unrelated child."),new Tp(Tt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.source=e,this.path=t,this.type=Wi.LISTEN_COMPLETE}operationForChild(e){return Ge(this.path)?new Th(this.source,ut()):new Th(this.source,Tt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Wi.OVERWRITE}operationForChild(e){return Ge(this.path)?new Lo(this.source,ut(),this.snap.getImmediateChild(e)):new Lo(this.source,Tt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Wi.MERGE}operationForChild(e){if(Ge(this.path)){const t=this.children.subtree(new vt(e));return t.isEmpty()?null:t.value?new Lo(this.source,ut(),t.value):new bh(this.source,ut(),t)}else return oe(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bh(this.source,Tt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ge(e))return this.isFullyInitialized()&&!this.filtered_;const t=We(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function sV(n,e,t,i){const a=[],o=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(Q6(c.childName,c.snapshotNode))}),Nu(n,a,"child_removed",e,i,t),Nu(n,a,"child_added",e,i,t),Nu(n,a,"child_moved",o,i,t),Nu(n,a,"child_changed",e,i,t),Nu(n,a,"value",e,i,t),a}function Nu(n,e,t,i,a,o){const c=i.filter(h=>h.type===t);c.sort((h,p)=>oV(n,h,p)),c.forEach(h=>{const p=aV(n,h,o);a.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(p,n.query_))})})}function aV(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function oV(n,e,t){if(e.childName==null||t.childName==null)throw uc("Should only compare child_ events.");const i=new qe(e.childName,e.snapshotNode),a=new qe(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n,e){return{eventCache:n,serverCache:e}}function Qu(n,e,t,i){return fm(new Pa(e,t,i),n.serverCache)}function OI(n,e,t,i){return fm(n.eventCache,new Pa(e,t,i))}function bp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg;const lV=()=>(Zg||(Zg=new ni(KL)),Zg);class At{static fromObject(e){let t=new At(null);return ri(e,(i,a)=>{t=t.set(new vt(i),a)}),t}constructor(e,t=lV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ut(),value:this.value};if(Ge(e))return null;{const i=We(e),a=this.children.get(i);if(a!==null){const o=a.findRootMostMatchingPathAndValue(Tt(e),t);return o!=null?{path:cn(new vt(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ge(e))return this;{const t=We(e),i=this.children.get(t);return i!==null?i.subtree(Tt(e)):new At(null)}}set(e,t){if(Ge(e))return new At(t,this.children);{const i=We(e),o=(this.children.get(i)||new At(null)).set(Tt(e),t),c=this.children.insert(i,o);return new At(this.value,c)}}remove(e){if(Ge(e))return this.children.isEmpty()?new At(null):new At(null,this.children);{const t=We(e),i=this.children.get(t);if(i){const a=i.remove(Tt(e));let o;return a.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,a),this.value===null&&o.isEmpty()?new At(null):new At(this.value,o)}else return this}}get(e){if(Ge(e))return this.value;{const t=We(e),i=this.children.get(t);return i?i.get(Tt(e)):null}}setTree(e,t){if(Ge(e))return t;{const i=We(e),o=(this.children.get(i)||new At(null)).setTree(Tt(e),t);let c;return o.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,o),new At(this.value,c)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,o)=>{i[a]=o.fold_(cn(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(Ge(e))return null;{const o=We(e),c=this.children.get(o);return c?c.findOnPath_(Tt(e),cn(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,i){if(Ge(e))return this;{this.value&&i(t,this.value);const a=We(e),o=this.children.get(a);return o?o.foreachOnPath_(Tt(e),cn(t,a),i):new At(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(cn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.writeTree_=e}static empty(){return new Yi(new At(null))}}function Yu(n,e,t){if(Ge(e))return new Yi(new At(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let o=i.value;const c=Kn(a,e);return o=o.updateChild(c,t),new Yi(n.writeTree_.set(a,o))}else{const a=new At(t),o=n.writeTree_.setTree(e,a);return new Yi(o)}}}function AS(n,e,t){let i=n;return ri(t,(a,o)=>{i=Yu(i,cn(e,a),o)}),i}function RS(n,e){if(Ge(e))return Yi.empty();{const t=n.writeTree_.setTree(e,new At(null));return new Yi(t)}}function Yy(n,e){return Ho(n,e)!=null}function Ho(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Kn(t.path,e)):null}function IS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(jt,(i,a)=>{e.push(new qe(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new qe(i,a.value))}),e}function Ta(n,e){if(Ge(e))return n;{const t=Ho(n,e);return t!=null?new Yi(new At(t)):new Yi(n.writeTree_.subtree(e))}}function Xy(n){return n.writeTree_.isEmpty()}function lc(n,e){return MI(ut(),n.writeTree_,e)}function MI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,o)=>{a===".priority"?(oe(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=MI(cn(n,a),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(cn(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n,e){return jI(e,n)}function cV(n,e,t,i,a){oe(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=Yu(n.visibleWrites,e,t)),n.lastWriteId=i}function uV(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function hV(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);oe(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,o=!1,c=n.allWrites.length-1;for(;a&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&dV(h,i.path)?a=!1:Ki(i.path,h.path)&&(o=!0)),c--}if(a){if(o)return fV(n),!0;if(i.snap)n.visibleWrites=RS(n.visibleWrites,i.path);else{const h=i.children;ri(h,p=>{n.visibleWrites=RS(n.visibleWrites,cn(i.path,p))})}return!0}else return!1}function dV(n,e){if(n.snap)return Ki(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ki(cn(n.path,t),e))return!0;return!1}function fV(n){n.visibleWrites=PI(n.allWrites,pV,ut()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function pV(n){return n.visible}function PI(n,e,t){let i=Yi.empty();for(let a=0;a<n.length;++a){const o=n[a];if(e(o)){const c=o.path;let h;if(o.snap)Ki(t,c)?(h=Kn(t,c),i=Yu(i,h,o.snap)):Ki(c,t)&&(h=Kn(c,t),i=Yu(i,ut(),o.snap.getChild(h)));else if(o.children){if(Ki(t,c))h=Kn(t,c),i=AS(i,h,o.children);else if(Ki(c,t))if(h=Kn(c,t),Ge(h))i=AS(i,ut(),o.children);else{const p=Zl(o.children,We(h));if(p){const m=p.getChild(Tt(h));i=Yu(i,ut(),m)}}}else throw uc("WriteRecord should have .snap or .children")}}return i}function LI(n,e,t,i,a){if(!i&&!a){const o=Ho(n.visibleWrites,e);if(o!=null)return o;{const c=Ta(n.visibleWrites,e);if(Xy(c))return t;if(t==null&&!Yy(c,ut()))return null;{const h=t||Ce.EMPTY_NODE;return lc(c,h)}}}else{const o=Ta(n.visibleWrites,e);if(!a&&Xy(o))return t;if(!a&&t==null&&!Yy(o,ut()))return null;{const c=function(m){return(m.visible||a)&&(!i||!~i.indexOf(m.writeId))&&(Ki(m.path,e)||Ki(e,m.path))},h=PI(n.allWrites,c,e),p=t||Ce.EMPTY_NODE;return lc(h,p)}}}function mV(n,e,t){let i=Ce.EMPTY_NODE;const a=Ho(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(jt,(o,c)=>{i=i.updateImmediateChild(o,c)}),i;if(t){const o=Ta(n.visibleWrites,e);return t.forEachChild(jt,(c,h)=>{const p=lc(Ta(o,new vt(c)),h);i=i.updateImmediateChild(c,p)}),IS(o).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const o=Ta(n.visibleWrites,e);return IS(o).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function _V(n,e,t,i,a){oe(i||a,"Either existingEventSnap or existingServerSnap must exist");const o=cn(e,t);if(Yy(n.visibleWrites,o))return null;{const c=Ta(n.visibleWrites,o);return Xy(c)?a.getChild(t):lc(c,a.getChild(t))}}function gV(n,e,t,i){const a=cn(e,t),o=Ho(n.visibleWrites,a);if(o!=null)return o;if(i.isCompleteForChild(t)){const c=Ta(n.visibleWrites,a);return lc(c,i.getNode().getImmediateChild(t))}else return null}function yV(n,e){return Ho(n.visibleWrites,e)}function vV(n,e,t,i,a,o,c){let h;const p=Ta(n.visibleWrites,e),m=Ho(p,ut());if(m!=null)h=m;else if(t!=null)h=lc(p,t);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const g=[],E=c.getCompare(),C=o?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let x=C.getNext();for(;x&&g.length<a;)E(x,i)!==0&&g.push(x),x=C.getNext();return g}else return[]}function EV(){return{visibleWrites:Yi.empty(),allWrites:[],lastWriteId:-1}}function Sp(n,e,t,i){return LI(n.writeTree,n.treePath,e,t,i)}function D0(n,e){return mV(n.writeTree,n.treePath,e)}function xS(n,e,t,i){return _V(n.writeTree,n.treePath,e,t,i)}function Cp(n,e){return yV(n.writeTree,cn(n.treePath,e))}function wV(n,e,t,i,a,o){return vV(n.writeTree,n.treePath,e,t,i,a,o)}function O0(n,e,t){return gV(n.writeTree,n.treePath,e,t)}function VI(n,e){return jI(cn(n.treePath,e),n.writeTree)}function jI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;oe(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),oe(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const o=a.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,Eh(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,vh(i,a.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,oc(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,Eh(i,e.snapshotNode,a.oldSnap));else throw uc("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const UI=new bV;class M0{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Pa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return O0(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vo(this.viewCache_),o=wV(this.writes_,a,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(n){return{filter:n}}function CV(n,e){oe(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function AV(n,e,t,i,a){const o=new TV;let c,h;if(t.type===Wi.OVERWRITE){const m=t;m.source.fromUser?c=Zy(n,e,m.path,m.snap,i,a,o):(oe(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!Ge(m.path),c=Ap(n,e,m.path,m.snap,i,a,h,o))}else if(t.type===Wi.MERGE){const m=t;m.source.fromUser?c=IV(n,e,m.path,m.children,i,a,o):(oe(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),c=Jy(n,e,m.path,m.children,i,a,h,o))}else if(t.type===Wi.ACK_USER_WRITE){const m=t;m.revert?c=kV(n,e,m.path,i,a,o):c=xV(n,e,m.path,m.affectedTree,i,a,o)}else if(t.type===Wi.LISTEN_COMPLETE)c=NV(n,e,t.path,i,o);else throw uc("Unknown operation type: "+t.type);const p=o.getChanges();return RV(e,c,p),{viewCache:c,changes:p}}function RV(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=bp(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(NI(bp(e)))}}function zI(n,e,t,i,a,o){const c=e.eventCache;if(Cp(i,t)!=null)return e;{let h,p;if(Ge(t))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Vo(e),g=m instanceof Ce?m:Ce.EMPTY_NODE,E=D0(i,g);h=n.filter.updateFullNode(e.eventCache.getNode(),E,o)}else{const m=Sp(i,Vo(e));h=n.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{const m=We(t);if(m===".priority"){oe(Ma(t)===1,"Can't have a priority with additional path components");const g=c.getNode();p=e.serverCache.getNode();const E=xS(i,t,g,p);E!=null?h=n.filter.updatePriority(g,E):h=c.getNode()}else{const g=Tt(t);let E;if(c.isCompleteForChild(m)){p=e.serverCache.getNode();const C=xS(i,t,c.getNode(),p);C!=null?E=c.getNode().getImmediateChild(m).updateChild(g,C):E=c.getNode().getImmediateChild(m)}else E=O0(i,m,e.serverCache);E!=null?h=n.filter.updateChild(c.getNode(),m,E,g,a,o):h=c.getNode()}}return Qu(e,h,c.isFullyInitialized()||Ge(t),n.filter.filtersNodes())}}function Ap(n,e,t,i,a,o,c,h){const p=e.serverCache;let m;const g=c?n.filter:n.filter.getIndexedFilter();if(Ge(t))m=g.updateFullNode(p.getNode(),i,null);else if(g.filtersNodes()&&!p.isFiltered()){const x=p.getNode().updateChild(t,i);m=g.updateFullNode(p.getNode(),x,null)}else{const x=We(t);if(!p.isCompleteForPath(t)&&Ma(t)>1)return e;const O=Tt(t),D=p.getNode().getImmediateChild(x).updateChild(O,i);x===".priority"?m=g.updatePriority(p.getNode(),D):m=g.updateChild(p.getNode(),x,D,O,UI,null)}const E=OI(e,m,p.isFullyInitialized()||Ge(t),g.filtersNodes()),C=new M0(a,E,o);return zI(n,E,t,a,C,h)}function Zy(n,e,t,i,a,o,c){const h=e.eventCache;let p,m;const g=new M0(a,e,o);if(Ge(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,c),p=Qu(e,m,!0,n.filter.filtersNodes());else{const E=We(t);if(E===".priority")m=n.filter.updatePriority(e.eventCache.getNode(),i),p=Qu(e,m,h.isFullyInitialized(),h.isFiltered());else{const C=Tt(t),x=h.getNode().getImmediateChild(E);let O;if(Ge(C))O=i;else{const j=g.getCompleteChild(E);j!=null?EI(C)===".priority"&&j.getChild(TI(C)).isEmpty()?O=j:O=j.updateChild(C,i):O=Ce.EMPTY_NODE}if(x.equals(O))p=e;else{const j=n.filter.updateChild(h.getNode(),E,O,C,g,c);p=Qu(e,j,h.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function NS(n,e){return n.eventCache.isCompleteForChild(e)}function IV(n,e,t,i,a,o,c){let h=e;return i.foreach((p,m)=>{const g=cn(t,p);NS(e,We(g))&&(h=Zy(n,h,g,m,a,o,c))}),i.foreach((p,m)=>{const g=cn(t,p);NS(e,We(g))||(h=Zy(n,h,g,m,a,o,c))}),h}function kS(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Jy(n,e,t,i,a,o,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,m;Ge(t)?m=i:m=new At(null).setTree(t,i);const g=e.serverCache.getNode();return m.children.inorderTraversal((E,C)=>{if(g.hasChild(E)){const x=e.serverCache.getNode().getImmediateChild(E),O=kS(n,x,C);p=Ap(n,p,new vt(E),O,a,o,c,h)}}),m.children.inorderTraversal((E,C)=>{const x=!e.serverCache.isCompleteForChild(E)&&C.value===null;if(!g.hasChild(E)&&!x){const O=e.serverCache.getNode().getImmediateChild(E),j=kS(n,O,C);p=Ap(n,p,new vt(E),j,a,o,c,h)}}),p}function xV(n,e,t,i,a,o,c){if(Cp(a,t)!=null)return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if(Ge(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return Ap(n,e,t,p.getNode().getChild(t),a,o,h,c);if(Ge(t)){let m=new At(null);return p.getNode().forEachChild(Yl,(g,E)=>{m=m.set(new vt(g),E)}),Jy(n,e,t,m,a,o,h,c)}else return e}else{let m=new At(null);return i.foreach((g,E)=>{const C=cn(t,g);p.isCompleteForPath(C)&&(m=m.set(g,p.getNode().getChild(C)))}),Jy(n,e,t,m,a,o,h,c)}}function NV(n,e,t,i,a){const o=e.serverCache,c=OI(e,o.getNode(),o.isFullyInitialized()||Ge(t),o.isFiltered());return zI(n,c,t,i,UI,a)}function kV(n,e,t,i,a,o){let c;if(Cp(i,t)!=null)return e;{const h=new M0(i,e,a),p=e.eventCache.getNode();let m;if(Ge(t)||We(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Sp(i,Vo(e));else{const E=e.serverCache.getNode();oe(E instanceof Ce,"serverChildren would be complete if leaf node"),g=D0(i,E)}g=g,m=n.filter.updateFullNode(p,g,o)}else{const g=We(t);let E=O0(i,g,e.serverCache);E==null&&e.serverCache.isCompleteForChild(g)&&(E=p.getImmediateChild(g)),E!=null?m=n.filter.updateChild(p,g,E,Tt(t),h,o):e.eventCache.getNode().hasChild(g)?m=n.filter.updateChild(p,g,Ce.EMPTY_NODE,Tt(t),h,o):m=p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Sp(i,Vo(e)),c.isLeafNode()&&(m=n.filter.updateFullNode(m,c,o)))}return c=e.serverCache.isFullyInitialized()||Cp(i,ut())!=null,Qu(e,m,c,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new I0(i.getIndex()),o=X6(i);this.processor_=SV(o);const c=t.serverCache,h=t.eventCache,p=a.updateFullNode(Ce.EMPTY_NODE,c.getNode(),null),m=o.updateFullNode(Ce.EMPTY_NODE,h.getNode(),null),g=new Pa(p,c.isFullyInitialized(),a.filtersNodes()),E=new Pa(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=fm(E,g),this.eventGenerator_=new rV(this.query_)}get query(){return this.query_}}function OV(n){return n.viewCache_.serverCache.getNode()}function MV(n){return bp(n.viewCache_)}function PV(n,e){const t=Vo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ge(e)&&!t.getImmediateChild(We(e)).isEmpty())?t.getChild(e):null}function DS(n){return n.eventRegistrations_.length===0}function LV(n,e){n.eventRegistrations_.push(e)}function OS(n,e,t){const i=[];if(t){oe(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,a);c&&i.push(c)})}if(e){let a=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(!c.matches(e))a.push(c);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function MS(n,e,t,i){e.type===Wi.MERGE&&e.source.queryId!==null&&(oe(Vo(n.viewCache_),"We should always have a full cache before handling merges"),oe(bp(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,o=AV(n.processor_,a,e,t,i);return CV(n.processor_,o.viewCache),oe(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,BI(n,o.changes,o.viewCache.eventCache.getNode(),null)}function VV(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(jt,(o,c)=>{i.push(oc(o,c))}),t.isFullyInitialized()&&i.push(NI(t.getNode())),BI(n,i,t.getNode(),e)}function BI(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return sV(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp;class FI{constructor(){this.views=new Map}}function jV(n){oe(!Rp,"__referenceConstructor has already been defined"),Rp=n}function UV(){return oe(Rp,"Reference.ts has not been loaded"),Rp}function zV(n){return n.views.size===0}function P0(n,e,t,i){const a=e.source.queryId;if(a!==null){const o=n.views.get(a);return oe(o!=null,"SyncTree gave us an op for an invalid query."),MS(o,e,t,i)}else{let o=[];for(const c of n.views.values())o=o.concat(MS(c,e,t,i));return o}}function qI(n,e,t,i,a){const o=e._queryIdentifier,c=n.views.get(o);if(!c){let h=Sp(t,a?i:null),p=!1;h?p=!0:i instanceof Ce?(h=D0(t,i),p=!1):(h=Ce.EMPTY_NODE,p=!1);const m=fm(new Pa(h,p,!1),new Pa(i,a,!1));return new DV(e,m)}return c}function BV(n,e,t,i,a,o){const c=qI(n,e,i,a,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),LV(c,t),VV(c,t)}function FV(n,e,t,i){const a=e._queryIdentifier,o=[];let c=[];const h=La(n);if(a==="default")for(const[p,m]of n.views.entries())c=c.concat(OS(m,t,i)),DS(m)&&(n.views.delete(p),m.query._queryParams.loadsAllData()||o.push(m.query));else{const p=n.views.get(a);p&&(c=c.concat(OS(p,t,i)),DS(p)&&(n.views.delete(a),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!La(n)&&o.push(new(UV())(e._repo,e._path)),{removed:o,events:c}}function HI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ba(n,e){let t=null;for(const i of n.views.values())t=t||PV(i,e);return t}function $I(n,e){if(e._queryParams.loadsAllData())return mm(n);{const i=e._queryIdentifier;return n.views.get(i)}}function GI(n,e){return $I(n,e)!=null}function La(n){return mm(n)!=null}function mm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ip;function qV(n){oe(!Ip,"__referenceConstructor has already been defined"),Ip=n}function HV(){return oe(Ip,"Reference.ts has not been loaded"),Ip}let $V=1;class PS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new At(null),this.pendingWriteTree_=EV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function KI(n,e,t,i,a){return cV(n.pendingWriteTree_,e,t,i,a),a?$h(n,new Lo(DI(),e,t)):[]}function Ro(n,e,t=!1){const i=uV(n.pendingWriteTree_,e);if(hV(n.pendingWriteTree_,e)){let o=new At(null);return i.snap!=null?o=o.set(ut(),!0):ri(i.children,c=>{o=o.set(new vt(c),!0)}),$h(n,new Tp(i.path,o,t))}else return[]}function Hh(n,e,t){return $h(n,new Lo(N0(),e,t))}function GV(n,e,t){const i=At.fromObject(t);return $h(n,new bh(N0(),e,i))}function KV(n,e){return $h(n,new Th(N0(),e))}function WV(n,e,t){const i=V0(n,t);if(i){const a=j0(i),o=a.path,c=a.queryId,h=Kn(o,e),p=new Th(k0(c),h);return U0(n,o,p)}else return[]}function WI(n,e,t,i,a=!1){const o=e._path,c=n.syncPointTree_.get(o);let h=[];if(c&&(e._queryIdentifier==="default"||GI(c,e))){const p=FV(c,e,t,i);zV(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const m=p.removed;if(h=p.events,!a){const g=m.findIndex(C=>C._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(o,(C,x)=>La(x));if(g&&!E){const C=n.syncPointTree_.subtree(o);if(!C.isEmpty()){const x=ZV(C);for(let O=0;O<x.length;++O){const j=x[O],D=j.query,U=ZI(n,j);n.listenProvider_.startListening(Xu(D),Sh(n,D),U.hashFn,U.onComplete)}}}!E&&m.length>0&&!i&&(g?n.listenProvider_.stopListening(Xu(e),null):m.forEach(C=>{const x=n.queryToTagMap.get(_m(C));n.listenProvider_.stopListening(Xu(C),x)}))}JV(n,m)}return h}function QI(n,e,t,i){const a=V0(n,i);if(a!=null){const o=j0(a),c=o.path,h=o.queryId,p=Kn(c,e),m=new Lo(k0(h),p,t);return U0(n,c,m)}else return[]}function QV(n,e,t,i){const a=V0(n,i);if(a){const o=j0(a),c=o.path,h=o.queryId,p=Kn(c,e),m=At.fromObject(t),g=new bh(k0(h),p,m);return U0(n,c,g)}else return[]}function YV(n,e,t,i=!1){const a=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(a,(C,x)=>{const O=Kn(C,a);o=o||ba(x,O),c=c||La(x)});let h=n.syncPointTree_.get(a);h?(c=c||La(h),o=o||ba(h,ut())):(h=new FI,n.syncPointTree_=n.syncPointTree_.set(a,h));let p;o!=null?p=!0:(p=!1,o=Ce.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((x,O)=>{const j=ba(O,ut());j&&(o=o.updateImmediateChild(x,j))}));const m=GI(h,e);if(!m&&!e._queryParams.loadsAllData()){const C=_m(e);oe(!n.queryToTagMap.has(C),"View does not exist, but we have a tag");const x=e7();n.queryToTagMap.set(C,x),n.tagToQueryMap.set(x,C)}const g=pm(n.pendingWriteTree_,a);let E=BV(h,e,t,g,o,p);if(!m&&!c&&!i){const C=$I(h,e);E=E.concat(t7(n,e,C))}return E}function L0(n,e,t){const a=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,h)=>{const p=Kn(c,e),m=ba(h,p);if(m)return m});return LI(a,e,o,t,!0)}function XV(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(m,g)=>{const E=Kn(m,t);i=i||ba(g,E)});let a=n.syncPointTree_.get(t);a?i=i||ba(a,ut()):(a=new FI,n.syncPointTree_=n.syncPointTree_.set(t,a));const o=i!=null,c=o?new Pa(i,!0,!1):null,h=pm(n.pendingWriteTree_,e._path),p=qI(a,e,h,o?c.getNode():Ce.EMPTY_NODE,o);return MV(p)}function $h(n,e){return YI(e,n.syncPointTree_,null,pm(n.pendingWriteTree_,ut()))}function YI(n,e,t,i){if(Ge(n.path))return XI(n,e,t,i);{const a=e.get(ut());t==null&&a!=null&&(t=ba(a,ut()));let o=[];const c=We(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const m=t?t.getImmediateChild(c):null,g=VI(i,c);o=o.concat(YI(h,p,m,g))}return a&&(o=o.concat(P0(a,n,i,t))),o}}function XI(n,e,t,i){const a=e.get(ut());t==null&&a!=null&&(t=ba(a,ut()));let o=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,m=VI(i,c),g=n.operationForChild(c);g&&(o=o.concat(XI(g,h,p,m)))}),a&&(o=o.concat(P0(a,n,i,t))),o}function ZI(n,e){const t=e.query,i=Sh(n,t);return{hashFn:()=>(OV(e)||Ce.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?WV(n,t._path,i):KV(n,t._path);{const o=YL(a,t);return WI(n,t,null,o)}}}}function Sh(n,e){const t=_m(e);return n.queryToTagMap.get(t)}function _m(n){return n._path.toString()+"$"+n._queryIdentifier}function V0(n,e){return n.tagToQueryMap.get(e)}function j0(n){const e=n.indexOf("$");return oe(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new vt(n.substr(0,e))}}function U0(n,e,t){const i=n.syncPointTree_.get(e);oe(i,"Missing sync point for query tag that we're tracking");const a=pm(n.pendingWriteTree_,e);return P0(i,t,a,null)}function ZV(n){return n.fold((e,t,i)=>{if(t&&La(t))return[mm(t)];{let a=[];return t&&(a=HI(t)),ri(i,(o,c)=>{a=a.concat(c)}),a}})}function Xu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(HV())(n._repo,n._path):n}function JV(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=_m(i),o=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(o)}}}function e7(){return $V++}function t7(n,e,t){const i=e._path,a=Sh(n,e),o=ZI(n,t),c=n.listenProvider_.startListening(Xu(e),a,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(a)oe(!La(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((m,g,E)=>{if(!Ge(m)&&g&&La(g))return[mm(g).query];{let C=[];return g&&(C=C.concat(HI(g).map(x=>x.query))),ri(E,(x,O)=>{C=C.concat(O)}),C}});for(let m=0;m<p.length;++m){const g=p[m];n.listenProvider_.stopListening(Xu(g),Sh(n,g))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new z0(t)}node(){return this.node_}}class B0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=cn(this.path_,e);return new B0(this.syncTree_,t)}node(){return L0(this.syncTree_,this.path_)}}const n7=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},LS=function(n,e,t){if(!n||typeof n!="object")return n;if(oe(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return i7(n[".sv"],e,t);if(typeof n[".sv"]=="object")return r7(n[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},i7=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:oe(!1,"Unexpected server value: "+n)}},r7=function(n,e,t){n.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&oe(!1,"Unexpected increment value: "+i);const a=e.node();if(oe(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const c=a.getValue();return typeof c!="number"?i:c+i},s7=function(n,e,t,i){return F0(e,new B0(t,n),i)},JI=function(n,e,t){return F0(n,new z0(e),t)};function F0(n,e,t){const i=n.getPriority().val(),a=LS(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,h=LS(c.getValue(),e,t);return h!==c.getValue()||a!==c.getPriority().val()?new vn(h,Tn(a)):n}else{const c=n;return o=c,a!==c.getPriority().val()&&(o=o.updatePriority(new vn(a))),c.forEachChild(jt,(h,p)=>{const m=F0(p,e.getImmediateChild(h),t);m!==p&&(o=o.updateImmediateChild(h,m))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function H0(n,e){let t=e instanceof vt?e:new vt(e),i=n,a=We(t);for(;a!==null;){const o=Zl(i.node.children,a)||{children:{},childCount:0};i=new q0(a,i,o),t=Tt(t),a=We(t)}return i}function vc(n){return n.node.value}function e2(n,e){n.node.value=e,ev(n)}function t2(n){return n.node.childCount>0}function a7(n){return vc(n)===void 0&&!t2(n)}function gm(n,e){ri(n.node.children,(t,i)=>{e(new q0(t,n,i))})}function n2(n,e,t,i){t&&e(n),gm(n,a=>{n2(a,e,!0)})}function o7(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Gh(n){return new vt(n.parent===null?n.name:Gh(n.parent)+"/"+n.name)}function ev(n){n.parent!==null&&l7(n.parent,n.name,n)}function l7(n,e,t){const i=a7(t),a=Cs(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,ev(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,ev(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=/[\[\].#$\/\u0000-\u001F\u007F]/,u7=/[\[\].#$\u0000-\u001F\u007F]/,Jg=10*1024*1024,i2=function(n){return typeof n=="string"&&n.length!==0&&!c7.test(n)},r2=function(n){return typeof n=="string"&&n.length!==0&&!u7.test(n)},h7=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),r2(n)},d7=function(n,e,t,i){$0(Ev(n,"value"),e,t)},$0=function(n,e,t){const i=t instanceof vt?new x6(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+So(i));if(typeof e=="function")throw new Error(n+"contains a function "+So(i)+" with contents = "+e.toString());if(JR(e))throw new Error(n+"contains "+e.toString()+" "+So(i));if(typeof e=="string"&&e.length>Jg/3&&zp(e)>Jg)throw new Error(n+"contains a string greater than "+Jg+" utf8 bytes "+So(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,o=!1;if(ri(e,(c,h)=>{if(c===".value")a=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!i2(c)))throw new Error(n+" contains an invalid key ("+c+") "+So(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);N6(i,c),$0(n,h,i),k6(i)}),a&&o)throw new Error(n+' contains ".value" child '+So(i)+" in addition to actual children.")}},s2=function(n,e,t,i){if(!r2(t))throw new Error(Ev(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},f7=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),s2(n,e,t)},a2=function(n,e){if(We(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},p7=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!i2(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!h7(t))throw new Error(Ev(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function o2(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],o=a.getPath();t!==null&&!bI(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(a)}t&&n.eventLists_.push(t)}function Cr(n,e,t){o2(n,t),_7(n,i=>Ki(i,e)||Ki(e,i))}function _7(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const o=a.path;e(o)?(g7(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function g7(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Ku&&jn("event: "+t.toString()),yc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="repo_interrupt",v7=25;class E7{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new m7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wp(),this.transactionQueueTree_=new q0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function w7(n,e,t){if(n.stats_=S0(n.repoInfo_),n.forceRestClient_||e6())n.server_=new Ep(n.repoInfo_,(i,a,o,c)=>{VS(n,i,a,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ln(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ds(n.repoInfo_,e,(i,a,o,c)=>{VS(n,i,a,o,c)},i=>{jS(n,i)},i=>{b7(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=s6(n.repoInfo_,()=>new iV(n.stats_,n.server_)),n.infoData_=new Z6,n.infoSyncTree_=new PS({startListening:(i,a,o,c)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=Hh(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),K0(n,"connected",!1),n.serverSyncTree_=new PS({startListening:(i,a,o,c)=>(n.server_.listen(i,o,a,(h,p)=>{const m=c(h,p);Cr(n.eventQueue_,i._path,m)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function T7(n){const t=n.infoData_.getNode(new vt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function G0(n){return n7({timestamp:T7(n)})}function VS(n,e,t,i,a){n.dataUpdateCount++;const o=new vt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(a)if(i){const p=Xf(t,m=>Tn(m));c=QV(n.serverSyncTree_,o,p,a)}else{const p=Tn(t);c=QI(n.serverSyncTree_,o,p,a)}else if(i){const p=Xf(t,m=>Tn(m));c=GV(n.serverSyncTree_,o,p)}else{const p=Tn(t);c=Hh(n.serverSyncTree_,o,p)}let h=o;c.length>0&&(h=vm(n,o)),Cr(n.eventQueue_,h,c)}function jS(n,e){K0(n,"connected",e),e===!1&&A7(n)}function b7(n,e){ri(e,(t,i)=>{K0(n,t,i)})}function K0(n,e,t){const i=new vt("/.info/"+e),a=Tn(t);n.infoData_.updateSnapshot(i,a);const o=Hh(n.infoSyncTree_,i,a);Cr(n.eventQueue_,i,o)}function l2(n){return n.nextWriteId_++}function S7(n,e,t){const i=XV(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const o=Tn(a).withIndex(e._queryParams.getIndex());YV(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=Hh(n.serverSyncTree_,e._path,o);else{const h=Sh(n.serverSyncTree_,e);c=QI(n.serverSyncTree_,e._path,o,h)}return Cr(n.eventQueue_,e._path,c),WI(n.serverSyncTree_,e,t,null,!0),o},a=>(ym(n,"get for query "+ln(e)+" failed: "+a),Promise.reject(new Error(a))))}function C7(n,e,t,i,a){ym(n,"set",{path:e.toString(),value:t,priority:i});const o=G0(n),c=Tn(t,i),h=L0(n.serverSyncTree_,e),p=JI(c,h,o),m=l2(n),g=KI(n.serverSyncTree_,e,p,m,!0);o2(n.eventQueue_,g),n.server_.put(e.toString(),c.val(!0),(C,x)=>{const O=C==="ok";O||ii("set at "+e+" failed: "+C);const j=Ro(n.serverSyncTree_,m,!O);Cr(n.eventQueue_,e,j),I7(n,a,C,x)});const E=f2(n,e);vm(n,E),Cr(n.eventQueue_,E,[])}function A7(n){ym(n,"onDisconnectEvents");const e=G0(n),t=wp();Qy(n.onDisconnect_,ut(),(a,o)=>{const c=s7(a,o,n.serverSyncTree_,e);kI(t,a,c)});let i=[];Qy(t,ut(),(a,o)=>{i=i.concat(Hh(n.serverSyncTree_,a,o));const c=f2(n,a);vm(n,c)}),n.onDisconnect_=wp(),Cr(n.eventQueue_,ut(),i)}function R7(n){n.persistentConnection_&&n.persistentConnection_.interrupt(y7)}function ym(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),jn(t,...e)}function I7(n,e,t,i){e&&yc(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let o=a;i&&(o+=": "+i);const c=new Error(o);c.code=a,e(c)}})}function c2(n,e,t){return L0(n.serverSyncTree_,e,t)||Ce.EMPTY_NODE}function W0(n,e=n.transactionQueueTree_){if(e||Em(n,e),vc(e)){const t=h2(n,e);oe(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&x7(n,Gh(e),t)}else t2(e)&&gm(e,t=>{W0(n,t)})}function x7(n,e,t){const i=t.map(m=>m.currentWriteId),a=c2(n,e,i);let o=a;const c=a.hash();for(let m=0;m<t.length;m++){const g=t[m];oe(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const E=Kn(e,g.path);o=o.updateChild(E,g.currentOutputSnapshotRaw)}const h=o.val(!0),p=e;n.server_.put(p.toString(),h,m=>{ym(n,"transaction put response",{path:p.toString(),status:m});let g=[];if(m==="ok"){const E=[];for(let C=0;C<t.length;C++)t[C].status=2,g=g.concat(Ro(n.serverSyncTree_,t[C].currentWriteId)),t[C].onComplete&&E.push(()=>t[C].onComplete(null,!0,t[C].currentOutputSnapshotResolved)),t[C].unwatcher();Em(n,H0(n.transactionQueueTree_,e)),W0(n,n.transactionQueueTree_),Cr(n.eventQueue_,e,g);for(let C=0;C<E.length;C++)yc(E[C])}else{if(m==="datastale")for(let E=0;E<t.length;E++)t[E].status===3?t[E].status=4:t[E].status=0;else{ii("transaction at "+p.toString()+" failed: "+m);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=m}vm(n,e)}},c)}function vm(n,e){const t=u2(n,e),i=Gh(t),a=h2(n,t);return N7(n,a,i),i}function N7(n,e,t){if(e.length===0)return;const i=[];let a=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],m=Kn(t,p.path);let g=!1,E;if(oe(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)g=!0,E=p.abortReason,a=a.concat(Ro(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=v7)g=!0,E="maxretry",a=a.concat(Ro(n.serverSyncTree_,p.currentWriteId,!0));else{const C=c2(n,p.path,c);p.currentInputSnapshot=C;const x=e[h].update(C.val());if(x!==void 0){$0("transaction failed: Data returned ",x,p.path);let O=Tn(x);typeof x=="object"&&x!=null&&Cs(x,".priority")||(O=O.updatePriority(C.getPriority()));const D=p.currentWriteId,U=G0(n),$=JI(O,C,U);p.currentOutputSnapshotRaw=O,p.currentOutputSnapshotResolved=$,p.currentWriteId=l2(n),c.splice(c.indexOf(D),1),a=a.concat(KI(n.serverSyncTree_,p.path,$,p.currentWriteId,p.applyLocally)),a=a.concat(Ro(n.serverSyncTree_,D,!0))}else g=!0,E="nodata",a=a.concat(Ro(n.serverSyncTree_,p.currentWriteId,!0))}Cr(n.eventQueue_,t,a),a=[],g&&(e[h].status=2,function(C){setTimeout(C,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(E==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(E),!1,null))))}Em(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)yc(i[h]);W0(n,n.transactionQueueTree_)}function u2(n,e){let t,i=n.transactionQueueTree_;for(t=We(e);t!==null&&vc(i)===void 0;)i=H0(i,t),e=Tt(e),t=We(e);return i}function h2(n,e){const t=[];return d2(n,e,t),t.sort((i,a)=>i.order-a.order),t}function d2(n,e,t){const i=vc(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);gm(e,a=>{d2(n,a,t)})}function Em(n,e){const t=vc(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,e2(e,t.length>0?t:void 0)}gm(e,i=>{Em(n,i)})}function f2(n,e){const t=Gh(u2(n,e)),i=H0(n.transactionQueueTree_,e);return o7(i,a=>{ey(n,a)}),ey(n,i),n2(i,a=>{ey(n,a)}),t}function ey(n,e){const t=vc(e);if(t){const i=[];let a=[],o=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(oe(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):(oe(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),a=a.concat(Ro(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?e2(e,void 0):t.length=o+1,Cr(n.eventQueue_,Gh(e),a);for(let c=0;c<i.length;c++)yc(i[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function D7(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ii(`Invalid query segment '${t}' in query '${n}'`)}return e}const US=function(n,e){const t=O7(n),i=t.namespace;t.domain==="firebase.com"&&ws(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ws("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||$L();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new hI(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new vt(t.pathString)}},O7=function(n){let e="",t="",i="",a="",o="",c=!0,h="https",p=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let g=n.indexOf("/");g===-1&&(g=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),e=n.substring(0,Math.min(g,E)),g<E&&(a=k7(n.substring(g,E)));const C=D7(n.substring(Math.min(n.length,E)));m=e.indexOf(":"),m>=0?(c=h==="https"||h==="wss",p=parseInt(e.substring(m+1),10)):m=e.length;const x=e.slice(0,m);if(x.toLowerCase()==="localhost")t="localhost";else if(x.split(".").length<=2)t=x;else{const O=e.indexOf(".");i=e.substring(0,O).toLowerCase(),t=e.substring(O+1),o=i}"ns"in C&&(o=C.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:c,scheme:h,pathString:a,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ln(this.snapshot.exportVal())}}class P7{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return Ge(this._path)?null:EI(this._path)}get ref(){return new Rs(this._repo,this._path)}get _queryIdentifier(){const e=SS(this._queryParams),t=T0(e);return t==="{}"?"default":t}get _queryObject(){return SS(this._queryParams)}isEqual(e){if(e=St(e),!(e instanceof Q0))return!1;const t=this._repo===e._repo,i=bI(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+I6(this._path)}}class Rs extends Q0{constructor(e,t){super(e,t,new x0,!1)}get parent(){const e=TI(this._path);return e===null?null:new Rs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ch{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new vt(e),i=tv(this.ref,e);return new Ch(this._node.getChild(t),i,jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new Ch(a,tv(this.ref,i),jt)))}hasChild(e){const t=new vt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wm(n,e){return n=St(n),n._checkNotDeleted("ref"),e!==void 0?tv(n._root,e):n._root}function tv(n,e){return n=St(n),We(n._path)===null?f7("child","path",e):s2("child","path",e),new Rs(n._repo,cn(n._path,e))}function p2(n){return a2("remove",n._path),Y0(n,null)}function Y0(n,e){n=St(n),a2("set",n._path),d7("set",e,n._path);const t=new Up;return C7(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function m2(n){n=St(n);const e=new L7(()=>{}),t=new X0(e);return S7(n._repo,n,t).then(i=>new Ch(i,new Rs(n._repo,n._path),n._queryParams.getIndex()))}class X0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new M7("value",this,new Ch(e.snapshotNode,new Rs(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new P7(this,e,t):null}matches(e){return e instanceof X0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}jV(Rs);qV(Rs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7="FIREBASE_DATABASE_EMULATOR_HOST",nv={};let j7=!1;function U7(n,e,t,i){n.repoInfo_=new hI(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function z7(n,e,t,i,a){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||ws("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=US(o,a),h=c.repoInfo,p;typeof process<"u"&&aS&&(p=aS[V7]),p?(o=`http://${p}?ns=${h.namespace}`,c=US(o,a),h=c.repoInfo):c.repoInfo.secure;const m=new n6(n.name,n.options,e);p7("Invalid Firebase Database URL",c),Ge(c.path)||ws("Database URL must point to the root of a Firebase Database (not including a child path).");const g=F7(h,n,m,new t6(n,t));return new q7(g,n)}function B7(n,e){const t=nv[e];(!t||t[n.key]!==n)&&ws(`Database ${e}(${n.repoInfo_}) has already been deleted.`),R7(n),delete t[n.key]}function F7(n,e,t,i){let a=nv[e.name];a||(a={},nv[e.name]=a);let o=a[n.toURLString()];return o&&ws("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new E7(n,j7,t,i),a[n.toURLString()]=o,o}class q7{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(w7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rs(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(B7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ws("Cannot call "+e+" on a deleted database.")}}function H7(n=Fp(),e){const t=Nh(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=gv("database");i&&$7(t,...i)}return t}function $7(n,e,t,i={}){n=St(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&Aa(i,o.repoInfo_.emulatorOptions))return;ws("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&ws('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Uf(Uf.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:yv(i.mockUserToken,n.app.options.projectId);c=new Uf(h)}U7(o,a,i,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(n){UL(ja),Ra(new ms("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return z7(i,a,o,t)},"PUBLIC").setMultipleInstances(!0)),Mi(oS,lS,n),Mi(oS,lS,"esm2017")}ds.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ds.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};G7();const K7={apiKey:"AIzaSyCOBlr4IVMUZP7gqI706ZjiEEDcE8l4t4s",authDomain:"my-electronics-store.firebaseapp.com",projectId:"my-electronics-store",storageBucket:"my-electronics-store.appspot.com",messagingSenderId:"602301372699",appId:"1:602301372699:web:08ae7f5163dafb249f1bbe",databaseURL:"https://my-electronics-store-default-rtdb.firebaseio.com"},W7="b7636e548e191116b0f327bdc1e07423",Tm=DC(K7),bn=VP(Tm);T3(Tm);const Zu=VL(Tm),bm=H7(Tm),Q7=n=>A9(Zu,n),Ju=Va("products/fetchProducts",async()=>{const n=await om(Fo(bn,"products")),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}),_2=Va("products/deleteProduct",async n=>(await $u(Qi(bn,"products",n)),n)),g2=Va("products/addProduct",async n=>({id:(await d0(Fo(bn,"products"),{...n,price:Number(n.price)})).id,...n})),y2=Ss({name:"products",initialState:{items:[],status:"idle",error:null,selectedProduct:null},reducers:{setSelectedProduct:(n,e)=>{n.selectedProduct=e.payload}},extraReducers:n=>{n.addCase(Ju.pending,e=>{e.status="loading"}).addCase(Ju.fulfilled,(e,t)=>{e.status="succeeded",e.items=t.payload}).addCase(Ju.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(_2.fulfilled,(e,t)=>{e.items=e.items.filter(i=>i.id!==t.payload)}).addCase(g2.fulfilled,(e,t)=>{e.items.push(t.payload)})}}),{setSelectedProduct:Y7}=y2.actions,X7=y2.reducer,v2=Ss({name:"auth",initialState:{user:null,isAdmin:!1},reducers:{setUser:(n,e)=>{const{user:t,role:i}=e.payload;n.user=t,n.isAdmin=i==="admin"},clearUser:n=>{n.user=null,n.isAdmin=!1}}}),{setUser:iv,clearUser:E2}=v2.actions,Z7=v2.reducer,zf=Va("categories/fetchCategories",async()=>{const n=await om(Fo(bn,"products")),e=new Set;return n.forEach(t=>{const i=t.data();i.category&&e.add(i.category)}),["Все товары",...Array.from(e)]}),w2=Ss({name:"categories",initialState:{selectedCategory:"Все товары",categories:[],status:"idle",error:null},reducers:{setSelectedCategory:(n,e)=>{n.selectedCategory=e.payload}},extraReducers:n=>{n.addCase(zf.pending,e=>{e.status="loading"}).addCase(zf.fulfilled,(e,t)=>{e.status="succeeded",e.categories=t.payload}).addCase(zf.rejected,(e,t)=>{e.status="failed",e.error=t.error.message})}}),{setSelectedCategory:Sm}=w2.actions,J7=w2.reducer,Ec=Va("favorite/fetchFavorites",async(n,{getState:e})=>{var o;const t=(o=e().auth.user)==null?void 0:o.uid;if(!t)return[];const i=wm(bm,`favorites/${t}`),a=await m2(i);return a.exists()?Object.entries(a.val()).map(([c,h])=>({productId:c,quantity:h.quantity})):[]}),fs=Va("favorite/toggleFavorite",async(n,{getState:e,dispatch:t})=>{var c;const i=(c=e().auth.user)==null?void 0:c.uid;if(!i)return{productId:n,action:"none"};const a=wm(bm,`favorites/${i}/${n}`);return(await m2(a)).exists()?await p2(a):await Y0(a,{quantity:1}),await t(Ec()),{productId:n}}),ej=Va("favorite/updateFavoriteQuantity",async({productId:n,quantity:e},{getState:t,dispatch:i})=>{var c;const a=(c=t().auth.user)==null?void 0:c.uid;if(!a)return;const o=wm(bm,`favorites/${a}/${n}`);return await Y0(o,{quantity:e}),await i(Ec()),{productId:n,quantity:e}}),T2=Ss({name:"favorite",initialState:{items:[]},reducers:{clearFavorites:n=>{n.items=[]}},extraReducers:n=>{n.addCase(Ec.fulfilled,(e,t)=>{e.items=t.payload}).addCase(fs.fulfilled,()=>{}).addCase(fs.rejected,(e,t)=>{console.error("🔥 Ошибка toggleFavorite:",t.error)})}}),{clearFavorites:b2}=T2.actions,tj=T2.reducer,S2=Ss({name:"search",initialState:{query:""},reducers:{setSearchQuery:(n,e)=>{n.query=e.payload}}}),{setSearchQuery:rv}=S2.actions,nj=S2.reducer,C2=Ss({name:"sidePanel",initialState:{isOpen:!1},reducers:{togglePanel:n=>{n.isOpen=!n.isOpen}}}),{togglePanel:os}=C2.actions,ij=C2.reducer,A2=Ss({name:"news",initialState:{news:[],viewedLoaded:!1,newNewsCount:0,viewedNewsIds:[]},reducers:{setNews:(n,e)=>{n.news=e.payload},setNewNewsCount:(n,e)=>{n.newNewsCount=e.payload},setViewedNewsIds:(n,e)=>{n.viewedNewsIds=e.payload},addViewedNewsId:(n,e)=>{n.viewedNewsIds.includes(e.payload)||n.viewedNewsIds.push(e.payload)},markAllNewsAsViewed:n=>{const e=n.news.map(t=>t.id);n.viewedNewsIds=[...new Set([...n.viewedNewsIds,...e])],n.newNewsCount=0},clearViewedNews:n=>{n.viewedNewsIds=[],n.newNewsCount=0}}}),{setNews:rj,setNewNewsCount:sj,setViewedNewsIds:ty,addViewedNewsId:tB,markAllNewsAsViewed:aj,clearViewedNews:oj}=A2.actions,lj=A2.reducer,eh=Va("orderHistory/fetchUserOrders",async n=>{const e=Fo(bn,"users",n,"orders"),t=s0(e,c0("createdAt","desc"));return(await om(t)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?o.createdAt.toDate().toISOString():null}})}),R2=Ss({name:"orderHistory",initialState:{orders:[],loading:!1},reducers:{clearOrders:n=>{n.orders=[]}},extraReducers:n=>{n.addCase(eh.pending,e=>{e.loading=!0}).addCase(eh.fulfilled,(e,t)=>{e.orders=t.payload,e.loading=!1}).addCase(eh.rejected,e=>{e.loading=!1})}}),{clearOrders:nB}=R2.actions,cj=R2.reducer,uj=LD({reducer:{menu:iO,products:X7,auth:Z7,categories:J7,favorite:tj,search:nj,sidePanel:ij,news:lj,orderHistory:cj}});var I2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zS=_a.createContext&&_a.createContext(I2),hj=["attr","size","title"];function dj(n,e){if(n==null)return{};var t=fj(n,e),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)i=o[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function fj(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function xp(){return xp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xp.apply(this,arguments)}function BS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function Np(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BS(Object(t),!0).forEach(function(i){pj(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BS(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function pj(n,e,t){return e=mj(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mj(n){var e=_j(n,"string");return typeof e=="symbol"?e:e+""}function _j(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function x2(n){return n&&n.map((e,t)=>_a.createElement(e.tag,Np({key:t},e.attr),x2(e.child)))}function Ct(n){return e=>_a.createElement(gj,xp({attr:Np({},n.attr)},e),x2(n.child))}function gj(n){var e=t=>{var{attr:i,size:a,title:o}=n,c=dj(n,hj),h=a||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),_a.createElement("svg",xp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:p,style:Np(Np({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&_a.createElement("title",null,o),n.children)};return zS!==void 0?_a.createElement(zS.Consumer,null,t=>e(t)):e(I2)}function yj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2zm3.564 1.426L5.596 5 8 5.961 14.154 3.5zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464z"},child:[]}]})(n)}function N2(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"},child:[]},{tag:"path",attr:{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(n)}function k2(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.5 7a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"},child:[]},{tag:"path",attr:{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(n)}function vj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"},child:[]}]})(n)}function Ej(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"},child:[]}]})(n)}function wj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"},child:[]},{tag:"path",attr:{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"},child:[]}]})(n)}function Tj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m7.5-6.923c-.67.204-1.335.82-1.887 1.855q-.215.403-.395.872c.705.157 1.472.257 2.282.287zM4.249 3.539q.214-.577.481-1.078a7 7 0 0 1 .597-.933A7 7 0 0 0 3.051 3.05q.544.277 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9 9 0 0 1-1.565-.667A6.96 6.96 0 0 0 1.018 7.5zm1.4-2.741a12.3 12.3 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332M8.5 5.09V7.5h2.99a12.3 12.3 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.6 13.6 0 0 1 7.5 10.91V8.5zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741zm-3.282 3.696q.18.469.395.872c.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a7 7 0 0 1-.598-.933 9 9 0 0 1-.481-1.079 8.4 8.4 0 0 0-1.198.49 7 7 0 0 0 2.276 1.522zm-1.383-2.964A13.4 13.4 0 0 1 3.508 8.5h-2.49a6.96 6.96 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667m6.728 2.964a7 7 0 0 0 2.275-1.521 8.4 8.4 0 0 0-1.197-.49 9 9 0 0 1-.481 1.078 7 7 0 0 1-.597.933M8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855q.216-.403.395-.872A12.6 12.6 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.96 6.96 0 0 0 14.982 8.5h-2.49a13.4 13.4 0 0 1-.437 3.008M14.982 7.5a6.96 6.96 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008zM11.27 2.461q.266.502.482 1.078a8.4 8.4 0 0 0 1.196-.49 7 7 0 0 0-2.275-1.52c.218.283.418.597.597.932m-.488 1.343a8 8 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"},child:[]}]})(n)}function bj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"},child:[]}]})(n)}function Sj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"},child:[]}]})(n)}function Cj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.37 2.37 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0M1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5M4 15h3v-5H4zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3 0h-2v3h2z"},child:[]}]})(n)}function Aj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.048 3.323c.022.277-.13.523-.338.55-.21.026-.397-.176-.419-.453s.13-.523.338-.55c.21-.026.397.176.42.453Zm2.265-.24c-.603-.146-.894.256-.936.333-.027.048-.008.117.037.15.045.035.092.025.119-.003.361-.39.751-.172.829-.129l.011.007c.053.024.147.028.193-.098.023-.063.017-.11-.006-.142-.016-.023-.089-.08-.247-.118"},child:[]},{tag:"path",attr:{d:"M11.727 6.719c0-.022.01-.375.01-.557 0-3.07-1.45-6.156-5.015-6.156S1.708 3.092 1.708 6.162c0 .182.01.535.01.557l-.72 1.795a26 26 0 0 0-.534 1.508c-.68 2.187-.46 3.093-.292 3.113.36.044 1.401-1.647 1.401-1.647 0 .979.504 2.256 1.594 3.179-.408.126-.907.319-1.228.556-.29.213-.253.43-.201.518.228.386 3.92.246 4.985.126 1.065.12 4.756.26 4.984-.126.052-.088.088-.305-.2-.518-.322-.237-.822-.43-1.23-.557 1.09-.922 1.594-2.2 1.594-3.178 0 0 1.041 1.69 1.401 1.647.168-.02.388-.926-.292-3.113a26 26 0 0 0-.534-1.508l-.72-1.795ZM9.773 5.53a.1.1 0 0 1-.009.096c-.109.159-1.554.943-3.033.943h-.017c-1.48 0-2.925-.784-3.034-.943a.1.1 0 0 1-.018-.055q0-.022.01-.04c.13-.287 1.43-.606 3.042-.606h.017c1.611 0 2.912.319 3.042.605m-4.32-.989c-.483.022-.896-.529-.922-1.229s.344-1.286.828-1.308c.483-.022.896.529.922 1.23.027.7-.344 1.286-.827 1.307Zm2.538 0c-.484-.022-.854-.607-.828-1.308.027-.7.44-1.25.923-1.23.483.023.853.608.827 1.309-.026.7-.439 1.251-.922 1.23ZM2.928 8.99q.32.063.639.117v2.336s1.104.222 2.21.068V9.363q.49.027.937.023h.017c1.117.013 2.474-.136 3.786-.396.097.622.151 1.386.097 2.284-.146 2.45-1.6 3.99-3.846 4.012h-.091c-2.245-.023-3.7-1.562-3.846-4.011-.054-.9 0-1.663.097-2.285"},child:[]}]})(n)}function Rj(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},child:[]},{tag:"path",attr:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},child:[]}]})(n)}function Ij(n){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"},child:[]}]})(n)}function D2(n){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(n)}function xj(n){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"},child:[]}]})(n)}function O2(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 3H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM9 9H5V5h4v4zm11-6h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-1 6h-4V5h4v4zm-9 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm-1 6H5v-4h4v4zm8-6c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(n)}function Nj(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"},child:[]}]})(n)}function kj(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"},child:[]}]})(n)}function Dj(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"},child:[]}]})(n)}function Oj(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m6.293 13.293 1.414 1.414L12 10.414l4.293 4.293 1.414-1.414L12 7.586z"},child:[]}]})(n)}function Mj(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412l7.332 7.332c.17.299.498.492.875.492a.99.99 0 0 0 .792-.409l7.415-7.415c2.354-2.354 2.354-6.049-.002-8.416a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595zm6.791 1.61c1.563 1.571 1.564 4.025.002 5.588L12 18.586l-6.793-6.793c-1.562-1.563-1.561-4.017-.002-5.584.76-.756 1.754-1.172 2.799-1.172s2.035.416 2.789 1.17l.5.5a.999.999 0 0 0 1.414 0l.5-.5c1.512-1.509 4.074-1.505 5.584-.002z"},child:[]}]})(n)}function M2(n){return Ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.205 4.791a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412L12 21.414l8.207-8.207c2.354-2.353 2.355-6.049-.002-8.416z"},child:[]}]})(n)}function Pj(n){return Ct({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M14 16h-3v-6h-5v6h-3v-9h-1v10h13v-10h-1v9zM7 16v-5h3v5h-3zM16.796 6.473l-0.592 0.807-7.704-5.66-7.704 5.658-0.592-0.806 8.296-6.092 8.296 6.093z"},child:[]}]})(n)}const Lj="_header__wrap_fjua4_1",Vj="_header_fjua4_1",jj="_icon_fjua4_57",Uj="_header__center_fjua4_73",zj="_logo__header_fjua4_101",Bj="_searchContainer_fjua4_109",Fj="_searchInput_fjua4_131",qj="_searchButton_fjua4_151",Hj="_darkOverlay_fjua4_179",$j="_show_fjua4_205",Gj="_header__left_fjua4_237",Kj="_header__right_fjua4_241",Wj="_hideOnMobile_fjua4_309",Vt={header__wrap:Lj,header:Vj,icon:jj,header__center:Uj,logo__header:zj,searchContainer:Bj,searchInput:Fj,searchButton:qj,darkOverlay:Hj,show:$j,"icon-favorites":"_icon-favorites_fjua4_215","header__favorite-count":"_header__favorite-count_fjua4_221",header__left:Gj,header__right:Kj,"icon-account":"_icon-account_fjua4_253","icon-cart":"_icon-cart_fjua4_257",hideOnMobile:Wj,"home-mobile-only":"_home-mobile-only_fjua4_319"},P2=n=>{V.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth;return n?requestAnimationFrame(()=>{document.body.style.overflow="hidden",document.body.style.paddingRight=`${e}px`,document.documentElement.style.setProperty("--scrollbar-width",`${e}px`)}):(document.body.style.overflow="auto",document.body.style.paddingRight="0",document.documentElement.style.setProperty("--scrollbar-width","0")),()=>{document.body.style.overflow="auto",document.body.style.paddingRight="0",document.documentElement.style.setProperty("--scrollbar-width","0")}},[n])},L2=()=>{const n=Sn(),e=bs(),t=Ie(h=>h.menu.isFavoritesVisible),i=Ie(h=>h.menu.isCategoryListVisible),a=Ie(h=>h.sidePanel.isOverlayVisible),o=Ie(h=>h.favorite.items.length),c=Ie(h=>h.auth.user);return P2(t||i||a),v.jsxs("div",{className:Vt.header__right,children:[v.jsx("div",{className:Vt["home-mobile-only"],children:v.jsxs("div",{className:`${Vt.icon} ${Vt["icon-cart"]}`,onClick:()=>{n(Sm("Все товары")),n(rv("")),e("/")},children:[v.jsx(Pj,{size:24}),v.jsx("span",{children:"Главная"})]})}),v.jsxs("div",{className:`${Vt.icon} ${Vt["icon-account"]}`,onClick:()=>n(nO()),children:[v.jsx(xj,{size:24}),v.jsx("span",{children:"Кабинет"})]}),v.jsxs("div",{className:`${Vt.icon} ${Vt["icon-favorites"]}`,onClick:()=>{n(c?No():os())},children:[o?v.jsx(M2,{style:{fill:"red",stroke:"black",strokeWidth:"2px"},size:24}):v.jsx(D2,{size:24}),v.jsx("span",{children:"Избранное"}),v.jsx("div",{className:Vt["header__favorite-count"],children:o||""})]}),v.jsxs("div",{className:`${Vt.icon} ${Vt["icon-cart"]}`,onClick:()=>n(Wf()),children:[v.jsx(O2,{size:24}),v.jsx("span",{children:"Категории"})]})]})},Qj=()=>{const n=Sn(),[e,t]=V.useState(!1),i=Ie(h=>h.search.query),a=()=>{t(!1)},o=()=>{t(!0)},c=()=>{t(!1)};return v.jsx("div",{className:Vt.header,children:v.jsxs("div",{className:Vt.header__wrap,children:[v.jsx("div",{className:Vt.header__left,children:v.jsx("div",{className:Vt.logo__header,onClick:()=>{n(Sm("Все товары")),n(rv(""))},children:v.jsx(Op,{to:"/",children:v.jsxs("svg",{width:"100",height:"50",viewBox:"0 -10 150 100",children:[v.jsx("text",{x:"10",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"S"}),v.jsx("text",{x:"140",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"H"}),v.jsx("text",{x:"35",y:"70",fontSize:"90",fontFamily:"Arial",fill:"#6e41e2",children:"O"}),v.jsx("text",{x:"110",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"P"})]})})})}),v.jsxs("div",{className:Vt.header__center,children:[v.jsxs("div",{className:Vt.searchContainer,children:[v.jsx("input",{type:"text",placeholder:"Поиск...",className:Vt.searchInput,onFocus:o,value:i,onChange:h=>n(rv(h.target.value))}),v.jsx("div",{onClick:()=>a(),className:Vt.searchButton,children:"Найти"})]}),v.jsx("div",{className:`${Vt.darkOverlay} ${e?Vt.show:""}`,onClick:c})]}),v.jsx("div",{className:Vt.hideOnMobile,children:v.jsx(L2,{})})]})})};function V2(n){return Ct({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M223.41,32.09,80,134.87,21,123.3A6.23,6.23,0,0,1,20,111.38L222.63,32.07A1,1,0,0,1,223.41,32.09ZM80,200a8,8,0,0,0,13.76,5.56l30.61-31.76L80,134.87Z",opacity:"0.2"},child:[]},{tag:"path",attr:{d:"M228.88,26.19a9,9,0,0,0-9.16-1.57L17.06,103.93a14.22,14.22,0,0,0,2.43,27.21L72,141.45V200a15.92,15.92,0,0,0,10,14.83,15.91,15.91,0,0,0,17.51-3.73l25.32-26.26L165,220a15.88,15.88,0,0,0,10.51,4,16.3,16.3,0,0,0,5-.79,15.85,15.85,0,0,0,10.67-11.63L231.77,35A9,9,0,0,0,228.88,26.19ZM78.15,126.35l-49.61-9.73,139.2-54.48ZM88,200V152.52l24.79,21.74Zm87.53,8L92.85,135.5l119-85.29Z"},child:[]}]})(n)}const Yj="_footer_rqlwn_3",an={"footer-wrap":"_footer-wrap_rqlwn_3",footer:Yj,"footer-content":"_footer-content_rqlwn_35","footer-section":"_footer-section_rqlwn_55","footer-title":"_footer-title_rqlwn_67","footer-text":"_footer-text_rqlwn_81","footer-icons":"_footer-icons_rqlwn_95","footer-icon":"_footer-icon_rqlwn_95","footer-bottom":"_footer-bottom_rqlwn_135"},Xj=()=>v.jsx("div",{className:an["footer-wrap"],children:v.jsxs("div",{className:an.footer,children:[v.jsxs("div",{className:an["footer-content"],children:[v.jsxs("div",{className:an["footer-section"],children:[v.jsx("h3",{className:an["footer-title"],children:"О нас"}),v.jsx("p",{className:an["footer-text"],children:"TechZone – магазин электроники и аксессуаров. Доставляем по всей Украине. Надёжно, быстро и с заботой."})]}),v.jsxs("div",{className:an["footer-section"],children:[v.jsx("h3",{className:an["footer-title"],children:"Контакты"}),v.jsx("p",{className:an["footer-text"],children:"Email: info@techzone.com.ua"}),v.jsx("p",{className:an["footer-text"],children:"Телефон: +38 (098) 123 45 67 (Пн–Пт 9:00–18:00)"}),v.jsx("p",{className:an["footer-text"],children:"Адрес: г. Киев, ул. Электриков, 10"})]}),v.jsxs("div",{className:an["footer-section"],children:[v.jsx("h3",{className:an["footer-title"],children:"Мы в соцсетях"}),v.jsxs("div",{className:an["footer-icons"],children:[v.jsx("a",{href:"https://t.me/techzone_support",target:"_blank",rel:"noopener noreferrer",className:an["footer-icon"],children:v.jsx(V2,{})}),v.jsx("a",{href:"https://www.instagram.com/techzone_ua",target:"_blank",rel:"noopener noreferrer",className:an["footer-icon"],children:v.jsx(bj,{})}),v.jsx("a",{href:"https://wa.me/380981234567",target:"_blank",rel:"noopener noreferrer",className:an["footer-icon"],children:v.jsx(Ij,{})})]})]})]}),v.jsx("div",{className:an["footer-bottom"],children:v.jsx("p",{className:an["footer-text"],children:"© 2025 TechZone. Все права защищены."})})]})}),Zj="_defaultButton_1ovt9_1",FS={defaultButton:Zj};var ny={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var qS;function Jj(){return qS||(qS=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",c=0;c<arguments.length;c++){var h=arguments[c];h&&(o=a(o,i(h)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var c="";for(var h in o)e.call(o,h)&&o[h]&&(c=a(c,h));return c}function a(o,c){return c?o?o+" "+c:o+c:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(ny)),ny.exports}var eU=Jj();const tU=av(eU);function Yt({children:n,onClick:e,className:t="",customStyle:i,overrideDefault:a=!1}){const o=FS.defaultButton,c=i?FS[i]:null,h=tU(!a&&o,c,t);return v.jsx("div",{className:h,onClick:e,children:n})}const nU="_visible_89wky_109",Bt={"auth-form-container":"_auth-form-container_89wky_1","auth-form-container__value":"_auth-form-container__value_89wky_45","auth-form":"_auth-form_89wky_1","auth-form-title":"_auth-form-title_89wky_63","auth-form-group":"_auth-form-group_89wky_71","auth-form-group__email":"_auth-form-group__email_89wky_83","auth-form-group__password":"_auth-form-group__password_89wky_85","auth-form-error":"_auth-form-error_89wky_99",visible:nU,"auth-form-button":"_auth-form-button_89wky_117","auth-form-toggle":"_auth-form-toggle_89wky_139","auth-form-toggle-link":"_auth-form-toggle-link_89wky_149"},iU=()=>{const[n,e]=V.useState(!0),[t,i]=V.useState({email:"",password:"",confirmPassword:""}),[a,o]=V.useState(""),[c,h]=V.useState(""),{user:p,isAdmin:m}=Ie(j=>j.auth),g=Sn(),E=bs();V.useEffect(()=>{i({email:"",password:"",confirmPassword:""}),o(""),h("")},[n]);const C=async()=>{try{await UR(Zu),g(oj()),g(b2()),g(E2()),i({email:"",password:"",confirmPassword:""}),h(""),E("/")}catch(j){console.error("Ошибка при выходе:",j)}},x=j=>{const{name:D,value:U}=j.target;i($=>({...$,[D]:U}))},O=async j=>{if(j.preventDefault(),o(""),h(""),!n&&t.password!==t.confirmPassword){o("Пароли не совпадают");return}try{let D;n?D=await b9(Zu,t.email,t.password):(D=await T9(Zu,t.email,t.password),await h0(Qi(bn,"users",D.user.uid),{email:t.email,role:"user"}));const U=await mh(Qi(bn,"myStores","admin-1"));if(U.exists()&&U.data().email===t.email)g(iv({user:{email:t.email,uid:D.user.uid},role:"admin"}));else{const $=await mh(Qi(bn,"users",D.user.uid));if(!$.exists())throw new Error("Данные пользователя не найдены в Firestore.");const q=$.data().role;g(iv({user:{email:t.email,uid:D.user.uid},role:q}))}h(n?`Вы вошли как ${t.email}`:`Пользователь ${t.email} успешно зарегистрирован`),i({email:"",password:"",confirmPassword:""})}catch(D){switch(console.error("Ошибка аутентификации:",D),D.code){case"auth/email-already-in-use":o("Пользователь с таким email уже существует.");break;case"auth/invalid-email":o("Некорректный email.");break;case"auth/weak-password":o("Пароль должен содержать не менее 6 символов.");break;case"auth/user-not-found":o("Пользователь с таким email не найден.");break;case"auth/wrong-password":o("Неверный пароль.");break;default:o("Неправельный email или password")}}};return V.useEffect(()=>{p&&g(Ec())},[p,g]),p?v.jsxs("div",{className:Bt["auth-form-container"],children:[v.jsx("h2",{className:Bt["auth-form-title"],children:"Вы вошли в систему"}),v.jsxs("p",{children:[v.jsx("strong",{children:"Email:"}),v.jsx("span",{className:Bt["auth-form-container__value"],children:p.email})]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Пользователь:"}),v.jsx("span",{className:Bt["auth-form-container__value"],children:m?"admin":"user"})]}),v.jsx("button",{onClick:C,className:Bt["auth-form-button"],children:"Выйти"})]}):v.jsxs("div",{className:Bt["auth-form-container"],children:[v.jsxs("form",{onSubmit:O,className:Bt["auth-form"],children:[v.jsx("h2",{className:Bt["auth-form-title"],children:n?"Вход":"Регистрация"}),v.jsx("p",{className:`${Bt["auth-form-error"]} ${a?Bt.visible:""}`,children:a?`${a}`:""}),c&&v.jsx("p",{className:Bt["auth-form-success"],children:c}),v.jsxs("div",{className:Bt["auth-form-group"],children:[v.jsx("label",{children:"Email:"}),v.jsx("input",{className:Bt["auth-form-group__email"],type:"email",name:"email",placeholder:"Email",value:t.email,onChange:x,required:!0})]}),v.jsxs("div",{className:Bt["auth-form-group"],children:[v.jsx("label",{children:"Пароль:"}),v.jsx("input",{className:Bt["auth-form-group__password"],type:"password",name:"password",placeholder:"Пароль",value:t.password,onChange:x,required:!0})]}),!n&&v.jsxs("div",{className:Bt["auth-form-group"],children:[v.jsx("label",{children:"Подтвердите пароль:"}),v.jsx("input",{className:Bt["auth-form-group__password"],type:"password",name:"confirmPassword",placeholder:"Подтвердите пароль",value:t.confirmPassword,onChange:x,required:!0})]}),v.jsx("button",{type:"submit",className:Bt["auth-form-button"],children:n?"Войти":"Зарегистрироваться"})]}),v.jsx("div",{className:Bt["auth-form-toggle"],children:n?v.jsxs("p",{children:["Нет аккаунта?",v.jsx("span",{className:Bt["auth-form-toggle-link"],onClick:()=>e(!1),children:"Зарегистрироваться"})]}):v.jsxs("p",{children:["Уже есть аккаунт?",v.jsx("span",{className:Bt["auth-form-toggle-link"],onClick:()=>e(!0),children:"Войти"})]})})]})};function rU(n){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(n)}const sU="_visible_1572e_29",iy={"menu-registration":"_menu-registration_1572e_1",visible:sU,"menu-registration__btn":"_menu-registration__btn_1572e_37"},aU=V.forwardRef(({isVisible:n},e)=>{const t=Sn(),i=()=>{t(rh(!1))};return v.jsxs("div",{ref:e,className:`${iy["menu-registration"]} ${n?iy.visible:""}`,children:[v.jsxs(Yt,{onClick:i,className:iy["menu-registration__btn"],children:[v.jsx(rU,{color:"white",size:30}),v.jsx("span",{children:"Закрыть"})]}),v.jsx("div",{children:v.jsx(iU,{})})]})}),oU="_visible_1w08j_29",Sf={"news-section":"_news-section_1w08j_1",visible:oU,"news-section__custom-button-close":"_news-section__custom-button-close_1w08j_37","news-section__wrap":"_news-section__wrap_1w08j_57"},Ol={"news-feed":"_news-feed_14pbg_1","news-item":"_news-item_14pbg_9","news-title":"_news-title_14pbg_21","news-content":"_news-content_14pbg_33","news-date":"_news-date_14pbg_41","delete-button":"_delete-button_14pbg_51"},lU=()=>{const n=Sn(),e=Ie(h=>h.auth.isAdmin),t=Ie(h=>h.auth.userId),i=Ie(h=>h.news.news),a=Ie(h=>h.news.viewedNewsIds);V.useEffect(()=>{const h=s0(Fo(bn,"news"),c0("createdAt","desc")),p=QP(h,m=>{const g=m.docs.map(E=>{var x;const C=E.data();return{id:E.id,...C,createdAt:((x=C.createdAt)==null?void 0:x.toDate().getTime())||null}});n(rj(g))});return()=>p()},[n]),V.useEffect(()=>{if(!t)return;(async()=>{try{const p=Qi(bn,"users",t),m=await mh(p);if(m.exists()){const g=m.data(),E=Array.isArray(g.viewedNews)?g.viewedNews:[];n(ty(E))}else n(ty([]))}catch(p){console.error("Ошибка при загрузке viewedNews:",p),n(ty([]))}})()},[t,n]),V.useEffect(()=>{const h=i.filter(p=>!a.includes(p.id));n(sj(h.length))},[i,a,n]),V.useEffect(()=>{if(!t||a.length===0)return;(async()=>{try{await h0(Qi(bn,"users",t),{viewedNews:a},{merge:!0})}catch(p){console.error("Ошибка при сохранении viewedNews:",p)}})()},[t,a]);const o=async h=>{if(window.confirm("Удалить эту новость?"))try{await $u(Qi(bn,"news",h)),alert("Удалено")}catch(m){console.error("Ошибка при удалении:",m),alert("Ошибка при удалении")}},c=h=>h.charAt(0).toUpperCase()+h.slice(1);return v.jsx("div",{className:Ol["news-feed"],children:i.map(h=>v.jsxs("div",{className:Ol["news-item"],children:[v.jsx("h3",{className:Ol["news-title"],children:c(h.title.length>30?h.title.slice(0,35)+"...":h.title)}),v.jsx("p",{className:Ol["news-content"],children:c(h.content.length>150?h.content.slice(0,135)+"...":h.content)}),v.jsx("small",{className:Ol["news-date"],children:h.createdAt?new Date(h.createdAt).toLocaleString():"Дата не указана"}),e&&v.jsx("button",{onClick:()=>o(h.id),className:Ol["delete-button"],children:"Удалить"})]},h.id))})},cU=V.forwardRef(({isVisible:n},e)=>{const t=Sn(),i=()=>{t(my(!1))};return v.jsx("div",{ref:e,className:`${Sf["news-section"]} ${n?Sf.visible:""}`,children:v.jsxs("div",{children:[v.jsx(Yt,{className:Sf["news-section__custom-button-close"],onClick:i,children:"✖ закрыть"}),v.jsxs("div",{className:Sf["news-section__wrap"],children:[v.jsx("strong",{children:"Новости"}),v.jsx(lU,{})]})]})})}),uU="_visible_v0umt_41",hU="_active_v0umt_97",Ml={"category-list__section":"_category-list__section_v0umt_1",visible:uU,"category-list__container":"_category-list__container_v0umt_49","category-button":"_category-button_v0umt_63",active:hU,"close-button":"_close-button_v0umt_109"},dU=_a.forwardRef(({isVisible:n},e)=>{const t=Sn(),{categories:i,selectedCategory:a,status:o}=Ie(m=>m.categories),c=[...new Set(i)];V.useEffect(()=>{t(zf())},[t]);const h=()=>{t(Wf(!1))},p=m=>{t(Sm(m))};return v.jsxs("div",{ref:e,className:`${Ml["category-list__section"]} ${n?Ml.visible:""}`,children:[v.jsx(Yt,{className:Ml["close-button"],onClick:h,children:"✖ закрыть"}),v.jsx("div",{className:Ml["category-list__container"],children:o==="loading"?v.jsx("p",{children:"Загрузка..."}):o==="failed"?v.jsx("p",{children:"Ошибка загрузки категорий"}):c.map(m=>v.jsx("button",{className:`${Ml["category-button"]} ${a===m?Ml.active:""}`,onClick:()=>{p(m),h()},children:m},m))})]})});function fU(n){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"},child:[]},{tag:"path",attr:{d:"M18 14h-8"},child:[]},{tag:"path",attr:{d:"M15 18h-5"},child:[]},{tag:"path",attr:{d:"M10 6h8v4h-8V6Z"},child:[]}]})(n)}const pU="_visible_sw2ou_29",mU="_orderList_sw2ou_85",_U="_orderItem_sw2ou_103",gU="_productList_sw2ou_139",yU="_productItem_sw2ou_153",vU="_productImage_sw2ou_167",EU="_orderTopRow_sw2ou_181",wU="_orderAmount_sw2ou_207",TU="_arrowIcon_sw2ou_215",Di={"order-history__section":"_order-history__section_sw2ou_1",visible:pU,"order-history__custom-button-close":"_order-history__custom-button-close_sw2ou_37","order-history__wrap":"_order-history__wrap_sw2ou_57",orderList:mU,orderItem:_U,productList:gU,productItem:yU,productImage:vU,orderTopRow:EU,orderAmount:wU,arrowIcon:TU},bU=V.forwardRef(({isVisible:n},e)=>{const t=Sn(),i=Ie(m=>m.orderHistory.orders),a=Ie(m=>m.auth.user),[o,c]=V.useState(null);V.useEffect(()=>{a&&t(eh(a.uid))},[a,t]);const h=()=>{t(gy(!1))},p=m=>{c(g=>g===m?null:m)};return v.jsx("div",{ref:e,className:`${Di["order-history__section"]} ${n?Di.visible:""}`,children:v.jsxs("div",{children:[v.jsx(Yt,{className:Di["order-history__custom-button-close"],onClick:h,children:"✖ закрыть"}),v.jsxs("div",{className:Di["order-history__wrap"],children:[v.jsx("h3",{children:"Мои заказы:"}),i.length===0?v.jsx("p",{children:"Заказов нет ..."}):v.jsx("ul",{className:Di.orderList,children:i.map(m=>{var g,E;return v.jsxs("li",{className:Di.orderItem,children:[v.jsxs("div",{className:Di.orderTopRow,onClick:()=>p(m.id),children:[v.jsxs("div",{className:Di.orderAmount,children:["Заказ на сумму"," ",(g=m.total)==null?void 0:g.toLocaleString("uk-UA")," ₴"]}),v.jsx("div",{className:Di.arrowIcon,children:o===m.id?"▲":"▼"})]}),o===m.id&&v.jsx("ul",{className:Di.productList,children:(E=m.products)==null?void 0:E.map((C,x)=>v.jsxs("li",{className:Di.productItem,children:[v.jsx("img",{src:C.image,alt:C.name,className:Di.productImage}),v.jsxs("div",{children:[v.jsx("div",{children:C.name.length>50?`${C.name.slice(0,50)}...`:C.name}),v.jsxs("strong",{children:[C.quantity," ×"," ",C.price," ₴"]})]})]},x))})]},m.id)})})]})]})})}),SU="_visible_1prz6_69",Cf={"settings-panel__section":"_settings-panel__section_1prz6_1","settings-panel__wrap":"_settings-panel__wrap_1prz6_31","settings-panel__custom-button-close":"_settings-panel__custom-button-close_1prz6_41",visible:SU},CU=V.forwardRef(({isVisible:n},e)=>{const t=Sn(),i=()=>{t(_y(!1))};return v.jsxs("div",{ref:e,className:`${Cf["settings-panel__section"]} ${n?Cf.visible:""}`,children:[v.jsx(Yt,{className:Cf["settings-panel__custom-button-close"],onClick:i,children:"✖ закрыть"}),v.jsxs("div",{className:Cf["settings-panel__wrap"],children:[v.jsx("p",{children:"Настройки"}),v.jsx("p",{children:"Настройки"}),v.jsx("p",{children:"Настройки"}),v.jsx("p",{children:"Настройки"}),v.jsx("p",{children:"Настройки"}),v.jsx("p",{children:"Настройки"}),v.jsx("p",{children:"Настройки"})]})]})}),AU="_visible_1cxu7_33",RU="_form_1cxu7_99",IU="_textarea_1cxu7_115",xU="_error_1cxu7_211",on={"order-modal":"_order-modal_1cxu7_1",visible:AU,"favorite-list__custom-button-close":"_favorite-list__custom-button-close_1cxu7_41","order-modal__wrap":"_order-modal__wrap_1cxu7_65",form:RU,textarea:IU,"order-modal__bottom":"_order-modal__bottom_1cxu7_155","button-send-order":"_button-send-order_1cxu7_177",error:xU,"error-message":"_error-message_1cxu7_221"},NU=({isOpen:n,onClose:e,onSubmit:t,user:i})=>{const[a,o]=V.useState(!1),[c,h]=V.useState(""),[p,m]=V.useState("+380"),[g,E]=V.useState(""),[C,x]=V.useState(""),[O,j]=V.useState(""),[D,U]=V.useState(""),[$,q]=V.useState({}),z=V.useRef(null),Y=V.useRef(null),W=V.useRef(null),R=V.useRef(null),T=V.useRef(null),w=V.useRef(null);V.useEffect(()=>{n&&i&&(o(!1),h(i.displayName||""),m(i.phoneNumber||"+380"),E(i.email||""))},[n,i]),V.useEffect(()=>{n&&o(!1)},[n]),V.useEffect(()=>{const k=P=>{z.current&&!z.current.contains(P.target)&&e()};return n&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[n,e]);const A=async k=>{k.preventDefault();const P={};if(c.trim()||(P.name="Имя обязательно"),(!p.trim()||p.length<13)&&(P.phone="Введите полный номер телефона"),g.trim()||(P.email="Email обязателен"),C.trim()||(P.city="Город обязателен"),O.trim()||(P.deliveryMethod="Выберите способ доставки"),q(P),Object.keys(P).length>0){P.name?Y.current.focus():P.phone?W.current.focus():P.email?R.current.focus():P.city?T.current.focus():P.deliveryMethod&&w.current.focus();return}await t({name:c,phone:p,email:g,city:C,deliveryMethod:O,paymentMethod:"Оплата при получении",comment:D})&&(o(!0),h(""),m("+380"),E(""),x(""),j(""),U(""),q({}))};return v.jsxs("div",{className:`${on["order-modal"]} ${n?on.visible:""}`,children:[v.jsx(Yt,{className:on["favorite-list__custom-button-close"],onClick:e,children:"✖ закрыть"}),v.jsx("div",{className:on["order-modal__wrap"],ref:z,children:a?v.jsxs("div",{className:on["success-message"],children:[v.jsx("h3",{children:"Заказ отправлен!"}),v.jsx("p",{children:"Спасибо за ваш заказ. Мы свяжемся с вами в ближайшее время."})]}):v.jsxs(v.Fragment,{children:[v.jsx("h3",{children:"Оформление заказа"}),v.jsxs("form",{onSubmit:A,className:on.form,children:[v.jsx("input",{ref:Y,type:"text",placeholder:"Ваше имя",value:c,onChange:k=>h(k.target.value),className:$.name?on.error:""}),$.name&&v.jsx("p",{className:on["error-message"],children:$.name}),v.jsx("input",{ref:W,type:"tel",placeholder:"Телефон",value:p,onChange:k=>{let P=k.target.value;P.startsWith("+380")||(P="+380");const Ae=P.replace(/\D/g,"").slice(3).slice(0,9);m("+380"+Ae)},className:$.phone?on.error:""}),$.phone&&v.jsx("p",{className:on["error-message"],children:$.phone}),v.jsx("input",{ref:R,type:"email",placeholder:"Email",value:g,onChange:k=>E(k.target.value),className:$.email?on.error:""}),$.email&&v.jsx("p",{className:on["error-message"],children:$.email}),v.jsx("input",{ref:T,type:"text",placeholder:"Город",value:C,onChange:k=>x(k.target.value),className:$.city?on.error:""}),$.city&&v.jsx("p",{className:on["error-message"],children:$.city}),v.jsxs("select",{ref:w,value:O,onChange:k=>j(k.target.value),className:$.deliveryMethod?on.error:"",children:[v.jsx("option",{value:"",children:"Выберите способ доставки"}),v.jsx("option",{value:"Курьер",children:"Курьер"}),v.jsx("option",{value:"Самовывоз",children:"Самовывоз"}),v.jsx("option",{value:"Почта",children:"Почта"})]}),$.deliveryMethod&&v.jsx("p",{className:on["error-message"],children:$.deliveryMethod}),v.jsx("textarea",{className:on.textarea,placeholder:"Оставить комментарий",value:D,onChange:k=>U(k.target.value),rows:4,maxLength:50}),v.jsx("div",{className:on["order-modal__bottom"],children:v.jsx("button",{className:on["button-send-order"],type:"submit",children:"Отправить заказ"})})]})]})})]})},kU=()=>{const n="ABC0123456789";let e="";for(let t=0;t<6;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return`ORD-${e}`},DU=async(n,e)=>{try{const t=Fo(bn,"users",n,"orders");await d0(t,{...e,code:kU(),processed:!1,createdAt:YP()})}catch(t){throw console.error("Ошибка при сохранении заказа:",t),t}},OU="_visible_19b17_35",MU="_favorite__delete_19b17_153",PU="_favorite__icon_19b17_177",LU="_favorite__things_19b17_203",VU="_emptyErrorMessage_19b17_281",yn={"favorite-list":"_favorite-list_19b17_1",visible:OU,"favorite-list__custom-button-close":"_favorite-list__custom-button-close_19b17_43","favorite-list__wrap":"_favorite-list__wrap_19b17_63","favorite-list__card-wrap":"_favorite-list__card-wrap_19b17_93","favorite-item__cards":"_favorite-item__cards_19b17_101","favorite-item__card":"_favorite-item__card_19b17_101","favorite__quantity-controls":"_favorite__quantity-controls_19b17_121","favorite__quantity-box":"_favorite__quantity-box_19b17_141",favorite__delete:MU,favorite__icon:PU,favorite__things:LU,"favorite-list__total":"_favorite-list__total_19b17_215","favorite-list__total_wrap":"_favorite-list__total_wrap_19b17_237","pay-button":"_pay-button_19b17_257",emptyErrorMessage:VU},jU=async n=>{try{const e=wm(bm,`favorites/${n}`);await p2(e),console.log("Избранное в Realtime Database очищено")}catch(e){console.error("Ошибка при очистке избранного в Realtime Database:",e)}},UU=V.forwardRef(({isVisible:n},e)=>{const t=Sn(),i=bs(),[a,o]=V.useState(!1),c=Ie(D=>D.auth.user),h=Ie(D=>D.products.items),p=Ie(D=>D.favorite.items),m=Ie(D=>D.menu.isOrderModalOpen),g=async D=>{if(!c||!c.uid)return alert("Вы не авторизованы"),!1;const U=E.reduce((q,z)=>q+(z.price||0)*(z.quantity||1),0),$={...D,products:E.map(q=>{var z,Y;return{id:q.id,name:q.name,image:((z=q.images)==null?void 0:z[0])||((Y=q.imageUrl)==null?void 0:Y.split(",")[0])||"",quantity:q.quantity||1,price:q.price||0}}),total:U};try{return await DU(c.uid,$),await jU(c.uid),console.log("Избранное в Firebase очищено"),t(b2()),t(eh(c.uid)),!0}catch(q){return console.error("Ошибка Firestore:",q),!1}};V.useEffect(()=>{c&&t(Ec())},[c,t]),V.useEffect(()=>{if(!h.length||!p.length)return;const D=new Set(h.map(U=>U.id));p.forEach(U=>{D.has(U.productId)||t(fs(U.productId))})},[h,p,t]);const E=V.useMemo(()=>p.map(D=>{const U=h.find($=>$.id===D.productId);return U?{...U,quantity:D.quantity}:null}).filter(Boolean),[h,p]),C=(D,U,$)=>{$.stopPropagation();const q=E.find(Y=>Y.id===D);if(!q)return;const z=(q.quantity||1)+U;z<=0||t(ej({productId:D,quantity:z}))},x=(D,U)=>{U.stopPropagation(),t(fs(D))},O=D=>{i(`/product/${D}`)},j=E.reduce((D,U)=>D+(U.price||0)*(U.quantity||1),0);return v.jsxs("div",{ref:e,className:`${yn["favorite-list"]} ${n?yn.visible:""}`,children:[v.jsx(Yt,{className:yn["favorite-list__custom-button-close"],onClick:()=>t(No(!1)),children:"✖ закрыть"}),v.jsxs("div",{className:yn["favorite-list__wrap"],children:[v.jsx("strong",{children:"Избранное"}),E.length===0?a&&v.jsx("p",{className:yn.emptyErrorMessage,children:"Список пуст! Добавьте товары для оформления заказа."}):v.jsx("ul",{className:yn["favorite-list__card-wrap"],children:E.map(D=>{var U,$,q;return v.jsxs("li",{className:yn["favorite-item__cards"],children:[v.jsxs("div",{className:yn["favorite-item__card"],children:[v.jsx("img",{className:yn["favorite-item__img"],src:((U=D.images)==null?void 0:U[0])||(($=D.imageUrl)==null?void 0:$.split(",")[0])||"/logo.png",alt:D.name,onClick:()=>{O(D.id),t(No(!1))},width:50}),v.jsxs("div",{children:[v.jsx("p",{children:D.name.length>50?`${D.name.slice(0,50)}...`:D.name}),v.jsxs("strong",{children:[(q=D.price)==null?void 0:q.toLocaleString("uk-UA")," ₴"]})]})]}),v.jsxs("div",{className:yn["favorite__quantity-controls"],children:[v.jsxs("div",{className:yn["favorite__quantity-box"],children:[v.jsx(Ej,{className:yn.favorite__icon,onClick:z=>C(D.id,-1,z)}),v.jsx("div",{className:yn.favorite__things,children:D.quantity||1}),v.jsx(Sj,{className:yn.favorite__icon,onClick:z=>C(D.id,1,z)})]}),v.jsx(Rj,{className:yn.favorite__delete,onClick:z=>x(D.id,z)})]})]},D.id)})})," ",v.jsx("div",{children:v.jsxs("div",{className:yn["favorite-list__total"],children:[v.jsxs("div",{className:yn["favorite-list__total_wrap"],children:[v.jsx("strong",{children:"К оплате без доставки:"}),v.jsxs("strong",{children:[j.toLocaleString("uk-UA")," ₴"]})]}),v.jsx(Yt,{className:yn["pay-button"],onClick:()=>{if(E.length===0){o(!0);return}o(!1),t(AT(!0))},children:"Оформить заказ"})]})})]}),v.jsx(NU,{isOpen:m,onClose:()=>t(AT(!1)),onSubmit:g,user:c})]})}),zU="_menu_q0wsc_1",BU="_menu__collection_q0wsc_31",FU="_visible_q0wsc_49",qU="_overlay_q0wsc_59",HU="_active_q0wsc_85",$U="_customButtonMenu_q0wsc_95",Ve={menu:zU,menu__collection:BU,visible:FU,overlay:qU,active:HU,customButtonMenu:$U,"menu__custom-button-close":"_menu__custom-button-close_q0wsc_109","menu-language":"_menu-language_q0wsc_143","shop-soon":"_shop-soon_q0wsc_153","category-panel":"_category-panel_q0wsc_169","news-panel":"_news-panel_q0wsc_171","settings-panel":"_settings-panel_q0wsc_173","orders-panel":"_orders-panel_q0wsc_175","shop-panel":"_shop-panel_q0wsc_177","telegram-panel":"_telegram-panel_q0wsc_179","favorites-panel":"_favorites-panel_q0wsc_181","admin-panel":"_admin-panel_q0wsc_185","category-icon":"_category-icon_q0wsc_221","news-icon":"_news-icon_q0wsc_223","settings-icon":"_settings-icon_q0wsc_225","orders-icon":"_orders-icon_q0wsc_227","shop-icon":"_shop-icon_q0wsc_229","telegram-icon":"_telegram-icon_q0wsc_231","favorites-icon":"_favorites-icon_q0wsc_233","admin-icon":"_admin-icon_q0wsc_235","globe-icon":"_globe-icon_q0wsc_237","category-text":"_category-text_q0wsc_245","news-text":"_news-text_q0wsc_247","settings-text":"_settings-text_q0wsc_249","orders-text":"_orders-text_q0wsc_251","shop-text":"_shop-text_q0wsc_253","telegram-text":"_telegram-text_q0wsc_255","favorites-text":"_favorites-text_q0wsc_257","admin-text":"_admin-text_q0wsc_259","language-text":"_language-text_q0wsc_261","favorites-panel__box":"_favorites-panel__box_q0wsc_279","news-text-wrapper":"_news-text-wrapper_q0wsc_281","favorites-count":"_favorites-count_q0wsc_293","news-count":"_news-count_q0wsc_295"},GU=()=>{const n=Ie(W=>W.favorite.items.length),e=Ie(W=>W.news.newNewsCount),t=Ie(W=>W.auth.user),i=Ie(W=>W.auth.isAdmin),{isMenuVisible:a,isRegistrationVisible:o,isNewsSectionVisible:c,isCategoryListVisible:h,isSettingsVisible:p,isOrderHistoryVisible:m,isFavoritesVisible:g}=Ie(W=>W.menu),E=Sn(),C=bs(),x=V.useRef(null),O=V.useRef(null),j=V.useRef(null),D=V.useRef(null),U=V.useRef(null),$=V.useRef(null),q=V.useRef(null);P2(a);const z=W=>{var R,T,w,A,k,P,M;(R=O.current)!=null&&R.contains(W.target)||(T=j.current)!=null&&T.contains(W.target)||(w=D.current)!=null&&w.contains(W.target)||(A=U.current)!=null&&A.contains(W.target)||(k=$.current)!=null&&k.contains(W.target)||(P=q.current)!=null&&P.contains(W.target)||(M=x.current)!=null&&M.contains(W.target)||(g?E(No(!1)):m?E(gy(!1)):p?E(_y(!1)):h?E(Wf(!1)):c?E(my(!1)):o?E(rh(!1)):a&&E(CT()))};V.useEffect(()=>(document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}),[a,o,c,h,p,m,g]);const Y=()=>{window.open("https://t.me/Student_JS","_blank")};return v.jsxs("div",{className:Ve.menu__wrap,children:[v.jsxs("div",{ref:O,className:`${Ve.menu} ${a?Ve.visible:""}`,children:[v.jsx(Yt,{className:Ve["menu__custom-button-close"],accordion:!0,onClick:()=>E(CT()),children:"✖ закрыть"}),v.jsxs("div",{className:Ve.menu__collection,children:[t?v.jsxs("p",{children:["Привет, ",t.name||"как ты","! 🎉🎉🎉"]}):v.jsx("p",{children:"Вы не авторизированы"}),v.jsx(Yt,{className:Ve.customButtonMenu,onClick:()=>E(rh()),children:t?"Личные данные":"Войти или зарегистрироваться"}),v.jsxs("div",{className:Ve["menu-language"],children:[v.jsx(Tj,{className:Ve["globe-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["language-text"],children:"Русский"})})]}),i&&v.jsxs("div",{className:Ve["admin-panel"],onClick:()=>C("/product-form"),children:[v.jsx(Aj,{className:Ve["admin-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["admin-text"],children:"Панель администратора"})})]}),v.jsxs("div",{className:Ve["category-panel"],onClick:()=>E(Wf()),children:[v.jsx(O2,{className:Ve["category-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["category-text"],children:"Категории"})})]}),v.jsxs("div",{className:Ve["telegram-panel"],onClick:Y,children:[v.jsx(V2,{className:Ve["telegram-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["telegram-text"],children:"Telegram"})})]}),v.jsxs("div",{className:Ve["favorites-panel"],onClick:()=>E(No()),children:[v.jsx(D2,{className:Ve["favorites-icon"]}),v.jsxs("div",{className:Ve["favorites-panel__box"],children:[v.jsx("p",{className:Ve["favorites-text"],children:"избранное"}),n>0&&v.jsx("span",{className:Ve["favorites-count"],children:n})]})]}),v.jsxs("div",{className:Ve["shop-panel"],children:[v.jsx(Cj,{className:Ve["shop-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["shop-text"],children:"Создать свой магазин"})}),v.jsx("p",{className:Ve["shop-soon"],children:"soon"})]}),v.jsxs("div",{className:Ve["orders-panel"],onClick:()=>E(gy()),children:[v.jsx(yj,{className:Ve["orders-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["orders-text"],children:"Мои заказы"})})]}),v.jsxs("div",{className:Ve["settings-panel"],onClick:()=>E(_y()),children:[v.jsx(wj,{className:Ve["settings-icon"]}),v.jsx("div",{children:v.jsx("p",{className:Ve["settings-text"],children:"Настройки"})})]}),v.jsxs("div",{className:Ve["news-panel"],onClick:()=>{E(my()),E(aj())},children:[v.jsx(fU,{className:Ve["news-icon"]}),v.jsxs("div",{className:Ve["news-text-wrapper"],children:[v.jsx("p",{className:Ve["news-text"],children:"Новости"}),e>0&&v.jsx("span",{className:Ve["news-count"],children:e})]})]})]})]}),v.jsx(aU,{isVisible:o,ref:j}),v.jsx(UU,{isVisible:g,ref:x}),v.jsx(dU,{isVisible:h,ref:D}),v.jsx(cU,{isVisible:c,ref:U}),v.jsx(bU,{isVisible:m,ref:q}),v.jsx(CU,{isVisible:p,ref:$}),v.jsx("div",{className:`${Ve.overlay} ${a||o||c||p||m?Ve.active:""}`})]})},KU="_visible_ffgll_37",WU="_overlay_ffgll_45",Jr={"side-panel__wrap":"_side-panel__wrap_ffgll_1",visible:KU,overlay:WU,"side-panel__close-button":"_side-panel__close-button_ffgll_81","side-panel__container":"_side-panel__container_ffgll_101","side-panel__custom-button-enter":"_side-panel__custom-button-enter_ffgll_143","side-panel__custom-button-registration":"_side-panel__custom-button-registration_ffgll_161"},QU=()=>{const n=Ie(t=>t.sidePanel.isOpen),e=Sn();return v.jsxs("div",{className:Jr["side-panel"],children:[v.jsx("div",{className:`${Jr.overlay} ${n?Jr.visible:""}`,onClick:()=>e(os())}),v.jsxs("div",{className:`${Jr["side-panel__wrap"]} ${n?Jr.visible:""}`,onClick:t=>t.stopPropagation(),children:[v.jsx(Yt,{className:Jr["side-panel__close-button"],onClick:()=>e(os()),children:"✖ закрыть"}),v.jsxs("div",{className:Jr["side-panel__container"],children:[v.jsx("h3",{children:"Хороший выбор! Сохраняем?"}),v.jsx("p",{children:"Войди или зарегистрируйся, чтобы сохранять товары в Избранное"}),v.jsx(Yt,{onClick:()=>{e(rh()),e(os())},className:Jr["side-panel__custom-button-enter"],children:"Войти"}),v.jsx(Yt,{onClick:()=>{e(rh()),e(os())},className:Jr["side-panel__custom-button-registration"],children:"Зарегестрироваться"})]})]})]})},YU="_banner_1bska_1",XU="_bannerContent_1bska_23",ZU="_bannerImg_1bska_37",JU="_bannerText_1bska_47",e8="_active_1bska_55",t8="_hidden_1bska_65",n8="_enter_1bska_73",i8="_exit_1bska_85",qi={banner:YU,bannerContent:XU,bannerImg:ZU,bannerText:JU,active:e8,hidden:t8,enter:n8,exit:i8},wo=[{text:"Быстрая доставка по Украине",img:"delivery-truck.png"},{text:"Акции и скидки каждую неделю",img:"discount.png"},{text:"Более 10 000 довольных клиентов",img:"rating.png"},{text:"Поддержка 24/7",img:"support.png"},{text:"Оплата при получении",img:"cart.png"}],r8=()=>{const[n,e]=V.useState(0),t=(n+1)%wo.length,[i,a]=V.useState(!1);return V.useEffect(()=>{const o=setInterval(()=>{a(!0),setTimeout(()=>{a(!1),e(t)},300)},2e3);return()=>clearInterval(o)},[t]),v.jsxs("div",{className:qi.banner,children:[v.jsxs("div",{className:`${qi.bannerContent} ${i?qi.exit:qi.active}`,children:[v.jsx("img",{className:qi.bannerImg,src:`/${wo[n].img}`,alt:wo[n].text}),v.jsx("span",{className:qi.bannerText,children:wo[n].text})]}),v.jsxs("div",{className:`${qi.bannerContent} ${i?qi.enter:qi.hidden}`,children:[v.jsx("img",{className:qi.bannerImg,src:`/${wo[t].img}`,alt:wo[t].text}),v.jsx("span",{className:qi.bannerText,children:wo[t].text})]})]})},s8="_wrapper_qr0pf_1",a8="_price_qr0pf_35",o8="_button_qr0pf_55",l8="_hidden_qr0pf_101",c8="_visible_qr0pf_113",ku={wrapper:s8,price:a8,button:o8,hidden:l8,visible:c8},u8=()=>{const n=Ie(c=>c.products.selectedProduct),e=Ie(c=>c.favorite.items),t=Ie(c=>!!c.auth.user),i=Ie(c=>c.menu.isFavoritesVisible),a=Sn();if(!n||!n.price)return null;const o=()=>{if(!t){a({type:"sidePanel/togglePanel"});return}e.some(h=>h.productId===n.id)||a(fs(n.id)),a(No())};return v.jsxs("div",{className:`${ku.wrapper} ${i?ku.hidden:ku.visible}`,children:[v.jsxs("span",{className:ku.price,children:[n.price.toLocaleString("uk-UA")," ₴"]}),v.jsx(Yt,{className:ku.button,onClick:o,children:"Купить"})]})},h8="_container_lo2g2_1",d8="_withSticky_lo2g2_59",f8="_stickyHeader_lo2g2_67",p8="_overlay_lo2g2_87",m8="_overlayVisible_lo2g2_113",_8="_stickyBottomMobile_lo2g2_125",g8="_stickySlideEnterActive_lo2g2_167",y8="_stickySlideExitActive_lo2g2_187",v8="_stickyBottomContent_lo2g2_197",Oi={container:h8,"header-wrapper":"_header-wrapper_lo2g2_15","footer-wrapper":"_footer-wrapper_lo2g2_17","main-content":"_main-content_lo2g2_43",withSticky:d8,stickyHeader:f8,overlay:p8,overlayVisible:m8,stickyBottomMobile:_8,stickySlideEnterActive:g8,stickySlideExitActive:y8,stickyBottomContent:v8},E8=()=>{const n=Ie(D=>D.menu.isFavoritesVisible),e=Ie(D=>D.menu.isCategoryListVisible),t=Ie(D=>D.sidePanel.isOverlayVisible),[i,a]=V.useState(!1),[o,c]=V.useState(!0),[h,p]=V.useState(!0),m=V.useRef(null),g=V.useRef(0),E=Ts(),[C,x]=V.useState(!1),[O,j]=V.useState(E.pathname.includes("/product/")&&h?"buy":"nav");return V.useEffect(()=>{const D=E.pathname.includes("/product/")&&h?"buy":"nav";D!==O&&(x(!0),setTimeout(()=>{j(D),x(!1)},300))},[E.pathname,h]),V.useEffect(()=>{const D=()=>{var Y;p(window.scrollY<=1e3);const U=window.scrollY,$=(Y=m.current)==null?void 0:Y.getBoundingClientRect().bottom;U>g.current&&$<=0&&a(!0),U<g.current&&$>0&&a(!1);const q=window.scrollY+window.innerHeight,z=document.documentElement.scrollHeight;q>=z?c(!1):c(!0),g.current=U};return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[]),v.jsxs("div",{className:Oi.container,children:[v.jsx("div",{ref:m,children:v.jsx(r8,{})}),v.jsx("div",{className:`${Oi["header-wrapper"]} ${i?Oi.stickyHeader:""}`,children:v.jsx(Qj,{})}),v.jsx(GU,{}),v.jsx(QU,{}),v.jsx("main",{className:`${Oi["main-content"]} ${i?Oi.withSticky:""}`,children:v.jsx(uk,{})}),o&&v.jsx("div",{className:`${Oi.stickyBottomMobile} ${C?Oi.stickySlideExitActive:Oi.stickySlideEnterActive}`,children:v.jsx("div",{className:Oi.stickyBottomContent,children:O==="buy"?v.jsx(u8,{}):v.jsx(L2,{})})}),v.jsx("div",{className:Oi["footer-wrapper"],children:v.jsx(Xj,{})}),v.jsx("div",{className:`${Oi.overlay} ${n||e||t?Oi.overlayVisible:""}`})]})},w8=async n=>{const e=new FormData;e.append("image",n);try{const i=await(await fetch(`https://api.imgbb.com/1/upload?key=${W7}`,{method:"POST",body:e})).json();if(i.success)return i.data.url;throw new Error("Ошибка загрузки изображения")}catch(t){throw console.error(t),t}};var Bf={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var T8=Bf.exports,HS;function b8(){return HS||(HS=1,function(n,e){((t,i)=>{n.exports=i()})(T8,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},a,o=!i.document&&!!i.postMessage,c=i.IS_PAPA_WORKER||!1,h={},p=0,m={};function g(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(w){var A=Y(w);A.chunkSize=parseInt(A.chunkSize),w.step||w.chunk||(A.chunkSize=null),this._handle=new j(A),(this._handle.streamer=this)._config=A}).call(this,T),this.parseChunk=function(w,A){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let M=this._config.newline;M||(P=this._config.quoteChar||'"',M=this._handle.guessLineEndings(w,P)),w=[...w.split(M).slice(k)].join(M)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(P=this._config.beforeFirstChunk(w))!==void 0&&(w=P),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+w,P=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(w=P.meta.cursor,k=(this._finished||(this._partialLine=k.substring(w-this._baseIndex),this._baseIndex=w),P&&P.data&&(this._rowCount+=P.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)i.postMessage({results:P,workerId:m.WORKER_ID,finished:k});else if(R(this._config.chunk)&&!A){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=P=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),this._completed||!k||!R(this._config.complete)||P&&P.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||P&&P.meta.paused||this._nextChunk(),P}this._halted=!0},this._sendError=function(w){R(this._config.error)?this._config.error(w):c&&this._config.error&&i.postMessage({workerId:m.WORKER_ID,error:w,finished:!1})}}function E(T){var w;(T=T||{}).chunkSize||(T.chunkSize=m.RemoteChunkSize),g.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(w=new XMLHttpRequest,this._config.withCredentials&&(w.withCredentials=this._config.withCredentials),o||(w.onload=W(this._chunkLoaded,this),w.onerror=W(this._chunkError,this)),w.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var A,k=this._config.downloadRequestHeaders;for(A in k)w.setRequestHeader(A,k[A])}var P;this._config.chunkSize&&(P=this._start+this._config.chunkSize-1,w.setRequestHeader("Range","bytes="+this._start+"-"+P));try{w.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}o&&w.status===0&&this._chunkError()}},this._chunkLoaded=function(){w.readyState===4&&(w.status<200||400<=w.status?this._chunkError():(this._start+=this._config.chunkSize||w.responseText.length,this._finished=!this._config.chunkSize||this._start>=(A=>(A=A.getResponseHeader("Content-Range"))!==null?parseInt(A.substring(A.lastIndexOf("/")+1)):-1)(w),this.parseChunk(w.responseText)))},this._chunkError=function(A){A=w.statusText||A,this._sendError(new Error(A))}}function C(T){(T=T||{}).chunkSize||(T.chunkSize=m.LocalChunkSize),g.call(this,T);var w,A,k=typeof FileReader<"u";this.stream=function(P){this._input=P,A=P.slice||P.webkitSlice||P.mozSlice,k?((w=new FileReader).onload=W(this._chunkLoaded,this),w.onerror=W(this._chunkError,this)):w=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var P=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),P=A.call(P,this._start,M)),w.readAsText(P,this._config.encoding));k||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(P){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(P.target.result)},this._chunkError=function(){this._sendError(w.error)}}function x(T){var w;g.call(this,T=T||{}),this.stream=function(A){return w=A,this._nextChunk()},this._nextChunk=function(){var A,k;if(!this._finished)return A=this._config.chunkSize,w=A?(k=w.substring(0,A),w.substring(A)):(k=w,""),this._finished=!w,this.parseChunk(k)}}function O(T){g.call(this,T=T||{});var w=[],A=!0,k=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(P){this._input=P,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&w.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),w.length?this.parseChunk(w.shift()):A=!0},this._streamData=W(function(P){try{w.push(typeof P=="string"?P:P.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(w.shift()))}catch(M){this._streamError(M)}},this),this._streamError=W(function(P){this._streamCleanUp(),this._sendError(P)},this),this._streamEnd=W(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(T){var w,A,k,P,M=Math.pow(2,53),Ae=-M,Le=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,se=this,ce=0,ue=0,Pe=!1,be=!1,ve=[],le={data:[],errors:[],meta:{}};function ge(Re){return T.skipEmptyLines==="greedy"?Re.join("").trim()==="":Re.length===1&&Re[0].length===0}function je(){if(le&&k&&(Rt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),k=!1),T.skipEmptyLines&&(le.data=le.data.filter(function(pe){return!ge(pe)})),It()){let pe=function(rt,st){R(T.transformHeader)&&(rt=T.transformHeader(rt,st)),ve.push(rt)};if(le)if(Array.isArray(le.data[0])){for(var Re=0;It()&&Re<le.data.length;Re++)le.data[Re].forEach(pe);le.data.splice(0,1)}else le.data.forEach(pe)}function Ee(pe,rt){for(var st=T.header?{}:[],Ke=0;Ke<pe.length;Ke++){var Ye=Ke,ke=pe[Ke],ke=((Cn,Ne)=>(dt=>(T.dynamicTypingFunction&&T.dynamicTyping[dt]===void 0&&(T.dynamicTyping[dt]=T.dynamicTypingFunction(dt)),(T.dynamicTyping[dt]||T.dynamicTyping)===!0))(Cn)?Ne==="true"||Ne==="TRUE"||Ne!=="false"&&Ne!=="FALSE"&&((dt=>{if(Le.test(dt)&&(dt=parseFloat(dt),Ae<dt&&dt<M))return 1})(Ne)?parseFloat(Ne):re.test(Ne)?new Date(Ne):Ne===""?null:Ne):Ne)(Ye=T.header?Ke>=ve.length?"__parsed_extra":ve[Ke]:Ye,ke=T.transform?T.transform(ke,Ye):ke);Ye==="__parsed_extra"?(st[Ye]=st[Ye]||[],st[Ye].push(ke)):st[Ye]=ke}return T.header&&(Ke>ve.length?Rt("FieldMismatch","TooManyFields","Too many fields: expected "+ve.length+" fields but parsed "+Ke,ue+rt):Ke<ve.length&&Rt("FieldMismatch","TooFewFields","Too few fields: expected "+ve.length+" fields but parsed "+Ke,ue+rt)),st}var we;le&&(T.header||T.dynamicTyping||T.transform)&&(we=1,!le.data.length||Array.isArray(le.data[0])?(le.data=le.data.map(Ee),we=le.data.length):le.data=Ee(le.data,0),T.header&&le.meta&&(le.meta.fields=ve),ue+=we)}function It(){return T.header&&ve.length===0}function Rt(Re,Ee,we,pe){Re={type:Re,code:Ee,message:we},pe!==void 0&&(Re.row=pe),le.errors.push(Re)}R(T.step)&&(P=T.step,T.step=function(Re){le=Re,It()?je():(je(),le.data.length!==0&&(ce+=Re.data.length,T.preview&&ce>T.preview?A.abort():(le.data=le.data[0],P(le,se))))}),this.parse=function(Re,Ee,we){var pe=T.quoteChar||'"',pe=(T.newline||(T.newline=this.guessLineEndings(Re,pe)),k=!1,T.delimiter?R(T.delimiter)&&(T.delimiter=T.delimiter(Re),le.meta.delimiter=T.delimiter):((pe=((rt,st,Ke,Ye,ke)=>{var Cn,Ne,dt,On;ke=ke||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var si=0;si<ke.length;si++){for(var Qn,Li=ke[si],ht=0,Bn=0,Be=0,it=(dt=void 0,new U({comments:Ye,delimiter:Li,newline:st,preview:10}).parse(rt)),Zt=0;Zt<it.data.length;Zt++)Ke&&ge(it.data[Zt])?Be++:(Qn=it.data[Zt].length,Bn+=Qn,dt===void 0?dt=Qn:0<Qn&&(ht+=Math.abs(Qn-dt),dt=Qn));0<it.data.length&&(Bn/=it.data.length-Be),(Ne===void 0||ht<=Ne)&&(On===void 0||On<Bn)&&1.99<Bn&&(Ne=ht,Cn=Li,On=Bn)}return{successful:!!(T.delimiter=Cn),bestDelimiter:Cn}})(Re,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=pe.bestDelimiter:(k=!0,T.delimiter=m.DefaultDelimiter),le.meta.delimiter=T.delimiter),Y(T));return T.preview&&T.header&&pe.preview++,w=Re,A=new U(pe),le=A.parse(w,Ee,we),je(),Pe?{meta:{paused:!0}}:le||{meta:{paused:!1}}},this.paused=function(){return Pe},this.pause=function(){Pe=!0,A.abort(),w=R(T.chunk)?"":w.substring(A.getCharIndex())},this.resume=function(){se.streamer._halted?(Pe=!1,se.streamer.parseChunk(w,!0)):setTimeout(se.resume,3)},this.aborted=function(){return be},this.abort=function(){be=!0,A.abort(),le.meta.aborted=!0,R(T.complete)&&T.complete(le),w=""},this.guessLineEndings=function(rt,pe){rt=rt.substring(0,1048576);var pe=new RegExp(D(pe)+"([^]*?)"+D(pe),"gm"),we=(rt=rt.replace(pe,"")).split("\r"),pe=rt.split(`
`),rt=1<pe.length&&pe[0].length<we[0].length;if(we.length===1||rt)return`
`;for(var st=0,Ke=0;Ke<we.length;Ke++)we[Ke][0]===`
`&&st++;return st>=we.length/2?`\r
`:"\r"}}function D(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function U(T){var w=(T=T||{}).delimiter,A=T.newline,k=T.comments,P=T.step,M=T.preview,Ae=T.fastMode,Le=null,re=!1,se=T.quoteChar==null?'"':T.quoteChar,ce=se;if(T.escapeChar!==void 0&&(ce=T.escapeChar),(typeof w!="string"||-1<m.BAD_DELIMITERS.indexOf(w))&&(w=","),k===w)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<m.BAD_DELIMITERS.indexOf(k))&&(k=!1),A!==`
`&&A!=="\r"&&A!==`\r
`&&(A=`
`);var ue=0,Pe=!1;this.parse=function(be,ve,le){if(typeof be!="string")throw new Error("Input must be a string");var ge=be.length,je=w.length,It=A.length,Rt=k.length,Re=R(P),Ee=[],we=[],pe=[],rt=ue=0;if(!be)return ht();if(Ae||Ae!==!1&&be.indexOf(se)===-1){for(var st=be.split(A),Ke=0;Ke<st.length;Ke++){if(pe=st[Ke],ue+=pe.length,Ke!==st.length-1)ue+=A.length;else if(le)return ht();if(!k||pe.substring(0,Rt)!==k){if(Re){if(Ee=[],On(pe.split(w)),Bn(),Pe)return ht()}else On(pe.split(w));if(M&&M<=Ke)return Ee=Ee.slice(0,M),ht(!0)}}return ht()}for(var Ye=be.indexOf(w,ue),ke=be.indexOf(A,ue),Cn=new RegExp(D(ce)+D(se),"g"),Ne=be.indexOf(se,ue);;)if(be[ue]===se)for(Ne=ue,ue++;;){if((Ne=be.indexOf(se,Ne+1))===-1)return le||we.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ee.length,index:ue}),Qn();if(Ne===ge-1)return Qn(be.substring(ue,Ne).replace(Cn,se));if(se===ce&&be[Ne+1]===ce)Ne++;else if(se===ce||Ne===0||be[Ne-1]!==ce){Ye!==-1&&Ye<Ne+1&&(Ye=be.indexOf(w,Ne+1));var dt=si((ke=ke!==-1&&ke<Ne+1?be.indexOf(A,Ne+1):ke)===-1?Ye:Math.min(Ye,ke));if(be.substr(Ne+1+dt,je)===w){pe.push(be.substring(ue,Ne).replace(Cn,se)),be[ue=Ne+1+dt+je]!==se&&(Ne=be.indexOf(se,ue)),Ye=be.indexOf(w,ue),ke=be.indexOf(A,ue);break}if(dt=si(ke),be.substring(Ne+1+dt,Ne+1+dt+It)===A){if(pe.push(be.substring(ue,Ne).replace(Cn,se)),Li(Ne+1+dt+It),Ye=be.indexOf(w,ue),Ne=be.indexOf(se,ue),Re&&(Bn(),Pe))return ht();if(M&&Ee.length>=M)return ht(!0);break}we.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ee.length,index:ue}),Ne++}}else if(k&&pe.length===0&&be.substring(ue,ue+Rt)===k){if(ke===-1)return ht();ue=ke+It,ke=be.indexOf(A,ue),Ye=be.indexOf(w,ue)}else if(Ye!==-1&&(Ye<ke||ke===-1))pe.push(be.substring(ue,Ye)),ue=Ye+je,Ye=be.indexOf(w,ue);else{if(ke===-1)break;if(pe.push(be.substring(ue,ke)),Li(ke+It),Re&&(Bn(),Pe))return ht();if(M&&Ee.length>=M)return ht(!0)}return Qn();function On(Be){Ee.push(Be),rt=ue}function si(Be){var it=0;return it=Be!==-1&&(Be=be.substring(Ne+1,Be))&&Be.trim()===""?Be.length:it}function Qn(Be){return le||(Be===void 0&&(Be=be.substring(ue)),pe.push(Be),ue=ge,On(pe),Re&&Bn()),ht()}function Li(Be){ue=Be,On(pe),pe=[],ke=be.indexOf(A,ue)}function ht(Be){if(T.header&&!ve&&Ee.length&&!re){var it=Ee[0],Zt={},Is=new Set(it);let xs=!1;for(let tr=0;tr<it.length;tr++){let hn=it[tr];if(Zt[hn=R(T.transformHeader)?T.transformHeader(hn,tr):hn]){let Yn,Jt=Zt[hn];for(;Yn=hn+"_"+Jt,Jt++,Is.has(Yn););Is.add(Yn),it[tr]=Yn,Zt[hn]++,xs=!0,(Le=Le===null?{}:Le)[Yn]=hn}else Zt[hn]=1,it[tr]=hn;Is.add(hn)}xs&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:Ee,errors:we,meta:{delimiter:w,linebreak:A,aborted:Pe,truncated:!!Be,cursor:rt+(ve||0),renamedHeaders:Le}}}function Bn(){P(ht()),Ee=[],we=[]}},this.abort=function(){Pe=!0},this.getCharIndex=function(){return ue}}function $(T){var w=T.data,A=h[w.workerId],k=!1;if(w.error)A.userError(w.error,w.file);else if(w.results&&w.results.data){var P={abort:function(){k=!0,q(w.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:z,resume:z};if(R(A.userStep)){for(var M=0;M<w.results.data.length&&(A.userStep({data:w.results.data[M],errors:w.results.errors,meta:w.results.meta},P),!k);M++);delete w.results}else R(A.userChunk)&&(A.userChunk(w.results,P,w.file),delete w.results)}w.finished&&!k&&q(w.workerId,w.results)}function q(T,w){var A=h[T];R(A.userComplete)&&A.userComplete(w),A.terminate(),delete h[T]}function z(){throw new Error("Not implemented.")}function Y(T){if(typeof T!="object"||T===null)return T;var w,A=Array.isArray(T)?[]:{};for(w in T)A[w]=Y(T[w]);return A}function W(T,w){return function(){T.apply(w,arguments)}}function R(T){return typeof T=="function"}return m.parse=function(T,w){var A=(w=w||{}).dynamicTyping||!1;if(R(A)&&(w.dynamicTypingFunction=A,A={}),w.dynamicTyping=A,w.transform=!!R(w.transform)&&w.transform,!w.worker||!m.WORKERS_SUPPORTED)return A=null,m.NODE_STREAM_INPUT,typeof T=="string"?(T=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(T),A=new(w.download?E:x)(w)):T.readable===!0&&R(T.read)&&R(T.on)?A=new O(w):(i.File&&T instanceof File||T instanceof Object)&&(A=new C(w)),A.stream(T);(A=(()=>{var k;return!!m.WORKERS_SUPPORTED&&(k=(()=>{var P=i.URL||i.webkitURL||null,M=t.toString();return m.BLOB_URL||(m.BLOB_URL=P.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(k=new i.Worker(k)).onmessage=$,k.id=p++,h[k.id]=k)})()).userStep=w.step,A.userChunk=w.chunk,A.userComplete=w.complete,A.userError=w.error,w.step=R(w.step),w.chunk=R(w.chunk),w.complete=R(w.complete),w.error=R(w.error),delete w.worker,A.postMessage({input:T,config:w,workerId:A.id})},m.unparse=function(T,w){var A=!1,k=!0,P=",",M=`\r
`,Ae='"',Le=Ae+Ae,re=!1,se=null,ce=!1,ue=((()=>{if(typeof w=="object"){if(typeof w.delimiter!="string"||m.BAD_DELIMITERS.filter(function(ve){return w.delimiter.indexOf(ve)!==-1}).length||(P=w.delimiter),typeof w.quotes!="boolean"&&typeof w.quotes!="function"&&!Array.isArray(w.quotes)||(A=w.quotes),typeof w.skipEmptyLines!="boolean"&&typeof w.skipEmptyLines!="string"||(re=w.skipEmptyLines),typeof w.newline=="string"&&(M=w.newline),typeof w.quoteChar=="string"&&(Ae=w.quoteChar),typeof w.header=="boolean"&&(k=w.header),Array.isArray(w.columns)){if(w.columns.length===0)throw new Error("Option columns is empty");se=w.columns}w.escapeChar!==void 0&&(Le=w.escapeChar+Ae),w.escapeFormulae instanceof RegExp?ce=w.escapeFormulae:typeof w.escapeFormulae=="boolean"&&w.escapeFormulae&&(ce=/^[=+\-@\t\r].*$/)}})(),new RegExp(D(Ae),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return Pe(null,T,re);if(typeof T[0]=="object")return Pe(se||Object.keys(T[0]),T,re)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||se),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),Pe(T.fields||[],T.data||[],re);throw new Error("Unable to serialize unrecognized input");function Pe(ve,le,ge){var je="",It=(typeof ve=="string"&&(ve=JSON.parse(ve)),typeof le=="string"&&(le=JSON.parse(le)),Array.isArray(ve)&&0<ve.length),Rt=!Array.isArray(le[0]);if(It&&k){for(var Re=0;Re<ve.length;Re++)0<Re&&(je+=P),je+=be(ve[Re],Re);0<le.length&&(je+=M)}for(var Ee=0;Ee<le.length;Ee++){var we=(It?ve:le[Ee]).length,pe=!1,rt=It?Object.keys(le[Ee]).length===0:le[Ee].length===0;if(ge&&!It&&(pe=ge==="greedy"?le[Ee].join("").trim()==="":le[Ee].length===1&&le[Ee][0].length===0),ge==="greedy"&&It){for(var st=[],Ke=0;Ke<we;Ke++){var Ye=Rt?ve[Ke]:Ke;st.push(le[Ee][Ye])}pe=st.join("").trim()===""}if(!pe){for(var ke=0;ke<we;ke++){0<ke&&!rt&&(je+=P);var Cn=It&&Rt?ve[ke]:ke;je+=be(le[Ee][Cn],ke)}Ee<le.length-1&&(!ge||0<we&&!rt)&&(je+=M)}}return je}function be(ve,le){var ge,je;return ve==null?"":ve.constructor===Date?JSON.stringify(ve).slice(1,25):(je=!1,ce&&typeof ve=="string"&&ce.test(ve)&&(ve="'"+ve,je=!0),ge=ve.toString().replace(ue,Le),(je=je||A===!0||typeof A=="function"&&A(ve,le)||Array.isArray(A)&&A[le]||((It,Rt)=>{for(var Re=0;Re<Rt.length;Re++)if(-1<It.indexOf(Rt[Re]))return!0;return!1})(ge,m.BAD_DELIMITERS)||-1<ge.indexOf(P)||ge.charAt(0)===" "||ge.charAt(ge.length-1)===" ")?Ae+ge+Ae:ge)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!o&&!!i.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=U,m.ParserHandle=j,m.NetworkStreamer=E,m.FileStreamer=C,m.StringStreamer=x,m.ReadableStreamStreamer=O,i.jQuery&&((a=i.jQuery).fn.parse=function(T){var w=T.config||{},A=[];return this.each(function(M){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Ae=0;Ae<this.files.length;Ae++)A.push({file:this.files[Ae],inputElem:this,instanceConfig:a.extend({},w)})}),k(),this;function k(){if(A.length===0)R(T.complete)&&T.complete();else{var M,Ae,Le,re,se=A[0];if(R(T.before)){var ce=T.before(se.file,se.inputElem);if(typeof ce=="object"){if(ce.action==="abort")return M="AbortError",Ae=se.file,Le=se.inputElem,re=ce.reason,void(R(T.error)&&T.error({name:M},Ae,Le,re));if(ce.action==="skip")return void P();typeof ce.config=="object"&&(se.instanceConfig=a.extend(se.instanceConfig,ce.config))}else if(ce==="skip")return void P()}var ue=se.instanceConfig.complete;se.instanceConfig.complete=function(Pe){R(ue)&&ue(Pe,se.file,se.inputElem),P()},m.parse(se.file,se.instanceConfig)}}function P(){A.splice(0,1),k()}}),c&&(i.onmessage=function(T){T=T.data,m.WORKER_ID===void 0&&T&&(m.WORKER_ID=T.workerId),typeof T.input=="string"?i.postMessage({workerId:m.WORKER_ID,results:m.parse(T.input,T.config),finished:!0}):(i.File&&T.input instanceof File||T.input instanceof Object)&&(T=m.parse(T.input,T.config))&&i.postMessage({workerId:m.WORKER_ID,results:T,finished:!0})}),(E.prototype=Object.create(g.prototype)).constructor=E,(C.prototype=Object.create(g.prototype)).constructor=C,(x.prototype=Object.create(x.prototype)).constructor=x,(O.prototype=Object.create(g.prototype)).constructor=O,m})}(Bf)),Bf.exports}var S8=b8();const C8=av(S8),A8="_container_8e2yt_1",R8="_button_8e2yt_19",I8="_cancelButton_8e2yt_43",ry={container:A8,button:R8,cancelButton:I8},x8=()=>{const[n,e]=V.useState(null),[t,i]=V.useState(""),a=h=>{const p=h.target.files[0];e(p),i("")},o=()=>{n&&(i("Загрузка..."),C8.parse(n,{header:!0,skipEmptyLines:!0,complete:async h=>{var m;const p=h.data;for(const g of p)try{await h0(Qi(bn,"products",g.Артикул),{name:g["Название товара"],sku:g.Артикул,price:Number(g["Рекомендовання розничная цена"]),purchase:Number(g["Дроп цена для партнера"]),stock:g.Наличие==="instock",images:g.Изображения?g.Изображения.split(","):[],mainImage:((m=g.Изображения)==null?void 0:m.split(",")[0])||"",description:g["Описание товара"],category:g["Категории товара"],subcategory:g.Подкатегории})}catch(E){console.error("Ошибка загрузки:",g,E)}i("✅ Загрузка завершена"),e(null)}}))},c=()=>{e(null),i("❌ Загрузка отменена")};return v.jsxs("div",{className:ry.container,children:[v.jsx("input",{type:"file",accept:".csv",onChange:a}),n&&v.jsxs("div",{style:{margin:"16px"},children:[v.jsxs("p",{children:["Выбран файл: ",v.jsx("strong",{children:n.name})]}),v.jsx("button",{className:ry.button,onClick:o,children:"✅ Подтвердить"}),v.jsx("button",{className:ry.cancelButton,onClick:c,children:"❌ Отменить"})]}),v.jsx("p",{style:{marginTop:"12px"},children:t})]})},Du={"editor-container":"_editor-container_xe6a4_1","editor-title":"_editor-title_xe6a4_25","editor-input":"_editor-input_xe6a4_33","editor-textarea":"_editor-textarea_xe6a4_43","editor-button":"_editor-button_xe6a4_73"},N8=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),a=async()=>{if(!n||!t)return alert("Заполни все поля");try{await d0(Fo(bn,"news"),{title:n,content:t,createdAt:Qt.now()}),e(""),i(""),alert("Новость опубликована")}catch(o){console.error("Ошибка публикации:",o),alert("Ошибка при публикации")}};return v.jsxs("div",{className:Du["editor-container"],children:[v.jsx("u",{className:Du["editor-title"],children:"Создать новость"}),v.jsx("input",{type:"text",placeholder:"Заголовок",value:n,onChange:o=>e(o.target.value),className:Du["editor-input"]}),v.jsx("textarea",{placeholder:"Текст новости",value:t,onChange:o=>i(o.target.value),className:Du["editor-textarea"]}),v.jsx("button",{onClick:a,className:Du["editor-button"],children:"Опубликовать"})]})},k8="_form_9xqf9_31",D8="_form__orders_9xqf9_57",O8="_form__field_9xqf9_105",M8="_form__label_9xqf9_117",P8="_form__input_9xqf9_129",L8="_form__fileInput_9xqf9_131",V8="_form__error_9xqf9_243",j8="_form__success_9xqf9_253",U8="_form__image_9xqf9_305",ze={"product-form":"_product-form_9xqf9_1","product-form__title":"_product-form__title_9xqf9_15",form:k8,form__orders:D8,"form__go-to-orders":"_form__go-to-orders_9xqf9_81",form__field:O8,form__label:M8,form__input:P8,form__fileInput:L8,"form__add-product":"_form__add-product_9xqf9_151","form__input--error":"_form__input--error_9xqf9_203","form__fileInput--error":"_form__fileInput--error_9xqf9_235",form__error:V8,form__success:j8,"form__image-preview-wrap":"_form__image-preview-wrap_9xqf9_305","form__image-item":"_form__image-item_9xqf9_319",form__image:U8,"form__up-load":"_form__up-load_9xqf9_351","form__up-load--component":"_form__up-load--component_9xqf9_373"},z8=()=>{const n=Sn(),e=bs(),t=V.useRef(null),[i,a]=V.useState({category:"",name:"",description:"",code:"",price:"",images:[]}),[o,c]=V.useState(!1),[h,p]=V.useState(null),[m,g]=V.useState({category:!1,name:!1,description:!1,price:!1,images:!1,code:!1}),E=O=>{const{name:j,value:D}=O.target;a(U=>({...U,[j]:D.replace(/^\s+/,"")}))},C=async O=>{const j=Array.from(O.target.files);if(j.length<2||j.length>15){p("Загрузите от 2 до 15 изображений.");return}try{const D=await Promise.all(j.map(w8));a(U=>({...U,images:D})),p(null)}catch(D){console.error(D),p("Ошибка при загрузке изображений")}},x=async O=>{O.preventDefault();const j={category:!i.category.trim(),name:!i.name.trim(),description:!i.description.trim(),price:isNaN(i.price)||i.price<=0,images:i.images.length<2,code:!i.code.trim()};if(g(j),Object.values(j).includes(!0)){p("Пожалуйста, заполните все поля корректно.");return}try{await n(g2({...i,price:Number(i.price)})),c(!0),alert("Товар добавлен!"),a({category:"",name:"",description:"",price:"",images:[],code:""}),t.current&&(t.current.value="")}catch(D){console.error("Ошибка при добавлении товара:",D),p("Ошибка при добавлении товара.")}};return v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:ze["product-form__title"],children:"Admin room"}),v.jsxs("div",{className:ze["product-form"],children:[v.jsxs("form",{className:ze.form,onSubmit:x,children:[v.jsx("h4",{children:v.jsx("u",{children:"Загрузка индивидуального товара"})}),v.jsxs("div",{className:ze.form__field,children:[v.jsx("label",{className:ze.form__label,children:"Категория:"}),v.jsxs("select",{className:`${ze.form__input} ${m.category?ze["form__input--error"]:""}`,name:"category",value:i.category,onChange:E,children:[v.jsx("option",{value:"",children:"Выберите категорию"}),v.jsx("option",{value:"Машины",children:"Машины"}),v.jsx("option",{value:"Аксессуары",children:"Аксессуары"}),v.jsx("option",{value:"Смартфоны",children:"Смартфоны"}),v.jsx("option",{value:"Ноутбуки",children:"Ноутбуки"}),v.jsx("option",{value:"Носки",children:"Носки"})]})]}),v.jsxs("div",{className:ze.form__field,children:[v.jsx("label",{className:ze.form__label,children:"Название товара:"}),v.jsx("input",{className:`${ze.form__input} ${m.name?ze["form__input--error"]:""}`,type:"text",name:"name",placeholder:"Название товара",value:i.name,onChange:E})]}),v.jsxs("div",{className:ze.form__field,children:[v.jsx("label",{className:ze.form__label,children:"Описание:"}),v.jsx("textarea",{className:`${ze.form__input} ${m.description?ze["form__input--error"]:""}`,type:"text",name:"description",placeholder:"Описание товара (не более 900 символов)",value:i.description,onChange:E,maxLength:900})]}),v.jsxs("div",{className:ze.form__field,children:[v.jsx("label",{className:ze.form__label,children:"Код товара / Артикул:"}),v.jsx("input",{className:`${ze.form__input} ${m.code?ze["form__input--error"]:""}`,type:"text",name:"code",placeholder:"Например: Арт. 1527-091",value:i.code,onChange:E})]}),v.jsxs("div",{className:ze.form__field,children:[v.jsx("label",{className:ze.form__label,children:"Цена:"}),v.jsx("input",{className:`${ze.form__input} ${m.price?ze["form__input--error"]:""}`,type:"number",name:"price",placeholder:"Цена",value:i.price,onChange:E})]}),v.jsxs("div",{className:ze.form__field,children:[v.jsx("label",{className:ze.form__label,children:"Загрузите от 2 до 15 изображений:"}),v.jsx("input",{ref:t,className:`${ze.form__fileInput} ${m.images?ze["form__fileInput--error"]:""}`,type:"file",accept:"image/*",multiple:!0,onChange:C})]}),i.images.length>0&&v.jsx("div",{className:ze["form__image-preview-wrap"],children:i.images.map((O,j)=>v.jsx("div",{className:ze["form__image-item"],children:v.jsx("img",{src:O,className:ze.form__image,alt:`preview-${j}`})},j))}),h&&v.jsx("p",{className:ze.form__error,children:h}),o&&v.jsx("p",{className:ze.form__success,children:"Товар успешно добавлен!"}),v.jsx(Yt,{className:ze["form__add-product"],onClick:x,children:"Добавить товар"})]}),v.jsxs("div",{className:ze["form__up-load-new"],children:[v.jsxs("div",{className:ze.form__orders,children:[v.jsx("h4",{children:v.jsx("u",{children:"Обработка заказов"})}),v.jsx(Yt,{className:ze["form__go-to-orders"],onClick:()=>e("/admin-orders"),children:"Перейти к обработке заказов"})]}),v.jsxs("div",{className:ze["form__up-load"],children:[v.jsx("h4",{children:v.jsx("u",{children:"Загрузка файлов типов .CSV"})}),v.jsx("div",{className:ze["form__up-load--component"],children:v.jsx(x8,{})})]}),v.jsx("div",{className:ze.form__new,children:v.jsx(N8,{})})]})]})]})},B8="_sliderContainer_7d6gj_1",F8="_sliderTitle_7d6gj_11",q8="_sliderContainerInner_7d6gj_25",H8="_sliderContent_7d6gj_35",$8="_productCircle_7d6gj_53",G8="_productImage_7d6gj_91",Pl={sliderContainer:B8,sliderTitle:F8,sliderContainerInner:q8,sliderContent:H8,productCircle:$8,productImage:G8},K8=()=>{const n=bs(),e=Ie(Y=>Y.products.items),t=Ie(Y=>Y.auth.user),[i,a]=V.useState([]),o=V.useRef(null),c=V.useRef(null),h=V.useRef(null),p=V.useRef(null),[m,g]=V.useState(0),E=V.useRef(1),[C,x]=V.useState(!1),O=V.useRef(null),[j,D]=V.useState(!0),U=Ie(Y=>Y.categories.selectedCategory);V.useEffect(()=>{const Y=new IntersectionObserver(([R])=>{D(R.isIntersecting)},{threshold:.1}),W=o.current;return W&&Y.observe(W),()=>{W&&Y.unobserve(W)}},[]),V.useEffect(()=>{a((()=>{const R=`viewedProducts_${(t==null?void 0:t.id)||"anonymous"}`,T=JSON.parse(localStorage.getItem(R))||[];if(!U)return[...e].sort(()=>.5-Math.random()).slice(0,15);const w=T.map(k=>e.find(P=>P.id===k&&P.category===U)).filter(Boolean).slice(0,15),A=15-w.length;if(A>0){const P=[...e.filter(Le=>!T.includes(Le.id)&&Le.category===U&&!w.includes(Le))].sort(()=>.5-Math.random()).slice(0,A),M=[...w,...P],Ae=15-M.length;if(Ae>0){const re=[...e.filter(se=>!T.includes(se.id)&&se.category!==U&&!M.includes(se))].sort(()=>.5-Math.random()).slice(0,Ae);return[...M,...re]}return M}return w})())},[e,t,U]),V.useEffect(()=>{if(!c.current||!h.current||i.length===0)return;const Y=c.current,W=h.current,R=Y.offsetWidth,T=W.scrollWidth,w=()=>{if(C||!j){p.current=requestAnimationFrame(w);return}g(A=>{const k=A+E.current*.4;return k>=0?(E.current=-1,A+E.current*.4):k<=-(T-R)?(E.current=1,A+E.current*.4):k}),p.current=requestAnimationFrame(w)};return p.current=requestAnimationFrame(w),()=>cancelAnimationFrame(p.current)},[i,C,j]),V.useEffect(()=>{h.current&&(h.current.style.transform=`translateX(${m}px)`)},[m]);const $=Y=>{O.current=Y.touches[0].clientX},q=Y=>{if(O.current===null)return;const W=Y.touches[0].clientX,R=W-O.current,T=c.current.offsetWidth,w=h.current.scrollWidth;g(A=>{const k=A+R,P=0,M=-(w-T);return Math.max(Math.min(k,P),M)}),O.current=W},z=()=>{O.current=null};return v.jsx("div",{ref:o,children:v.jsxs("div",{className:Pl.sliderContainer,children:[v.jsx("h3",{className:Pl.sliderTitle,children:i.some(Y=>Y==null?void 0:Y.viewed)?"Вы часто смотрите":"Рекомендуемые"}),v.jsx("div",{ref:c,className:Pl.sliderContainerInner,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:v.jsx("div",{ref:h,className:Pl.sliderContent,onTouchStart:$,onTouchMove:q,onTouchEnd:z,children:i.map(Y=>{var W,R;return v.jsx("div",{className:Pl.productCircle,onClick:()=>n(`/product/${Y.id}`),children:v.jsx("img",{src:((W=Y.images)==null?void 0:W[0])||((R=Y.imageUrl)==null?void 0:R.split(",")[0])||"/logo.png",alt:Y.name,className:Pl.productImage,loading:"lazy"})},Y.id)})})})]})})},W8="_spinner_1t56x_3",Q8="_circle_1t56x_25",Y8="_little_1t56x_47",X8="_small_1t56x_63",Z8="_medium_1t56x_79",J8="_large_1t56x_95",es={spinner:W8,circle:Q8,little:Y8,small:X8,medium:Z8,large:J8},j2=()=>v.jsxs("div",{className:es.spinner,children:[v.jsx("div",{className:`${es.circle} ${es.little}`}),v.jsx("div",{className:`${es.circle} ${es.small}`}),v.jsx("div",{className:`${es.circle} ${es.medium}`}),v.jsx("div",{className:`${es.circle} ${es.large}`})]}),Af={"confirm-modal":"_confirm-modal_9tqup_1","confirm-modal__buttons-wrap":"_confirm-modal__buttons-wrap_9tqup_25","confirm-modal__button":"_confirm-modal__button_9tqup_25"},ez=({handleDelete:n,product:e,setIsModalOpen:t})=>v.jsxs("div",{className:Af["confirm-modal"],children:[v.jsx("p",{children:"Вы уверены, что хотите удалить?"}),v.jsxs("div",{className:Af["confirm-modal__buttons-wrap"],children:[v.jsx("div",{className:Af["confirm-modal__button"],onClick:()=>{var i;n(e.id,((i=e.images)==null?void 0:i[0])||e.imageUrl),t(!1)},children:"Да"}),v.jsx("div",{className:Af["confirm-modal__button"],onClick:()=>t(!1),children:"Нет"})]})]}),tz=(n="scroll")=>{const e=Ts();V.useEffect(()=>{const t=`${n}-${e.pathname}`,i=parseInt(sessionStorage.getItem(t)||"0",10),a=()=>{window.scrollY>100&&sessionStorage.setItem(t,window.scrollY.toString())},o=()=>{sessionStorage.setItem(t,window.scrollY.toString())},c=()=>{if(i>0){const p=()=>{document.body.scrollHeight>i?window.scrollTo({top:i,behavior:"auto"}):setTimeout(p,100)};p()}};window.addEventListener("scroll",a,{passive:!0}),window.addEventListener("beforeunload",o);const h=setTimeout(c,50);return()=>{window.removeEventListener("scroll",a),window.removeEventListener("beforeunload",o),clearTimeout(h)}},[e.pathname,n])},nz="_visible_xvabl_41",sy={"scroll-to-top__button":"_scroll-to-top__button_xvabl_1",visible:nz,"scroll-to-top__arrow":"_scroll-to-top__arrow_xvabl_53"},Z0=()=>{const[n,e]=V.useState(!1),t=V.useRef(window.scrollY),i=V.useRef(0);V.useEffect(()=>{const o=()=>{const c=window.scrollY,h=c<t.current;if(c<500){e(!1),i.current=0,t.current=c;return}h?(i.current+=t.current-c,e(i.current>=50)):(i.current=0,e(!1)),t.current=c};return window.addEventListener("scroll",o,{passive:!0}),()=>window.removeEventListener("scroll",o)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return v.jsx("button",{onClick:a,className:`${sy["scroll-to-top__button"]} ${n?sy.visible:""}`,"aria-label":"Scroll to top",children:v.jsx("div",{className:sy["scroll-to-top__arrow"]})})},iz="_preloader_tsstl_161",rz="_invisible_tsstl_391",Ft={"product-list__box":"_product-list__box_tsstl_1","product-list__ul":"_product-list__ul_tsstl_9","product-list__card":"_product-list__card_tsstl_27","product-list__name":"_product-list__name_tsstl_57","product-list__description":"_product-list__description_tsstl_77","product-list__img-wrap":"_product-list__img-wrap_tsstl_89","product-list__img":"_product-list__img_tsstl_89","product-list-icon":"_product-list-icon_tsstl_117","product-action-row":"_product-action-row_tsstl_131","price-block":"_price-block_tsstl_143",preloader:iz,"product-ist__delete-button":"_product-ist__delete-button_tsstl_181","product-ist__custom-button--add-product":"_product-ist__custom-button--add-product_tsstl_191","hidden-for-user":"_hidden-for-user_tsstl_211","old-price":"_old-price_tsstl_221","product-ist__wrap-button":"_product-ist__wrap-button_tsstl_259","discount-price":"_discount-price_tsstl_367","normal-price":"_normal-price_tsstl_379",invisible:rz},sz=()=>{tz();const[n,e]=V.useState(null),[t,i]=V.useState(!1),a=Number(sessionStorage.getItem("visibleCount"))||36,[o,c]=V.useState(a),h=Ie(R=>R.search.query),p=Ie(R=>R.favorite.items),{isAdmin:m}=Ie(R=>R.auth),g=Ie(R=>!!R.auth.user),E=Sn(),C=bs(),x=Ie(R=>R.auth.user),{items:O,status:j,error:D}=Ie(R=>R.products),U=Ie(R=>R.categories.selectedCategory);V.useEffect(()=>{sessionStorage.setItem("visibleCount",o.toString())},[o]),V.useEffect(()=>{E(Ju())},[E]);let $=[];h.trim()?$=O.filter(R=>R.name.toLowerCase().includes(h.toLowerCase())):$=U==="Все товары"?O:O.filter(R=>R.category===U);const q=V.useRef({});O.forEach(R=>{R.id in q.current||(q.current[R.id]=Math.random()<.4)});const z=async(R,T)=>{try{await E(_2(R)),console.log(`Изображение для удаления: ${T}`)}catch(w){console.error("Ошибка при удалении продукта: ",w)}},Y=R=>{const w=`viewedProducts_${(x==null?void 0:x.id)||"anonymous"}`,A=JSON.parse(localStorage.getItem(w))||[],k=[R,...A.filter(P=>P!==R)].slice(0,50);localStorage.setItem(w,JSON.stringify(k))},W=()=>{c(R=>R+36)};return v.jsxs("div",{className:Ft["product-list__box"],children:[t&&v.jsx(ez,{handleDelete:z,product:n,setIsModalOpen:i}),j==="loading"?v.jsx("div",{className:Ft.preloader,children:v.jsx(j2,{})}):j==="failed"?v.jsxs("div",{children:["Error: ",D]}):$.length===0?v.jsx("div",{className:Ft["product-list__box"],children:v.jsx("p",{children:"Товаров нет."})}):v.jsxs("div",{children:[v.jsx("h2",{children:"Лучшие предложения"}),v.jsx("ul",{className:Ft["product-list__ul"],children:$.slice(0,o).map(R=>{var M,Ae,Le;const T=p.some(re=>re.productId===R.id),w=R.name,A=w.charAt(0).toUpperCase()+w.slice(1),k=q.current[R.id],P=Math.floor(R.price*1.3);return v.jsxs("li",{className:Ft["product-list__card"],onClick:()=>{Y(R.id),C(`/product/${R.id}`)},children:[v.jsx("div",{className:Ft["product-list__img-wrap"],children:v.jsx("img",{src:((M=R.images)==null?void 0:M[0])||((Ae=R.imageUrl)==null?void 0:Ae.split(",")[0])||"/logo.png",alt:R.name,className:Ft["product-list__img"]})}),v.jsx("div",{children:v.jsxs("ul",{className:Ft["product-list__wrap-title"],children:[v.jsx("li",{className:Ft["product-list__name"],children:A}),v.jsx("li",{className:Ft["product-list__description"]}),v.jsxs("li",{className:k?Ft["old-price"]:Ft.invisible,children:[P.toLocaleString("uk-UA")," ₴"]}),v.jsx("li",{className:Ft["product-action-row"],children:v.jsxs("div",{className:Ft["price-block"],children:[v.jsxs("span",{className:k?Ft["discount-price"]:Ft["normal-price"],children:[R.price.toLocaleString("uk-UA")," ","₴"]}),v.jsx("span",{className:Ft["product-list-icon"],onClick:re=>{re.preventDefault(),re.stopPropagation(),E(g?fs(R.id):os())},children:T?v.jsx(N2,{style:{fill:"red",stroke:"green",strokeWidth:"1px"}}):v.jsx(k2,{})})]})}),v.jsxs("li",{style:{color:"red"},className:m?"":Ft["hidden-for-user"],children:["Дроп ",((Le=R.purchase)==null?void 0:Le.toLocaleString("uk-UA"))||"—"," ₴"]})]})}),v.jsx("div",{className:Ft["product-ist__wrap-button"],children:m&&v.jsx("button",{className:Ft["product-ist__delete-button"],onClick:re=>{re.stopPropagation(),i(!0),e(R)},children:"delete"})})]},R.id)})})]}),j==="succeeded"&&U==="Все товары"&&!h.trim()&&v.jsx(Yt,{onClick:W,className:Ft["product-ist__custom-button--add-product"],children:"Показать еще"}),v.jsx(Z0,{})]})},az="_sliderWrap_vy9na_1",oz="_slider_vy9na_1",lz="_slide_vy9na_1",cz="_dots_vy9na_47",uz="_dot_vy9na_47",hz="_activeDot_vy9na_91",Ll={sliderWrap:az,slider:oz,slide:lz,dots:cz,dot:uz,activeDot:hz},ay=[{id:1,src:"/oneSlider.png",alt:"Гарантия возврата 14 дней"},{id:2,src:"/twoSlider.png",alt:"Быстрая доставка по Украине"},{id:3,src:"/threeSlider.png",alt:"Поддержка в Telegram 24/7"},{id:6,src:"/sixSlider.png",alt:"1000+ довольных клиентов"},{id:4,src:"/fourSlider.png",alt:"1000+ довольных клиентов"},{id:5,src:"/fiveSlider.png",alt:"1000+ довольных клиентов"}],dz=()=>{const[n,e]=V.useState(0),[t,i]=V.useState(!1),a=V.useRef(null);V.useEffect(()=>(t||(a.current=setTimeout(()=>{e(c=>(c+1)%ay.length)},1800)),()=>clearTimeout(a.current)),[n,t]);const o=c=>e(c);return v.jsxs("div",{className:Ll.sliderWrap,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[v.jsx("div",{className:Ll.slider,style:{transform:`translateX(-${n*100}%)`},children:ay.map(c=>v.jsx("img",{src:c.src,alt:c.alt,className:Ll.slide},c.id))}),v.jsx("div",{className:Ll.dots,children:ay.map((c,h)=>v.jsx("button",{className:`${Ll.dot} ${h===n?Ll.activeDot:""}`,onClick:()=>o(h),"aria-label":`Слайд ${h+1}`},h))})]})},fz="_active_v34nb_83",pz="_sign_v34nb_109",ts={"box-categories-slider-entry":"_box-categories-slider-entry_v34nb_1","box-entry-block__slider":"_box-entry-block__slider_v34nb_9","box-entry-block__categories":"_box-entry-block__categories_v34nb_19","box-entry-block__sign":"_box-entry-block__sign_v34nb_29","category-item":"_category-item_v34nb_65",active:fz,sign:pz};function mz(){const n=Sn(),{status:e}=Ie(a=>a.products),{categories:t,selectedCategory:i}=Ie(a=>a.categories);return v.jsxs("div",{children:[e==="succeeded"&&v.jsxs("div",{children:[v.jsxs("div",{className:ts["box-categories-slider-entry"],children:[v.jsx("ul",{className:ts["box-entry-block__categories"],children:t.slice(0,7).map(a=>v.jsxs("li",{className:`${ts["category-item"]} ${i===a?ts.active:""}`,onClick:()=>n(Sm(a)),children:[v.jsx("span",{className:ts["category-name"],children:a}),v.jsx(vj,{className:ts["category-icon"]})]},a))}),v.jsx("div",{className:ts["box-entry-block__slider"],children:v.jsx(dz,{})}),v.jsxs("div",{className:ts["box-entry-block__sign"],children:[v.jsx("h3",{children:"Хотите продавать вместе с нами? "}),v.jsxs(Yt,{className:ts.sign,children:["Скоро запуск",v.jsx("span",{style:{color:"yellow",marginLeft:"10px"},children:"тестируем"})]})]})]}),v.jsx(K8,{})]}),v.jsx(sz,{})]})}const Vl={"related-products__grid":"_related-products__grid_1isko_1","related-products__card":"_related-products__card_1isko_21","related-products__img-wrap":"_related-products__img-wrap_1isko_51","related-products__img":"_related-products__img_1isko_51","related-products__name":"_related-products__name_1isko_77","related-products__price":"_related-products__price_1isko_101"},_z=({currentId:n,category:e})=>{const t=Ie(o=>o.products.items),[i,a]=V.useState([]);return V.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"});const o=t.filter(m=>m.category===e&&m.id!==n).slice(0,16),h=[...t.filter(m=>m.id!==n&&!o.some(g=>g.id===m.id))].sort(()=>.5-Math.random()).slice(0,8),p=[...o,...h].sort(()=>.5-Math.random());a(p)},[n,e,t]),i.length===0?null:v.jsx("div",{className:Vl["related-products__grid"],children:i.map(o=>{var c;return v.jsxs(Op,{to:`/product/${o.id}`,className:Vl["related-products__card"],children:[v.jsx("div",{className:Vl["related-products__img-wrap"],children:v.jsx("img",{src:((c=o.images)==null?void 0:c[0])||o.imageUrl,alt:o.name,className:Vl["related-products__img"]})}),v.jsx("p",{className:Vl["related-products__name"],children:o.name}),v.jsx("ul",{children:v.jsx("li",{})}),v.jsxs("p",{className:Vl["related-products__price"],children:[o.price.toLocaleString("uk-UA")," ₴"]})]},o.id)})})},gz="_slide_15vhw_73",yz="_dot_15vhw_215",vz="_expanded_15vhw_311",Ez="_availability_15vhw_529",ct={"product-details":"_product-details_15vhw_1","product-content":"_product-content_15vhw_11","wrap-slider__slider-button":"_wrap-slider__slider-button_15vhw_27","wrap-slider":"_wrap-slider_15vhw_27","product-image-box":"_product-image-box_15vhw_59","slider-container":"_slider-container_15vhw_73","image-slider":"_image-slider_15vhw_87",slide:gz,"main-image":"_main-image_15vhw_117","arrow-left":"_arrow-left_15vhw_131","arrow-right":"_arrow-right_15vhw_161","image-dots":"_image-dots_15vhw_201",dot:yz,"active-dot":"_active-dot_15vhw_241","product__tab-button-group":"_product__tab-button-group_15vhw_251","product-description":"_product-description_15vhw_271","description-container":"_description-container_15vhw_285","description-collapsed":"_description-collapsed_15vhw_293",expanded:vz,"product__tab-button":"_product__tab-button_15vhw_251","product-info":"_product-info_15vhw_389","product-name":"_product-name_15vhw_415","product-price":"_product-price_15vhw_425","error-message":"_error-message_15vhw_439","product-list__favorite-icon":"_product-list__favorite-icon_15vhw_453","product-price__buy":"_product-price__buy_15vhw_483","product-info-row":"_product-info-row_15vhw_513",availability:Ez,"product-code":"_product-code_15vhw_541","product-code__value":"_product-code__value_15vhw_553","product-price-box":"_product-price-box_15vhw_571","product-cart-icon":"_product-cart-icon_15vhw_599"},wz=()=>{var A;const{id:n}=YN(),[e,t]=V.useState(null),[i,a]=V.useState(!0),[o,c]=V.useState(null),[h,p]=V.useState([]),[m,g]=V.useState(0),[E,C]=V.useState(!0),[x,O]=V.useState(!1),j=Sn(),D=Ie(k=>k.favorite.items),U=Ie(k=>!!k.auth.user),$=D.some(k=>k.productId===n),q=V.useRef(null),z=V.useRef(null),Y=k=>{q.current=k.touches[0].clientX},W=k=>{z.current=k.touches[0].clientX},R=()=>{if(!q.current||!z.current)return;const k=q.current-z.current;k>50&&T("right"),k<-50&&T("left"),q.current=null,z.current=null};V.useEffect(()=>{(async()=>{var P;try{const M=Qi(bn,"products",n),Ae=await mh(M);if(Ae.exists()){const Le=Ae.data(),re=Array.isArray(Le.images)?Le.images.slice(0,15):(((P=Le.imageUrl)==null?void 0:P.split(","))||[]).slice(0,15);t(Le),p(re),g(0),j(Y7({...Le,id:n}))}else c("Товар не найден")}catch{c("Ошибка загрузки данных")}finally{a(!1)}})()},[n]);const T=k=>{C(!0),g(k==="left"?P=>P===0?h.length-1:P-1:P=>P===h.length-1?0:P+1)},w=k=>{C(!0),g(k)};return i?v.jsx(j2,{}):o?v.jsx("p",{className:ct["error-message"],children:o}):v.jsxs("div",{className:ct["product-details"],children:[v.jsxs("div",{className:ct["product-content"],children:[v.jsxs("div",{className:ct["wrap-slider__slider-button"],children:[v.jsxs("div",{className:ct["wrap-slider"],children:[v.jsxs("div",{className:ct["product-image-box"],children:[h.length>0&&v.jsx(kj,{className:ct["arrow-left"],onClick:()=>T("left")}),v.jsx("div",{className:ct["product-list__favorite-icon"],onClick:k=>{k.stopPropagation(),j(U?fs(n):os())},children:$?v.jsx(M2,{style:{fill:"red",stroke:"black",strokeWidth:"1px"},size:20}):v.jsx(Mj,{size:20})}),v.jsx("div",{className:ct["slider-container"],onTouchStart:Y,onTouchMove:W,onTouchEnd:R,children:v.jsx("div",{className:ct["image-slider"],style:{transform:`translateX(-${m*100}%)`,transition:E?"transform 0.2s ease-in-out":"none"},children:h.map((k,P)=>v.jsx("div",{className:ct.slide,children:v.jsx("img",{src:k,alt:e!=null&&e.name?`${e.name} ${P+1}`:`Product image ${P+1}`,className:ct["main-image"]})},P))})}),h.length>0&&v.jsx(Dj,{className:ct["arrow-right"],onClick:()=>T("right")})]}),h.length>0&&v.jsx("div",{className:ct["image-dots"],children:h.map((k,P)=>v.jsx("span",{className:`${ct.dot} ${P===m?ct["active-dot"]:""}`,onClick:()=>w(P)},P))})]}),v.jsxs("div",{className:ct["product__tab-button-group"],children:[v.jsx("div",{className:ct["description-container"],children:v.jsx("div",{className:`
         ${ct["product-description"]}
         ${ct["description-collapsed"]}
         ${x?ct.expanded:""}
      `,dangerouslySetInnerHTML:{__html:e.description}})}),v.jsx(Yt,{className:ct["product__tab-button"],onClick:()=>O(!x),children:x?v.jsxs(v.Fragment,{children:["Свернуть описание ",v.jsx(Oj,{})]}):v.jsxs(v.Fragment,{children:["Описание товара ",v.jsx(Nj,{})]})})]})]}),v.jsxs("div",{className:ct["product-info"],children:[v.jsx("h2",{className:ct["product-name"],children:e.name}),v.jsxs("div",{className:ct["product-info-row"],children:[v.jsx("p",{className:ct.availability,children:"В наличии"}),v.jsxs("p",{className:ct["product-code"],children:[v.jsx("strong",{children:"Код товара:"})," ",v.jsx("span",{className:ct["product-code__value"],children:((A=e.code)==null?void 0:A.trim())||"---"})]})]}),v.jsxs("div",{children:[v.jsxs("ul",{className:ct["product-price-box"],children:[v.jsxs("li",{className:ct["product-price"],children:[e.price.toLocaleString("uk-UA")," ₴"]}),v.jsx("li",{className:ct["product-cart-icon"],onClick:k=>{k.stopPropagation(),j(U?fs(n):os())},children:$?v.jsx(N2,{style:{stroke:"green",strokeWidth:"1px"}}):v.jsx(k2,{})})]}),v.jsx(Yt,{className:ct["product-price__buy"],onClick:()=>{U?(D.some(k=>k.productId===n)||j(fs(n)),j(No())):j(os())},children:"Оформить заказ"})]})]})]}),v.jsx(_z,{currentId:n,category:e.category}),v.jsx(Z0,{})]})};function $S({children:n}){const e=Ie(a=>a.auth.user),t=Ie(a=>a.auth.isAdmin),i=bs();return V.useEffect(()=>{(!e||!t)&&i("/")},[t,e]),e&&t?n:null}const Tz="_blok__oder_1oxsl_1",bz="_fixedFilters_1oxsl_27",Sz="_filtersContainer_1oxsl_53",Cz="_selectControl_1oxsl_67",Az="_counterRow_1oxsl_85",Rz="_orderItem_1oxsl_107",Iz="_checkButton_1oxsl_171",xz="_restoreButton_1oxsl_173",Nz="_deleteButton_1oxsl_175",kz="_checkButtonProcessed_1oxsl_201",Dz="_productList_1oxsl_241",Oz="_productItem_1oxsl_259",Mz="_productLink_1oxsl_279",Pz="_productImage_1oxsl_297",Lz="_productControls_1oxsl_311",Vz="_decreaseButton_1oxsl_321",jz="_increaseButton_1oxsl_323",Uz="_deleteProductButton_1oxsl_325",zz="_total_1oxsl_367",Bz="_noteContainer_1oxsl_381",Fz="_noteLabel_1oxsl_395",qz="_noteInput_1oxsl_407",Hz="_searchInput_1oxsl_427",$z="_orderCode_1oxsl_445",yt={blok__oder:Tz,fixedFilters:bz,filtersContainer:Sz,selectControl:Cz,counterRow:Az,orderItem:Rz,checkButton:Iz,restoreButton:xz,deleteButton:Nz,checkButtonProcessed:kz,productList:Dz,productItem:Oz,productLink:Mz,productImage:Pz,productControls:Lz,decreaseButton:Vz,increaseButton:jz,deleteProductButton:Uz,total:zz,noteContainer:Bz,noteLabel:Fz,noteInput:qz,searchInput:Hz,orderCode:$z},Gz=()=>{const[n,e]=V.useState(""),[t,i]=V.useState([]),[a,o]=V.useState("all"),[c,h]=V.useState("date-desc");V.useEffect(()=>{(async()=>{const Y=s0(LP(bn,"orders"),c0("createdAt","desc")),W=await om(Y),R=[];for(const T of W.docs){const w={id:T.id,path:T.ref.path,ref:T.ref,...T.data()};!w.products||w.products.length===0?(await $u(T.ref),console.log(`Удалён пустой заказ: ${w.id}`)):R.push(w)}i(R)})()},[]);const p=async(z,Y)=>{window.confirm("Отметить заказ как удалённый?")&&(await Eo(z,{deletedByAdmin:!0}),i(W=>{const R=[...W];return R[Y].deletedByAdmin=!0,R}))},m=async(z,Y)=>{window.confirm("Вернуть заказ?")&&(await Eo(z,{deletedByAdmin:!1}),i(W=>{const R=[...W];return R[Y].deletedByAdmin=!1,R}))},g=async(z,Y,W)=>{try{await Eo(z,{note:W}),i(R=>{const T=[...R];return T[Y].note=W,T})}catch(R){console.error("Ошибка обновления заметки:",R)}},E=async(z,Y)=>{if(window.confirm("Уменьшить количество на 1?"))try{const W=t.find(w=>w.ref.path===z.path);if(!W)return;const R=W.products.map(w=>w.id===Y?{...w,quantity:(w.quantity||1)-1}:w).filter(w=>w.quantity>0);if(R.length===0){await $u(z),i(w=>w.filter(A=>A.ref.path!==z.path)),alert("Все товары удалены, заказ удалён полностью");return}const T=R.reduce((w,A)=>w+(A.price||0)*(A.quantity||1),0);await Eo(z,{products:R,total:T}),i(w=>w.map(A=>A.ref.path===z.path?{...A,products:R,total:T}:A))}catch(W){console.error("Ошибка уменьшения количества товара:",W)}},C=async(z,Y)=>{if(window.confirm("Добавить ещё 1 единицу этого товара?"))try{const W=t.find(w=>w.ref.path===z.path);if(!W)return;const R=W.products.map(w=>w.id===Y?{...w,quantity:(w.quantity||1)+1}:w),T=R.reduce((w,A)=>w+(A.price||0)*(A.quantity||1),0);await Eo(z,{products:R,total:T}),i(w=>w.map(A=>A.ref.path===z.path?{...A,products:R,total:T}:A))}catch(W){console.error("Ошибка увеличения количества товара:",W)}},x=async(z,Y)=>{if(window.confirm("Удалить этот товар из заказа?"))try{const W=t.find(w=>w.ref.path===z.path);if(!W)return;const R=W.products.filter(w=>w.id!==Y);if(R.length===0){await $u(z),i(w=>w.filter(A=>A.ref.path!==z.path)),alert("Все товары удалены, заказ удалён полностью");return}const T=R.reduce((w,A)=>w+(A.price||0)*(A.quantity||1),0);await Eo(z,{products:R,total:T}),i(w=>w.map(A=>A.ref.path===z.path?{...A,products:R,total:T}:A))}catch(W){console.error("Ошибка удаления товара:",W)}},O=async(z,Y)=>{window.confirm("Подтвердить обработку заказа?")&&(await Eo(z,{processed:!0}),i(W=>{const R=[...W];return R[Y].processed=!0,R}))},j=t.filter(z=>{var W,R;const Y=((W=z.code)==null?void 0:W.toLowerCase().includes(n.toLowerCase()))||((R=z.code)==null?void 0:R.replace(/^ord-/,"").includes(n.toUpperCase()));return n&&!Y?!1:a==="all"?!0:a==="processed"?z.processed&&!z.deletedByAdmin:a==="unprocessed"?!z.processed&&!z.deletedByAdmin:a==="deleted"?z.deletedByAdmin:!0}).sort((z,Y)=>{var W,R,T,w;return c==="date-desc"?((W=Y.createdAt)==null?void 0:W.seconds)-((R=z.createdAt)==null?void 0:R.seconds):c==="date-asc"?((T=z.createdAt)==null?void 0:T.seconds)-((w=Y.createdAt)==null?void 0:w.seconds):c==="total-desc"?(Y.total||0)-(z.total||0):c==="total-asc"?(z.total||0)-(Y.total||0):0}),D=t.length,U=t.filter(z=>!z.processed&&!z.deletedByAdmin).length,$=t.filter(z=>z.processed&&!z.deletedByAdmin).length,q=t.filter(z=>z.deletedByAdmin).length;return v.jsxs("div",{className:yt.blok__oder,children:[v.jsx("h2",{children:"Все заказы"}),v.jsxs("div",{className:yt.fixedFilters,children:[v.jsxs("div",{className:yt.filtersContainer,children:[v.jsxs("select",{className:yt.selectControl,value:a,onChange:z=>o(z.target.value),children:[v.jsx("option",{value:"all",children:"Все заказы"}),v.jsx("option",{value:"processed",children:"Обработанные"}),v.jsx("option",{value:"unprocessed",children:"Необработанные"}),v.jsx("option",{value:"deleted",children:"Удалённые"})]}),v.jsxs("select",{className:yt.selectControl,value:c,onChange:z=>h(z.target.value),children:[v.jsx("option",{value:"date-desc",children:"Дата: от новых к старым"}),v.jsx("option",{value:"date-asc",children:"Дата: от старых к новым"}),v.jsx("option",{value:"total-desc",children:"Сумма: от большой к маленькой"}),v.jsx("option",{value:"total-asc",children:"Сумма: от маленькой к большой"})]})]}),v.jsx("input",{type:"text",placeholder:"Поиск по коду заказа...",className:yt.searchInput,value:n,onChange:z=>e(z.target.value)}),v.jsxs("div",{className:yt.counterRow,children:[v.jsxs("span",{children:["Всего: ",D]}),v.jsxs("span",{children:["Необработанные: ",U]}),v.jsxs("span",{children:["Обработанных: ",$]}),v.jsxs("span",{children:["Удалённых: ",q]})]})]}),j.map((z,Y)=>{var W,R,T;return v.jsxs("div",{className:yt.orderItem,children:[v.jsxs("div",{className:yt.buttonGroup,children:[v.jsxs("button",{className:z.processed?`${yt.checkButton} ${yt.checkButtonProcessed}`:yt.checkButton,onClick:()=>O(z.ref,Y),disabled:z.processed,children:["✅"," ",z.processed?"Обработано":"Отметить как обработано"]}),z.deletedByAdmin?v.jsx("button",{className:yt.restoreButton,onClick:()=>m(z.ref,Y),children:"♻️ Вернуть заказ"}):v.jsx("button",{className:yt.deleteButton,onClick:()=>p(z.ref,Y),children:"🗑 Удалить"})]}),v.jsx("p",{children:v.jsxs("strong",{children:["Заказ №",Y+1]})}),v.jsxs("span",{className:yt.orderCode,children:[v.jsx("strong",{children:"код заказа: "}),z.code||"Нет кода"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Имя:"})," ",z.name]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Телефон:"})," ",z.phone]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Email: "}),z.email]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Город:"})," ",z.city||"—"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Способ доставки:"})," ",z.deliveryMethod||"—"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Комментарий:"})," ",z.comment||"—"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Дата: "}),((W=z.createdAt)==null?void 0:W.toDate().toLocaleString())||"—"]}),v.jsx("ul",{className:yt.productList,children:(R=z.products)==null?void 0:R.map((w,A)=>v.jsxs("li",{className:yt.productItem,children:[v.jsxs("a",{href:`#/product/${w.id}`,target:"_blank",rel:"noopener noreferrer",className:yt.productLink,children:[w.image&&v.jsx("img",{src:w.image,alt:w.name,width:50,height:50,className:yt.productImage}),v.jsxs("div",{children:[v.jsx("strong",{children:w.name}),v.jsx("br",{}),"Кол-во: ",w.quantity," × ",w.price," ₴ ="," ",(w.quantity*w.price).toLocaleString("uk-UA"),"₴"]})]}),v.jsxs("div",{className:yt.productControls,children:[v.jsx("button",{className:yt.decreaseButton,onClick:()=>E(z.ref,w.id),children:"➖ Убрать 1 шт"}),v.jsx("button",{className:yt.increaseButton,onClick:()=>C(z.ref,w.id),children:"➕ Добавить 1 шт"}),v.jsx("button",{className:yt.deleteProductButton,onClick:()=>x(z.ref,w.id),children:"❌ Удалить полность"})]})]},A))}),v.jsxs("div",{className:yt.noteContainer,children:[v.jsx("p",{className:yt.noteLabel,children:"Заметка:"}),v.jsx("input",{type:"text",maxLength:"60",placeholder:"Не более 59 символов",value:z.note||"",onChange:w=>g(z.ref,Y,w.target.value),className:yt.noteInput})]}),v.jsxs("p",{className:yt.total,children:[v.jsx("strong",{children:"💰 Итого к оплате:"})," ",(T=z.total)==null?void 0:T.toLocaleString("uk-UA")," ₴"]})]},z.id)}),v.jsx(Z0,{})]})},Kz=()=>v.jsx("div",{children:v.jsx(Gz,{})}),Wz=()=>v.jsx(dk,{children:v.jsxs(jl,{path:"/",element:v.jsx(E8,{}),children:[v.jsx(jl,{index:!0,element:v.jsx(mz,{})}),v.jsx(jl,{path:"product-form",element:v.jsx($S,{children:v.jsx(z8,{})})}),v.jsx(jl,{path:"admin-orders",element:v.jsx($S,{children:v.jsx(Kz,{})})}),v.jsx(jl,{path:"/product/:id",element:v.jsx(wz,{})})]})}),Qz=({children:n})=>{const e=Sn();return V.useEffect(()=>{new URLSearchParams(window.location.search).get("logout")==="true"&&UR(Zu);const i=Q7(async a=>{if(a)try{const o=Qi(bn,"users",a.uid),c=await mh(o),h=c.exists()?c.data():{};e(iv({user:{email:a.email,uid:a.uid},role:h.role||"user"})),e(Ec(a.uid)),e(Ju())}catch(o){console.error("Ошибка при получении роли из Firestore:",o)}else e(E2())});return()=>i()},[e]),n},Yz=()=>v.jsx(aD,{store:uj,children:v.jsx(Lk,{children:v.jsx(Qz,{children:v.jsx(Wz,{})})})});yN.createRoot(document.getElementById("root")).render(v.jsx(V.StrictMode,{children:v.jsx(Yz,{})}));
