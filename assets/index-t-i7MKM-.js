var xN=Object.defineProperty;var DN=(n,e,t)=>e in n?xN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X_=(n,e,t)=>DN(n,typeof e!="symbol"?e+"":e,t);import{r as Dy,g as Oy,a as ON}from"./react-DbHEDQBy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Z_={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function kN(){if(Aw)return uc;Aw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return uc.Fragment=e,uc.jsx=t,uc.jsxs=t,uc}var Cw;function MN(){return Cw||(Cw=1,Z_.exports=kN()),Z_.exports}var A=MN(),F=Dy();const ra=Oy(F);var J_={exports:{}},cc={},eg={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function PN(){return Rw||(Rw=1,function(n){function e(se,ae){var ue=se.length;se.push(ae);e:for(;0<ue;){var ce=ue-1>>>1,ke=se[ce];if(0<a(ke,ae))se[ce]=ae,se[ue]=ke,ue=ce;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var ae=se[0],ue=se.pop();if(ue!==ae){se[0]=ue;e:for(var ce=0,ke=se.length,be=ke>>>1;ce<be;){var ve=2*(ce+1)-1,oe=se[ve],ge=ve+1,Pe=se[ge];if(0>a(oe,ue))ge<ke&&0>a(Pe,oe)?(se[ce]=Pe,se[ge]=ue,ce=ge):(se[ce]=oe,se[ve]=ue,ce=ve);else if(ge<ke&&0>a(Pe,ue))se[ce]=Pe,se[ge]=ue,ce=ge;else break e}}return ae}function a(se,ae){var ue=se.sortIndex-ae.sortIndex;return ue!==0?ue:se.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],y=1,v=null,b=3,I=!1,x=!1,V=!1,M=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function z(se){for(var ae=t(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=se)i(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function te(se){if(V=!1,z(se),!x)if(t(p)!==null)x=!0,ze();else{var ae=t(m);ae!==null&&gt(te,ae.startTime-se)}}var le=!1,ne=-1,P=5,S=-1;function T(){return!(n.unstable_now()-S<P)}function R(){if(le){var se=n.unstable_now();S=se;var ae=!0;try{e:{x=!1,V&&(V=!1,H(ne),ne=-1),I=!0;var ue=b;try{t:{for(z(se),v=t(p);v!==null&&!(v.expirationTime>se&&T());){var ce=v.callback;if(typeof ce=="function"){v.callback=null,b=v.priorityLevel;var ke=ce(v.expirationTime<=se);if(se=n.unstable_now(),typeof ke=="function"){v.callback=ke,z(se),ae=!0;break t}v===t(p)&&i(p),z(se)}else i(p);v=t(p)}if(v!==null)ae=!0;else{var be=t(m);be!==null&&gt(te,be.startTime-se),ae=!1}}break e}finally{v=null,b=ue,I=!1}ae=void 0}}finally{ae?O():le=!1}}}var O;if(typeof Q=="function")O=function(){Q(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,D=L.port2;L.port1.onmessage=R,O=function(){D.postMessage(null)}}else O=function(){M(R,0)};function ze(){le||(le=!0,O())}function gt(se,ae){ne=M(function(){se(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){x||I||(x=!0,ze())},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var ue=b;b=ae;try{return se()}finally{b=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ae){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ue=b;b=se;try{return ae()}finally{b=ue}},n.unstable_scheduleCallback=function(se,ae,ue){var ce=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ce+ue:ce):ue=ce,se){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=ue+ke,se={id:y++,callback:ae,priorityLevel:se,startTime:ue,expirationTime:ke,sortIndex:-1},ue>ce?(se.sortIndex=ue,e(m,se),t(p)===null&&se===t(m)&&(V?(H(ne),ne=-1):V=!0,gt(te,ue-ce))):(se.sortIndex=ke,e(p,se),x||I||(x=!0,ze())),se},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(se){var ae=b;return function(){var ue=b;b=ae;try{return se.apply(this,arguments)}finally{b=ue}}}}(tg)),tg}var Iw;function LN(){return Iw||(Iw=1,eg.exports=PN()),eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function VN(){if(Nw)return cc;Nw=1;var n=LN(),e=Dy(),t=ON();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),I=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),te=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function ne(r){return r===null||typeof r!="object"?null:(r=le&&r[le]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function S(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case p:return"Fragment";case h:return"Portal";case y:return"Profiler";case m:return"StrictMode";case V:return"Suspense";case M:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case I:return(r.displayName||"Context")+".Provider";case b:return(r._context.displayName||"Context")+".Consumer";case x:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return s=r.displayName||null,s!==null?s:S(r.type)||"Memo";case Q:s=r._payload,r=r._init;try{return S(r(s))}catch{}}return null}var T=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=Object.assign,O,L;function D(r){if(O===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||"",L=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+O+r+L}var ze=!1;function gt(r,s){if(!r||ze)return"";ze=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(W){var $=W}Reflect.construct(r,[],ee)}else{try{ee.call()}catch(W){$=W}r.call(ee.prototype)}}else{try{throw Error()}catch(W){$=W}(ee=r())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),w=_[0],C=_[1];if(w&&C){var k=w.split(`
`),j=C.split(`
`);for(d=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;if(c===k.length||d===j.length)for(c=k.length-1,d=j.length-1;1<=c&&0<=d&&k[c]!==j[d];)d--;for(;1<=c&&0<=d;c--,d--)if(k[c]!==j[d]){if(c!==1||d!==1)do if(c--,d--,0>d||k[c]!==j[d]){var Y=`
`+k[c].replace(" at new "," at ");return r.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",r.displayName)),Y}while(1<=c&&0<=d);break}}}finally{ze=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?D(o):""}function se(r){switch(r.tag){case 26:case 27:case 5:return D(r.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return r=gt(r.type,!1),r;case 11:return r=gt(r.type.render,!1),r;case 1:return r=gt(r.type,!0),r;default:return""}}function ae(r){try{var s="";do s+=se(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ue(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function ce(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function ke(r){if(ue(r)!==r)throw Error(i(188))}function be(r){var s=r.alternate;if(!s){if(s=ue(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var d=o.return;if(d===null)break;var _=d.alternate;if(_===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===o)return ke(d),r;if(_===c)return ke(d),s;_=_.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=_;else{for(var w=!1,C=d.child;C;){if(C===o){w=!0,o=d,c=_;break}if(C===c){w=!0,c=d,o=_;break}C=C.sibling}if(!w){for(C=_.child;C;){if(C===o){w=!0,o=_,c=d;break}if(C===c){w=!0,c=_,o=d;break}C=C.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function ve(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=ve(r),s!==null)return s;r=r.sibling}return null}var oe=Array.isArray,ge=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},At=[],bt=-1;function Ce(r){return{current:r}}function Ee(r){0>bt||(r.current=At[bt],At[bt]=null,bt--)}function we(r,s){bt++,At[bt]=r.current,r.current=s}var pe=Ce(null),tt=Ce(null),nt=Ce(null),He=Ce(null);function Ke(r,s){switch(we(nt,s),we(tt,r),we(pe,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?ew(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=ew(r),s=tw(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ee(pe),we(pe,s)}function Ne(){Ee(pe),Ee(tt),Ee(nt)}function yn(r){r.memoizedState!==null&&we(He,r);var s=pe.current,o=tw(s,r.type);s!==o&&(we(tt,r),we(pe,o))}function Ie(r){tt.current===r&&(Ee(pe),Ee(tt)),He.current===r&&(Ee(He),rc._currentValue=Pe)}var lt=Object.prototype.hasOwnProperty,Cn=n.unstable_scheduleCallback,ti=n.unstable_cancelCallback,Hn=n.unstable_shouldYield,xi=n.unstable_requestPaint,ot=n.unstable_now,kn=n.unstable_getCurrentPriorityLevel,Ve=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,Qt=n.unstable_NormalPriority,_s=n.unstable_LowPriority,gs=n.unstable_IdlePriority,Yi=n.log,an=n.unstable_setDisableYieldValue,Gn=null,Wt=null;function ou(r){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Gn,r,void 0,(r.current.flags&128)===128)}catch{}}function Xi(r){if(typeof Yi=="function"&&an(r),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Gn,r)}catch{}}var Mn=Math.clz32?Math.clz32:Nh,lu=Math.log,Ih=Math.LN2;function Nh(r){return r>>>=0,r===0?32:31-(lu(r)/Ih|0)|0}var Zi=128,ys=4194304;function Di(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function hi(r,s){var o=r.pendingLanes;if(o===0)return 0;var c=0,d=r.suspendedLanes,_=r.pingedLanes,w=r.warmLanes;r=r.finishedLanes!==0;var C=o&134217727;return C!==0?(o=C&~d,o!==0?c=Di(o):(_&=C,_!==0?c=Di(_):r||(w=C&~w,w!==0&&(c=Di(w))))):(C=o&~d,C!==0?c=Di(C):_!==0?c=Di(_):r||(w=o&~w,w!==0&&(c=Di(w)))),c===0?0:s!==0&&s!==c&&(s&d)===0&&(d=c&-c,w=s&-s,d>=w||d===32&&(w&4194176)!==0)?s:c}function vs(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Do(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uu(){var r=Zi;return Zi<<=1,(Zi&4194176)===0&&(Zi=128),r}function Es(){var r=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),r}function Oo(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Vt(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function xh(r,s,o,c,d,_){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,k=r.expirationTimes,j=r.hiddenUpdates;for(o=w&~o;0<o;){var Y=31-Mn(o),ee=1<<Y;C[Y]=0,k[Y]=-1;var $=j[Y];if($!==null)for(j[Y]=null,Y=0;Y<$.length;Y++){var W=$[Y];W!==null&&(W.lane&=-536870913)}o&=~ee}c!==0&&ws(r,c,0),_!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=_&~(w&~s))}function ws(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Mn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194218}function Ts(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-Mn(o),d=1<<c;d&s|r[c]&s&&(r[c]|=s),o&=~d}}function Dh(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Oh(){var r=ge.p;return r!==0?r:(r=window.event,r===void 0?32:vw(r.type))}function bs(r,s){var o=ge.p;try{return ge.p=r,s()}finally{ge.p=o}}var Ji=Math.random().toString(36).slice(2),on="__reactFiber$"+Ji,Yt="__reactProps$"+Ji,Ar="__reactContainer$"+Ji,Da="__reactEvents$"+Ji,ko="__reactListeners$"+Ji,er="__reactHandles$"+Ji,cu="__reactResources$"+Ji,Ss="__reactMarker$"+Ji;function Oa(r){delete r[on],delete r[Yt],delete r[Da],delete r[ko],delete r[er]}function Oi(r){var s=r[on];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ar]||o[on]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=rw(r);r!==null;){if(o=r[on])return o;r=rw(r)}return s}r=o,o=r.parentNode}return null}function Cr(r){if(r=r[on]||r[Ar]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function As(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Cs(r){var s=r[cu];return s||(s=r[cu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(r){r[Ss]=!0}var hu=new Set,Mo={};function ni(r,s){$n(r,s),$n(r+"Capture",s)}function $n(r,s){for(Mo[r]=s,r=0;r<s.length;r++)hu.add(s[r])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},du={};function kh(r){return lt.call(du,r)?!0:lt.call(fu,r)?!1:tm.test(r)?du[r]=!0:(fu[r]=!0,!1)}function Rs(r,s,o){if(kh(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Is(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function fi(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function Pn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Mh(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nm(r){var s=Mh(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,_=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,_.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ka(r){r._valueTracker||(r._valueTracker=nm(r))}function pu(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=Mh(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function Po(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Rr=/[\n"\\]/g;function Dt(r){return r.replace(Rr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ns(r,s,o,c,d,_,w,C){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Pn(s)):r.value!==""+Pn(s)&&(r.value=""+Pn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?Lo(r,w,Pn(s)):o!=null?Lo(r,w,Pn(o)):c!=null&&r.removeAttribute("value"),d==null&&_!=null&&(r.defaultChecked=!!_),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Pn(C):r.removeAttribute("name")}function Ma(r,s,o,c,d,_,w,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),s!=null||o!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;o=o!=null?""+Pn(o):"",s=s!=null?""+Pn(s):o,C||s===r.value||(r.value=s),r.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=C?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function Lo(r,s,o){s==="number"&&Po(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function it(r,s,o,c){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&c&&(r[o].defaultSelected=!0)}else{for(o=""+Pn(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Pa(r,s,o){if(s!=null&&(s=""+Pn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Pn(o):""}function xs(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(oe(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Pn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function di(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var im=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mu(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||im.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Ph(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&o[d]!==c&&mu(r,d,c)}else for(var _ in s)s.hasOwnProperty(_)&&mu(r,_,s[_])}function _u(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tr(r){return sm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var pi=null;function Vo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ir=null,Nr=null;function xr(r){var s=Cr(r);if(s&&(r=s.stateNode)){var o=r[Yt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ns(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Dt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var d=c[Yt]||null;if(!d)throw Error(i(90));Ns(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&pu(c)}break e;case"textarea":Pa(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&it(r,!!o.multiple,s,!1)}}}var gu=!1;function Lh(r,s,o){if(gu)return r(s,o);gu=!0;try{var c=r(s);return c}finally{if(gu=!1,(Ir!==null||Nr!==null)&&(If(),Ir&&(s=Ir,r=Nr,Nr=Ir=null,xr(s),r)))for(s=0;s<r.length;s++)xr(r[s])}}function La(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Yt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var mi=!1;if(ii)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){mi=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{mi=!1}var nr=null,Ds=null,Dr=null;function yu(){if(Dr)return Dr;var r,s=Ds,o=s.length,c,d="value"in nr?nr.value:nr.textContent,_=d.length;for(r=0;r<o&&s[r]===d[r];r++);var w=o-r;for(c=1;c<=w&&s[o-c]===d[_-c];c++);return Dr=d.slice(r,1<c?1-c:void 0)}function ir(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function rr(){return!0}function vu(){return!1}function ln(r){function s(o,c,d,_,w){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?rr:vu,this.isPropagationStopped=vu,this}return R(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),s}var ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=ln(ut),Ua=R({},ut,{view:0,detail:0}),Vh=ln(Ua),jo,zo,sr,ja=R({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==sr&&(sr&&r.type==="mousemove"?(jo=r.screenX-sr.screenX,zo=r.screenY-sr.screenY):zo=jo=0,sr=r),jo)},movementY:function(r){return"movementY"in r?r.movementY:zo}}),_i=ln(ja),Uh=R({},ja,{dataTransfer:0}),am=ln(Uh),za=R({},Ua,{relatedTarget:0}),Fo=ln(za),Eu=R({},ut,{animationName:0,elapsedTime:0,pseudoElement:0}),Bo=ln(Eu),jh=R({},ut,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),qo=ln(jh),om=R({},ut,{data:0}),wu=ln(om),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Fh[r])?!!s[r]:!1}function Ba(){return Tu}var Bh=R({},Ua,{key:function(r){if(r.key){var s=Fa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ir(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(r){return r.type==="keypress"?ir(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ir(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ho=ln(Bh),qh=R({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bu=ln(qh),Or=R({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),Hh=ln(Or),Gh=R({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0}),$h=ln(Gh),Kh=R({},ja,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Go=ln(Kh),Ln=R({},ut,{newState:0,oldState:0}),Qh=ln(Ln),Wh=[9,13,27,32],ar=ii&&"CompositionEvent"in window,f=null;ii&&"documentMode"in document&&(f=document.documentMode);var g=ii&&"TextEvent"in window&&!f,E=ii&&(!ar||f&&8<f&&11>=f),N=" ",q=!1;function K(r,s){switch(r){case"keyup":return Wh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ie(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ye=!1;function Xt(r,s){switch(r){case"compositionend":return ie(s);case"keypress":return s.which!==32?null:(q=!0,N);case"textInput":return r=s.data,r===N&&q?null:r;default:return null}}function Xe(r,s){if(Ye)return r==="compositionend"||!ar&&K(r,s)?(r=yu(),Dr=Ds=nr=null,Ye=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!un[r.type]:s==="textarea"}function kr(r,s,o,c){Ir?Nr?Nr.push(c):Nr=[c]:Ir=c,s=kf(s,"onChange"),0<s.length&&(o=new Uo("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var vn=null,or=null;function Su(r){W1(r,0)}function Yh(r){var s=As(r);if(pu(s))return r}function S0(r,s){if(r==="change")return s}var A0=!1;if(ii){var lm;if(ii){var um="oninput"in document;if(!um){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),um=typeof C0.oninput=="function"}lm=um}else lm=!1;A0=lm&&(!document.documentMode||9<document.documentMode)}function R0(){vn&&(vn.detachEvent("onpropertychange",I0),or=vn=null)}function I0(r){if(r.propertyName==="value"&&Yh(or)){var s=[];kr(s,or,r,Vo(r)),Lh(Su,s)}}function a2(r,s,o){r==="focusin"?(R0(),vn=s,or=o,vn.attachEvent("onpropertychange",I0)):r==="focusout"&&R0()}function o2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Yh(or)}function l2(r,s){if(r==="click")return Yh(s)}function u2(r,s){if(r==="input"||r==="change")return Yh(s)}function c2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var ri=typeof Object.is=="function"?Object.is:c2;function Au(r,s){if(ri(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!lt.call(s,d)||!ri(r[d],s[d]))return!1}return!0}function N0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function x0(r,s){var o=N0(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=N0(o)}}function D0(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?D0(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function O0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Po(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Po(r.document)}return s}function cm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function h2(r,s){var o=O0(s);s=r.focusedElem;var c=r.selectionRange;if(o!==s&&s&&s.ownerDocument&&D0(s.ownerDocument.documentElement,s)){if(c!==null&&cm(s)){if(r=c.start,o=c.end,o===void 0&&(o=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(o,s.value.length);else if(o=(r=s.ownerDocument||document)&&r.defaultView||window,o.getSelection){o=o.getSelection();var d=s.textContent.length,_=Math.min(c.start,d);c=c.end===void 0?_:Math.min(c.end,d),!o.extend&&_>c&&(d=c,c=_,_=d),d=x0(s,_);var w=x0(s,c);d&&w&&(o.rangeCount!==1||o.anchorNode!==d.node||o.anchorOffset!==d.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),o.removeAllRanges(),_>c?(o.addRange(r),o.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),o.addRange(r)))}}for(r=[],o=s;o=o.parentNode;)o.nodeType===1&&r.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)o=r[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var f2=ii&&"documentMode"in document&&11>=document.documentMode,$o=null,hm=null,Cu=null,fm=!1;function k0(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fm||$o==null||$o!==Po(c)||(c=$o,"selectionStart"in c&&cm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Cu&&Au(Cu,c)||(Cu=c,c=kf(hm,"onSelect"),0<c.length&&(s=new Uo("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=$o)))}function qa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Ko={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},dm={},M0={};ii&&(M0=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Ha(r){if(dm[r])return dm[r];if(!Ko[r])return r;var s=Ko[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in M0)return dm[r]=s[o];return r}var P0=Ha("animationend"),L0=Ha("animationiteration"),V0=Ha("animationstart"),d2=Ha("transitionrun"),p2=Ha("transitionstart"),m2=Ha("transitioncancel"),U0=Ha("transitionend"),j0=new Map,z0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ki(r,s){j0.set(r,s),ni(s,[r])}var gi=[],Qo=0,pm=0;function Xh(){for(var r=Qo,s=pm=Qo=0;s<r;){var o=gi[s];gi[s++]=null;var c=gi[s];gi[s++]=null;var d=gi[s];gi[s++]=null;var _=gi[s];if(gi[s++]=null,c!==null&&d!==null){var w=c.pending;w===null?d.next=d:(d.next=w.next,w.next=d),c.pending=d}_!==0&&F0(o,d,_)}}function Zh(r,s,o,c){gi[Qo++]=r,gi[Qo++]=s,gi[Qo++]=o,gi[Qo++]=c,pm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function mm(r,s,o,c){return Zh(r,s,o,c),Jh(r)}function Os(r,s){return Zh(r,null,null,s),Jh(r)}function F0(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var d=!1,_=r.return;_!==null;)_.childLanes|=o,c=_.alternate,c!==null&&(c.childLanes|=o),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(d=!0)),r=_,_=_.return;d&&s!==null&&r.tag===3&&(_=r.stateNode,d=31-Mn(o),_=_.hiddenUpdates,r=_[d],r===null?_[d]=[s]:r.push(s),s.lane=o|536870912)}function Jh(r){if(50<Xu)throw Xu=0,w_=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Wo={},B0=new WeakMap;function yi(r,s){if(typeof r=="object"&&r!==null){var o=B0.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ae(s)},B0.set(r,s),s)}return{value:r,source:s,stack:ae(s)}}var Yo=[],Xo=0,ef=null,tf=0,vi=[],Ei=0,Ga=null,Mr=1,Pr="";function $a(r,s){Yo[Xo++]=tf,Yo[Xo++]=ef,ef=r,tf=s}function q0(r,s,o){vi[Ei++]=Mr,vi[Ei++]=Pr,vi[Ei++]=Ga,Ga=r;var c=Mr;r=Pr;var d=32-Mn(c)-1;c&=~(1<<d),o+=1;var _=32-Mn(s)+d;if(30<_){var w=d-d%5;_=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Mr=1<<32-Mn(s)+d|o<<d|c,Pr=_+r}else Mr=1<<_|o<<d|c,Pr=r}function _m(r){r.return!==null&&($a(r,1),q0(r,1,0))}function gm(r){for(;r===ef;)ef=Yo[--Xo],Yo[Xo]=null,tf=Yo[--Xo],Yo[Xo]=null;for(;r===Ga;)Ga=vi[--Ei],vi[Ei]=null,Pr=vi[--Ei],vi[Ei]=null,Mr=vi[--Ei],vi[Ei]=null}var Vn=null,En=null,rt=!1,Mi=null,lr=!1,ym=Error(i(519));function Ka(r){var s=Error(i(418,""));throw Nu(yi(s,r)),ym}function H0(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[on]=r,s[Yt]=c,o){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(o=0;o<Ju.length;o++)Qe(Ju[o],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),Ma(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ka(s);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),xs(s,c.value,c.defaultValue,c.children),ka(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||J1(s.textContent,o)?(c.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),c.onScroll!=null&&Qe("scroll",s),c.onScrollEnd!=null&&Qe("scrollend",s),c.onClick!=null&&(s.onclick=Mf),s=!0):s=!1,s||Ka(r)}function G0(r){for(Vn=r.return;Vn;)switch(Vn.tag){case 3:case 27:lr=!0;return;case 5:case 13:lr=!1;return;default:Vn=Vn.return}}function Ru(r){if(r!==Vn)return!1;if(!rt)return G0(r),rt=!0,!1;var s=!1,o;if((o=r.tag!==3&&r.tag!==27)&&((o=r.tag===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||U_(r.type,r.memoizedProps)),o=!o),o&&(s=!0),s&&En&&Ka(r),G0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){En=Li(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}En=null}}else En=Vn?Li(r.stateNode.nextSibling):null;return!0}function Iu(){En=Vn=null,rt=!1}function Nu(r){Mi===null?Mi=[r]:Mi.push(r)}var xu=Error(i(460)),$0=Error(i(474)),vm={then:function(){}};function K0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function nf(){}function Q0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(nf,nf),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===xu?Error(i(483)):r;default:if(typeof s.status=="string")s.then(nf,nf);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===xu?Error(i(483)):r}throw Du=s,xu}}var Du=null;function W0(){if(Du===null)throw Error(i(459));var r=Du;return Du=null,r}var Zo=null,Ou=0;function rf(r){var s=Ou;return Ou+=1,Zo===null&&(Zo=[]),Q0(Zo,r,s)}function ku(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function sf(r,s){throw s.$$typeof===l?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Y0(r){var s=r._init;return s(r._payload)}function X0(r){function s(B,U){if(r){var G=B.deletions;G===null?(B.deletions=[U],B.flags|=16):G.push(U)}}function o(B,U){if(!r)return null;for(;U!==null;)s(B,U),U=U.sibling;return null}function c(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function d(B,U){return B=Hs(B,U),B.index=0,B.sibling=null,B}function _(B,U,G){return B.index=G,r?(G=B.alternate,G!==null?(G=G.index,G<U?(B.flags|=33554434,U):G):(B.flags|=33554434,U)):(B.flags|=1048576,U)}function w(B){return r&&B.alternate===null&&(B.flags|=33554434),B}function C(B,U,G,X){return U===null||U.tag!==6?(U=d_(G,B.mode,X),U.return=B,U):(U=d(U,G),U.return=B,U)}function k(B,U,G,X){var de=G.type;return de===p?Y(B,U,G.props.children,X,G.key):U!==null&&(U.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&Y0(de)===U.type)?(U=d(U,G.props),ku(U,G),U.return=B,U):(U=bf(G.type,G.key,G.props,null,B.mode,X),ku(U,G),U.return=B,U)}function j(B,U,G,X){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=p_(G,B.mode,X),U.return=B,U):(U=d(U,G.children||[]),U.return=B,U)}function Y(B,U,G,X,de){return U===null||U.tag!==7?(U=io(G,B.mode,X,de),U.return=B,U):(U=d(U,G),U.return=B,U)}function ee(B,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=d_(""+U,B.mode,G),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case u:return G=bf(U.type,U.key,U.props,null,B.mode,G),ku(G,U),G.return=B,G;case h:return U=p_(U,B.mode,G),U.return=B,U;case Q:var X=U._init;return U=X(U._payload),ee(B,U,G)}if(oe(U)||ne(U))return U=io(U,B.mode,G,null),U.return=B,U;if(typeof U.then=="function")return ee(B,rf(U),G);if(U.$$typeof===I)return ee(B,Ef(B,U),G);sf(B,U)}return null}function $(B,U,G,X){var de=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return de!==null?null:C(B,U,""+G,X);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case u:return G.key===de?k(B,U,G,X):null;case h:return G.key===de?j(B,U,G,X):null;case Q:return de=G._init,G=de(G._payload),$(B,U,G,X)}if(oe(G)||ne(G))return de!==null?null:Y(B,U,G,X,null);if(typeof G.then=="function")return $(B,U,rf(G),X);if(G.$$typeof===I)return $(B,U,Ef(B,G),X);sf(B,G)}return null}function W(B,U,G,X,de){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return B=B.get(G)||null,C(U,B,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case u:return B=B.get(X.key===null?G:X.key)||null,k(U,B,X,de);case h:return B=B.get(X.key===null?G:X.key)||null,j(U,B,X,de);case Q:var Ue=X._init;return X=Ue(X._payload),W(B,U,G,X,de)}if(oe(X)||ne(X))return B=B.get(G)||null,Y(U,B,X,de,null);if(typeof X.then=="function")return W(B,U,G,rf(X),de);if(X.$$typeof===I)return W(B,U,G,Ef(U,X),de);sf(U,X)}return null}function me(B,U,G,X){for(var de=null,Ue=null,_e=U,Te=U=0,fn=null;_e!==null&&Te<G.length;Te++){_e.index>Te?(fn=_e,_e=null):fn=_e.sibling;var st=$(B,_e,G[Te],X);if(st===null){_e===null&&(_e=fn);break}r&&_e&&st.alternate===null&&s(B,_e),U=_(st,U,Te),Ue===null?de=st:Ue.sibling=st,Ue=st,_e=fn}if(Te===G.length)return o(B,_e),rt&&$a(B,Te),de;if(_e===null){for(;Te<G.length;Te++)_e=ee(B,G[Te],X),_e!==null&&(U=_(_e,U,Te),Ue===null?de=_e:Ue.sibling=_e,Ue=_e);return rt&&$a(B,Te),de}for(_e=c(_e);Te<G.length;Te++)fn=W(_e,B,Te,G[Te],X),fn!==null&&(r&&fn.alternate!==null&&_e.delete(fn.key===null?Te:fn.key),U=_(fn,U,Te),Ue===null?de=fn:Ue.sibling=fn,Ue=fn);return r&&_e.forEach(function(Xs){return s(B,Xs)}),rt&&$a(B,Te),de}function De(B,U,G,X){if(G==null)throw Error(i(151));for(var de=null,Ue=null,_e=U,Te=U=0,fn=null,st=G.next();_e!==null&&!st.done;Te++,st=G.next()){_e.index>Te?(fn=_e,_e=null):fn=_e.sibling;var Xs=$(B,_e,st.value,X);if(Xs===null){_e===null&&(_e=fn);break}r&&_e&&Xs.alternate===null&&s(B,_e),U=_(Xs,U,Te),Ue===null?de=Xs:Ue.sibling=Xs,Ue=Xs,_e=fn}if(st.done)return o(B,_e),rt&&$a(B,Te),de;if(_e===null){for(;!st.done;Te++,st=G.next())st=ee(B,st.value,X),st!==null&&(U=_(st,U,Te),Ue===null?de=st:Ue.sibling=st,Ue=st);return rt&&$a(B,Te),de}for(_e=c(_e);!st.done;Te++,st=G.next())st=W(_e,B,Te,st.value,X),st!==null&&(r&&st.alternate!==null&&_e.delete(st.key===null?Te:st.key),U=_(st,U,Te),Ue===null?de=st:Ue.sibling=st,Ue=st);return r&&_e.forEach(function(NN){return s(B,NN)}),rt&&$a(B,Te),de}function Mt(B,U,G,X){if(typeof G=="object"&&G!==null&&G.type===p&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case u:e:{for(var de=G.key;U!==null;){if(U.key===de){if(de=G.type,de===p){if(U.tag===7){o(B,U.sibling),X=d(U,G.props.children),X.return=B,B=X;break e}}else if(U.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&Y0(de)===U.type){o(B,U.sibling),X=d(U,G.props),ku(X,G),X.return=B,B=X;break e}o(B,U);break}else s(B,U);U=U.sibling}G.type===p?(X=io(G.props.children,B.mode,X,G.key),X.return=B,B=X):(X=bf(G.type,G.key,G.props,null,B.mode,X),ku(X,G),X.return=B,B=X)}return w(B);case h:e:{for(de=G.key;U!==null;){if(U.key===de)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){o(B,U.sibling),X=d(U,G.children||[]),X.return=B,B=X;break e}else{o(B,U);break}else s(B,U);U=U.sibling}X=p_(G,B.mode,X),X.return=B,B=X}return w(B);case Q:return de=G._init,G=de(G._payload),Mt(B,U,G,X)}if(oe(G))return me(B,U,G,X);if(ne(G)){if(de=ne(G),typeof de!="function")throw Error(i(150));return G=de.call(G),De(B,U,G,X)}if(typeof G.then=="function")return Mt(B,U,rf(G),X);if(G.$$typeof===I)return Mt(B,U,Ef(B,G),X);sf(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(o(B,U.sibling),X=d(U,G),X.return=B,B=X):(o(B,U),X=d_(G,B.mode,X),X.return=B,B=X),w(B)):o(B,U)}return function(B,U,G,X){try{Ou=0;var de=Mt(B,U,G,X);return Zo=null,de}catch(_e){if(_e===xu)throw _e;var Ue=Si(29,_e,null,B.mode);return Ue.lanes=X,Ue.return=B,Ue}finally{}}}var Qa=X0(!0),Z0=X0(!1),Jo=Ce(null),af=Ce(0);function J0(r,s){r=$r,we(af,r),we(Jo,s),$r=r|s.baseLanes}function Em(){we(af,$r),we(Jo,Jo.current)}function wm(){$r=af.current,Ee(Jo),Ee(af)}var wi=Ce(null),ur=null;function ks(r){var s=r.alternate;we(Jt,Jt.current&1),we(wi,r),ur===null&&(s===null||Jo.current!==null||s.memoizedState!==null)&&(ur=r)}function eE(r){if(r.tag===22){if(we(Jt,Jt.current),we(wi,r),ur===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(ur=r)}}else Ms()}function Ms(){we(Jt,Jt.current),we(wi,wi.current)}function Lr(r){Ee(wi),ur===r&&(ur=null),Ee(Jt)}var Jt=Ce(0);function of(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},g2=n.unstable_scheduleCallback,y2=n.unstable_NormalPriority,en={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new _2,data:new Map,refCount:0}}function Mu(r){r.refCount--,r.refCount===0&&g2(y2,function(){r.controller.abort()})}var Pu=null,bm=0,el=0,tl=null;function v2(r,s){if(Pu===null){var o=Pu=[];bm=0,el=N_(),tl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return bm++,s.then(tE,tE),s}function tE(){if(--bm===0&&Pu!==null){tl!==null&&(tl.status="fulfilled");var r=Pu;Pu=null,el=0,tl=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function E2(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var nE=T.S;T.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&v2(r,s),nE!==null&&nE(r,s)};var Wa=Ce(null);function Sm(){var r=Wa.current;return r!==null?r:yt.pooledCache}function lf(r,s){s===null?we(Wa,Wa.current):we(Wa,s.pool)}function iE(){var r=Sm();return r===null?null:{parent:en._currentValue,pool:r}}var Ps=0,Le=null,dt=null,Ft=null,uf=!1,nl=!1,Ya=!1,cf=0,Lu=0,il=null,w2=0;function Ut(){throw Error(i(321))}function Am(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!ri(r[o],s[o]))return!1;return!0}function Cm(r,s,o,c,d,_){return Ps=_,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,T.H=r===null||r.memoizedState===null?Xa:Ls,Ya=!1,_=o(c,d),Ya=!1,nl&&(_=sE(s,o,c,d)),rE(r),_}function rE(r){T.H=cr;var s=dt!==null&&dt.next!==null;if(Ps=0,Ft=dt=Le=null,uf=!1,Lu=0,il=null,s)throw Error(i(300));r===null||cn||(r=r.dependencies,r!==null&&vf(r)&&(cn=!0))}function sE(r,s,o,c){Le=r;var d=0;do{if(nl&&(il=null),Lu=0,nl=!1,25<=d)throw Error(i(301));if(d+=1,Ft=dt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}T.H=Za,_=s(o,c)}while(nl);return _}function T2(){var r=T.H,s=r.useState()[0];return s=typeof s.then=="function"?Vu(s):s,r=r.useState()[0],(dt!==null?dt.memoizedState:null)!==r&&(Le.flags|=1024),s}function Rm(){var r=cf!==0;return cf=0,r}function Im(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Nm(r){if(uf){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}uf=!1}Ps=0,Ft=dt=Le=null,nl=!1,Lu=cf=0,il=null}function Kn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Le.memoizedState=Ft=r:Ft=Ft.next=r,Ft}function Bt(){if(dt===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=dt.next;var s=Ft===null?Le.memoizedState:Ft.next;if(s!==null)Ft=s,dt=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));dt=r,r={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Ft===null?Le.memoizedState=Ft=r:Ft=Ft.next=r}return Ft}var hf;hf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Vu(r){var s=Lu;return Lu+=1,il===null&&(il=[]),r=Q0(il,r,s),s=Le,(Ft===null?s.memoizedState:Ft.next)===null&&(s=s.alternate,T.H=s===null||s.memoizedState===null?Xa:Ls),r}function ff(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Vu(r);if(r.$$typeof===I)return Rn(r)}throw Error(i(438,String(r)))}function xm(r){var s=null,o=Le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=hf(),Le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=te;return s.index++,o}function Vr(r,s){return typeof s=="function"?s(r):s}function df(r){var s=Bt();return Dm(s,dt,r)}function Dm(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=r.baseQueue,_=c.pending;if(_!==null){if(d!==null){var w=d.next;d.next=_.next,_.next=w}s.baseQueue=d=_,c.pending=null}if(_=r.baseState,d===null)r.memoizedState=_;else{s=d.next;var C=w=null,k=null,j=s,Y=!1;do{var ee=j.lane&-536870913;if(ee!==j.lane?(Ze&ee)===ee:(Ps&ee)===ee){var $=j.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),ee===el&&(Y=!0);else if((Ps&$)===$){j=j.next,$===el&&(Y=!0);continue}else ee={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(C=k=ee,w=_):k=k.next=ee,Le.lanes|=$,Gs|=$;ee=j.action,Ya&&o(_,ee),_=j.hasEagerState?j.eagerState:o(_,ee)}else $={lane:ee,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(C=k=$,w=_):k=k.next=$,Le.lanes|=ee,Gs|=ee;j=j.next}while(j!==null&&j!==s);if(k===null?w=_:k.next=C,!ri(_,r.memoizedState)&&(cn=!0,Y&&(o=tl,o!==null)))throw o;r.memoizedState=_,r.baseState=w,r.baseQueue=k,c.lastRenderedState=_}return d===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Om(r){var s=Bt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,d=o.pending,_=s.memoizedState;if(d!==null){o.pending=null;var w=d=d.next;do _=r(_,w.action),w=w.next;while(w!==d);ri(_,s.memoizedState)||(cn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),o.lastRenderedState=_}return[_,c]}function aE(r,s,o){var c=Le,d=Bt(),_=rt;if(_){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!ri((dt||d).memoizedState,o);if(w&&(d.memoizedState=o,cn=!0),d=d.queue,Pm(uE.bind(null,c,d,r),[r]),d.getSnapshot!==s||w||Ft!==null&&Ft.memoizedState.tag&1){if(c.flags|=2048,rl(9,lE.bind(null,c,d,o,s),{destroy:void 0},null),yt===null)throw Error(i(349));_||(Ps&60)!==0||oE(c,s,o)}return o}function oE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Le.updateQueue,s===null?(s=hf(),Le.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function lE(r,s,o,c){s.value=o,s.getSnapshot=c,cE(s)&&hE(r)}function uE(r,s,o){return o(function(){cE(s)&&hE(r)})}function cE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!ri(r,o)}catch{return!0}}function hE(r){var s=Os(r,2);s!==null&&Un(s,r,2)}function km(r){var s=Kn();if(typeof r=="function"){var o=r;if(r=o(),Ya){Xi(!0);try{o()}finally{Xi(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:r},s}function fE(r,s,o,c){return r.baseState=o,Dm(r,dt,typeof c=="function"?c:Vr)}function b2(r,s,o,c,d){if(_f(r))throw Error(i(485));if(r=s.action,r!==null){var _={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};T.T!==null?o(!0):_.isTransition=!1,c(_),o=s.pending,o===null?(_.next=s.pending=_,dE(s,_)):(_.next=o.next,s.pending=o.next=_)}}function dE(r,s){var o=s.action,c=s.payload,d=r.state;if(s.isTransition){var _=T.T,w={};T.T=w;try{var C=o(d,c),k=T.S;k!==null&&k(w,C),pE(r,s,C)}catch(j){Mm(r,s,j)}finally{T.T=_}}else try{_=o(d,c),pE(r,s,_)}catch(j){Mm(r,s,j)}}function pE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){mE(r,s,c)},function(c){return Mm(r,s,c)}):mE(r,s,o)}function mE(r,s,o){s.status="fulfilled",s.value=o,_E(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,dE(r,o)))}function Mm(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,_E(s),s=s.next;while(s!==c)}r.action=null}function _E(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function gE(r,s){return s}function yE(r,s){if(rt){var o=yt.formState;if(o!==null){e:{var c=Le;if(rt){if(En){t:{for(var d=En,_=lr;d.nodeType!==8;){if(!_){d=null;break t}if(d=Li(d.nextSibling),d===null){d=null;break t}}_=d.data,d=_==="F!"||_==="F"?d:null}if(d){En=Li(d.nextSibling),c=d.data==="F!";break e}}Ka(c)}c=!1}c&&(s=o[0])}}return o=Kn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gE,lastRenderedState:s},o.queue=c,o=LE.bind(null,Le,c),c.dispatch=o,c=km(!1),_=zm.bind(null,Le,!1,c.queue),c=Kn(),d={state:s,dispatch:null,action:r,pending:null},c.queue=d,o=b2.bind(null,Le,d,_,o),d.dispatch=o,c.memoizedState=r,[s,o,!1]}function vE(r){var s=Bt();return EE(s,dt,r)}function EE(r,s,o){s=Dm(r,s,gE)[0],r=df(Vr)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Vu(s):s;var c=Bt(),d=c.queue,_=d.dispatch;return o!==c.memoizedState&&(Le.flags|=2048,rl(9,S2.bind(null,d,o),{destroy:void 0},null)),[s,_,r]}function S2(r,s){r.action=s}function wE(r){var s=Bt(),o=dt;if(o!==null)return EE(s,o,r);Bt(),s=s.memoizedState,o=Bt();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function rl(r,s,o,c){return r={tag:r,create:s,inst:o,deps:c,next:null},s=Le.updateQueue,s===null&&(s=hf(),Le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function TE(){return Bt().memoizedState}function pf(r,s,o,c){var d=Kn();Le.flags|=r,d.memoizedState=rl(1|s,o,{destroy:void 0},c===void 0?null:c)}function mf(r,s,o,c){var d=Bt();c=c===void 0?null:c;var _=d.memoizedState.inst;dt!==null&&c!==null&&Am(c,dt.memoizedState.deps)?d.memoizedState=rl(s,o,_,c):(Le.flags|=r,d.memoizedState=rl(1|s,o,_,c))}function bE(r,s){pf(8390656,8,r,s)}function Pm(r,s){mf(2048,8,r,s)}function SE(r,s){return mf(4,2,r,s)}function AE(r,s){return mf(4,4,r,s)}function CE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function RE(r,s,o){o=o!=null?o.concat([r]):null,mf(4,4,CE.bind(null,s,r),o)}function Lm(){}function IE(r,s){var o=Bt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Am(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function NE(r,s){var o=Bt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Am(s,c[1]))return c[0];if(c=r(),Ya){Xi(!0);try{r()}finally{Xi(!1)}}return o.memoizedState=[c,s],c}function Vm(r,s,o){return o===void 0||(Ps&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=D1(),Le.lanes|=r,Gs|=r,o)}function xE(r,s,o,c){return ri(o,s)?o:Jo.current!==null?(r=Vm(r,o,c),ri(r,s)||(cn=!0),r):(Ps&42)===0?(cn=!0,r.memoizedState=o):(r=D1(),Le.lanes|=r,Gs|=r,s)}function DE(r,s,o,c,d){var _=ge.p;ge.p=_!==0&&8>_?_:8;var w=T.T,C={};T.T=C,zm(r,!1,s,o);try{var k=d(),j=T.S;if(j!==null&&j(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Y=E2(k,c);Uu(r,s,Y,li(r))}else Uu(r,s,c,li(r))}catch(ee){Uu(r,s,{then:function(){},status:"rejected",reason:ee},li())}finally{ge.p=_,T.T=w}}function A2(){}function Um(r,s,o,c){if(r.tag!==5)throw Error(i(476));var d=OE(r).queue;DE(r,d,s,Pe,o===null?A2:function(){return kE(r),o(c)})}function OE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:Pe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function kE(r){var s=OE(r).next.queue;Uu(r,s,{},li())}function jm(){return Rn(rc)}function ME(){return Bt().memoizedState}function PE(){return Bt().memoizedState}function C2(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=li();r=js(o);var c=zs(s,r,o);c!==null&&(Un(c,s,o),Fu(c,s,o)),s={cache:Tm()},r.payload=s;return}s=s.return}}function R2(r,s,o){var c=li();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},_f(r)?VE(s,o):(o=mm(r,s,o,c),o!==null&&(Un(o,r,c),UE(o,s,c)))}function LE(r,s,o){var c=li();Uu(r,s,o,c)}function Uu(r,s,o,c){var d={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(_f(r))VE(s,d);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var w=s.lastRenderedState,C=_(w,o);if(d.hasEagerState=!0,d.eagerState=C,ri(C,w))return Zh(r,s,d,0),yt===null&&Xh(),!1}catch{}finally{}if(o=mm(r,s,d,c),o!==null)return Un(o,r,c),UE(o,s,c),!0}return!1}function zm(r,s,o,c){if(c={lane:2,revertLane:N_(),action:c,hasEagerState:!1,eagerState:null,next:null},_f(r)){if(s)throw Error(i(479))}else s=mm(r,o,c,2),s!==null&&Un(s,r,2)}function _f(r){var s=r.alternate;return r===Le||s!==null&&s===Le}function VE(r,s){nl=uf=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function UE(r,s,o){if((o&4194176)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,Ts(r,o)}}var cr={readContext:Rn,use:ff,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut};cr.useCacheRefresh=Ut,cr.useMemoCache=Ut,cr.useHostTransitionStatus=Ut,cr.useFormState=Ut,cr.useActionState=Ut,cr.useOptimistic=Ut;var Xa={readContext:Rn,use:ff,useCallback:function(r,s){return Kn().memoizedState=[r,s===void 0?null:s],r},useContext:Rn,useEffect:bE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,pf(4194308,4,CE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return pf(4194308,4,r,s)},useInsertionEffect:function(r,s){pf(4,2,r,s)},useMemo:function(r,s){var o=Kn();s=s===void 0?null:s;var c=r();if(Ya){Xi(!0);try{r()}finally{Xi(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=Kn();if(o!==void 0){var d=o(s);if(Ya){Xi(!0);try{o(s)}finally{Xi(!1)}}}else d=s;return c.memoizedState=c.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},c.queue=r,r=r.dispatch=R2.bind(null,Le,r),[c.memoizedState,r]},useRef:function(r){var s=Kn();return r={current:r},s.memoizedState=r},useState:function(r){r=km(r);var s=r.queue,o=LE.bind(null,Le,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Lm,useDeferredValue:function(r,s){var o=Kn();return Vm(o,r,s)},useTransition:function(){var r=km(!1);return r=DE.bind(null,Le,r.queue,!0,!1),Kn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=Le,d=Kn();if(rt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(Ze&60)!==0||oE(c,s,o)}d.memoizedState=o;var _={value:o,getSnapshot:s};return d.queue=_,bE(uE.bind(null,c,_,r),[r]),c.flags|=2048,rl(9,lE.bind(null,c,_,o,s),{destroy:void 0},null),o},useId:function(){var r=Kn(),s=yt.identifierPrefix;if(rt){var o=Pr,c=Mr;o=(c&~(1<<32-Mn(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=cf++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=w2++,s=":"+s+"r"+o.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return Kn().memoizedState=C2.bind(null,Le)}};Xa.useMemoCache=xm,Xa.useHostTransitionStatus=jm,Xa.useFormState=yE,Xa.useActionState=yE,Xa.useOptimistic=function(r){var s=Kn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=zm.bind(null,Le,!0,o),o.dispatch=s,[r,s]};var Ls={readContext:Rn,use:ff,useCallback:IE,useContext:Rn,useEffect:Pm,useImperativeHandle:RE,useInsertionEffect:SE,useLayoutEffect:AE,useMemo:NE,useReducer:df,useRef:TE,useState:function(){return df(Vr)},useDebugValue:Lm,useDeferredValue:function(r,s){var o=Bt();return xE(o,dt.memoizedState,r,s)},useTransition:function(){var r=df(Vr)[0],s=Bt().memoizedState;return[typeof r=="boolean"?r:Vu(r),s]},useSyncExternalStore:aE,useId:ME};Ls.useCacheRefresh=PE,Ls.useMemoCache=xm,Ls.useHostTransitionStatus=jm,Ls.useFormState=vE,Ls.useActionState=vE,Ls.useOptimistic=function(r,s){var o=Bt();return fE(o,dt,r,s)};var Za={readContext:Rn,use:ff,useCallback:IE,useContext:Rn,useEffect:Pm,useImperativeHandle:RE,useInsertionEffect:SE,useLayoutEffect:AE,useMemo:NE,useReducer:Om,useRef:TE,useState:function(){return Om(Vr)},useDebugValue:Lm,useDeferredValue:function(r,s){var o=Bt();return dt===null?Vm(o,r,s):xE(o,dt.memoizedState,r,s)},useTransition:function(){var r=Om(Vr)[0],s=Bt().memoizedState;return[typeof r=="boolean"?r:Vu(r),s]},useSyncExternalStore:aE,useId:ME};Za.useCacheRefresh=PE,Za.useMemoCache=xm,Za.useHostTransitionStatus=jm,Za.useFormState=wE,Za.useActionState=wE,Za.useOptimistic=function(r,s){var o=Bt();return dt!==null?fE(o,dt,r,s):(o.baseState=r,[r,o.queue.dispatch])};function Fm(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:R({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Bm={isMounted:function(r){return(r=r._reactInternals)?ue(r)===r:!1},enqueueSetState:function(r,s,o){r=r._reactInternals;var c=li(),d=js(c);d.payload=s,o!=null&&(d.callback=o),s=zs(r,d,c),s!==null&&(Un(s,r,c),Fu(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=li(),d=js(c);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=zs(r,d,c),s!==null&&(Un(s,r,c),Fu(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=li(),c=js(o);c.tag=2,s!=null&&(c.callback=s),s=zs(r,c,o),s!==null&&(Un(s,r,o),Fu(s,r,o))}};function jE(r,s,o,c,d,_,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,w):s.prototype&&s.prototype.isPureReactComponent?!Au(o,c)||!Au(d,_):!0}function zE(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&Bm.enqueueReplaceState(s,s.state,null)}function Ja(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=R({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}var gf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function FE(r){gf(r)}function BE(r){console.error(r)}function qE(r){gf(r)}function yf(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function HE(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function qm(r,s,o){return o=js(o),o.tag=3,o.payload={element:null},o.callback=function(){yf(r,s)},o}function GE(r){return r=js(r),r.tag=3,r}function $E(r,s,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var _=c.value;r.payload=function(){return d(_)},r.callback=function(){HE(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){HE(s,o,c),typeof d!="function"&&($s===null?$s=new Set([this]):$s.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function I2(r,s,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&zu(s,o,d,!0),o=wi.current,o!==null){switch(o.tag){case 13:return ur===null?S_():o.alternate===null&&kt===0&&(kt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===vm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),C_(r,c,d)),!1;case 22:return o.flags|=65536,c===vm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),C_(r,c,d)),!1}throw Error(i(435,o.tag))}return C_(r,c,d),S_(),!1}if(rt)return s=wi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==ym&&(r=Error(i(422),{cause:c}),Nu(yi(r,o)))):(c!==ym&&(s=Error(i(423),{cause:c}),Nu(yi(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,c=yi(c,o),d=qm(r.stateNode,c,d),r_(r,d),kt!==4&&(kt=2)),!1;var _=Error(i(520),{cause:c});if(_=yi(_,o),Wu===null?Wu=[_]:Wu.push(_),kt!==4&&(kt=2),s===null)return!0;c=yi(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=qm(o.stateNode,c,r),r_(o,r),!1;case 1:if(s=o.type,_=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($s===null||!$s.has(_))))return o.flags|=65536,d&=-d,o.lanes|=d,d=GE(d),$E(d,r,o,c),r_(o,d),!1}o=o.return}while(o!==null);return!1}var KE=Error(i(461)),cn=!1;function wn(r,s,o,c){s.child=r===null?Z0(s,null,o,c):Qa(s,r.child,o,c)}function QE(r,s,o,c,d){o=o.render;var _=s.ref;if("ref"in c){var w={};for(var C in c)C!=="ref"&&(w[C]=c[C])}else w=c;return to(s),c=Cm(r,s,o,w,_,d),C=Rm(),r!==null&&!cn?(Im(r,s,d),Ur(r,s,d)):(rt&&C&&_m(s),s.flags|=1,wn(r,s,c,d),s.child)}function WE(r,s,o,c,d){if(r===null){var _=o.type;return typeof _=="function"&&!f_(_)&&_.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=_,YE(r,s,_,c,d)):(r=bf(o.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(_=r.child,!Zm(r,d)){var w=_.memoizedProps;if(o=o.compare,o=o!==null?o:Au,o(w,c)&&r.ref===s.ref)return Ur(r,s,d)}return s.flags|=1,r=Hs(_,c),r.ref=s.ref,r.return=s,s.child=r}function YE(r,s,o,c,d){if(r!==null){var _=r.memoizedProps;if(Au(_,c)&&r.ref===s.ref)if(cn=!1,s.pendingProps=c=_,Zm(r,d))(r.flags&131072)!==0&&(cn=!0);else return s.lanes=r.lanes,Ur(r,s,d)}return Hm(r,s,o,c,d)}function XE(r,s,o){var c=s.pendingProps,d=c.children,_=(s.stateNode._pendingVisibility&2)!==0,w=r!==null?r.memoizedState:null;if(ju(r,s),c.mode==="hidden"||_){if((s.flags&128)!==0){if(c=w!==null?w.baseLanes|o:o,r!==null){for(d=s.child=r.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;s.childLanes=_&~c}else s.childLanes=0,s.child=null;return ZE(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&lf(s,w!==null?w.cachePool:null),w!==null?J0(s,w):Em(),eE(s);else return s.lanes=s.childLanes=536870912,ZE(r,s,w!==null?w.baseLanes|o:o,o)}else w!==null?(lf(s,w.cachePool),J0(s,w),Ms(),s.memoizedState=null):(r!==null&&lf(s,null),Em(),Ms());return wn(r,s,d,o),s.child}function ZE(r,s,o,c){var d=Sm();return d=d===null?null:{parent:en._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},r!==null&&lf(s,null),Em(),eE(s),r!==null&&zu(r,s,c,!0),null}function ju(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=2097664)}}function Hm(r,s,o,c,d){return to(s),o=Cm(r,s,o,c,void 0,d),c=Rm(),r!==null&&!cn?(Im(r,s,d),Ur(r,s,d)):(rt&&c&&_m(s),s.flags|=1,wn(r,s,o,d),s.child)}function JE(r,s,o,c,d,_){return to(s),s.updateQueue=null,o=sE(s,c,o,d),rE(r),c=Rm(),r!==null&&!cn?(Im(r,s,_),Ur(r,s,_)):(rt&&c&&_m(s),s.flags|=1,wn(r,s,o,_),s.child)}function e1(r,s,o,c,d){if(to(s),s.stateNode===null){var _=Wo,w=o.contextType;typeof w=="object"&&w!==null&&(_=Rn(w)),_=new o(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Bm,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},n_(s),w=o.contextType,_.context=typeof w=="object"&&w!==null?Rn(w):Wo,_.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Fm(s,o,w,c),_.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&Bm.enqueueReplaceState(_,_.state,null),qu(s,c,_,d),Bu(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){_=s.stateNode;var C=s.memoizedProps,k=Ja(o,C);_.props=k;var j=_.context,Y=o.contextType;w=Wo,typeof Y=="object"&&Y!==null&&(w=Rn(Y));var ee=o.getDerivedStateFromProps;Y=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,Y||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||j!==w)&&zE(s,_,c,w),Us=!1;var $=s.memoizedState;_.state=$,qu(s,c,_,d),Bu(),j=s.memoizedState,C||$!==j||Us?(typeof ee=="function"&&(Fm(s,o,ee,c),j=s.memoizedState),(k=Us||jE(s,o,k,c,$,j,w))?(Y||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),_.props=c,_.state=j,_.context=w,c=k):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,i_(r,s),w=s.memoizedProps,Y=Ja(o,w),_.props=Y,ee=s.pendingProps,$=_.context,j=o.contextType,k=Wo,typeof j=="object"&&j!==null&&(k=Rn(j)),C=o.getDerivedStateFromProps,(j=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ee||$!==k)&&zE(s,_,c,k),Us=!1,$=s.memoizedState,_.state=$,qu(s,c,_,d),Bu();var W=s.memoizedState;w!==ee||$!==W||Us||r!==null&&r.dependencies!==null&&vf(r.dependencies)?(typeof C=="function"&&(Fm(s,o,C,c),W=s.memoizedState),(Y=Us||jE(s,o,Y,c,$,W,k)||r!==null&&r.dependencies!==null&&vf(r.dependencies))?(j||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,W,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,W,k)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),_.props=c,_.state=W,_.context=k,c=Y):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),c=!1)}return _=c,ju(r,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,r!==null&&c?(s.child=Qa(s,r.child,null,d),s.child=Qa(s,null,o,d)):wn(r,s,o,d),s.memoizedState=_.state,r=s.child):r=Ur(r,s,d),r}function t1(r,s,o,c){return Iu(),s.flags|=256,wn(r,s,o,c),s.child}var Gm={dehydrated:null,treeContext:null,retryLane:0};function $m(r){return{baseLanes:r,cachePool:iE()}}function Km(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Ai),r}function n1(r,s,o){var c=s.pendingProps,d=!1,_=(s.flags&128)!==0,w;if((w=_)||(w=r!==null&&r.memoizedState===null?!1:(Jt.current&2)!==0),w&&(d=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(rt){if(d?ks(s):Ms(),rt){var C=En,k;if(k=C){e:{for(k=C,C=lr;k.nodeType!==8;){if(!C){C=null;break e}if(k=Li(k.nextSibling),k===null){C=null;break e}}C=k}C!==null?(s.memoizedState={dehydrated:C,treeContext:Ga!==null?{id:Mr,overflow:Pr}:null,retryLane:536870912},k=Si(18,null,null,0),k.stateNode=C,k.return=s,s.child=k,Vn=s,En=null,k=!0):k=!1}k||Ka(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return C.data==="$!"?s.lanes=16:s.lanes=536870912,null;Lr(s)}return C=c.children,c=c.fallback,d?(Ms(),d=s.mode,C=Wm({mode:"hidden",children:C},d),c=io(c,d,o,null),C.return=s,c.return=s,C.sibling=c,s.child=C,d=s.child,d.memoizedState=$m(o),d.childLanes=Km(r,w,o),s.memoizedState=Gm,c):(ks(s),Qm(s,C))}if(k=r.memoizedState,k!==null&&(C=k.dehydrated,C!==null)){if(_)s.flags&256?(ks(s),s.flags&=-257,s=Ym(r,s,o)):s.memoizedState!==null?(Ms(),s.child=r.child,s.flags|=128,s=null):(Ms(),d=c.fallback,C=s.mode,c=Wm({mode:"visible",children:c.children},C),d=io(d,C,o,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Qa(s,r.child,null,o),c=s.child,c.memoizedState=$m(o),c.childLanes=Km(r,w,o),s.memoizedState=Gm,s=d);else if(ks(s),C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var j=w.dgst;w=j,c=Error(i(419)),c.stack="",c.digest=w,Nu({value:c,source:null,stack:null}),s=Ym(r,s,o)}else if(cn||zu(r,s,o,!1),w=(o&r.childLanes)!==0,cn||w){if(w=yt,w!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==k.retryLane)throw k.retryLane=c,Os(r,c),Un(w,r,c),KE}C.data==="$?"||S_(),s=Ym(r,s,o)}else C.data==="$?"?(s.flags|=128,s.child=r.child,s=q2.bind(null,r),C._reactRetry=s,s=null):(r=k.treeContext,En=Li(C.nextSibling),Vn=s,rt=!0,Mi=null,lr=!1,r!==null&&(vi[Ei++]=Mr,vi[Ei++]=Pr,vi[Ei++]=Ga,Mr=r.id,Pr=r.overflow,Ga=s),s=Qm(s,c.children),s.flags|=4096);return s}return d?(Ms(),d=c.fallback,C=s.mode,k=r.child,j=k.sibling,c=Hs(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&31457280,j!==null?d=Hs(j,d):(d=io(d,C,o,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,C=r.child.memoizedState,C===null?C=$m(o):(k=C.cachePool,k!==null?(j=en._currentValue,k=k.parent!==j?{parent:j,pool:j}:k):k=iE(),C={baseLanes:C.baseLanes|o,cachePool:k}),d.memoizedState=C,d.childLanes=Km(r,w,o),s.memoizedState=Gm,c):(ks(s),o=r.child,r=o.sibling,o=Hs(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function Qm(r,s){return s=Wm({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Wm(r,s){return I1(r,s,0,null)}function Ym(r,s,o){return Qa(s,r.child,null,o),r=Qm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function i1(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),e_(r.return,s,o)}function Xm(r,s,o,c,d){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=d)}function r1(r,s,o){var c=s.pendingProps,d=c.revealOrder,_=c.tail;if(wn(r,s,c.children,o),c=Jt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&i1(r,o,s);else if(r.tag===19)i1(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(we(Jt,c),d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&of(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Xm(s,!1,d,o,_);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&of(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Xm(s,!0,o,null,_);break;case"together":Xm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ur(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Gs|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(zu(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Hs(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Hs(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Zm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&vf(r)))}function N2(r,s,o){switch(s.tag){case 3:Ke(s,s.stateNode.containerInfo),Vs(s,en,r.memoizedState.cache),Iu();break;case 27:case 5:yn(s);break;case 4:Ke(s,s.stateNode.containerInfo);break;case 10:Vs(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ks(s),s.flags|=128,null):(o&s.child.childLanes)!==0?n1(r,s,o):(ks(s),r=Ur(r,s,o),r!==null?r.sibling:null);ks(s);break;case 19:var d=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(zu(r,s,o,!1),c=(o&s.childLanes)!==0),d){if(c)return r1(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),we(Jt,Jt.current),c)break;return null;case 22:case 23:return s.lanes=0,XE(r,s,o);case 24:Vs(s,en,r.memoizedState.cache)}return Ur(r,s,o)}function s1(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)cn=!0;else{if(!Zm(r,o)&&(s.flags&128)===0)return cn=!1,N2(r,s,o);cn=(r.flags&131072)!==0}else cn=!1,rt&&(s.flags&1048576)!==0&&q0(s,tf,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")f_(c)?(r=Ja(c,r),s.tag=1,s=e1(null,s,c,r,o)):(s.tag=0,s=Hm(null,s,c,r,o));else{if(c!=null){if(d=c.$$typeof,d===x){s.tag=11,s=QE(null,s,c,r,o);break e}else if(d===H){s.tag=14,s=WE(null,s,c,r,o);break e}}throw s=S(c)||c,Error(i(306,s,""))}}return s;case 0:return Hm(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,d=Ja(c,s.pendingProps),e1(r,s,c,d,o);case 3:e:{if(Ke(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var _=s.pendingProps;d=s.memoizedState,c=d.element,i_(r,s),qu(s,_,null,o);var w=s.memoizedState;if(_=w.cache,Vs(s,en,_),_!==d.cache&&t_(s,[en],o,!0),Bu(),_=w.element,d.isDehydrated)if(d={element:_,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=t1(r,s,_,o);break e}else if(_!==c){c=yi(Error(i(424)),s),Nu(c),s=t1(r,s,_,o);break e}else for(En=Li(s.stateNode.containerInfo.firstChild),Vn=s,rt=!0,Mi=null,lr=!0,o=Z0(s,null,_,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Iu(),_===c){s=Ur(r,s,o);break e}wn(r,s,_,o)}s=s.child}return s;case 26:return ju(r,s),r===null?(o=lw(s.type,null,s.pendingProps,null))?s.memoizedState=o:rt||(o=s.type,r=s.pendingProps,c=Pf(nt.current).createElement(o),c[on]=s,c[Yt]=r,Tn(c,o,r),Ct(c),s.stateNode=c):s.memoizedState=lw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return yn(s),r===null&&rt&&(c=s.stateNode=sw(s.type,s.pendingProps,nt.current),Vn=s,lr=!0,En=Li(c.firstChild)),c=s.pendingProps.children,r!==null||rt?wn(r,s,c,o):s.child=Qa(s,null,c,o),ju(r,s),s.child;case 5:return r===null&&rt&&((d=c=En)&&(c=sN(c,s.type,s.pendingProps,lr),c!==null?(s.stateNode=c,Vn=s,En=Li(c.firstChild),lr=!1,d=!0):d=!1),d||Ka(s)),yn(s),d=s.type,_=s.pendingProps,w=r!==null?r.memoizedProps:null,c=_.children,U_(d,_)?c=null:w!==null&&U_(d,w)&&(s.flags|=32),s.memoizedState!==null&&(d=Cm(r,s,T2,null,null,o),rc._currentValue=d),ju(r,s),wn(r,s,c,o),s.child;case 6:return r===null&&rt&&((r=o=En)&&(o=aN(o,s.pendingProps,lr),o!==null?(s.stateNode=o,Vn=s,En=null,r=!0):r=!1),r||Ka(s)),null;case 13:return n1(r,s,o);case 4:return Ke(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Qa(s,null,c,o):wn(r,s,c,o),s.child;case 11:return QE(r,s,s.type,s.pendingProps,o);case 7:return wn(r,s,s.pendingProps,o),s.child;case 8:return wn(r,s,s.pendingProps.children,o),s.child;case 12:return wn(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Vs(s,s.type,c.value),wn(r,s,c.children,o),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,to(s),d=Rn(d),c=c(d),s.flags|=1,wn(r,s,c,o),s.child;case 14:return WE(r,s,s.type,s.pendingProps,o);case 15:return YE(r,s,s.type,s.pendingProps,o);case 19:return r1(r,s,o);case 22:return XE(r,s,o);case 24:return to(s),c=Rn(en),r===null?(d=Sm(),d===null&&(d=yt,_=Tm(),d.pooledCache=_,_.refCount++,_!==null&&(d.pooledCacheLanes|=o),d=_),s.memoizedState={parent:c,cache:d},n_(s),Vs(s,en,d)):((r.lanes&o)!==0&&(i_(r,s),qu(s,null,null,o),Bu()),d=r.memoizedState,_=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Vs(s,en,c)):(c=_.cache,Vs(s,en,c),c!==d.cache&&t_(s,[en],o,!0))),wn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var Jm=Ce(null),eo=null,jr=null;function Vs(r,s,o){we(Jm,s._currentValue),s._currentValue=o}function zr(r){r._currentValue=Jm.current,Ee(Jm)}function e_(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function t_(r,s,o,c){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var _=d.dependencies;if(_!==null){var w=d.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=d;for(var k=0;k<s.length;k++)if(C.context===s[k]){_.lanes|=o,C=_.alternate,C!==null&&(C.lanes|=o),e_(_.return,o,r),c||(w=null);break e}_=C.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(i(341));w.lanes|=o,_=w.alternate,_!==null&&(_.lanes|=o),e_(w,o,r),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===r){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function zu(r,s,o,c){r=null;for(var d=s,_=!1;d!==null;){if(!_){if((d.flags&524288)!==0)_=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var C=d.type;ri(d.pendingProps.value,w.value)||(r!==null?r.push(C):r=[C])}}else if(d===He.current){if(w=d.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(rc):r=[rc])}d=d.return}r!==null&&t_(s,r,o,c),s.flags|=262144}function vf(r){for(r=r.firstContext;r!==null;){if(!ri(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function to(r){eo=r,jr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Rn(r){return a1(eo,r)}function Ef(r,s){return eo===null&&to(r),a1(r,s)}function a1(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},jr===null){if(r===null)throw Error(i(308));jr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else jr=jr.next=s;return o}var Us=!1;function n_(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function i_(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function js(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function zs(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(It&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Jh(r),F0(r,null,o),s}return Zh(r,c,s,o),Jh(r)}function Fu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194176)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,Ts(r,o)}}function r_(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};_===null?d=_=w:_=_.next=w,o=o.next}while(o!==null);_===null?d=_=s:_=_.next=s}else d=_=s;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var s_=!1;function Bu(){if(s_){var r=tl;if(r!==null)throw r}}function qu(r,s,o,c){s_=!1;var d=r.updateQueue;Us=!1;var _=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var k=C,j=k.next;k.next=null,w===null?_=j:w.next=j,w=k;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==w&&(C===null?Y.firstBaseUpdate=j:C.next=j,Y.lastBaseUpdate=k))}if(_!==null){var ee=d.baseState;w=0,Y=j=k=null,C=_;do{var $=C.lane&-536870913,W=$!==C.lane;if(W?(Ze&$)===$:(c&$)===$){$!==0&&$===el&&(s_=!0),Y!==null&&(Y=Y.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var me=r,De=C;$=s;var Mt=o;switch(De.tag){case 1:if(me=De.payload,typeof me=="function"){ee=me.call(Mt,ee,$);break e}ee=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=De.payload,$=typeof me=="function"?me.call(Mt,ee,$):me,$==null)break e;ee=R({},ee,$);break e;case 2:Us=!0}}$=C.callback,$!==null&&(r.flags|=64,W&&(r.flags|=8192),W=d.callbacks,W===null?d.callbacks=[$]:W.push($))}else W={lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(j=Y=W,k=ee):Y=Y.next=W,w|=$;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;W=C,C=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);Y===null&&(k=ee),d.baseState=k,d.firstBaseUpdate=j,d.lastBaseUpdate=Y,_===null&&(d.shared.lanes=0),Gs|=w,r.lanes=w,r.memoizedState=ee}}function o1(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function l1(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)o1(o[r],s)}function Hu(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&r)===r){c=void 0;var _=o.create,w=o.inst;c=_(),w.destroy=c}o=o.next}while(o!==d)}}catch(C){mt(s,s.return,C)}}function Fs(r,s,o){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&r)===r){var w=c.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,d=s;var k=o;try{C()}catch(j){mt(d,k,j)}}}c=c.next}while(c!==_)}}catch(j){mt(s,s.return,j)}}function u1(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{l1(s,o)}catch(c){mt(r,r.return,c)}}}function c1(r,s,o){o.props=Ja(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){mt(r,s,c)}}function no(r,s){try{var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 26:case 27:case 5:var d=c;break;default:d=c}typeof o=="function"?r.refCleanup=o(d):o.current=d}}catch(_){mt(r,s,_)}}function si(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){mt(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){mt(r,s,d)}else o.current=null}function h1(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){mt(r,r.return,d)}}function f1(r,s,o){try{var c=r.stateNode;eN(c,r.type,o,s),c[Yt]=s}catch(d){mt(r,r.return,d)}}function d1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function a_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||d1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function o_(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(r,s):o.insertBefore(r,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(r,o)):(s=o,s.appendChild(r)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Mf));else if(c!==4&&c!==27&&(r=r.child,r!==null))for(o_(r,s,o),r=r.sibling;r!==null;)o_(r,s,o),r=r.sibling}function wf(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&c!==27&&(r=r.child,r!==null))for(wf(r,s,o),r=r.sibling;r!==null;)wf(r,s,o),r=r.sibling}var Fr=!1,Ot=!1,l_=!1,p1=typeof WeakSet=="function"?WeakSet:Set,hn=null,m1=!1;function x2(r,s){if(r=r.containerInfo,L_=Ff,r=O0(r),cm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break e}var w=0,C=-1,k=-1,j=0,Y=0,ee=r,$=null;t:for(;;){for(var W;ee!==o||d!==0&&ee.nodeType!==3||(C=w+d),ee!==_||c!==0&&ee.nodeType!==3||(k=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(W=ee.firstChild)!==null;)$=ee,ee=W;for(;;){if(ee===r)break t;if($===o&&++j===d&&(C=w),$===_&&++Y===c&&(k=w),(W=ee.nextSibling)!==null)break;ee=$,$=ee.parentNode}ee=W}o=C===-1||k===-1?null:{start:C,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(V_={focusedElem:r,selectionRange:o},Ff=!1,hn=s;hn!==null;)if(s=hn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,hn=r;else for(;hn!==null;){switch(s=hn,_=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,o=s,d=_.memoizedProps,_=_.memoizedState,c=o.stateNode;try{var me=Ja(o.type,d,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=r}catch(De){mt(o,o.return,De)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)F_(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":F_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,hn=r;break}hn=s.return}return me=m1,m1=!1,me}function _1(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:qr(r,o),c&4&&Hu(5,o);break;case 1:if(qr(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(C){mt(o,o.return,C)}else{var d=Ja(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(C){mt(o,o.return,C)}}c&64&&u1(o),c&512&&no(o,o.return);break;case 3:if(qr(r,o),c&64&&(c=o.updateQueue,c!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{l1(c,r)}catch(C){mt(o,o.return,C)}}break;case 26:qr(r,o),c&512&&no(o,o.return);break;case 27:case 5:qr(r,o),s===null&&c&4&&h1(o),c&512&&no(o,o.return);break;case 12:qr(r,o);break;case 13:qr(r,o),c&4&&v1(r,o);break;case 22:if(d=o.memoizedState!==null||Fr,!d){s=s!==null&&s.memoizedState!==null||Ot;var _=Fr,w=Ot;Fr=d,(Ot=s)&&!w?Bs(r,o,(o.subtreeFlags&8772)!==0):qr(r,o),Fr=_,Ot=w}c&512&&(o.memoizedProps.mode==="manual"?no(o,o.return):si(o,o.return));break;default:qr(r,o)}}function g1(r){var s=r.alternate;s!==null&&(r.alternate=null,g1(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Oa(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qt=null,ai=!1;function Br(r,s,o){for(o=o.child;o!==null;)y1(r,s,o),o=o.sibling}function y1(r,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Gn,o)}catch{}switch(o.tag){case 26:Ot||si(o,s),Br(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ot||si(o,s);var c=qt,d=ai;for(qt=o.stateNode,Br(r,s,o),o=o.stateNode,s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Oa(o),qt=c,ai=d;break;case 5:Ot||si(o,s);case 6:d=qt;var _=ai;if(qt=null,Br(r,s,o),qt=d,ai=_,qt!==null)if(ai)try{r=qt,c=o.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)}catch(w){mt(o,s,w)}else try{qt.removeChild(o.stateNode)}catch(w){mt(o,s,w)}break;case 18:qt!==null&&(ai?(s=qt,o=o.stateNode,s.nodeType===8?z_(s.parentNode,o):s.nodeType===1&&z_(s,o),lc(s)):z_(qt,o.stateNode));break;case 4:c=qt,d=ai,qt=o.stateNode.containerInfo,ai=!0,Br(r,s,o),qt=c,ai=d;break;case 0:case 11:case 14:case 15:Ot||Fs(2,o,s),Ot||Fs(4,o,s),Br(r,s,o);break;case 1:Ot||(si(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&c1(o,s,c)),Br(r,s,o);break;case 21:Br(r,s,o);break;case 22:Ot||si(o,s),Ot=(c=Ot)||o.memoizedState!==null,Br(r,s,o),Ot=c;break;default:Br(r,s,o)}}function v1(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{lc(r)}catch(o){mt(s,s.return,o)}}function D2(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new p1),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new p1),s;default:throw Error(i(435,r.tag))}}function u_(r,s){var o=D2(r);s.forEach(function(c){var d=H2.bind(null,r,c);o.has(c)||(o.add(c),c.then(d,d))})}function Ti(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],_=r,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 27:case 5:qt=C.stateNode,ai=!1;break e;case 3:qt=C.stateNode.containerInfo,ai=!0;break e;case 4:qt=C.stateNode.containerInfo,ai=!0;break e}C=C.return}if(qt===null)throw Error(i(160));y1(_,w,d),qt=null,ai=!1,_=d.alternate,_!==null&&(_.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)E1(s,r),s=s.sibling}var Pi=null;function E1(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ti(s,r),bi(r),c&4&&(Fs(3,r,r.return),Hu(3,r),Fs(5,r,r.return));break;case 1:Ti(s,r),bi(r),c&512&&(Ot||o===null||si(o,o.return)),c&64&&Fr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=Pi;if(Ti(s,r),bi(r),c&512&&(Ot||o===null||si(o,o.return)),c&4){var _=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":_=d.getElementsByTagName("title")[0],(!_||_[Ss]||_[on]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=d.createElement(c),d.head.insertBefore(_,d.querySelector("head > title"))),Tn(_,c,o),_[on]=r,Ct(_),c=_;break e;case"link":var w=hw("link","href",d).get(c+(o.href||""));if(w){for(var C=0;C<w.length;C++)if(_=w[C],_.getAttribute("href")===(o.href==null?null:o.href)&&_.getAttribute("rel")===(o.rel==null?null:o.rel)&&_.getAttribute("title")===(o.title==null?null:o.title)&&_.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(C,1);break t}}_=d.createElement(c),Tn(_,c,o),d.head.appendChild(_);break;case"meta":if(w=hw("meta","content",d).get(c+(o.content||""))){for(C=0;C<w.length;C++)if(_=w[C],_.getAttribute("content")===(o.content==null?null:""+o.content)&&_.getAttribute("name")===(o.name==null?null:o.name)&&_.getAttribute("property")===(o.property==null?null:o.property)&&_.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&_.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(C,1);break t}}_=d.createElement(c),Tn(_,c,o),d.head.appendChild(_);break;default:throw Error(i(468,c))}_[on]=r,Ct(_),c=_}r.stateNode=c}else fw(d,r.type,r.stateNode);else r.stateNode=cw(d,c,r.memoizedProps);else _!==c?(_===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):_.count--,c===null?fw(d,r.type,r.stateNode):cw(d,c,r.memoizedProps)):c===null&&r.stateNode!==null&&f1(r,r.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&r.alternate===null){d=r.stateNode,_=r.memoizedProps;try{for(var k=d.firstChild;k;){var j=k.nextSibling,Y=k.nodeName;k[Ss]||Y==="HEAD"||Y==="BODY"||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&k.rel.toLowerCase()==="stylesheet"||d.removeChild(k),k=j}for(var ee=r.type,$=d.attributes;$.length;)d.removeAttributeNode($[0]);Tn(d,ee,_),d[on]=r,d[Yt]=_}catch(me){mt(r,r.return,me)}}case 5:if(Ti(s,r),bi(r),c&512&&(Ot||o===null||si(o,o.return)),r.flags&32){d=r.stateNode;try{di(d,"")}catch(me){mt(r,r.return,me)}}c&4&&r.stateNode!=null&&(d=r.memoizedProps,f1(r,d,o!==null?o.memoizedProps:d)),c&1024&&(l_=!0);break;case 6:if(Ti(s,r),bi(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(me){mt(r,r.return,me)}}break;case 3:if(Uf=null,d=Pi,Pi=Lf(s.containerInfo),Ti(s,r),Pi=d,bi(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{lc(s.containerInfo)}catch(me){mt(r,r.return,me)}l_&&(l_=!1,w1(r));break;case 4:c=Pi,Pi=Lf(r.stateNode.containerInfo),Ti(s,r),bi(r),Pi=c;break;case 12:Ti(s,r),bi(r);break;case 13:Ti(s,r),bi(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(y_=ot()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,u_(r,c)));break;case 22:if(c&512&&(Ot||o===null||si(o,o.return)),k=r.memoizedState!==null,j=o!==null&&o.memoizedState!==null,Y=Fr,ee=Ot,Fr=Y||k,Ot=ee||j,Ti(s,r),Ot=ee,Fr=Y,bi(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=k?s._visibility&-2:s._visibility|1,k&&(s=Fr||Ot,o===null||j||s||sl(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(o=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(o===null){j=o=s;try{if(d=j.stateNode,k)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=j.stateNode,C=j.memoizedProps.style;var W=C!=null&&C.hasOwnProperty("display")?C.display:null;w.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(me){mt(j,j.return,me)}}}else if(s.tag===6){if(o===null){j=s;try{j.stateNode.nodeValue=k?"":j.memoizedProps}catch(me){mt(j,j.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,u_(r,o))));break;case 19:Ti(s,r),bi(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,u_(r,c)));break;case 21:break;default:Ti(s,r),bi(r)}}function bi(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var o=r.return;o!==null;){if(d1(o)){var c=o;break e}o=o.return}throw Error(i(160))}switch(c.tag){case 27:var d=c.stateNode,_=a_(r);wf(r,_,d);break;case 5:var w=c.stateNode;c.flags&32&&(di(w,""),c.flags&=-33);var C=a_(r);wf(r,C,w);break;case 3:case 4:var k=c.stateNode.containerInfo,j=a_(r);o_(r,j,k);break;default:throw Error(i(161))}}}catch(Y){mt(r,r.return,Y)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function w1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;w1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function qr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_1(r,s.alternate,s),s=s.sibling}function sl(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Fs(4,s,s.return),sl(s);break;case 1:si(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&c1(s,s.return,o),sl(s);break;case 26:case 27:case 5:si(s,s.return),sl(s);break;case 22:si(s,s.return),s.memoizedState===null&&sl(s);break;default:sl(s)}r=r.sibling}}function Bs(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=r,_=s,w=_.flags;switch(_.tag){case 0:case 11:case 15:Bs(d,_,o),Hu(4,_);break;case 1:if(Bs(d,_,o),c=_,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(j){mt(c,c.return,j)}if(c=_,d=c.updateQueue,d!==null){var C=c.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)o1(k[d],C)}catch(j){mt(c,c.return,j)}}o&&w&64&&u1(_),no(_,_.return);break;case 26:case 27:case 5:Bs(d,_,o),o&&c===null&&w&4&&h1(_),no(_,_.return);break;case 12:Bs(d,_,o);break;case 13:Bs(d,_,o),o&&w&4&&v1(d,_);break;case 22:_.memoizedState===null&&Bs(d,_,o),no(_,_.return);break;default:Bs(d,_,o)}s=s.sibling}}function c_(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Mu(o))}function h_(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Mu(r))}function qs(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)T1(r,s,o,c),s=s.sibling}function T1(r,s,o,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:qs(r,s,o,c),d&2048&&Hu(9,s);break;case 3:qs(r,s,o,c),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Mu(r)));break;case 12:if(d&2048){qs(r,s,o,c),r=s.stateNode;try{var _=s.memoizedProps,w=_.id,C=_.onPostCommit;typeof C=="function"&&C(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){mt(s,s.return,k)}}else qs(r,s,o,c);break;case 23:break;case 22:_=s.stateNode,s.memoizedState!==null?_._visibility&4?qs(r,s,o,c):Gu(r,s):_._visibility&4?qs(r,s,o,c):(_._visibility|=4,al(r,s,o,c,(s.subtreeFlags&10256)!==0)),d&2048&&c_(s.alternate,s);break;case 24:qs(r,s,o,c),d&2048&&h_(s.alternate,s);break;default:qs(r,s,o,c)}}function al(r,s,o,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=r,w=s,C=o,k=c,j=w.flags;switch(w.tag){case 0:case 11:case 15:al(_,w,C,k,d),Hu(8,w);break;case 23:break;case 22:var Y=w.stateNode;w.memoizedState!==null?Y._visibility&4?al(_,w,C,k,d):Gu(_,w):(Y._visibility|=4,al(_,w,C,k,d)),d&&j&2048&&c_(w.alternate,w);break;case 24:al(_,w,C,k,d),d&&j&2048&&h_(w.alternate,w);break;default:al(_,w,C,k,d)}s=s.sibling}}function Gu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,d=c.flags;switch(c.tag){case 22:Gu(o,c),d&2048&&c_(c.alternate,c);break;case 24:Gu(o,c),d&2048&&h_(c.alternate,c);break;default:Gu(o,c)}s=s.sibling}}var $u=8192;function ol(r){if(r.subtreeFlags&$u)for(r=r.child;r!==null;)b1(r),r=r.sibling}function b1(r){switch(r.tag){case 26:ol(r),r.flags&$u&&r.memoizedState!==null&&vN(Pi,r.memoizedState,r.memoizedProps);break;case 5:ol(r);break;case 3:case 4:var s=Pi;Pi=Lf(r.stateNode.containerInfo),ol(r),Pi=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=$u,$u=16777216,ol(r),$u=s):ol(r));break;default:ol(r)}}function S1(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ku(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];hn=c,C1(c,r)}S1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)A1(r),r=r.sibling}function A1(r){switch(r.tag){case 0:case 11:case 15:Ku(r),r.flags&2048&&Fs(9,r,r.return);break;case 3:Ku(r);break;case 12:Ku(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,Tf(r)):Ku(r);break;default:Ku(r)}}function Tf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];hn=c,C1(c,r)}S1(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Fs(8,s,s.return),Tf(s);break;case 22:o=s.stateNode,o._visibility&4&&(o._visibility&=-5,Tf(s));break;default:Tf(s)}r=r.sibling}}function C1(r,s){for(;hn!==null;){var o=hn;switch(o.tag){case 0:case 11:case 15:Fs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Mu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,hn=c;else e:for(o=r;hn!==null;){c=hn;var d=c.sibling,_=c.return;if(g1(c),c===o){hn=null;break e}if(d!==null){d.return=_,hn=d;break e}hn=_}}}function O2(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(r,s,o,c){return new O2(r,s,o,c)}function f_(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Hs(r,s){var o=r.alternate;return o===null?(o=Si(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&31457280,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function R1(r,s){r.flags&=31457282;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function bf(r,s,o,c,d,_){var w=0;if(c=r,typeof r=="function")f_(r)&&(w=1);else if(typeof r=="string")w=gN(r,o,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case p:return io(o.children,d,_,s);case m:w=8,d|=24;break;case y:return r=Si(12,o,s,d|2),r.elementType=y,r.lanes=_,r;case V:return r=Si(13,o,s,d),r.elementType=V,r.lanes=_,r;case M:return r=Si(19,o,s,d),r.elementType=M,r.lanes=_,r;case z:return I1(o,d,_,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case v:case I:w=10;break e;case b:w=9;break e;case x:w=11;break e;case H:w=14;break e;case Q:w=16,c=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Si(w,o,s,d),s.elementType=r,s.type=c,s.lanes=_,s}function io(r,s,o,c){return r=Si(7,r,c,s),r.lanes=o,r}function I1(r,s,o,c){r=Si(22,r,c,s),r.elementType=z,r.lanes=o;var d={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=d._current;if(_===null)throw Error(i(456));if((d._pendingVisibility&2)===0){var w=Os(_,2);w!==null&&(d._pendingVisibility|=2,Un(w,_,2))}},attach:function(){var _=d._current;if(_===null)throw Error(i(456));if((d._pendingVisibility&2)!==0){var w=Os(_,2);w!==null&&(d._pendingVisibility&=-3,Un(w,_,2))}}};return r.stateNode=d,r}function d_(r,s,o){return r=Si(6,r,null,s),r.lanes=o,r}function p_(r,s,o){return s=Si(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Hr(r){r.flags|=4}function N1(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!dw(s)){if(s=wi.current,s!==null&&((Ze&4194176)===Ze?ur!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||s!==ur))throw Du=vm,$0;r.flags|=8192}}function Sf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Es():536870912,r.lanes|=s,ul|=s)}function Qu(r,s){if(!rt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Rt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&31457280,c|=d.flags&31457280,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function k2(r,s,o){var c=s.pendingProps;switch(gm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(s),null;case 1:return Rt(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),zr(en),Ne(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ru(s)?Hr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mi!==null&&(T_(Mi),Mi=null))),Rt(s),null;case 26:return o=s.memoizedState,r===null?(Hr(s),o!==null?(Rt(s),N1(s,o)):(Rt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Hr(s),Rt(s),N1(s,o)):(Rt(s),s.flags&=-16777217):(r.memoizedProps!==c&&Hr(s),Rt(s),s.flags&=-16777217),null;case 27:Ie(s),o=nt.current;var d=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&Hr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Rt(s),null}r=pe.current,Ru(s)?H0(s):(r=sw(d,c,o),s.stateNode=r,Hr(s))}return Rt(s),null;case 5:if(Ie(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&Hr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Rt(s),null}if(r=pe.current,Ru(s))H0(s);else{switch(d=Pf(nt.current),r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?d.createElement(o,{is:c.is}):d.createElement(o)}}r[on]=s,r[Yt]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=r;e:switch(Tn(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Hr(s)}}return Rt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&Hr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=nt.current,Ru(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,d=Vn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}r[on]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||J1(r.nodeValue,o)),r||Ka(s)}else r=Pf(r).createTextNode(c),r[on]=s,s.stateNode=r}return Rt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=Ru(s),c!==null&&c.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[on]=s}else Iu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Rt(s),d=!1}else Mi!==null&&(T_(Mi),Mi=null),d=!0;if(!d)return s.flags&256?(Lr(s),s):(Lr(s),null)}if(Lr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==d&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Sf(s,s.updateQueue),Rt(s),null;case 4:return Ne(),r===null&&k_(s.stateNode.containerInfo),Rt(s),null;case 10:return zr(s.type),Rt(s),null;case 19:if(Ee(Jt),d=s.memoizedState,d===null)return Rt(s),null;if(c=(s.flags&128)!==0,_=d.rendering,_===null)if(c)Qu(d,!1);else{if(kt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=of(r),_!==null){for(s.flags|=128,Qu(d,!1),r=_.updateQueue,s.updateQueue=r,Sf(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)R1(o,r),o=o.sibling;return we(Jt,Jt.current&1|2),s.child}r=r.sibling}d.tail!==null&&ot()>Af&&(s.flags|=128,c=!0,Qu(d,!1),s.lanes=4194304)}else{if(!c)if(r=of(_),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Sf(s,r),Qu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!rt)return Rt(s),null}else 2*ot()-d.renderingStartTime>Af&&o!==536870912&&(s.flags|=128,c=!0,Qu(d,!1),s.lanes=4194304);d.isBackwards?(_.sibling=s.child,s.child=_):(r=d.last,r!==null?r.sibling=_:s.child=_,d.last=_)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=ot(),s.sibling=null,r=Jt.current,we(Jt,c?r&1|2:r&1),s):(Rt(s),null);case 22:case 23:return Lr(s),wm(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Rt(s),s.subtreeFlags&6&&(s.flags|=8192)):Rt(s),o=s.updateQueue,o!==null&&Sf(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&Ee(Wa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),zr(en),Rt(s),null;case 25:return null}throw Error(i(156,s.tag))}function M2(r,s){switch(gm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return zr(en),Ne(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ie(s),null;case 13:if(Lr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Iu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ee(Jt),null;case 4:return Ne(),null;case 10:return zr(s.type),null;case 22:case 23:return Lr(s),wm(),r!==null&&Ee(Wa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return zr(en),null;case 25:return null;default:return null}}function x1(r,s){switch(gm(s),s.tag){case 3:zr(en),Ne();break;case 26:case 27:case 5:Ie(s);break;case 4:Ne();break;case 13:Lr(s);break;case 19:Ee(Jt);break;case 10:zr(s.type);break;case 22:case 23:Lr(s),wm(),r!==null&&Ee(Wa);break;case 24:zr(en)}}var P2={getCacheForType:function(r){var s=Rn(en),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},L2=typeof WeakMap=="function"?WeakMap:Map,It=0,yt=null,Fe=null,Ze=0,vt=0,oi=null,Gr=!1,ll=!1,m_=!1,$r=0,kt=0,Gs=0,ro=0,__=0,Ai=0,ul=0,Wu=null,hr=null,g_=!1,y_=0,Af=1/0,Cf=null,$s=null,Rf=!1,so=null,Yu=0,v_=0,E_=null,Xu=0,w_=null;function li(){if((It&2)!==0&&Ze!==0)return Ze&-Ze;if(T.T!==null){var r=el;return r!==0?r:N_()}return Oh()}function D1(){Ai===0&&(Ai=(Ze&536870912)===0||rt?uu():536870912);var r=wi.current;return r!==null&&(r.flags|=32),Ai}function Un(r,s,o){(r===yt&&vt===2||r.cancelPendingCommit!==null)&&(cl(r,0),Kr(r,Ze,Ai,!1)),Vt(r,o),((It&2)===0||r!==yt)&&(r===yt&&((It&2)===0&&(ro|=o),kt===4&&Kr(r,Ze,Ai,!1)),fr(r))}function O1(r,s,o){if((It&6)!==0)throw Error(i(327));var c=!o&&(s&60)===0&&(s&r.expiredLanes)===0||vs(r,s),d=c?j2(r,s):A_(r,s,!0),_=c;do{if(d===0){ll&&!c&&Kr(r,s,0,!1);break}else if(d===6)Kr(r,s,0,!Gr);else{if(o=r.current.alternate,_&&!V2(o)){d=A_(r,s,!1),_=!1;continue}if(d===2){if(_=s,r.errorRecoveryDisabledLanes&_)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var C=r;d=Wu;var k=C.current.memoizedState.isDehydrated;if(k&&(cl(C,w).flags|=256),w=A_(C,w,!1),w!==2){if(m_&&!k){C.errorRecoveryDisabledLanes|=_,ro|=_,d=4;break e}_=hr,hr=d,_!==null&&T_(_)}d=w}if(_=!1,d!==2)continue}}if(d===1){cl(r,0),Kr(r,s,0,!0);break}e:{switch(c=r,d){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){Kr(c,s,Ai,!Gr);break e}break;case 2:hr=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=o,c.finishedLanes=s,(s&62914560)===s&&(_=y_+300-ot(),10<_)){if(Kr(c,s,Ai,!Gr),hi(c,0)!==0)break e;c.timeoutHandle=nw(k1.bind(null,c,o,hr,Cf,g_,s,Ai,ro,ul,Gr,2,-0,0),_);break e}k1(c,o,hr,Cf,g_,s,Ai,ro,ul,Gr,0,-0,0)}}break}while(!0);fr(r)}function T_(r){hr===null?hr=r:hr.push.apply(hr,r)}function k1(r,s,o,c,d,_,w,C,k,j,Y,ee,$){var W=s.subtreeFlags;if((W&8192||(W&16785408)===16785408)&&(ic={stylesheets:null,count:0,unsuspend:yN},b1(s),s=EN(),s!==null)){r.cancelPendingCommit=s(z1.bind(null,r,o,c,d,w,C,k,1,ee,$)),Kr(r,_,w,!j);return}z1(r,o,c,d,w,C,k,Y,ee,$)}function V2(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],_=d.getSnapshot;d=d.value;try{if(!ri(_(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Kr(r,s,o,c){s&=~__,s&=~ro,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var d=s;0<d;){var _=31-Mn(d),w=1<<_;c[_]=-1,d&=~w}o!==0&&ws(r,o,s)}function If(){return(It&6)===0?(Zu(0),!1):!0}function b_(){if(Fe!==null){if(vt===0)var r=Fe.return;else r=Fe,jr=eo=null,Nm(r),Zo=null,Ou=0,r=Fe;for(;r!==null;)x1(r.alternate,r),r=r.return;Fe=null}}function cl(r,s){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,nN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),b_(),yt=r,Fe=o=Hs(r.current,null),Ze=s,vt=0,oi=null,Gr=!1,ll=vs(r,s),m_=!1,ul=Ai=__=ro=Gs=kt=0,hr=Wu=null,g_=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var d=31-Mn(c),_=1<<d;s|=r[d],c&=~_}return $r=s,Xh(),o}function M1(r,s){Le=null,T.H=cr,s===xu?(s=W0(),vt=3):s===$0?(s=W0(),vt=4):vt=s===KE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,oi=s,Fe===null&&(kt=1,yf(r,yi(s,r.current)))}function P1(){var r=T.H;return T.H=cr,r===null?cr:r}function L1(){var r=T.A;return T.A=P2,r}function S_(){kt=4,Gr||(Ze&4194176)!==Ze&&wi.current!==null||(ll=!0),(Gs&134217727)===0&&(ro&134217727)===0||yt===null||Kr(yt,Ze,Ai,!1)}function A_(r,s,o){var c=It;It|=2;var d=P1(),_=L1();(yt!==r||Ze!==s)&&(Cf=null,cl(r,s)),s=!1;var w=kt;e:do try{if(vt!==0&&Fe!==null){var C=Fe,k=oi;switch(vt){case 8:b_(),w=6;break e;case 3:case 2:case 6:wi.current===null&&(s=!0);var j=vt;if(vt=0,oi=null,hl(r,C,k,j),o&&ll){w=0;break e}break;default:j=vt,vt=0,oi=null,hl(r,C,k,j)}}U2(),w=kt;break}catch(Y){M1(r,Y)}while(!0);return s&&r.shellSuspendCounter++,jr=eo=null,It=c,T.H=d,T.A=_,Fe===null&&(yt=null,Ze=0,Xh()),w}function U2(){for(;Fe!==null;)V1(Fe)}function j2(r,s){var o=It;It|=2;var c=P1(),d=L1();yt!==r||Ze!==s?(Cf=null,Af=ot()+500,cl(r,s)):ll=vs(r,s);e:do try{if(vt!==0&&Fe!==null){s=Fe;var _=oi;t:switch(vt){case 1:vt=0,oi=null,hl(r,s,_,1);break;case 2:if(K0(_)){vt=0,oi=null,U1(s);break}s=function(){vt===2&&yt===r&&(vt=7),fr(r)},_.then(s,s);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:K0(_)?(vt=0,oi=null,U1(s)):(vt=0,oi=null,hl(r,s,_,7));break;case 5:var w=null;switch(Fe.tag){case 26:w=Fe.memoizedState;case 5:case 27:var C=Fe;if(!w||dw(w)){vt=0,oi=null;var k=C.sibling;if(k!==null)Fe=k;else{var j=C.return;j!==null?(Fe=j,Nf(j)):Fe=null}break t}}vt=0,oi=null,hl(r,s,_,5);break;case 6:vt=0,oi=null,hl(r,s,_,6);break;case 8:b_(),kt=6;break e;default:throw Error(i(462))}}z2();break}catch(Y){M1(r,Y)}while(!0);return jr=eo=null,T.H=c,T.A=d,It=o,Fe!==null?0:(yt=null,Ze=0,Xh(),kt)}function z2(){for(;Fe!==null&&!Hn();)V1(Fe)}function V1(r){var s=s1(r.alternate,r,$r);r.memoizedProps=r.pendingProps,s===null?Nf(r):Fe=s}function U1(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=JE(o,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=JE(o,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:Nm(s);default:x1(o,s),s=Fe=R1(s,$r),s=s1(o,s,$r)}r.memoizedProps=r.pendingProps,s===null?Nf(r):Fe=s}function hl(r,s,o,c){jr=eo=null,Nm(s),Zo=null,Ou=0;var d=s.return;try{if(I2(r,d,s,o,Ze)){kt=1,yf(r,yi(o,r.current)),Fe=null;return}}catch(_){if(d!==null)throw Fe=d,_;kt=1,yf(r,yi(o,r.current)),Fe=null;return}s.flags&32768?(rt||c===1?r=!0:ll||(Ze&536870912)!==0?r=!1:(Gr=r=!0,(c===2||c===3||c===6)&&(c=wi.current,c!==null&&c.tag===13&&(c.flags|=16384))),j1(s,r)):Nf(s)}function Nf(r){var s=r;do{if((s.flags&32768)!==0){j1(s,Gr);return}r=s.return;var o=k2(s.alternate,s,$r);if(o!==null){Fe=o;return}if(s=s.sibling,s!==null){Fe=s;return}Fe=s=r}while(s!==null);kt===0&&(kt=5)}function j1(r,s){do{var o=M2(r.alternate,r);if(o!==null){o.flags&=32767,Fe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=o}while(r!==null);kt=6,Fe=null}function z1(r,s,o,c,d,_,w,C,k,j){var Y=T.T,ee=ge.p;try{ge.p=2,T.T=null,F2(r,s,o,c,ee,d,_,w,C,k,j)}finally{T.T=Y,ge.p=ee}}function F2(r,s,o,c,d,_,w,C){do fl();while(so!==null);if((It&6)!==0)throw Error(i(327));var k=r.finishedWork;if(c=r.finishedLanes,k===null)return null;if(r.finishedWork=null,r.finishedLanes=0,k===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var j=k.lanes|k.childLanes;if(j|=pm,xh(r,c,j,_,w,C),r===yt&&(Fe=yt=null,Ze=0),(k.subtreeFlags&10256)===0&&(k.flags&10256)===0||Rf||(Rf=!0,v_=j,E_=o,G2(Qt,function(){return fl(),null})),o=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||o?(o=T.T,T.T=null,_=ge.p,ge.p=2,w=It,It|=4,x2(r,k),E1(k,r),h2(V_,r.containerInfo),Ff=!!L_,V_=L_=null,r.current=k,_1(r,k.alternate,k),xi(),It=w,ge.p=_,T.T=o):r.current=k,Rf?(Rf=!1,so=r,Yu=c):F1(r,j),j=r.pendingLanes,j===0&&($s=null),ou(k.stateNode),fr(r),s!==null)for(d=r.onRecoverableError,k=0;k<s.length;k++)j=s[k],d(j.value,{componentStack:j.stack});return(Yu&3)!==0&&fl(),j=r.pendingLanes,(c&4194218)!==0&&(j&42)!==0?r===w_?Xu++:(Xu=0,w_=r):Xu=0,Zu(0),null}function F1(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Mu(s)))}function fl(){if(so!==null){var r=so,s=v_;v_=0;var o=Dh(Yu),c=T.T,d=ge.p;try{if(ge.p=32>o?32:o,T.T=null,so===null)var _=!1;else{o=E_,E_=null;var w=so,C=Yu;if(so=null,Yu=0,(It&6)!==0)throw Error(i(331));var k=It;if(It|=4,A1(w.current),T1(w,w.current,C,o),It=k,Zu(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Gn,w)}catch{}_=!0}return _}finally{ge.p=d,T.T=c,F1(r,s)}}return!1}function B1(r,s,o){s=yi(o,s),s=qm(r.stateNode,s,2),r=zs(r,s,2),r!==null&&(Vt(r,2),fr(r))}function mt(r,s,o){if(r.tag===3)B1(r,r,o);else for(;s!==null;){if(s.tag===3){B1(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($s===null||!$s.has(c))){r=yi(o,r),o=GE(2),c=zs(s,o,2),c!==null&&($E(o,c,s,r),Vt(c,2),fr(c));break}}s=s.return}}function C_(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new L2;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(o)||(m_=!0,d.add(o),r=B2.bind(null,r,s,o),s.then(r,r))}function B2(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(Ze&o)===o&&(kt===4||kt===3&&(Ze&62914560)===Ze&&300>ot()-y_?(It&2)===0&&cl(r,0):__|=o,ul===Ze&&(ul=0)),fr(r)}function q1(r,s){s===0&&(s=Es()),r=Os(r,s),r!==null&&(Vt(r,s),fr(r))}function q2(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),q1(r,o)}function H2(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),q1(r,o)}function G2(r,s){return Cn(r,s)}var xf=null,dl=null,R_=!1,Df=!1,I_=!1,ao=0;function fr(r){r!==dl&&r.next===null&&(dl===null?xf=dl=r:dl=dl.next=r),Df=!0,R_||(R_=!0,K2($2))}function Zu(r,s){if(!I_&&Df){I_=!0;do for(var o=!1,c=xf;c!==null;){if(r!==0){var d=c.pendingLanes;if(d===0)var _=0;else{var w=c.suspendedLanes,C=c.pingedLanes;_=(1<<31-Mn(42|r)+1)-1,_&=d&~(w&~C),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(o=!0,$1(c,_))}else _=Ze,_=hi(c,c===yt?_:0),(_&3)===0||vs(c,_)||(o=!0,$1(c,_));c=c.next}while(o);I_=!1}}function $2(){Df=R_=!1;var r=0;ao!==0&&(tN()&&(r=ao),ao=0);for(var s=ot(),o=null,c=xf;c!==null;){var d=c.next,_=H1(c,s);_===0?(c.next=null,o===null?xf=d:o.next=d,d===null&&(dl=o)):(o=c,(r!==0||(_&3)!==0)&&(Df=!0)),c=d}Zu(r)}function H1(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var w=31-Mn(_),C=1<<w,k=d[w];k===-1?((C&o)===0||(C&c)!==0)&&(d[w]=Do(C,s)):k<=s&&(r.expiredLanes|=C),_&=~C}if(s=yt,o=Ze,o=hi(r,r===s?o:0),c=r.callbackNode,o===0||r===s&&vt===2||r.cancelPendingCommit!==null)return c!==null&&c!==null&&ti(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||vs(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&ti(c),Dh(o)){case 2:case 8:o=et;break;case 32:o=Qt;break;case 268435456:o=gs;break;default:o=Qt}return c=G1.bind(null,r),o=Cn(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&ti(c),r.callbackPriority=2,r.callbackNode=null,2}function G1(r,s){var o=r.callbackNode;if(fl()&&r.callbackNode!==o)return null;var c=Ze;return c=hi(r,r===yt?c:0),c===0?null:(O1(r,c,s),H1(r,ot()),r.callbackNode!=null&&r.callbackNode===o?G1.bind(null,r):null)}function $1(r,s){if(fl())return null;O1(r,s,!0)}function K2(r){iN(function(){(It&6)!==0?Cn(Ve,r):r()})}function N_(){return ao===0&&(ao=uu()),ao}function K1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:tr(""+r)}function Q1(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function Q2(r,s,o,c,d){if(s==="submit"&&o&&o.stateNode===d){var _=K1((d[Yt]||null).action),w=c.submitter;w&&(s=(s=w[Yt]||null)?K1(s.formAction):w.getAttribute("formAction"),s!==null&&(_=s,w=null));var C=new Uo("action","action",null,c,d);r.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ao!==0){var k=w?Q1(d,w):new FormData(d);Um(o,{pending:!0,data:k,method:d.method,action:_},null,k)}}else typeof _=="function"&&(C.preventDefault(),k=w?Q1(d,w):new FormData(d),Um(o,{pending:!0,data:k,method:d.method,action:_},_,k))},currentTarget:d}]})}}for(var x_=0;x_<z0.length;x_++){var D_=z0[x_],W2=D_.toLowerCase(),Y2=D_[0].toUpperCase()+D_.slice(1);ki(W2,"on"+Y2)}ki(P0,"onAnimationEnd"),ki(L0,"onAnimationIteration"),ki(V0,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(d2,"onTransitionRun"),ki(p2,"onTransitionStart"),ki(m2,"onTransitionCancel"),ki(U0,"onTransitionEnd"),$n("onMouseEnter",["mouseout","mouseover"]),$n("onMouseLeave",["mouseout","mouseover"]),$n("onPointerEnter",["pointerout","pointerover"]),$n("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function W1(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],d=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],k=C.instance,j=C.currentTarget;if(C=C.listener,k!==_&&d.isPropagationStopped())break e;_=C,d.currentTarget=j;try{_(d)}catch(Y){gf(Y)}d.currentTarget=null,_=k}else for(w=0;w<c.length;w++){if(C=c[w],k=C.instance,j=C.currentTarget,C=C.listener,k!==_&&d.isPropagationStopped())break e;_=C,d.currentTarget=j;try{_(d)}catch(Y){gf(Y)}d.currentTarget=null,_=k}}}}function Qe(r,s){var o=s[Da];o===void 0&&(o=s[Da]=new Set);var c=r+"__bubble";o.has(c)||(Y1(s,r,2,!1),o.add(c))}function O_(r,s,o){var c=0;s&&(c|=4),Y1(o,r,c,s)}var Of="_reactListening"+Math.random().toString(36).slice(2);function k_(r){if(!r[Of]){r[Of]=!0,hu.forEach(function(o){o!=="selectionchange"&&(X2.has(o)||O_(o,!1,r),O_(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Of]||(s[Of]=!0,O_("selectionchange",!1,s))}}function Y1(r,s,o,c){switch(vw(s)){case 2:var d=bN;break;case 8:d=SN;break;default:d=$_}o=d.bind(null,s,o,r),d=void 0,!mi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function M_(r,s,o,c,d){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&(k=w.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;w=w.return}for(;C!==null;){if(w=Oi(C),w===null)return;if(k=w.tag,k===5||k===6||k===26||k===27){c=_=w;continue e}C=C.parentNode}}c=c.return}Lh(function(){var j=_,Y=Vo(o),ee=[];e:{var $=j0.get(r);if($!==void 0){var W=Uo,me=r;switch(r){case"keypress":if(ir(o)===0)break e;case"keydown":case"keyup":W=Ho;break;case"focusin":me="focus",W=Fo;break;case"focusout":me="blur",W=Fo;break;case"beforeblur":case"afterblur":W=Fo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=_i;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Hh;break;case P0:case L0:case V0:W=Bo;break;case U0:W=$h;break;case"scroll":case"scrollend":W=Vh;break;case"wheel":W=Go;break;case"copy":case"cut":case"paste":W=qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=bu;break;case"toggle":case"beforetoggle":W=Qh}var De=(s&4)!==0,Mt=!De&&(r==="scroll"||r==="scrollend"),B=De?$!==null?$+"Capture":null:$;De=[];for(var U=j,G;U!==null;){var X=U;if(G=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||G===null||B===null||(X=La(U,B),X!=null&&De.push(ec(U,X,G))),Mt)break;U=U.return}0<De.length&&($=new W($,me,null,o,Y),ee.push({event:$,listeners:De}))}}if((s&7)===0){e:{if($=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",$&&o!==pi&&(me=o.relatedTarget||o.fromElement)&&(Oi(me)||me[Ar]))break e;if((W||$)&&($=Y.window===Y?Y:($=Y.ownerDocument)?$.defaultView||$.parentWindow:window,W?(me=o.relatedTarget||o.toElement,W=j,me=me?Oi(me):null,me!==null&&(Mt=ue(me),De=me.tag,me!==Mt||De!==5&&De!==27&&De!==6)&&(me=null)):(W=null,me=j),W!==me)){if(De=_i,X="onMouseLeave",B="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(De=bu,X="onPointerLeave",B="onPointerEnter",U="pointer"),Mt=W==null?$:As(W),G=me==null?$:As(me),$=new De(X,U+"leave",W,o,Y),$.target=Mt,$.relatedTarget=G,X=null,Oi(Y)===j&&(De=new De(B,U+"enter",me,o,Y),De.target=G,De.relatedTarget=Mt,X=De),Mt=X,W&&me)t:{for(De=W,B=me,U=0,G=De;G;G=pl(G))U++;for(G=0,X=B;X;X=pl(X))G++;for(;0<U-G;)De=pl(De),U--;for(;0<G-U;)B=pl(B),G--;for(;U--;){if(De===B||B!==null&&De===B.alternate)break t;De=pl(De),B=pl(B)}De=null}else De=null;W!==null&&X1(ee,$,W,De,!1),me!==null&&Mt!==null&&X1(ee,Mt,me,De,!0)}}e:{if($=j?As(j):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var de=S0;else if(Zt($))if(A0)de=u2;else{de=o2;var Ue=a2}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?j&&_u(j.elementType)&&(de=S0):de=l2;if(de&&(de=de(r,j))){kr(ee,de,o,Y);break e}Ue&&Ue(r,$,j),r==="focusout"&&j&&$.type==="number"&&j.memoizedProps.value!=null&&Lo($,"number",$.value)}switch(Ue=j?As(j):window,r){case"focusin":(Zt(Ue)||Ue.contentEditable==="true")&&($o=Ue,hm=j,Cu=null);break;case"focusout":Cu=hm=$o=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,k0(ee,o,Y);break;case"selectionchange":if(f2)break;case"keydown":case"keyup":k0(ee,o,Y)}var _e;if(ar)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ye?K(r,o)&&(Te="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(E&&o.locale!=="ko"&&(Ye||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ye&&(_e=yu()):(nr=Y,Ds="value"in nr?nr.value:nr.textContent,Ye=!0)),Ue=kf(j,Te),0<Ue.length&&(Te=new wu(Te,r,null,o,Y),ee.push({event:Te,listeners:Ue}),_e?Te.data=_e:(_e=ie(o),_e!==null&&(Te.data=_e)))),(_e=g?Xt(r,o):Xe(r,o))&&(Te=kf(j,"onBeforeInput"),0<Te.length&&(Ue=new wu("onBeforeInput","beforeinput",null,o,Y),ee.push({event:Ue,listeners:Te}),Ue.data=_e)),Q2(ee,r,j,o,Y)}W1(ee,s)})}function ec(r,s,o){return{instance:r,listener:s,currentTarget:o}}function kf(r,s){for(var o=s+"Capture",c=[];r!==null;){var d=r,_=d.stateNode;d=d.tag,d!==5&&d!==26&&d!==27||_===null||(d=La(r,o),d!=null&&c.unshift(ec(r,d,_)),d=La(r,s),d!=null&&c.push(ec(r,d,_))),r=r.return}return c}function pl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function X1(r,s,o,c,d){for(var _=s._reactName,w=[];o!==null&&o!==c;){var C=o,k=C.alternate,j=C.stateNode;if(C=C.tag,k!==null&&k===c)break;C!==5&&C!==26&&C!==27||j===null||(k=j,d?(j=La(o,_),j!=null&&w.unshift(ec(o,j,k))):d||(j=La(o,_),j!=null&&w.push(ec(o,j,k)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var Z2=/\r\n?/g,J2=/\u0000|\uFFFD/g;function Z1(r){return(typeof r=="string"?r:""+r).replace(Z2,`
`).replace(J2,"")}function J1(r,s){return s=Z1(s),Z1(r)===s}function Mf(){}function pt(r,s,o,c,d,_){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||di(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&di(r,""+c);break;case"className":Is(r,"class",c);break;case"tabIndex":Is(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(r,o,c);break;case"style":Ph(r,c,_);break;case"data":if(s!=="object"){Is(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=tr(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(o==="formAction"?(s!=="input"&&pt(r,s,"name",d.name,d,null),pt(r,s,"formEncType",d.formEncType,d,null),pt(r,s,"formMethod",d.formMethod,d,null),pt(r,s,"formTarget",d.formTarget,d,null)):(pt(r,s,"encType",d.encType,d,null),pt(r,s,"method",d.method,d,null),pt(r,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=tr(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=Mf);break;case"onScroll":c!=null&&Qe("scroll",r);break;case"onScrollEnd":c!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=tr(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),Rs(r,"popover",c);break;case"xlinkActuate":fi(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":fi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":fi(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":fi(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":fi(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":fi(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":fi(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":fi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":fi(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Rs(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=rm.get(o)||o,Rs(r,o,c))}}function P_(r,s,o,c,d,_){switch(o){case"style":Ph(r,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?di(r,c):(typeof c=="number"||typeof c=="bigint")&&di(r,""+c);break;case"onScroll":c!=null&&Qe("scroll",r);break;case"onScrollEnd":c!=null&&Qe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),_=r[Yt]||null,_=_!=null?_[o]:null,typeof _=="function"&&r.removeEventListener(s,_,d),typeof c=="function")){typeof _!="function"&&_!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,d);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Rs(r,o,c)}}}function Tn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var c=!1,d=!1,_;for(_ in o)if(o.hasOwnProperty(_)){var w=o[_];if(w!=null)switch(_){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:pt(r,s,_,w,o,null)}}d&&pt(r,s,"srcSet",o.srcSet,o,null),c&&pt(r,s,"src",o.src,o,null);return;case"input":Qe("invalid",r);var C=_=w=d=null,k=null,j=null;for(c in o)if(o.hasOwnProperty(c)){var Y=o[c];if(Y!=null)switch(c){case"name":d=Y;break;case"type":w=Y;break;case"checked":k=Y;break;case"defaultChecked":j=Y;break;case"value":_=Y;break;case"defaultValue":C=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:pt(r,s,c,Y,o,null)}}Ma(r,_,C,k,j,w,d,!1),ka(r);return;case"select":Qe("invalid",r),c=w=_=null;for(d in o)if(o.hasOwnProperty(d)&&(C=o[d],C!=null))switch(d){case"value":_=C;break;case"defaultValue":w=C;break;case"multiple":c=C;default:pt(r,s,d,C,o,null)}s=_,o=w,r.multiple=!!c,s!=null?it(r,!!c,s,!1):o!=null&&it(r,!!c,o,!0);return;case"textarea":Qe("invalid",r),_=d=c=null;for(w in o)if(o.hasOwnProperty(w)&&(C=o[w],C!=null))switch(w){case"value":c=C;break;case"defaultValue":d=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:pt(r,s,w,C,o,null)}xs(r,c,d,_),ka(r);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(c=o[k],c!=null))switch(k){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(r,s,k,c,o,null)}return;case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(c=0;c<Ju.length;c++)Qe(Ju[c],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(c=o[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:pt(r,s,j,c,o,null)}return;default:if(_u(s)){for(Y in o)o.hasOwnProperty(Y)&&(c=o[Y],c!==void 0&&P_(r,s,Y,c,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(c=o[C],c!=null&&pt(r,s,C,c,o,null))}function eN(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,_=null,w=null,C=null,k=null,j=null,Y=null;for(W in o){var ee=o[W];if(o.hasOwnProperty(W)&&ee!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ee;default:c.hasOwnProperty(W)||pt(r,s,W,null,c,ee)}}for(var $ in c){var W=c[$];if(ee=o[$],c.hasOwnProperty($)&&(W!=null||ee!=null))switch($){case"type":_=W;break;case"name":d=W;break;case"checked":j=W;break;case"defaultChecked":Y=W;break;case"value":w=W;break;case"defaultValue":C=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ee&&pt(r,s,$,W,c,ee)}}Ns(r,w,C,k,j,Y,_,d);return;case"select":W=w=C=$=null;for(_ in o)if(k=o[_],o.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":W=k;default:c.hasOwnProperty(_)||pt(r,s,_,null,c,k)}for(d in c)if(_=c[d],k=o[d],c.hasOwnProperty(d)&&(_!=null||k!=null))switch(d){case"value":$=_;break;case"defaultValue":C=_;break;case"multiple":w=_;default:_!==k&&pt(r,s,d,_,c,k)}s=C,o=w,c=W,$!=null?it(r,!!o,$,!1):!!c!=!!o&&(s!=null?it(r,!!o,s,!0):it(r,!!o,o?[]:"",!1));return;case"textarea":W=$=null;for(C in o)if(d=o[C],o.hasOwnProperty(C)&&d!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:pt(r,s,C,null,c,d)}for(w in c)if(d=c[w],_=o[w],c.hasOwnProperty(w)&&(d!=null||_!=null))switch(w){case"value":$=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==_&&pt(r,s,w,d,c,_)}Pa(r,$,W);return;case"option":for(var me in o)if($=o[me],o.hasOwnProperty(me)&&$!=null&&!c.hasOwnProperty(me))switch(me){case"selected":r.selected=!1;break;default:pt(r,s,me,null,c,$)}for(k in c)if($=c[k],W=o[k],c.hasOwnProperty(k)&&$!==W&&($!=null||W!=null))switch(k){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:pt(r,s,k,$,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)$=o[De],o.hasOwnProperty(De)&&$!=null&&!c.hasOwnProperty(De)&&pt(r,s,De,null,c,$);for(j in c)if($=c[j],W=o[j],c.hasOwnProperty(j)&&$!==W&&($!=null||W!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:pt(r,s,j,$,c,W)}return;default:if(_u(s)){for(var Mt in o)$=o[Mt],o.hasOwnProperty(Mt)&&$!==void 0&&!c.hasOwnProperty(Mt)&&P_(r,s,Mt,void 0,c,$);for(Y in c)$=c[Y],W=o[Y],!c.hasOwnProperty(Y)||$===W||$===void 0&&W===void 0||P_(r,s,Y,$,c,W);return}}for(var B in o)$=o[B],o.hasOwnProperty(B)&&$!=null&&!c.hasOwnProperty(B)&&pt(r,s,B,null,c,$);for(ee in c)$=c[ee],W=o[ee],!c.hasOwnProperty(ee)||$===W||$==null&&W==null||pt(r,s,ee,$,c,W)}var L_=null,V_=null;function Pf(r){return r.nodeType===9?r:r.ownerDocument}function ew(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function U_(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var j_=null;function tN(){var r=window.event;return r&&r.type==="popstate"?r===j_?!1:(j_=r,!0):(j_=null,!1)}var nw=typeof setTimeout=="function"?setTimeout:void 0,nN=typeof clearTimeout=="function"?clearTimeout:void 0,iw=typeof Promise=="function"?Promise:void 0,iN=typeof queueMicrotask=="function"?queueMicrotask:typeof iw<"u"?function(r){return iw.resolve(null).then(r).catch(rN)}:nw;function rN(r){setTimeout(function(){throw r})}function z_(r,s){var o=s,c=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){r.removeChild(d),lc(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);lc(s)}function F_(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":F_(o),Oa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function sN(r,s,o,c){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ss])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==d.rel||r.getAttribute("href")!==(d.href==null?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var _=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Li(r.nextSibling),r===null)break}return null}function aN(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Li(r.nextSibling),r===null))return null;return r}function Li(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function rw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function sw(r,s,o){switch(s=Pf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var Ci=new Map,aw=new Set;function Lf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Qr=ge.d;ge.d={f:oN,r:lN,D:uN,C:cN,L:hN,m:fN,X:pN,S:dN,M:mN};function oN(){var r=Qr.f(),s=If();return r||s}function lN(r){var s=Cr(r);s!==null&&s.tag===5&&s.type==="form"?kE(s):Qr.r(r)}var ml=typeof document>"u"?null:document;function ow(r,s,o){var c=ml;if(c&&typeof s=="string"&&s){var d=Dt(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),aw.has(d)||(aw.add(d),r={rel:r,crossOrigin:o,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),Tn(s,"link",r),Ct(s),c.head.appendChild(s)))}}function uN(r){Qr.D(r),ow("dns-prefetch",r,null)}function cN(r,s){Qr.C(r,s),ow("preconnect",r,s)}function hN(r,s,o){Qr.L(r,s,o);var c=ml;if(c&&r&&s){var d='link[rel="preload"][as="'+Dt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Dt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Dt(o.imageSizes)+'"]')):d+='[href="'+Dt(r)+'"]';var _=d;switch(s){case"style":_=_l(r);break;case"script":_=gl(r)}Ci.has(_)||(r=R({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ci.set(_,r),c.querySelector(d)!==null||s==="style"&&c.querySelector(tc(_))||s==="script"&&c.querySelector(nc(_))||(s=c.createElement("link"),Tn(s,"link",r),Ct(s),c.head.appendChild(s)))}}function fN(r,s){Qr.m(r,s);var o=ml;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Dt(c)+'"][href="'+Dt(r)+'"]',_=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=gl(r)}if(!Ci.has(_)&&(r=R({rel:"modulepreload",href:r},s),Ci.set(_,r),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nc(_)))return}c=o.createElement("link"),Tn(c,"link",r),Ct(c),o.head.appendChild(c)}}}function dN(r,s,o){Qr.S(r,s,o);var c=ml;if(c&&r){var d=Cs(c).hoistableStyles,_=_l(r);s=s||"default";var w=d.get(_);if(!w){var C={loading:0,preload:null};if(w=c.querySelector(tc(_)))C.loading=5;else{r=R({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ci.get(_))&&B_(r,o);var k=w=c.createElement("link");Ct(k),Tn(k,"link",r),k._p=new Promise(function(j,Y){k.onload=j,k.onerror=Y}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Vf(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:C},d.set(_,w)}}}function pN(r,s){Qr.X(r,s);var o=ml;if(o&&r){var c=Cs(o).hoistableScripts,d=gl(r),_=c.get(d);_||(_=o.querySelector(nc(d)),_||(r=R({src:r,async:!0},s),(s=Ci.get(d))&&q_(r,s),_=o.createElement("script"),Ct(_),Tn(_,"link",r),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(d,_))}}function mN(r,s){Qr.M(r,s);var o=ml;if(o&&r){var c=Cs(o).hoistableScripts,d=gl(r),_=c.get(d);_||(_=o.querySelector(nc(d)),_||(r=R({src:r,async:!0,type:"module"},s),(s=Ci.get(d))&&q_(r,s),_=o.createElement("script"),Ct(_),Tn(_,"link",r),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(d,_))}}function lw(r,s,o,c){var d=(d=nt.current)?Lf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=_l(o.href),o=Cs(d).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=_l(o.href);var _=Cs(d).hoistableStyles,w=_.get(r);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,w),(_=d.querySelector(tc(r)))&&!_._p&&(w.instance=_,w.state.loading=5),Ci.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ci.set(r,o),_||_N(d,r,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=gl(o),o=Cs(d).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function _l(r){return'href="'+Dt(r)+'"'}function tc(r){return'link[rel="stylesheet"]['+r+"]"}function uw(r){return R({},r,{"data-precedence":r.precedence,precedence:null})}function _N(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Tn(s,"link",o),Ct(s),r.head.appendChild(s))}function gl(r){return'[src="'+Dt(r)+'"]'}function nc(r){return"script[async]"+r}function cw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+Dt(o.href)+'"]');if(c)return s.instance=c,Ct(c),c;var d=R({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Ct(c),Tn(c,"style",d),Vf(c,o.precedence,r),s.instance=c;case"stylesheet":d=_l(o.href);var _=r.querySelector(tc(d));if(_)return s.state.loading|=4,s.instance=_,Ct(_),_;c=uw(o),(d=Ci.get(d))&&B_(c,d),_=(r.ownerDocument||r).createElement("link"),Ct(_);var w=_;return w._p=new Promise(function(C,k){w.onload=C,w.onerror=k}),Tn(_,"link",c),s.state.loading|=4,Vf(_,o.precedence,r),s.instance=_;case"script":return _=gl(o.src),(d=r.querySelector(nc(_)))?(s.instance=d,Ct(d),d):(c=o,(d=Ci.get(_))&&(c=R({},o),q_(c,d)),r=r.ownerDocument||r,d=r.createElement("script"),Ct(d),Tn(d,"link",c),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Vf(c,o.precedence,r));return s.instance}function Vf(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,_=d,w=0;w<c.length;w++){var C=c[w];if(C.dataset.precedence===s)_=C;else if(_!==d)break}_?_.parentNode.insertBefore(r,_.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function B_(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function q_(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Uf=null;function hw(r,s,o){if(Uf===null){var c=new Map,d=Uf=new Map;d.set(o,c)}else d=Uf,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var _=o[d];if(!(_[Ss]||_[on]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(s)||"";w=r+w;var C=c.get(w);C?C.push(_):c.set(w,[_])}}return c}function fw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function gN(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function dw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ic=null;function yN(){}function vN(r,s,o){if(ic===null)throw Error(i(475));var c=ic;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=_l(o.href),_=r.querySelector(tc(d));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=jf.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=_,Ct(_);return}_=r.ownerDocument||r,o=uw(o),(d=Ci.get(d))&&B_(o,d),_=_.createElement("link"),Ct(_);var w=_;w._p=new Promise(function(C,k){w.onload=C,w.onerror=k}),Tn(_,"link",o),s.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=jf.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function EN(){if(ic===null)throw Error(i(475));var r=ic;return r.stylesheets&&r.count===0&&H_(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&H_(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function jf(){if(this.count--,this.count===0){if(this.stylesheets)H_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var zf=null;function H_(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,zf=new Map,s.forEach(wN,r),zf=null,jf.call(r))}function wN(r,s){if(!(s.state.loading&4)){var o=zf.get(r);if(o)var c=o.get(null);else{o=new Map,zf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<d.length;_++){var w=d[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}d=s.instance,w=d.getAttribute("data-precedence"),_=o.get(w)||c,_===c&&o.set(null,d),o.set(w,d),this.count++,c=jf.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),_?_.parentNode.insertBefore(d,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var rc={$$typeof:I,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function TN(r,s,o,c,d,_,w,C){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.hiddenUpdates=Oo(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function pw(r,s,o,c,d,_,w,C,k,j,Y,ee){return r=new TN(r,s,o,w,C,k,j,ee),s=1,_===!0&&(s|=24),_=Si(3,null,null,s),r.current=_,_.stateNode=r,s=Tm(),s.refCount++,r.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:o,cache:s},n_(_),r}function mw(r){return r?(r=Wo,r):Wo}function _w(r,s,o,c,d,_){d=mw(d),c.context===null?c.context=d:c.pendingContext=d,c=js(s),c.payload={element:o},_=_===void 0?null:_,_!==null&&(c.callback=_),o=zs(r,c,s),o!==null&&(Un(o,r,s),Fu(o,r,s))}function gw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function G_(r,s){gw(r,s),(r=r.alternate)&&gw(r,s)}function yw(r){if(r.tag===13){var s=Os(r,67108864);s!==null&&Un(s,r,67108864),G_(r,67108864)}}var Ff=!0;function bN(r,s,o,c){var d=T.T;T.T=null;var _=ge.p;try{ge.p=2,$_(r,s,o,c)}finally{ge.p=_,T.T=d}}function SN(r,s,o,c){var d=T.T;T.T=null;var _=ge.p;try{ge.p=8,$_(r,s,o,c)}finally{ge.p=_,T.T=d}}function $_(r,s,o,c){if(Ff){var d=K_(c);if(d===null)M_(r,s,c,Bf,o),Ew(r,c);else if(CN(d,r,s,o,c))c.stopPropagation();else if(Ew(r,c),s&4&&-1<AN.indexOf(r)){for(;d!==null;){var _=Cr(d);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=Di(_.pendingLanes);if(w!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var k=1<<31-Mn(w);C.entanglements[1]|=k,w&=~k}fr(_),(It&6)===0&&(Af=ot()+500,Zu(0))}}break;case 13:C=Os(_,2),C!==null&&Un(C,_,2),If(),G_(_,2)}if(_=K_(c),_===null&&M_(r,s,c,Bf,o),_===d)break;d=_}d!==null&&c.stopPropagation()}else M_(r,s,c,null,o)}}function K_(r){return r=Vo(r),Q_(r)}var Bf=null;function Q_(r){if(Bf=null,r=Oi(r),r!==null){var s=ue(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=ce(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Bf=r,null}function vw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case Ve:return 2;case et:return 8;case Qt:case _s:return 32;case gs:return 268435456;default:return 32}default:return 32}}var W_=!1,Ks=null,Qs=null,Ws=null,sc=new Map,ac=new Map,Ys=[],AN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ew(r,s){switch(r){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":sc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(s.pointerId)}}function oc(r,s,o,c,d,_){return r===null||r.nativeEvent!==_?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:_,targetContainers:[d]},s!==null&&(s=Cr(s),s!==null&&yw(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function CN(r,s,o,c,d){switch(s){case"focusin":return Ks=oc(Ks,r,s,o,c,d),!0;case"dragenter":return Qs=oc(Qs,r,s,o,c,d),!0;case"mouseover":return Ws=oc(Ws,r,s,o,c,d),!0;case"pointerover":var _=d.pointerId;return sc.set(_,oc(sc.get(_)||null,r,s,o,c,d)),!0;case"gotpointercapture":return _=d.pointerId,ac.set(_,oc(ac.get(_)||null,r,s,o,c,d)),!0}return!1}function ww(r){var s=Oi(r.target);if(s!==null){var o=ue(s);if(o!==null){if(s=o.tag,s===13){if(s=ce(o),s!==null){r.blockedOn=s,bs(r.priority,function(){if(o.tag===13){var c=li(),d=Os(o,c);d!==null&&Un(d,o,c),G_(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=K_(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);pi=c,o.target.dispatchEvent(c),pi=null}else return s=Cr(o),s!==null&&yw(s),r.blockedOn=o,!1;s.shift()}return!0}function Tw(r,s,o){qf(r)&&o.delete(s)}function RN(){W_=!1,Ks!==null&&qf(Ks)&&(Ks=null),Qs!==null&&qf(Qs)&&(Qs=null),Ws!==null&&qf(Ws)&&(Ws=null),sc.forEach(Tw),ac.forEach(Tw)}function Hf(r,s){r.blockedOn===s&&(r.blockedOn=null,W_||(W_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,RN)))}var Gf=null;function bw(r){Gf!==r&&(Gf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gf===r&&(Gf=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],d=r[s+2];if(typeof c!="function"){if(Q_(c||o)===null)continue;break}var _=Cr(o);_!==null&&(r.splice(s,3),s-=3,Um(_,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function lc(r){function s(k){return Hf(k,r)}Ks!==null&&Hf(Ks,r),Qs!==null&&Hf(Qs,r),Ws!==null&&Hf(Ws,r),sc.forEach(s),ac.forEach(s);for(var o=0;o<Ys.length;o++){var c=Ys[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Ys.length&&(o=Ys[0],o.blockedOn===null);)ww(o),o.blockedOn===null&&Ys.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],_=o[c+1],w=d[Yt]||null;if(typeof _=="function")w||bw(o);else if(w){var C=null;if(_&&_.hasAttribute("formAction")){if(d=_,w=_[Yt]||null)C=w.formAction;else if(Q_(d)!==null)continue}else C=w.action;typeof C=="function"?o[c+1]=C:(o.splice(c,3),c-=3),bw(o)}}}function Y_(r){this._internalRoot=r}$f.prototype.render=Y_.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=li();_w(o,c,r,s,null,null)},$f.prototype.unmount=Y_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&fl(),_w(r.current,2,null,r,null,null),If(),s[Ar]=null}};function $f(r){this._internalRoot=r}$f.prototype.unstable_scheduleHydration=function(r){if(r){var s=Oh();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Ys.length&&s!==0&&s<Ys[o].priority;o++);Ys.splice(o,0,r),o===0&&ww(r)}};var Sw=e.version;if(Sw!=="19.0.0")throw Error(i(527,Sw,"19.0.0"));ge.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=be(s),r=r!==null?ve(r):null,r=r===null?null:r.stateNode,r};var IN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:T,findFiberByHostInstance:Oi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{Gn=Kf.inject(IN),Wt=Kf}catch{}}return cc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",d=FE,_=BE,w=qE,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=pw(r,1,!1,null,null,o,c,d,_,w,C,null),r[Ar]=s.current,k_(r.nodeType===8?r.parentNode:r),new Y_(s)},cc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,d="",_=FE,w=BE,C=qE,k=null,j=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(j=o.formState)),s=pw(r,1,!0,s,o??null,c,d,_,w,C,k,j),s.context=mw(null),o=s.current,c=li(),d=js(c),d.callback=null,zs(o,d,c),s.current.lanes=c,Vt(s,c),fr(s),r[Ar]=s.current,k_(r),new $f(s)},cc.version="19.0.0",cc}var xw;function UN(){if(xw)return J_.exports;xw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),J_.exports=VN(),J_.exports}var jN=UN(),hc={},Dw;function zN(){if(Dw)return hc;Dw=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.parse=u,hc.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function u(b,I){const x=new l,V=b.length;if(V<2)return x;const M=(I==null?void 0:I.decode)||y;let H=0;do{const Q=b.indexOf("=",H);if(Q===-1)break;const z=b.indexOf(";",H),te=z===-1?V:z;if(Q>te){H=b.lastIndexOf(";",Q-1)+1;continue}const le=h(b,H,Q),ne=p(b,Q,le),P=b.slice(le,ne);if(x[P]===void 0){let S=h(b,Q+1,te),T=p(b,te,S);const R=M(b.slice(S,T));x[P]=R}H=te+1}while(H<V);return x}function h(b,I,x){do{const V=b.charCodeAt(I);if(V!==32&&V!==9)return I}while(++I<x);return x}function p(b,I,x){for(;I>x;){const V=b.charCodeAt(--I);if(V!==32&&V!==9)return I+1}return x}function m(b,I,x){const V=(x==null?void 0:x.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const M=V(I);if(!e.test(M))throw new TypeError(`argument val is invalid: ${I}`);let H=b+"="+M;if(!x)return H;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);H+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);H+="; Domain="+x.domain}if(x.path){if(!i.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);H+="; Path="+x.path}if(x.expires){if(!v(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);H+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(H+="; HttpOnly"),x.secure&&(H+="; Secure"),x.partitioned&&(H+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return H}function y(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return a.call(b)==="[object Date]"}return hc}zN();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ow="popstate";function FN(n={}){function e(i,a){let{pathname:l,search:u,hash:h}=i.location;return Mg("",{pathname:l,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Vc(a)}return qN(e,t,null,n)}function Nt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function yr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BN(){return Math.random().toString(36).substring(2,10)}function kw(n,e){return{usr:n.state,key:n.key,idx:e}}function Mg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Kl(e):e,state:t,key:e&&e.key||i||BN()}}function Vc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Kl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function qN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,h="POP",p=null,m=y();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let M=y(),H=M==null?null:M-m;m=M,p&&p({action:h,location:V.location,delta:H})}function b(M,H){h="PUSH";let Q=Mg(V.location,M,H);m=y()+1;let z=kw(Q,m),te=V.createHref(Q);try{u.pushState(z,"",te)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(te)}l&&p&&p({action:h,location:V.location,delta:1})}function I(M,H){h="REPLACE";let Q=Mg(V.location,M,H);m=y();let z=kw(Q,m),te=V.createHref(Q);u.replaceState(z,"",te),l&&p&&p({action:h,location:V.location,delta:0})}function x(M){let H=a.location.origin!=="null"?a.location.origin:a.location.href,Q=typeof M=="string"?M:Vc(M);return Q=Q.replace(/ $/,"%20"),Nt(H,`No window.location.(origin|href) available to create URL for href: ${Q}`),new URL(Q,H)}let V={get action(){return h},get location(){return n(a,u)},listen(M){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Ow,v),p=M,()=>{a.removeEventListener(Ow,v),p=null}},createHref(M){return e(a,M)},createURL:x,encodeLocation(M){let H=x(M);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:b,replace:I,go(M){return u.go(M)}};return V}function _S(n,e,t="/"){return HN(n,e,t,!1)}function HN(n,e,t,i){let a=typeof e=="string"?Kl(e):e,l=fa(a.pathname||"/",t);if(l==null)return null;let u=gS(n);GN(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let m=nx(l);h=ex(u[p],m,i)}return h}function gS(n,e=[],t=[],i=""){let a=(l,u,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(Nt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let m=ns([i,p.relativePath]),y=t.concat(p);l.children&&l.children.length>0&&(Nt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),gS(l.children,e,y,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:ZN(m,l.index),routesMeta:y})};return n.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,u);else for(let p of yS(l.path))a(l,u,p)}),e}function yS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=yS(i.join("/")),h=[];return h.push(...u.map(p=>p===""?l:[l,p].join("/"))),a&&h.push(...u),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function GN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:JN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var $N=/^:[\w-]+$/,KN=3,QN=2,WN=1,YN=10,XN=-2,Mw=n=>n==="*";function ZN(n,e){let t=n.split("/"),i=t.length;return t.some(Mw)&&(i+=XN),e&&(i+=QN),t.filter(a=>!Mw(a)).reduce((a,l)=>a+($N.test(l)?KN:l===""?WN:YN),i)}function JN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function ex(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let h=0;h<i.length;++h){let p=i[h],m=h===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=Ad({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},y),b=p.route;if(!v&&m&&t&&!i[i.length-1].route.index&&(v=Ad({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:ns([l,v.pathname]),pathnameBase:ax(ns([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=ns([l,v.pathnameBase]))}return u}function Ad(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=tx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((m,{paramName:y,isOptional:v},b)=>{if(y==="*"){let x=h[b]||"";u=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const I=h[b];return v&&!I?m[y]=void 0:m[y]=(I||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:n}}function tx(n,e=!1,t=!0){yr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function nx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function fa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function ix(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Kl(n):n;return{pathname:t?t.startsWith("/")?t:rx(t,e):e,search:ox(i),hash:lx(a)}}function rx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function ng(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vS(n){let e=sx(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ES(n,e,t,i=!1){let a;typeof n=="string"?a=Kl(n):(a={...n},Nt(!a.pathname||!a.pathname.includes("?"),ng("?","pathname","search",a)),Nt(!a.pathname||!a.pathname.includes("#"),ng("#","pathname","hash",a)),Nt(!a.search||!a.search.includes("#"),ng("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}h=v>=0?e[v]:"/"}let p=ix(a,h),m=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||y)&&(p.pathname+="/"),p}var ns=n=>n.join("/").replace(/\/\/+/g,"/"),ax=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ox=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ux(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var wS=["POST","PUT","PATCH","DELETE"];new Set(wS);var cx=["GET",...wS];new Set(cx);var Ql=F.createContext(null);Ql.displayName="DataRouter";var _p=F.createContext(null);_p.displayName="DataRouterState";var TS=F.createContext({isTransitioning:!1});TS.displayName="ViewTransition";var hx=F.createContext(new Map);hx.displayName="Fetchers";var fx=F.createContext(null);fx.displayName="Await";var Tr=F.createContext(null);Tr.displayName="Navigation";var oh=F.createContext(null);oh.displayName="Location";var Wi=F.createContext({outlet:null,matches:[],isDataRoute:!1});Wi.displayName="Route";var ky=F.createContext(null);ky.displayName="RouteError";function dx(n,{relative:e}={}){Nt(lh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=F.useContext(Tr),{hash:a,pathname:l,search:u}=uh(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:ns([t,l])),i.createHref({pathname:h,search:u,hash:a})}function lh(){return F.useContext(oh)!=null}function bo(){return Nt(lh(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(oh).location}var bS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SS(n){F.useContext(Tr).static||F.useLayoutEffect(n)}function Wl(){let{isDataRoute:n}=F.useContext(Wi);return n?Nx():px()}function px(){Nt(lh(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(Ql),{basename:e,navigator:t}=F.useContext(Tr),{matches:i}=F.useContext(Wi),{pathname:a}=bo(),l=JSON.stringify(vS(i)),u=F.useRef(!1);return SS(()=>{u.current=!0}),F.useCallback((p,m={})=>{if(yr(u.current,bS),!u.current)return;if(typeof p=="number"){t.go(p);return}let y=ES(p,JSON.parse(l),a,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ns([e,y.pathname])),(m.replace?t.replace:t.push)(y,m.state,m)},[e,t,l,a,n])}var mx=F.createContext(null);function _x(n){let e=F.useContext(Wi).outlet;return e&&F.createElement(mx.Provider,{value:n},e)}function gx(){let{matches:n}=F.useContext(Wi),e=n[n.length-1];return e?e.params:{}}function uh(n,{relative:e}={}){let{matches:t}=F.useContext(Wi),{pathname:i}=bo(),a=JSON.stringify(vS(t));return F.useMemo(()=>ES(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function yx(n,e){return AS(n,e)}function AS(n,e,t,i){var Q;Nt(lh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=F.useContext(Tr),{matches:u}=F.useContext(Wi),h=u[u.length-1],p=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let z=v&&v.path||"";CS(m,!v||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let b=bo(),I;if(e){let z=typeof e=="string"?Kl(e):e;Nt(y==="/"||((Q=z.pathname)==null?void 0:Q.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),I=z}else I=b;let x=I.pathname||"/",V=x;if(y!=="/"){let z=y.replace(/^\//,"").split("/");V="/"+x.replace(/^\//,"").split("/").slice(z.length).join("/")}let M=!l&&t&&t.matches&&t.matches.length>0?t.matches:_S(n,{pathname:V});yr(v||M!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),yr(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=bx(M&&M.map(z=>Object.assign({},z,{params:Object.assign({},p,z.params),pathname:ns([y,a.encodeLocation?a.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:ns([y,a.encodeLocation?a.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),u,t,i);return e&&H?F.createElement(oh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},H):H}function vx(){let n=Ix(),e=ux(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:l},"ErrorBoundary")," or"," ",F.createElement("code",{style:l},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:a},t):null,u)}var Ex=F.createElement(vx,null),wx=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(Wi.Provider,{value:this.props.routeContext},F.createElement(ky.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tx({routeContext:n,match:e,children:t}){let i=F.useContext(Ql);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Wi.Provider,{value:n},t)}function bx(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Nt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:y,errors:v}=t,b=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,m,y)=>{let v,b=!1,I=null,x=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,I=m.route.errorElement||Ex,u&&(h<0&&y===0?(CS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):h===y&&(b=!0,x=m.route.hydrateFallbackElement||null)));let V=e.concat(a.slice(0,y+1)),M=()=>{let H;return v?H=I:b?H=x:m.route.Component?H=F.createElement(m.route.Component,null):m.route.element?H=m.route.element:H=p,F.createElement(Tx,{match:m,routeContext:{outlet:p,matches:V,isDataRoute:t!=null},children:H})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?F.createElement(wx,{location:t.location,revalidation:t.revalidation,component:I,error:v,children:M(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):M()},null)}function My(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sx(n){let e=F.useContext(Ql);return Nt(e,My(n)),e}function Ax(n){let e=F.useContext(_p);return Nt(e,My(n)),e}function Cx(n){let e=F.useContext(Wi);return Nt(e,My(n)),e}function Py(n){let e=Cx(n),t=e.matches[e.matches.length-1];return Nt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Rx(){return Py("useRouteId")}function Ix(){var i;let n=F.useContext(ky),e=Ax("useRouteError"),t=Py("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function Nx(){let{router:n}=Sx("useNavigate"),e=Py("useNavigate"),t=F.useRef(!1);return SS(()=>{t.current=!0}),F.useCallback(async(a,l={})=>{yr(t.current,bS),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Pw={};function CS(n,e,t){!e&&!Pw[n]&&(Pw[n]=!0,yr(!1,t))}F.memo(xx);function xx({routes:n,future:e,state:t}){return AS(n,void 0,t,e)}function Dx(n){return _x(n.context)}function yc(n){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ox({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){Nt(!lh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=F.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Kl(t));let{pathname:p="/",search:m="",hash:y="",state:v=null,key:b="default"}=t,I=F.useMemo(()=>{let x=fa(p,u);return x==null?null:{location:{pathname:x,search:m,hash:y,state:v,key:b},navigationType:i}},[u,p,m,y,v,b,i]);return yr(I!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:F.createElement(Tr.Provider,{value:h},F.createElement(oh.Provider,{children:e,value:I}))}function kx({children:n,location:e}){return yx(Pg(n),e)}function Pg(n,e=[]){let t=[];return F.Children.forEach(n,(i,a)=>{if(!F.isValidElement(i))return;let l=[...e,a];if(i.type===F.Fragment){t.push.apply(t,Pg(i.props.children,l));return}Nt(i.type===yc,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Pg(i.props.children,l)),t.push(u)}),t}var ld="get",ud="application/x-www-form-urlencoded";function gp(n){return n!=null&&typeof n.tagName=="string"}function Mx(n){return gp(n)&&n.tagName.toLowerCase()==="button"}function Px(n){return gp(n)&&n.tagName.toLowerCase()==="form"}function Lx(n){return gp(n)&&n.tagName.toLowerCase()==="input"}function Vx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Ux(n,e){return n.button===0&&(!e||e==="_self")&&!Vx(n)}var Qf=null;function jx(){if(Qf===null)try{new FormData(document.createElement("form"),0),Qf=!1}catch{Qf=!0}return Qf}var zx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ig(n){return n!=null&&!zx.has(n)?(yr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ud}"`),null):n}function Fx(n,e){let t,i,a,l,u;if(Px(n)){let h=n.getAttribute("action");i=h?fa(h,e):null,t=n.getAttribute("method")||ld,a=ig(n.getAttribute("enctype"))||ud,l=new FormData(n)}else if(Mx(n)||Lx(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(i=p?fa(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||ld,a=ig(n.getAttribute("formenctype"))||ig(h.getAttribute("enctype"))||ud,l=new FormData(h,n),!jx()){let{name:m,type:y,value:v}=n;if(y==="image"){let b=m?`${m}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else m&&l.append(m,v)}}else{if(gp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ld,i=null,a=ud,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}function Ly(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Bx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Hx(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await Bx(l,t);return u.links?u.links():[]}return[]}));return Qx(i.flat(1).filter(qx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Lw(n,e,t,i,a,l){let u=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,h=(p,m)=>{var y;return t[m].pathname!==p.pathname||((y=t[m].route.path)==null?void 0:y.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,m)=>u(p,m)||h(p,m)):l==="data"?e.filter((p,m)=>{var v;let y=i.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(u(p,m)||h(p,m))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Gx(n,e,{includeHydrateFallback:t}={}){return $x(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function $x(n){return[...new Set(n)]}function Kx(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Qx(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(Kx(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function Wx(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Yx(){let n=F.useContext(Ql);return Ly(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Xx(){let n=F.useContext(_p);return Ly(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Vy=F.createContext(void 0);Vy.displayName="FrameworkContext";function RS(){let n=F.useContext(Vy);return Ly(n,"You must render this element inside a <HydratedRouter> element"),n}function Zx(n,e){let t=F.useContext(Vy),[i,a]=F.useState(!1),[l,u]=F.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:m,onMouseLeave:y,onTouchStart:v}=e,b=F.useRef(null);F.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let V=H=>{H.forEach(Q=>{u(Q.isIntersecting)})},M=new IntersectionObserver(V,{threshold:.5});return b.current&&M.observe(b.current),()=>{M.disconnect()}}},[n]),F.useEffect(()=>{if(i){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[i]);let I=()=>{a(!0)},x=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:fc(h,I),onBlur:fc(p,x),onMouseEnter:fc(m,I),onMouseLeave:fc(y,x),onTouchStart:fc(v,I)}]:[!1,b,{}]}function fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Jx({page:n,...e}){let{router:t}=Yx(),i=F.useMemo(()=>_S(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?F.createElement(tD,{page:n,matches:i,...e}):null}function eD(n){let{manifest:e,routeModules:t}=RS(),[i,a]=F.useState([]);return F.useEffect(()=>{let l=!1;return Hx(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function tD({page:n,matches:e,...t}){let i=bo(),{manifest:a,routeModules:l}=RS(),{loaderData:u,matches:h}=Xx(),p=F.useMemo(()=>Lw(n,e,h,a,i,"data"),[n,e,h,a,i]),m=F.useMemo(()=>Lw(n,e,h,a,i,"assets"),[n,e,h,a,i]),y=F.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let I=new Set,x=!1;if(e.forEach(M=>{var Q;let H=a.routes[M.route.id];!H||!H.hasLoader||(!p.some(z=>z.route.id===M.route.id)&&M.route.id in u&&((Q=l[M.route.id])!=null&&Q.shouldRevalidate)||H.hasClientLoader?x=!0:I.add(M.route.id))}),I.size===0)return[];let V=Wx(n);return x&&I.size>0&&V.searchParams.set("_routes",e.filter(M=>I.has(M.route.id)).map(M=>M.route.id).join(",")),[V.pathname+V.search]},[u,i,a,p,e,n,l]),v=F.useMemo(()=>Gx(m,a),[m,a]),b=eD(m);return F.createElement(F.Fragment,null,y.map(I=>F.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),v.map(I=>F.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),b.map(({key:I,link:x})=>F.createElement("link",{key:I,...x})))}function nD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IS&&(window.__reactRouterVersion="7.2.0")}catch{}function iD({basename:n,children:e,window:t}){let i=F.useRef();i.current==null&&(i.current=FN({window:t,v5Compat:!0}));let a=i.current,[l,u]=F.useState({action:a.action,location:a.location}),h=F.useCallback(p=>{F.startTransition(()=>u(p))},[u]);return F.useLayoutEffect(()=>a.listen(h),[a,h]),F.createElement(Ox,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var NS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uy=F.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:h,target:p,to:m,preventScrollReset:y,viewTransition:v,...b},I){let{basename:x}=F.useContext(Tr),V=typeof m=="string"&&NS.test(m),M,H=!1;if(typeof m=="string"&&V&&(M=m,IS))try{let T=new URL(window.location.href),R=m.startsWith("//")?new URL(T.protocol+m):new URL(m),O=fa(R.pathname,x);R.origin===T.origin&&O!=null?m=O+R.search+R.hash:H=!0}catch{yr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=dx(m,{relative:a}),[z,te,le]=Zx(i,b),ne=oD(m,{replace:u,state:h,target:p,preventScrollReset:y,relative:a,viewTransition:v});function P(T){e&&e(T),T.defaultPrevented||ne(T)}let S=F.createElement("a",{...b,...le,href:M||Q,onClick:H||l?e:P,ref:nD(I,te),target:p,"data-discover":!V&&t==="render"?"true":void 0});return z&&!V?F.createElement(F.Fragment,null,S,F.createElement(Jx,{page:Q})):S});Uy.displayName="Link";var rD=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:h,children:p,...m},y){let v=uh(u,{relative:m.relative}),b=bo(),I=F.useContext(_p),{navigator:x,basename:V}=F.useContext(Tr),M=I!=null&&fD(v)&&h===!0,H=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,Q=b.pathname,z=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),z=z?z.toLowerCase():null,H=H.toLowerCase()),z&&V&&(z=fa(z,V)||z);const te=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let le=Q===H||!a&&Q.startsWith(H)&&Q.charAt(te)==="/",ne=z!=null&&(z===H||!a&&z.startsWith(H)&&z.charAt(H.length)==="/"),P={isActive:le,isPending:ne,isTransitioning:M},S=le?e:void 0,T;typeof i=="function"?T=i(P):T=[i,le?"active":null,ne?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let R=typeof l=="function"?l(P):l;return F.createElement(Uy,{...m,"aria-current":S,className:T,ref:y,style:R,to:u,viewTransition:h},typeof p=="function"?p(P):p)});rD.displayName="NavLink";var sD=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=ld,action:h,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:v,...b},I)=>{let x=cD(),V=hD(h,{relative:m}),M=u.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&NS.test(h),Q=z=>{if(p&&p(z),z.defaultPrevented)return;z.preventDefault();let te=z.nativeEvent.submitter,le=(te==null?void 0:te.getAttribute("formmethod"))||u;x(te||z.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:m,preventScrollReset:y,viewTransition:v})};return F.createElement("form",{ref:I,method:M,action:V,onSubmit:i?p:Q,...b,"data-discover":!H&&n==="render"?"true":void 0})});sD.displayName="Form";function aD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(n){let e=F.useContext(Ql);return Nt(e,aD(n)),e}function oD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let h=Wl(),p=bo(),m=uh(n,{relative:l});return F.useCallback(y=>{if(Ux(y,e)){y.preventDefault();let v=t!==void 0?t:Vc(p)===Vc(m);h(n,{replace:v,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[p,h,m,t,i,e,n,a,l,u])}var lD=0,uD=()=>`__${String(++lD)}__`;function cD(){let{router:n}=xS("useSubmit"),{basename:e}=F.useContext(Tr),t=Rx();return F.useCallback(async(i,a={})=>{let{action:l,method:u,encType:h,formData:p,body:m}=Fx(i,e);if(a.navigate===!1){let y=a.fetcherKey||uD();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function hD(n,{relative:e}={}){let{basename:t}=F.useContext(Tr),i=F.useContext(Wi);Nt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...uh(n||".",{relative:e})},u=bo();if(n==null){l.search=u.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(y=>y==="")){h.delete("index"),p.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ns([t,l.pathname])),Vc(l)}function fD(n,e={}){let t=F.useContext(TS);Nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xS("useViewTransitionState"),a=uh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=fa(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=fa(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ad(a.pathname,u)!=null||Ad(a.pathname,l)!=null}new TextEncoder;var rg={exports:{}},sg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function dD(){if(Vw)return sg;Vw=1;var n=Dy();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return sg.useSyncExternalStoreWithSelector=function(p,m,y,v,b){var I=a(null);if(I.current===null){var x={hasValue:!1,value:null};I.current=x}else x=I.current;I=u(function(){function M(le){if(!H){if(H=!0,Q=le,le=v(le),b!==void 0&&x.hasValue){var ne=x.value;if(b(ne,le))return z=ne}return z=le}if(ne=z,t(Q,le))return ne;var P=v(le);return b!==void 0&&b(ne,P)?(Q=le,ne):(Q=le,z=P)}var H=!1,Q,z,te=y===void 0?null:y;return[function(){return M(m())},te===null?void 0:function(){return M(te())}]},[m,y,v,b]);var V=i(p,I[0],I[1]);return l(function(){x.hasValue=!0,x.value=V},[V]),h(V),V},sg}var Uw;function pD(){return Uw||(Uw=1,rg.exports=dD()),rg.exports}var mD=pD();function _D(n){n()}function gD(){let n=null,e=null;return{clear(){n=null,e=null},notify(){_D(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var jw={notify(){},get:()=>[]};function yD(n,e){let t,i=jw,a=0,l=!1;function u(V){y();const M=i.subscribe(V);let H=!1;return()=>{H||(H=!0,M(),v())}}function h(){i.notify()}function p(){x.onStateChange&&x.onStateChange()}function m(){return l}function y(){a++,t||(t=n.subscribe(p),i=gD())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=jw)}function b(){l||(l=!0,y())}function I(){l&&(l=!1,v())}const x={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:p,isSubscribed:m,trySubscribe:b,tryUnsubscribe:I,getListeners:()=>i};return x}var vD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ED=vD(),wD=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TD=wD(),bD=()=>ED||TD?F.useLayoutEffect:F.useEffect,SD=bD(),ag=Symbol.for("react-redux-context"),og=typeof globalThis<"u"?globalThis:{};function AD(){if(!F.createContext)return{};const n=og[ag]??(og[ag]=new Map);let e=n.get(F.createContext);return e||(e=F.createContext(null),n.set(F.createContext,e)),e}var da=AD();function CD(n){const{children:e,context:t,serverState:i,store:a}=n,l=F.useMemo(()=>{const p=yD(a);return{store:a,subscription:p,getServerState:i?()=>i:void 0}},[a,i]),u=F.useMemo(()=>a.getState(),[a]);SD(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),u!==a.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,u]);const h=t||da;return F.createElement(h.Provider,{value:l},e)}var RD=CD;function jy(n=da){return function(){return F.useContext(n)}}var DS=jy();function OS(n=da){const e=n===da?DS:jy(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var ID=OS();function ND(n=da){const e=n===da?ID:OS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var qn=ND(),xD=(n,e)=>n===e;function DD(n=da){const e=n===da?DS:jy(n),t=(i,a={})=>{const{equalityFn:l=xD}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:h,subscription:p,getServerState:m}=u;F.useRef(!0);const y=F.useCallback({[i.name](b){return i(b)}}[i.name],[i]),v=mD.useSyncExternalStoreWithSelector(p.addNestedSub,h.getState,m||h.getState,y,l);return F.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var ft=DD();function bn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var OD=typeof Symbol=="function"&&Symbol.observable||"@@observable",zw=OD,lg=()=>Math.random().toString(36).substring(7).split("").join("."),kD={INIT:`@@redux/INIT${lg()}`,REPLACE:`@@redux/REPLACE${lg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${lg()}`},Cd=kD;function zy(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function kS(n,e,t){if(typeof n!="function")throw new Error(bn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(bn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(bn(1));return t(kS)(n,e)}let i=n,a=e,l=new Map,u=l,h=0,p=!1;function m(){u===l&&(u=new Map,l.forEach((M,H)=>{u.set(H,M)}))}function y(){if(p)throw new Error(bn(3));return a}function v(M){if(typeof M!="function")throw new Error(bn(4));if(p)throw new Error(bn(5));let H=!0;m();const Q=h++;return u.set(Q,M),function(){if(H){if(p)throw new Error(bn(6));H=!1,m(),u.delete(Q),l=null}}}function b(M){if(!zy(M))throw new Error(bn(7));if(typeof M.type>"u")throw new Error(bn(8));if(typeof M.type!="string")throw new Error(bn(17));if(p)throw new Error(bn(9));try{p=!0,a=i(a,M)}finally{p=!1}return(l=u).forEach(Q=>{Q()}),M}function I(M){if(typeof M!="function")throw new Error(bn(10));i=M,b({type:Cd.REPLACE})}function x(){const M=v;return{subscribe(H){if(typeof H!="object"||H===null)throw new Error(bn(11));function Q(){const te=H;te.next&&te.next(y())}return Q(),{unsubscribe:M(Q)}},[zw](){return this}}}return b({type:Cd.INIT}),{dispatch:b,subscribe:v,getState:y,replaceReducer:I,[zw]:x}}function MD(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Cd.INIT})>"u")throw new Error(bn(12));if(typeof t(void 0,{type:Cd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(bn(13))})}function PD(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const u=e[l];typeof n[u]=="function"&&(t[u]=n[u])}const i=Object.keys(t);let a;try{MD(t)}catch(l){a=l}return function(u={},h){if(a)throw a;let p=!1;const m={};for(let y=0;y<i.length;y++){const v=i[y],b=t[v],I=u[v],x=b(I,h);if(typeof x>"u")throw h&&h.type,new Error(bn(14));m[v]=x,p=p||x!==I}return p=p||i.length!==Object.keys(u).length,p?m:u}}function Rd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function LD(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(bn(15))};const u={getState:a.getState,dispatch:(p,...m)=>l(p,...m)},h=n.map(p=>p(u));return l=Rd(...h)(a.dispatch),{...a,dispatch:l}}}function VD(n){return zy(n)&&"type"in n&&typeof n.type=="string"}var MS=Symbol.for("immer-nothing"),Fw=Symbol.for("immer-draftable"),ui=Symbol.for("immer-state");function Ui(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Pl=Object.getPrototypeOf;function po(n){return!!n&&!!n[ui]}function os(n){var e;return n?PS(n)||Array.isArray(n)||!!n[Fw]||!!((e=n.constructor)!=null&&e[Fw])||vp(n)||Ep(n):!1}var UD=Object.prototype.constructor.toString();function PS(n){if(!n||typeof n!="object")return!1;const e=Pl(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===UD}function Id(n,e){yp(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function yp(n){const e=n[ui];return e?e.type_:Array.isArray(n)?1:vp(n)?2:Ep(n)?3:0}function Lg(n,e){return yp(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function LS(n,e,t){const i=yp(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function jD(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function vp(n){return n instanceof Map}function Ep(n){return n instanceof Set}function oo(n){return n.copy_||n.base_}function Vg(n,e){if(vp(n))return new Map(n);if(Ep(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=PS(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[ui];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const u=a[l],h=i[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[u]})}return Object.create(Pl(n),i)}else{const i=Pl(n);if(i!==null&&t)return{...n};const a=Object.create(i);return Object.assign(a,n)}}function Fy(n,e=!1){return wp(n)||po(n)||!os(n)||(yp(n)>1&&(n.set=n.add=n.clear=n.delete=zD),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>Fy(i,!0))),n}function zD(){Ui(2)}function wp(n){return Object.isFrozen(n)}var FD={};function mo(n){const e=FD[n];return e||Ui(0,n),e}var Uc;function VS(){return Uc}function BD(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Bw(n,e){e&&(mo("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Ug(n){jg(n),n.drafts_.forEach(qD),n.drafts_=null}function jg(n){n===Uc&&(Uc=n.parent_)}function qw(n){return Uc=BD(Uc,n)}function qD(n){const e=n[ui];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Hw(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[ui].modified_&&(Ug(e),Ui(4)),os(n)&&(n=Nd(e,n),e.parent_||xd(e,n)),e.patches_&&mo("Patches").generateReplacementPatches_(t[ui].base_,n,e.patches_,e.inversePatches_)):n=Nd(e,t,[]),Ug(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==MS?n:void 0}function Nd(n,e,t){if(wp(e))return e;const i=e[ui];if(!i)return Id(e,(a,l)=>Gw(n,i,e,a,l,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return xd(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,u=!1;i.type_===3&&(l=new Set(a),a.clear(),u=!0),Id(l,(h,p)=>Gw(n,i,a,h,p,t,u)),xd(n,a,!1),t&&n.patches_&&mo("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function Gw(n,e,t,i,a,l,u){if(po(a)){const h=l&&e&&e.type_!==3&&!Lg(e.assigned_,i)?l.concat(i):void 0,p=Nd(n,a,h);if(LS(t,i,p),po(p))n.canAutoFreeze_=!1;else return}else u&&t.add(a);if(os(a)&&!wp(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Nd(n,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&xd(n,a)}}function xd(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Fy(e,t)}function HD(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:VS(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,l=By;t&&(a=[i],l=jc);const{revoke:u,proxy:h}=Proxy.revocable(a,l);return i.draft_=h,i.revoke_=u,h}var By={get(n,e){if(e===ui)return n;const t=oo(n);if(!Lg(t,e))return GD(n,t,e);const i=t[e];return n.finalized_||!os(i)?i:i===ug(n.base_,e)?(cg(n),n.copy_[e]=Fg(i,n)):i},has(n,e){return e in oo(n)},ownKeys(n){return Reflect.ownKeys(oo(n))},set(n,e,t){const i=US(oo(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=ug(oo(n),e),l=a==null?void 0:a[ui];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(jD(t,a)&&(t!==void 0||Lg(n.base_,e)))return!0;cg(n),zg(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return ug(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,cg(n),zg(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=oo(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Ui(11)},getPrototypeOf(n){return Pl(n.base_)},setPrototypeOf(){Ui(12)}},jc={};Id(By,(n,e)=>{jc[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jc.deleteProperty=function(n,e){return jc.set.call(this,n,e,void 0)};jc.set=function(n,e,t){return By.set.call(this,n[0],e,t,n[0])};function ug(n,e){const t=n[ui];return(t?oo(t):n)[e]}function GD(n,e,t){var a;const i=US(e,t);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function US(n,e){if(!(e in n))return;let t=Pl(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Pl(t)}}function zg(n){n.modified_||(n.modified_=!0,n.parent_&&zg(n.parent_))}function cg(n){n.copy_||(n.copy_=Vg(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var $D=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const l=t;t=e;const u=this;return function(p=l,...m){return u.produce(p,y=>t.call(this,y,...m))}}typeof t!="function"&&Ui(6),i!==void 0&&typeof i!="function"&&Ui(7);let a;if(os(e)){const l=qw(this),u=Fg(e,void 0);let h=!0;try{a=t(u),h=!1}finally{h?Ug(l):jg(l)}return Bw(l,i),Hw(a,l)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===MS&&(a=void 0),this.autoFreeze_&&Fy(a,!0),i){const l=[],u=[];mo("Patches").generateReplacementPatches_(e,a,l,u),i(l,u)}return a}else Ui(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,p=>e(p,...h));let i,a;return[this.produce(e,t,(u,h)=>{i=u,a=h}),i,a]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){os(n)||Ui(8),po(n)&&(n=KD(n));const e=qw(this),t=Fg(n,void 0);return t[ui].isManual_=!0,jg(e),t}finishDraft(n,e){const t=n&&n[ui];(!t||!t.isManual_)&&Ui(9);const{scope_:i}=t;return Bw(i,e),Hw(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=mo("Patches").applyPatches_;return po(n)?i(n,e):this.produce(n,a=>i(a,e))}};function Fg(n,e){const t=vp(n)?mo("MapSet").proxyMap_(n,e):Ep(n)?mo("MapSet").proxySet_(n,e):HD(n,e);return(e?e.scope_:VS()).drafts_.push(t),t}function KD(n){return po(n)||Ui(10,n),jS(n)}function jS(n){if(!os(n)||wp(n))return n;const e=n[ui];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Vg(n,e.scope_.immer_.useStrictShallowCopy_)}else t=Vg(n,!0);return Id(t,(i,a)=>{LS(t,i,jS(a))}),e&&(e.finalized_=!1),t}var ci=new $D,zS=ci.produce;ci.produceWithPatches.bind(ci);ci.setAutoFreeze.bind(ci);ci.setUseStrictShallowCopy.bind(ci);ci.applyPatches.bind(ci);ci.createDraft.bind(ci);ci.finishDraft.bind(ci);function FS(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var QD=FS(),WD=FS,YD=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rd:Rd.apply(null,arguments)},XD=n=>n&&typeof n.match=="function";function Cc(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(is(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>VD(i)&&i.type===n,t}var BS=class vc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new vc(...e[0].concat(this)):new vc(...e.concat(this))}};function $w(n){return os(n)?zS(n,()=>{}):n}function Kw(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function ZD(n){return typeof n=="boolean"}var JD=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let u=new BS;return t&&(ZD(t)?u.push(QD):u.push(WD(t.extraArgument))),u},eO="RTK_autoBatch",Qw=n=>e=>{setTimeout(e,n)},tO=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,u=!1;const h=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Qw(10):n.type==="callback"?n.queueNotification:Qw(n.timeout),m=()=>{u=!1,l&&(l=!1,h.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>a&&y(),b=i.subscribe(v);return h.add(y),()=>{b(),h.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[eO]),l=!a,l&&(u||(u=!0,p(m))),i.dispatch(y)}finally{a=!0}}})},nO=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new BS(n);return i&&a.push(tO(typeof i=="object"?i:void 0)),a};function iO(n){const e=JD(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(zy(t))h=PD(t);else throw new Error(is(1));let p;typeof i=="function"?p=i(e):p=e();let m=Rd;a&&(m=YD({trace:!1,...typeof a=="object"&&a}));const y=LD(...p),v=nO(y);let b=typeof u=="function"?u(v):v();const I=m(...b);return kS(h,l,I)}function qS(n){const e={},t=[];let i;const a={addCase(l,u){const h=typeof l=="string"?l:l.type;if(!h)throw new Error(is(28));if(h in e)throw new Error(is(29));return e[h]=u,a},addMatcher(l,u){return t.push({matcher:l,reducer:u}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function rO(n){return typeof n=="function"}function sO(n,e){let[t,i,a]=qS(e),l;if(rO(n))l=()=>$w(n());else{const h=$w(n);l=()=>h}function u(h=l(),p){let m=[t[p.type],...i.filter(({matcher:y})=>y(p)).map(({reducer:y})=>y)];return m.filter(y=>!!y).length===0&&(m=[a]),m.reduce((y,v)=>{if(v)if(po(y)){const I=v(y,p);return I===void 0?y:I}else{if(os(y))return zS(y,b=>v(b,p));{const b=v(y,p);if(b===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return y},h)}return u.getInitialState=l,u}var aO=(n,e)=>XD(n)?n.match(e):n(e);function oO(...n){return e=>n.some(t=>aO(t,e))}var lO="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",uO=(n=21)=>{let e="",t=n;for(;t--;)e+=lO[Math.random()*64|0];return e},cO=["name","message","stack","code"],hg=class{constructor(n,e){X_(this,"_type");this.payload=n,this.meta=e}},Ww=class{constructor(n,e){X_(this,"_type");this.payload=n,this.meta=e}},hO=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of cO)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},So=(()=>{function n(e,t,i){const a=Cc(e+"/fulfilled",(p,m,y,v)=>({payload:p,meta:{...v||{},arg:y,requestId:m,requestStatus:"fulfilled"}})),l=Cc(e+"/pending",(p,m,y)=>({payload:void 0,meta:{...y||{},arg:m,requestId:p,requestStatus:"pending"}})),u=Cc(e+"/rejected",(p,m,y,v,b)=>({payload:v,error:(i&&i.serializeError||hO)(p||"Rejected"),meta:{...b||{},arg:y,requestId:m,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function h(p){return(m,y,v)=>{const b=i!=null&&i.idGenerator?i.idGenerator(p):uO(),I=new AbortController;let x,V;function M(Q){V=Q,I.abort()}const H=async function(){var te,le;let Q;try{let ne=(te=i==null?void 0:i.condition)==null?void 0:te.call(i,p,{getState:y,extra:v});if(dO(ne)&&(ne=await ne),ne===!1||I.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const P=new Promise((S,T)=>{x=()=>{T({name:"AbortError",message:V||"Aborted"})},I.signal.addEventListener("abort",x)});m(l(b,p,(le=i==null?void 0:i.getPendingMeta)==null?void 0:le.call(i,{requestId:b,arg:p},{getState:y,extra:v}))),Q=await Promise.race([P,Promise.resolve(t(p,{dispatch:m,getState:y,extra:v,requestId:b,signal:I.signal,abort:M,rejectWithValue:(S,T)=>new hg(S,T),fulfillWithValue:(S,T)=>new Ww(S,T)})).then(S=>{if(S instanceof hg)throw S;return S instanceof Ww?a(S.payload,b,p,S.meta):a(S,b,p)})])}catch(ne){Q=ne instanceof hg?u(null,b,p,ne.payload,ne.meta):u(ne,b,p)}finally{x&&I.signal.removeEventListener("abort",x)}return i&&!i.dispatchConditionRejection&&u.match(Q)&&Q.meta.condition||m(Q),Q}();return Object.assign(H,{abort:M,requestId:b,arg:p,unwrap(){return H.then(fO)}})}}return Object.assign(h,{pending:l,rejected:u,fulfilled:a,settled:oO(u,a),typePrefix:e})}return n.withTypes=()=>n,n})();function fO(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function dO(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var pO=Symbol.for("rtk-slice-createasyncthunk");function mO(n,e){return`${n}/${e}`}function _O({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[pO];return function(a){const{name:l,reducerPath:u=l}=a;if(!l)throw new Error(is(11));const h=(typeof a.reducers=="function"?a.reducers(yO()):a.reducers)||{},p=Object.keys(h),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(z,te){const le=typeof z=="string"?z:z.type;if(!le)throw new Error(is(12));if(le in m.sliceCaseReducersByType)throw new Error(is(13));return m.sliceCaseReducersByType[le]=te,y},addMatcher(z,te){return m.sliceMatchers.push({matcher:z,reducer:te}),y},exposeAction(z,te){return m.actionCreators[z]=te,y},exposeCaseReducer(z,te){return m.sliceCaseReducersByName[z]=te,y}};p.forEach(z=>{const te=h[z],le={reducerName:z,type:mO(l,z),createNotation:typeof a.reducers=="function"};EO(te)?TO(le,te,y,e):vO(le,te,y)});function v(){const[z={},te=[],le=void 0]=typeof a.extraReducers=="function"?qS(a.extraReducers):[a.extraReducers],ne={...z,...m.sliceCaseReducersByType};return sO(a.initialState,P=>{for(let S in ne)P.addCase(S,ne[S]);for(let S of m.sliceMatchers)P.addMatcher(S.matcher,S.reducer);for(let S of te)P.addMatcher(S.matcher,S.reducer);le&&P.addDefaultCase(le)})}const b=z=>z,I=new Map;let x;function V(z,te){return x||(x=v()),x(z,te)}function M(){return x||(x=v()),x.getInitialState()}function H(z,te=!1){function le(P){let S=P[z];return typeof S>"u"&&te&&(S=M()),S}function ne(P=b){const S=Kw(I,te,()=>new WeakMap);return Kw(S,P,()=>{const T={};for(const[R,O]of Object.entries(a.selectors??{}))T[R]=gO(O,P,M,te);return T})}return{reducerPath:z,getSelectors:ne,get selectors(){return ne(le)},selectSlice:le}}const Q={name:l,reducer:V,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:M,...H(u),injectInto(z,{reducerPath:te,...le}={}){const ne=te??u;return z.inject({reducerPath:ne,reducer:V},le),{...Q,...H(ne,!0)}}};return Q}}function gO(n,e,t,i){function a(l,...u){let h=e(l);return typeof h>"u"&&i&&(h=t()),n(h,...u)}return a.unwrapped=n,a}var Ca=_O();function yO(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function vO({type:n,reducerName:e,createNotation:t},i,a){let l,u;if("reducer"in i){if(t&&!wO(i))throw new Error(is(17));l=i.reducer,u=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,u?Cc(n,u):Cc(n))}function EO(n){return n._reducerDefinitionType==="asyncThunk"}function wO(n){return n._reducerDefinitionType==="reducerWithPrepare"}function TO({type:n,reducerName:e},t,i,a){if(!a)throw new Error(is(18));const{payloadCreator:l,fulfilled:u,pending:h,rejected:p,settled:m,options:y}=t,v=a(n,l,y);i.exposeAction(e,v),u&&i.addCase(v.fulfilled,u),h&&i.addCase(v.pending,h),p&&i.addCase(v.rejected,p),m&&i.addMatcher(v.settled,m),i.exposeCaseReducer(e,{fulfilled:u||Wf,pending:h||Wf,rejected:p||Wf,settled:m||Wf})}function Wf(){}function is(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const HS=Ca({name:"menu",initialState:{isMenuVisible:!1,isRegistrationVisible:!1,isNewsSectionVisible:!1,isCategoryListVisible:!1,isSettingsVisible:!1,isOrderHistoryVisible:!1,isFavoritesVisible:!1,selectedCategory:null},reducers:{toggleMenu:n=>{n.isMenuVisible=!n.isMenuVisible},closeMenu:n=>{n.isMenuVisible=!1},toggleRegistration:(n,e)=>{n.isRegistrationVisible=e.payload??!n.isRegistrationVisible},toggleNewsSection:(n,e)=>{n.isNewsSectionVisible=e.payload??!n.isNewsSectionVisible},toggleCategoryList:(n,e)=>{n.isCategoryListVisible=e.payload??!n.isCategoryListVisible},toggleSettingsPanel:(n,e)=>{n.isSettingsVisible=e.payload??!n.isSettingsVisible},toggleOrderHistory:(n,e)=>{n.isOrderHistoryVisible=e.payload??!n.isOrderHistoryVisible},toggleFavorites:(n,e)=>{n.isFavoritesVisible=e.payload??!n.isFavoritesVisible}}}),{toggleMenu:bO,closeMenu:Yw,toggleFavorites:Dd,toggleRegistration:zc,toggleNewsSection:Bg,toggleCategoryList:qg,toggleSettingsPanel:Hg,toggleOrderHistory:Gg}=HS.actions,SO=HS.reducer,AO=()=>{};var Xw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=function(n,e){if(!n)throw Yl(e)},Yl=function(n){return new Error("Firebase Database ("+GS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},CO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,y=l>>2,v=(l&3)<<4|h>>4;let b=(h&15)<<2|m>>6,I=m&63;p||(I=64,u||(b=64)),i.push(t[y],t[v],t[b],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($S(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||m==null||v==null)throw new RO;const b=l<<2|h>>4;if(i.push(b),m!==64){const I=h<<4&240|m>>2;if(i.push(I),v!==64){const x=m<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KS=function(n){const e=$S(n);return qy.encodeByteArray(e,!0)},Od=function(n){return KS(n).replace(/\./g,"")},kd=function(n){try{return qy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n){return QS(void 0,n)}function QS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!NO(t)||(n[t]=QS(n[t],e[t]));return n}function NO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=()=>xO().__FIREBASE_DEFAULTS__,OO=()=>{if(typeof process>"u"||typeof Xw>"u")return;const n=Xw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kd(n[1]);return e&&JSON.parse(e)},Tp=()=>{try{return AO()||DO()||OO()||kO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WS=n=>{var e,t;return(t=(e=Tp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Hy=n=>{const e=WS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},YS=()=>{var n;return(n=Tp())===null||n===void 0?void 0:n.config},XS=n=>{var e;return(e=Tp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Od(JSON.stringify(t)),Od(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function MO(){var n;const e=(n=Tp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ZS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VO(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UO(){return GS.NODE_ADMIN===!0}function jO(){return!MO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zO(){try{return typeof indexedDB=="object"}catch{return!1}}function FO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="FirebaseError";class br extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=BO,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ch.prototype.create)}}class ch{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?qO(l,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new br(a,h,i)}}function qO(n,e){return n.replace(HO,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const HO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){return JSON.parse(n)}function nn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=function(n){let e={},t={},i={},a="";try{const l=n.split(".");e=Fc(kd(l[0])||""),t=Fc(kd(l[1])||""),a=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},GO=function(n){const e=JS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},$O=function(n){const e=JS(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ll(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function $g(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Md(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function pa(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(Zw(l)&&Zw(u)){if(!pa(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function Zw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ec(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function wc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const b=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(b<<1|b>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],p=this.chain_[4],m,y;for(let v=0;v<80;v++){v<40?v<20?(m=h^l&(u^h),y=1518500249):(m=l^u^h,y=1859775393):v<60?(m=l&u|h&(l|u),y=2400959708):(m=l^u^h,y=3395469782);const b=(a<<5|a>>>27)+m+p+y+i[v]&4294967295;p=h,h=u,u=(l<<30|l>>>2)&4294967295,l=a,a=b}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<t;)if(l[u]=e[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function QO(n,e){const t=new WO(n,e);return t.subscribe.bind(t)}class WO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");YO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=fg),a.error===void 0&&(a.error=fg),a.complete===void 0&&(a.complete=fg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fg(){}function Ky(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,re(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(l<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Sp=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n){return n&&n._delegate?n._delegate:n}class ls{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new bp;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ek(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JO(n){return n===lo?void 0:n}function ek(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const nk={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},ik=Be.INFO,rk={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},sk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=rk[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ap{constructor(e){this.name=e,this._logLevel=ik,this._logHandler=sk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const ak=(n,e)=>e.some(t=>n instanceof t);let Jw,eT;function ok(){return Jw||(Jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lk(){return eT||(eT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eA=new WeakMap,Kg=new WeakMap,tA=new WeakMap,dg=new WeakMap,Qy=new WeakMap;function uk(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(sa(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&eA.set(t,n)}).catch(()=>{}),Qy.set(e,n),e}function ck(n){if(Kg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Kg.set(n,e)}let Qg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hk(n){Qg=n(Qg)}function fk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(pg(this),e,...t);return tA.set(i,e.sort?e.sort():[e]),sa(i)}:lk().includes(n)?function(...e){return n.apply(pg(this),e),sa(eA.get(this))}:function(...e){return sa(n.apply(pg(this),e))}}function dk(n){return typeof n=="function"?fk(n):(n instanceof IDBTransaction&&ck(n),ak(n,ok())?new Proxy(n,Qg):n)}function sa(n){if(n instanceof IDBRequest)return uk(n);if(dg.has(n))return dg.get(n);const e=dk(n);return e!==n&&(dg.set(n,e),Qy.set(e,n)),e}const pg=n=>Qy.get(n);function pk(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=sa(u);return i&&u.addEventListener("upgradeneeded",p=>{i(sa(u.result),p.oldVersion,p.newVersion,sa(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const mk=["get","getKey","getAll","getAllKeys","count"],_k=["put","add","delete","clear"],mg=new Map;function tT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=_k.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||mk.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&p.done]))[0]};return mg.set(e,l),l}hk(n=>({...n,get:(e,t,i)=>tT(e,t)||n.get(e,t,i),has:(e,t)=>!!tT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function yk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wg="@firebase/app",nT="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Ap("@firebase/app"),vk="@firebase/app-compat",Ek="@firebase/analytics-compat",wk="@firebase/analytics",Tk="@firebase/app-check-compat",bk="@firebase/app-check",Sk="@firebase/auth",Ak="@firebase/auth-compat",Ck="@firebase/database",Rk="@firebase/data-connect",Ik="@firebase/database-compat",Nk="@firebase/functions",xk="@firebase/functions-compat",Dk="@firebase/installations",Ok="@firebase/installations-compat",kk="@firebase/messaging",Mk="@firebase/messaging-compat",Pk="@firebase/performance",Lk="@firebase/performance-compat",Vk="@firebase/remote-config",Uk="@firebase/remote-config-compat",jk="@firebase/storage",zk="@firebase/storage-compat",Fk="@firebase/firestore",Bk="@firebase/vertexai",qk="@firebase/firestore-compat",Hk="firebase",Gk="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="[DEFAULT]",$k={[Wg]:"fire-core",[vk]:"fire-core-compat",[wk]:"fire-analytics",[Ek]:"fire-analytics-compat",[bk]:"fire-app-check",[Tk]:"fire-app-check-compat",[Sk]:"fire-auth",[Ak]:"fire-auth-compat",[Ck]:"fire-rtdb",[Rk]:"fire-data-connect",[Ik]:"fire-rtdb-compat",[Nk]:"fire-fn",[xk]:"fire-fn-compat",[Dk]:"fire-iid",[Ok]:"fire-iid-compat",[kk]:"fire-fcm",[Mk]:"fire-fcm-compat",[Pk]:"fire-perf",[Lk]:"fire-perf-compat",[Vk]:"fire-rc",[Uk]:"fire-rc-compat",[jk]:"fire-gcs",[zk]:"fire-gcs-compat",[Fk]:"fire-fst",[qk]:"fire-fst-compat",[Bk]:"fire-vertex","fire-js":"fire-js",[Hk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,Kk=new Map,Xg=new Map;function iT(n,e){try{n.container.addComponent(e)}catch(t){us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){const e=n.name;if(Xg.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;Xg.set(e,n);for(const t of Pd.values())iT(t,n);for(const t of Kk.values())iT(t,n);return!0}function hh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new ch("app","Firebase",Qk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=Gk;function nA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Yg,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw aa.create("bad-app-name",{appName:String(a)});if(t||(t=YS()),!t)throw aa.create("no-options");const l=Pd.get(a);if(l){if(pa(t,l.options)&&pa(i,l.config))return l;throw aa.create("duplicate-app",{appName:a})}const u=new tk(a);for(const p of Xg.values())u.addComponent(p);const h=new Wk(t,i,u);return Pd.set(a,h),h}function Cp(n=Yg){const e=Pd.get(n);if(!e&&n===Yg&&YS())return nA();if(!e)throw aa.create("no-app",{appName:n});return e}function Ii(n,e,t){var i;let a=(i=$k[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${a}" with version "${e}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(h.join(" "));return}ma(new ls(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="firebase-heartbeat-database",Xk=1,Bc="firebase-heartbeat-store";let _g=null;function iA(){return _g||(_g=pk(Yk,Xk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bc)}catch(t){console.warn(t)}}}}).catch(n=>{throw aa.create("idb-open",{originalErrorMessage:n.message})})),_g}async function Zk(n){try{const t=(await iA()).transaction(Bc),i=await t.objectStore(Bc).get(rA(n));return await t.done,i}catch(e){if(e instanceof br)us.warn(e.message);else{const t=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(t.message)}}}async function rT(n,e){try{const i=(await iA()).transaction(Bc,"readwrite");await i.objectStore(Bc).put(e,rA(n)),await i.done}catch(t){if(t instanceof br)us.warn(t.message);else{const i=aa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});us.warn(i.message)}}}function rA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=1024,e4=30;class t4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new i4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=sT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>e4){const u=r4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){us.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sT(),{heartbeatsToSend:i,unsentEntries:a}=n4(this._heartbeatsCache.heartbeats),l=Od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return us.warn(t),""}}}function sT(){return new Date().toISOString().substring(0,10)}function n4(n,e=Jk){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),aT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),aT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class i4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zO()?FO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Zk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return rT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return rT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function aT(n){return Od(JSON.stringify({version:2,heartbeats:n})).length}function r4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){ma(new ls("platform-logger",e=>new gk(e),"PRIVATE")),ma(new ls("heartbeat",e=>new t4(e),"PRIVATE")),Ii(Wg,nT,n),Ii(Wg,nT,"esm2017"),Ii("fire-js","")}s4("");var a4="firebase",o4="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(a4,o4,"app");var oT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oa,sA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function T(){}T.prototype=S.prototype,P.D=S.prototype,P.prototype=new T,P.prototype.constructor=P,P.C=function(R,O,L){for(var D=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)D[ze-2]=arguments[ze];return S.prototype[O].apply(R,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,S,T){T||(T=0);var R=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)R[O]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(O=0;16>O;++O)R[O]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=P.g[0],T=P.g[1],O=P.g[2];var L=P.g[3],D=S+(L^T&(O^L))+R[0]+3614090360&4294967295;S=T+(D<<7&4294967295|D>>>25),D=L+(O^S&(T^O))+R[1]+3905402710&4294967295,L=S+(D<<12&4294967295|D>>>20),D=O+(T^L&(S^T))+R[2]+606105819&4294967295,O=L+(D<<17&4294967295|D>>>15),D=T+(S^O&(L^S))+R[3]+3250441966&4294967295,T=O+(D<<22&4294967295|D>>>10),D=S+(L^T&(O^L))+R[4]+4118548399&4294967295,S=T+(D<<7&4294967295|D>>>25),D=L+(O^S&(T^O))+R[5]+1200080426&4294967295,L=S+(D<<12&4294967295|D>>>20),D=O+(T^L&(S^T))+R[6]+2821735955&4294967295,O=L+(D<<17&4294967295|D>>>15),D=T+(S^O&(L^S))+R[7]+4249261313&4294967295,T=O+(D<<22&4294967295|D>>>10),D=S+(L^T&(O^L))+R[8]+1770035416&4294967295,S=T+(D<<7&4294967295|D>>>25),D=L+(O^S&(T^O))+R[9]+2336552879&4294967295,L=S+(D<<12&4294967295|D>>>20),D=O+(T^L&(S^T))+R[10]+4294925233&4294967295,O=L+(D<<17&4294967295|D>>>15),D=T+(S^O&(L^S))+R[11]+2304563134&4294967295,T=O+(D<<22&4294967295|D>>>10),D=S+(L^T&(O^L))+R[12]+1804603682&4294967295,S=T+(D<<7&4294967295|D>>>25),D=L+(O^S&(T^O))+R[13]+4254626195&4294967295,L=S+(D<<12&4294967295|D>>>20),D=O+(T^L&(S^T))+R[14]+2792965006&4294967295,O=L+(D<<17&4294967295|D>>>15),D=T+(S^O&(L^S))+R[15]+1236535329&4294967295,T=O+(D<<22&4294967295|D>>>10),D=S+(O^L&(T^O))+R[1]+4129170786&4294967295,S=T+(D<<5&4294967295|D>>>27),D=L+(T^O&(S^T))+R[6]+3225465664&4294967295,L=S+(D<<9&4294967295|D>>>23),D=O+(S^T&(L^S))+R[11]+643717713&4294967295,O=L+(D<<14&4294967295|D>>>18),D=T+(L^S&(O^L))+R[0]+3921069994&4294967295,T=O+(D<<20&4294967295|D>>>12),D=S+(O^L&(T^O))+R[5]+3593408605&4294967295,S=T+(D<<5&4294967295|D>>>27),D=L+(T^O&(S^T))+R[10]+38016083&4294967295,L=S+(D<<9&4294967295|D>>>23),D=O+(S^T&(L^S))+R[15]+3634488961&4294967295,O=L+(D<<14&4294967295|D>>>18),D=T+(L^S&(O^L))+R[4]+3889429448&4294967295,T=O+(D<<20&4294967295|D>>>12),D=S+(O^L&(T^O))+R[9]+568446438&4294967295,S=T+(D<<5&4294967295|D>>>27),D=L+(T^O&(S^T))+R[14]+3275163606&4294967295,L=S+(D<<9&4294967295|D>>>23),D=O+(S^T&(L^S))+R[3]+4107603335&4294967295,O=L+(D<<14&4294967295|D>>>18),D=T+(L^S&(O^L))+R[8]+1163531501&4294967295,T=O+(D<<20&4294967295|D>>>12),D=S+(O^L&(T^O))+R[13]+2850285829&4294967295,S=T+(D<<5&4294967295|D>>>27),D=L+(T^O&(S^T))+R[2]+4243563512&4294967295,L=S+(D<<9&4294967295|D>>>23),D=O+(S^T&(L^S))+R[7]+1735328473&4294967295,O=L+(D<<14&4294967295|D>>>18),D=T+(L^S&(O^L))+R[12]+2368359562&4294967295,T=O+(D<<20&4294967295|D>>>12),D=S+(T^O^L)+R[5]+4294588738&4294967295,S=T+(D<<4&4294967295|D>>>28),D=L+(S^T^O)+R[8]+2272392833&4294967295,L=S+(D<<11&4294967295|D>>>21),D=O+(L^S^T)+R[11]+1839030562&4294967295,O=L+(D<<16&4294967295|D>>>16),D=T+(O^L^S)+R[14]+4259657740&4294967295,T=O+(D<<23&4294967295|D>>>9),D=S+(T^O^L)+R[1]+2763975236&4294967295,S=T+(D<<4&4294967295|D>>>28),D=L+(S^T^O)+R[4]+1272893353&4294967295,L=S+(D<<11&4294967295|D>>>21),D=O+(L^S^T)+R[7]+4139469664&4294967295,O=L+(D<<16&4294967295|D>>>16),D=T+(O^L^S)+R[10]+3200236656&4294967295,T=O+(D<<23&4294967295|D>>>9),D=S+(T^O^L)+R[13]+681279174&4294967295,S=T+(D<<4&4294967295|D>>>28),D=L+(S^T^O)+R[0]+3936430074&4294967295,L=S+(D<<11&4294967295|D>>>21),D=O+(L^S^T)+R[3]+3572445317&4294967295,O=L+(D<<16&4294967295|D>>>16),D=T+(O^L^S)+R[6]+76029189&4294967295,T=O+(D<<23&4294967295|D>>>9),D=S+(T^O^L)+R[9]+3654602809&4294967295,S=T+(D<<4&4294967295|D>>>28),D=L+(S^T^O)+R[12]+3873151461&4294967295,L=S+(D<<11&4294967295|D>>>21),D=O+(L^S^T)+R[15]+530742520&4294967295,O=L+(D<<16&4294967295|D>>>16),D=T+(O^L^S)+R[2]+3299628645&4294967295,T=O+(D<<23&4294967295|D>>>9),D=S+(O^(T|~L))+R[0]+4096336452&4294967295,S=T+(D<<6&4294967295|D>>>26),D=L+(T^(S|~O))+R[7]+1126891415&4294967295,L=S+(D<<10&4294967295|D>>>22),D=O+(S^(L|~T))+R[14]+2878612391&4294967295,O=L+(D<<15&4294967295|D>>>17),D=T+(L^(O|~S))+R[5]+4237533241&4294967295,T=O+(D<<21&4294967295|D>>>11),D=S+(O^(T|~L))+R[12]+1700485571&4294967295,S=T+(D<<6&4294967295|D>>>26),D=L+(T^(S|~O))+R[3]+2399980690&4294967295,L=S+(D<<10&4294967295|D>>>22),D=O+(S^(L|~T))+R[10]+4293915773&4294967295,O=L+(D<<15&4294967295|D>>>17),D=T+(L^(O|~S))+R[1]+2240044497&4294967295,T=O+(D<<21&4294967295|D>>>11),D=S+(O^(T|~L))+R[8]+1873313359&4294967295,S=T+(D<<6&4294967295|D>>>26),D=L+(T^(S|~O))+R[15]+4264355552&4294967295,L=S+(D<<10&4294967295|D>>>22),D=O+(S^(L|~T))+R[6]+2734768916&4294967295,O=L+(D<<15&4294967295|D>>>17),D=T+(L^(O|~S))+R[13]+1309151649&4294967295,T=O+(D<<21&4294967295|D>>>11),D=S+(O^(T|~L))+R[4]+4149444226&4294967295,S=T+(D<<6&4294967295|D>>>26),D=L+(T^(S|~O))+R[11]+3174756917&4294967295,L=S+(D<<10&4294967295|D>>>22),D=O+(S^(L|~T))+R[2]+718787259&4294967295,O=L+(D<<15&4294967295|D>>>17),D=T+(L^(O|~S))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+L&4294967295}i.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var T=S-this.blockSize,R=this.B,O=this.h,L=0;L<S;){if(O==0)for(;L<=T;)a(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<S;)if(R[O++]=P.charCodeAt(L++),O==this.blockSize){a(this,R),O=0;break}}else for(;L<S;)if(R[O++]=P[L++],O==this.blockSize){a(this,R),O=0;break}}this.h=O,this.o+=S},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var T=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=T&255,T/=256;for(this.u(P),P=Array(16),S=T=0;4>S;++S)for(var R=0;32>R;R+=8)P[T++]=this.g[S]>>>R&255;return P};function l(P,S){var T=h;return Object.prototype.hasOwnProperty.call(T,P)?T[P]:T[P]=S(P)}function u(P,S){this.h=S;for(var T=[],R=!0,O=P.length-1;0<=O;O--){var L=P[O]|0;R&&L==S||(T[O]=L,R=!1)}this.g=T}var h={};function p(P){return-128<=P&&128>P?l(P,function(S){return new u([S|0],0>S?-1:0)}):new u([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return M(m(-P));for(var S=[],T=1,R=0;P>=T;R++)S[R]=P/T|0,T*=4294967296;return new u(S,0)}function y(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return M(y(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=m(Math.pow(S,8)),R=v,O=0;O<P.length;O+=8){var L=Math.min(8,P.length-O),D=parseInt(P.substring(O,O+L),S);8>L?(L=m(Math.pow(S,L)),R=R.j(L).add(m(D))):(R=R.j(T),R=R.add(m(D)))}return R}var v=p(0),b=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(V(this))return-M(this).m();for(var P=0,S=1,T=0;T<this.g.length;T++){var R=this.i(T);P+=(0<=R?R:4294967296+R)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(V(this))return"-"+M(this).toString(P);for(var S=m(Math.pow(P,6)),T=this,R="";;){var O=te(T,S).g;T=H(T,O.j(S));var L=((0<T.g.length?T.g[0]:T.h)>>>0).toString(P);if(T=O,x(T))return L+R;for(;6>L.length;)L="0"+L;R=L+R}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function V(P){return P.h==-1}n.l=function(P){return P=H(this,P),V(P)?-1:x(P)?0:1};function M(P){for(var S=P.g.length,T=[],R=0;R<S;R++)T[R]=~P.g[R];return new u(T,~P.h).add(b)}n.abs=function(){return V(this)?M(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),T=[],R=0,O=0;O<=S;O++){var L=R+(this.i(O)&65535)+(P.i(O)&65535),D=(L>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);R=D>>>16,L&=65535,D&=65535,T[O]=D<<16|L}return new u(T,T[T.length-1]&-2147483648?-1:0)};function H(P,S){return P.add(M(S))}n.j=function(P){if(x(this)||x(P))return v;if(V(this))return V(P)?M(this).j(M(P)):M(M(this).j(P));if(V(P))return M(this.j(M(P)));if(0>this.l(I)&&0>P.l(I))return m(this.m()*P.m());for(var S=this.g.length+P.g.length,T=[],R=0;R<2*S;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<P.g.length;O++){var L=this.i(R)>>>16,D=this.i(R)&65535,ze=P.i(O)>>>16,gt=P.i(O)&65535;T[2*R+2*O]+=D*gt,Q(T,2*R+2*O),T[2*R+2*O+1]+=L*gt,Q(T,2*R+2*O+1),T[2*R+2*O+1]+=D*ze,Q(T,2*R+2*O+1),T[2*R+2*O+2]+=L*ze,Q(T,2*R+2*O+2)}for(R=0;R<S;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=S;R<2*S;R++)T[R]=0;return new u(T,0)};function Q(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function z(P,S){this.g=P,this.h=S}function te(P,S){if(x(S))throw Error("division by zero");if(x(P))return new z(v,v);if(V(P))return S=te(M(P),S),new z(M(S.g),M(S.h));if(V(S))return S=te(P,M(S)),new z(M(S.g),S.h);if(30<P.g.length){if(V(P)||V(S))throw Error("slowDivide_ only works with positive integers.");for(var T=b,R=S;0>=R.l(P);)T=le(T),R=le(R);var O=ne(T,1),L=ne(R,1);for(R=ne(R,2),T=ne(T,2);!x(R);){var D=L.add(R);0>=D.l(P)&&(O=O.add(T),L=D),R=ne(R,1),T=ne(T,1)}return S=H(P,O.j(S)),new z(O,S)}for(O=v;0<=P.l(S);){for(T=Math.max(1,Math.floor(P.m()/S.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),L=m(T),D=L.j(S);V(D)||0<D.l(P);)T-=R,L=m(T),D=L.j(S);x(L)&&(L=b),O=O.add(L),P=H(P,D)}return new z(O,P)}n.A=function(P){return te(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)&P.i(R);return new u(T,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)|P.i(R);return new u(T,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)^P.i(R);return new u(T,this.h^P.h)};function le(P){for(var S=P.g.length+1,T=[],R=0;R<S;R++)T[R]=P.i(R)<<1|P.i(R-1)>>>31;return new u(T,P.h)}function ne(P,S){var T=S>>5;S%=32;for(var R=P.g.length-T,O=[],L=0;L<R;L++)O[L]=0<S?P.i(L+T)>>>S|P.i(L+T+1)<<32-S:P.i(L+T);return new u(O,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,sA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,oa=u}).apply(typeof oT<"u"?oT:typeof self<"u"?self:typeof window<"u"?window:{});var Yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aA,Tc,oA,cd,Zg,lA,uA,cA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,E){return f==Array.prototype||f==Object.prototype||(f[g]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yf=="object"&&Yf];for(var g=0;g<f.length;++g){var E=f[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(f,g){if(g)e:{var E=i;f=f.split(".");for(var N=0;N<f.length-1;N++){var q=f[N];if(!(q in E))break e;E=E[q]}f=f[f.length-1],N=E[f],g=g(N),g!=N&&g!=null&&e(E,f,{configurable:!0,writable:!0,value:g})}}function l(f,g){f instanceof String&&(f+="");var E=0,N=!1,q={next:function(){if(!N&&E<f.length){var K=E++;return{value:g(K,f[K]),done:!1}}return N=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(f){return f||function(){return l(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function p(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function m(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function y(f,g,E){return f.call.apply(f.bind,arguments)}function v(f,g,E){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,N),f.apply(g,q)}}return function(){return f.apply(g,arguments)}}function b(f,g,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function I(f,g){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function x(f,g){function E(){}E.prototype=g.prototype,f.aa=g.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(N,q,K){for(var ie=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)ie[Ye-2]=arguments[Ye];return g.prototype[q].apply(N,ie)}}function V(f){const g=f.length;if(0<g){const E=Array(g);for(let N=0;N<g;N++)E[N]=f[N];return E}return[]}function M(f,g){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(p(N)){const q=f.length||0,K=N.length||0;f.length=q+K;for(let ie=0;ie<K;ie++)f[q+ie]=N[ie]}else f.push(N)}}class H{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(f){return/^[\s\xa0]*$/.test(f)}function z(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function te(f){return te[" "](f),f}te[" "]=function(){};var le=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ne(f,g,E){for(const N in f)g.call(E,f[N],N,f)}function P(f,g){for(const E in f)g.call(void 0,f[E],E,f)}function S(f){const g={};for(const E in f)g[E]=f[E];return g}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,g){let E,N;for(let q=1;q<arguments.length;q++){N=arguments[q];for(E in N)f[E]=N[E];for(let K=0;K<T.length;K++)E=T[K],Object.prototype.hasOwnProperty.call(N,E)&&(f[E]=N[E])}}function O(f){var g=1;f=f.split(":");const E=[];for(;0<g&&f.length;)E.push(f.shift()),g--;return f.length&&E.push(f.join(":")),E}function L(f){h.setTimeout(()=>{throw f},0)}function D(){var f=ce;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class ze{constructor(){this.h=this.g=null}add(g,E){const N=gt.get();N.set(g,E),this.h?this.h.next=N:this.g=N,this.h=N}}var gt=new H(()=>new se,f=>f.reset());class se{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ue=!1,ce=new ze,ke=()=>{const f=h.Promise.resolve(void 0);ae=()=>{f.then(be)}};var be=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(E){L(E)}var g=gt;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}ue=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};h.addEventListener("test",E,g),h.removeEventListener("test",E,g)}catch{}return f}();function Pe(f,g){if(oe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(le){e:{try{te(g.nodeName);var q=!0;break e}catch{}q=!1}q||(g=null)}}else E=="mouseover"?g=f.fromElement:E=="mouseout"&&(g=f.toElement);this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:At[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,oe);var At={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function Ee(f,g,E,N,q){this.listener=f,this.proxy=null,this.src=g,this.type=E,this.capture=!!N,this.ha=q,this.key=++Ce,this.da=this.fa=!1}function we(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function pe(f){this.src=f,this.g={},this.h=0}pe.prototype.add=function(f,g,E,N,q){var K=f.toString();f=this.g[K],f||(f=this.g[K]=[],this.h++);var ie=nt(f,g,N,q);return-1<ie?(g=f[ie],E||(g.fa=!1)):(g=new Ee(g,this.src,K,!!N,q),g.fa=E,f.push(g)),g};function tt(f,g){var E=g.type;if(E in f.g){var N=f.g[E],q=Array.prototype.indexOf.call(N,g,void 0),K;(K=0<=q)&&Array.prototype.splice.call(N,q,1),K&&(we(g),f.g[E].length==0&&(delete f.g[E],f.h--))}}function nt(f,g,E,N){for(var q=0;q<f.length;++q){var K=f[q];if(!K.da&&K.listener==g&&K.capture==!!E&&K.ha==N)return q}return-1}var He="closure_lm_"+(1e6*Math.random()|0),Ke={};function Ne(f,g,E,N,q){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Ne(f,g[K],E,N,q);return null}return E=kn(E),f&&f[bt]?f.K(g,E,m(N)?!!N.capture:!1,q):yn(f,g,E,!1,N,q)}function yn(f,g,E,N,q,K){if(!g)throw Error("Invalid event type");var ie=m(q)?!!q.capture:!!q,Ye=xi(f);if(Ye||(f[He]=Ye=new pe(f)),E=Ye.add(g,E,N,ie,K),E.proxy)return E;if(N=Ie(),E.proxy=N,N.src=f,N.listener=E,f.addEventListener)ge||(q=ie),q===void 0&&(q=!1),f.addEventListener(g.toString(),N,q);else if(f.attachEvent)f.attachEvent(ti(g.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ie(){function f(E){return g.call(f.src,f.listener,E)}const g=Hn;return f}function lt(f,g,E,N,q){if(Array.isArray(g))for(var K=0;K<g.length;K++)lt(f,g[K],E,N,q);else N=m(N)?!!N.capture:!!N,E=kn(E),f&&f[bt]?(f=f.i,g=String(g).toString(),g in f.g&&(K=f.g[g],E=nt(K,E,N,q),-1<E&&(we(K[E]),Array.prototype.splice.call(K,E,1),K.length==0&&(delete f.g[g],f.h--)))):f&&(f=xi(f))&&(g=f.g[g.toString()],f=-1,g&&(f=nt(g,E,N,q)),(E=-1<f?g[f]:null)&&Cn(E))}function Cn(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[bt])tt(g.i,f);else{var E=f.type,N=f.proxy;g.removeEventListener?g.removeEventListener(E,N,f.capture):g.detachEvent?g.detachEvent(ti(E),N):g.addListener&&g.removeListener&&g.removeListener(N),(E=xi(g))?(tt(E,f),E.h==0&&(E.src=null,g[He]=null)):we(f)}}}function ti(f){return f in Ke?Ke[f]:Ke[f]="on"+f}function Hn(f,g){if(f.da)f=!0;else{g=new Pe(g,this);var E=f.listener,N=f.ha||f.src;f.fa&&Cn(f),f=E.call(N,g)}return f}function xi(f){return f=f[He],f instanceof pe?f:null}var ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function kn(f){return typeof f=="function"?f:(f[ot]||(f[ot]=function(g){return f.handleEvent(g)}),f[ot])}function Ve(){ve.call(this),this.i=new pe(this),this.M=this,this.F=null}x(Ve,ve),Ve.prototype[bt]=!0,Ve.prototype.removeEventListener=function(f,g,E,N){lt(this,f,g,E,N)};function et(f,g){var E,N=f.F;if(N)for(E=[];N;N=N.F)E.push(N);if(f=f.M,N=g.type||g,typeof g=="string")g=new oe(g,f);else if(g instanceof oe)g.target=g.target||f;else{var q=g;g=new oe(N,f),R(g,q)}if(q=!0,E)for(var K=E.length-1;0<=K;K--){var ie=g.g=E[K];q=Qt(ie,N,!0,g)&&q}if(ie=g.g=f,q=Qt(ie,N,!0,g)&&q,q=Qt(ie,N,!1,g)&&q,E)for(K=0;K<E.length;K++)ie=g.g=E[K],q=Qt(ie,N,!1,g)&&q}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var E=f.g[g],N=0;N<E.length;N++)we(E[N]);delete f.g[g],f.h--}}this.F=null},Ve.prototype.K=function(f,g,E,N){return this.i.add(String(f),g,!1,E,N)},Ve.prototype.L=function(f,g,E,N){return this.i.add(String(f),g,!0,E,N)};function Qt(f,g,E,N){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var q=!0,K=0;K<g.length;++K){var ie=g[K];if(ie&&!ie.da&&ie.capture==E){var Ye=ie.listener,Xt=ie.ha||ie.src;ie.fa&&tt(f.i,ie),q=Ye.call(Xt,N)!==!1&&q}}return q&&!N.defaultPrevented}function _s(f,g,E){if(typeof f=="function")E&&(f=b(f,E));else if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(f,g||0)}function gs(f){f.g=_s(()=>{f.g=null,f.i&&(f.i=!1,gs(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class Yi extends ve{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:gs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(f){ve.call(this),this.h=f,this.g={}}x(an,ve);var Gn=[];function Wt(f){ne(f.g,function(g,E){this.g.hasOwnProperty(E)&&Cn(g)},f),f.g={}}an.prototype.N=function(){an.aa.N.call(this),Wt(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ou=h.JSON.stringify,Xi=h.JSON.parse,Mn=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function lu(){}lu.prototype.h=null;function Ih(f){return f.h||(f.h=f.i())}function Nh(){}var Zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ys(){oe.call(this,"d")}x(ys,oe);function Di(){oe.call(this,"c")}x(Di,oe);var hi={},vs=null;function Do(){return vs=vs||new Ve}hi.La="serverreachability";function uu(f){oe.call(this,hi.La,f)}x(uu,oe);function Es(f){const g=Do();et(g,new uu(g))}hi.STAT_EVENT="statevent";function Oo(f,g){oe.call(this,hi.STAT_EVENT,f),this.stat=g}x(Oo,oe);function Vt(f){const g=Do();et(g,new Oo(g,f))}hi.Ma="timingevent";function xh(f,g){oe.call(this,hi.Ma,f),this.size=g}x(xh,oe);function ws(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},g)}function Ts(){this.g=!0}Ts.prototype.xa=function(){this.g=!1};function Dh(f,g,E,N,q,K){f.info(function(){if(f.g)if(K)for(var ie="",Ye=K.split("&"),Xt=0;Xt<Ye.length;Xt++){var Xe=Ye[Xt].split("=");if(1<Xe.length){var un=Xe[0];Xe=Xe[1];var Zt=un.split("_");ie=2<=Zt.length&&Zt[1]=="type"?ie+(un+"="+Xe+"&"):ie+(un+"=redacted&")}}else ie=null;else ie=K;return"XMLHTTP REQ ("+N+") [attempt "+q+"]: "+g+`
`+E+`
`+ie})}function Oh(f,g,E,N,q,K,ie){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+q+"]: "+g+`
`+E+`
`+K+" "+ie})}function bs(f,g,E,N){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+on(f,E)+(N?" "+N:"")})}function Ji(f,g){f.info(function(){return"TIMEOUT: "+g})}Ts.prototype.info=function(){};function on(f,g){if(!f.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var N=E[f];if(!(2>N.length)){var q=N[1];if(Array.isArray(q)&&!(1>q.length)){var K=q[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ie=1;ie<q.length;ie++)q[ie]=""}}}}return ou(E)}catch{return g}}var Yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ar={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Da;function ko(){}x(ko,lu),ko.prototype.g=function(){return new XMLHttpRequest},ko.prototype.i=function(){return{}},Da=new ko;function er(f,g,E,N){this.j=f,this.i=g,this.l=E,this.R=N||1,this.U=new an(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var Ss={},Oa={};function Oi(f,g,E){f.L=1,f.v=Pa(Dt(g)),f.m=E,f.P=!0,Cr(f,null)}function Cr(f,g){f.F=Date.now(),Ct(f),f.A=Dt(f.v);var E=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Nr(E.i,"t",N),f.C=0,E=f.j.J,f.h=new cu,f.g=$h(f.j,E?g:null,!f.m),0<f.O&&(f.M=new Yi(b(f.Y,f,f.g),f.O)),g=f.U,E=f.g,N=f.ca;var q="readystatechange";Array.isArray(q)||(q&&(Gn[0]=q.toString()),q=Gn);for(var K=0;K<q.length;K++){var ie=Ne(E,q[K],N||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),Es(),Dh(f.i,f.u,f.A,f.l,f.R,f.m)}er.prototype.ca=function(f){f=f.target;const g=this.M;g&&_i(f)==3?g.j():this.Y(f)},er.prototype.Y=function(f){try{if(f==this.g)e:{const Zt=_i(this.g);var g=this.g.Ba();const kr=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Uh(this.g)))){this.J||Zt!=4||g==7||(g==8||0>=kr?Es(3):Es(2)),Mo(this);var E=this.g.Z();this.X=E;t:if(As(this)){var N=Uh(this.g);f="";var q=N.length,K=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),ni(this);var ie="";break t}this.h.i=new h.TextDecoder}for(g=0;g<q;g++)this.h.h=!0,f+=this.h.i.decode(N[g],{stream:!(K&&g==q-1)});N.length=0,this.h.g+=f,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=E==200,Oh(this.i,this.u,this.A,this.l,this.R,Zt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Xt=this.g;if((Ye=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ye)){var Xe=Ye;break t}}Xe=null}if(E=Xe)bs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ii(this,E);else{this.o=!1,this.s=3,Vt(12),$n(this),ni(this);break e}}if(this.P){E=!0;let vn;for(;!this.J&&this.C<ie.length;)if(vn=Cs(this,ie),vn==Oa){Zt==4&&(this.s=4,Vt(14),E=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==Ss){this.s=4,Vt(15),bs(this.i,this.l,ie,"[Invalid Chunk]"),E=!1;break}else bs(this.i,this.l,vn,null),ii(this,vn);if(As(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||ie.length!=0||this.h.h||(this.s=1,Vt(16),E=!1),this.o=this.o&&E,!E)bs(this.i,this.l,ie,"[Invalid Chunked Response]"),$n(this),ni(this);else if(0<ie.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Ba(un),un.M=!0,Vt(11))}}else bs(this.i,this.l,ie,null),ii(this,ie);Zt==4&&$n(this),this.o&&!this.J&&(Zt==4?qh(this.j,this):(this.o=!1,Ct(this)))}else am(this.g),E==400&&0<ie.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),$n(this),ni(this)}}}catch{}finally{}};function As(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Cs(f,g){var E=f.C,N=g.indexOf(`
`,E);return N==-1?Oa:(E=Number(g.substring(E,N)),isNaN(E)?Ss:(N+=1,N+E>g.length?Oa:(g=g.slice(N,N+E),f.C=N+E,g)))}er.prototype.cancel=function(){this.J=!0,$n(this)};function Ct(f){f.S=Date.now()+f.I,hu(f,f.I)}function hu(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ws(b(f.ba,f),g)}function Mo(f){f.B&&(h.clearTimeout(f.B),f.B=null)}er.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ji(this.i,this.A),this.L!=2&&(Es(),Vt(17)),$n(this),this.s=2,ni(this)):hu(this,this.S-f)};function ni(f){f.j.G==0||f.J||qh(f.j,f)}function $n(f){Mo(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Wt(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function ii(f,g){try{var E=f.j;if(E.G!=0&&(E.g==f||Rs(E.h,f))){if(!f.K&&Rs(E.h,f)&&E.G==3){try{var N=E.Da.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var q=N;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)Ho(E),Bo(E);else break e;Tu(E),Vt(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=ws(b(E.Za,E),6e3));if(1>=kh(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Or(E,11)}else if((f.K||E.g==f)&&Ho(E),!Q(g))for(q=E.Da.g.parse(g),g=0;g<q.length;g++){let Xe=q[g];if(E.T=Xe[0],Xe=Xe[1],E.G==2)if(Xe[0]=="c"){E.K=Xe[1],E.ia=Xe[2];const un=Xe[3];un!=null&&(E.la=un,E.j.info("VER="+E.la));const Zt=Xe[4];Zt!=null&&(E.Aa=Zt,E.j.info("SVER="+E.Aa));const kr=Xe[5];kr!=null&&typeof kr=="number"&&0<kr&&(N=1.5*kr,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const vn=f.g;if(vn){const or=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(or){var K=N.h;K.g||or.indexOf("spdy")==-1&&or.indexOf("quic")==-1&&or.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Is(K,K.h),K.h=null))}if(N.D){const Su=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Su&&(N.ya=Su,it(N.I,N.D,Su))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var ie=f;if(N.qa=Gh(N,N.J?N.ia:null,N.W),ie.K){fi(N.h,ie);var Ye=ie,Xt=N.L;Xt&&(Ye.I=Xt),Ye.B&&(Mo(Ye),Ct(Ye)),N.g=ie}else Fh(N);0<E.i.length&&qo(E)}else Xe[0]!="stop"&&Xe[0]!="close"||Or(E,7);else E.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Or(E,7):Eu(E):Xe[0]!="noop"&&E.l&&E.l.ta(Xe),E.v=0)}}Es(4)}catch{}}var tm=class{constructor(f,g){this.g=f,this.map=g}};function fu(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function du(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function kh(f){return f.h?1:f.g?f.g.size:0}function Rs(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Is(f,g){f.g?f.g.add(g):f.h=g}function fi(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}fu.prototype.cancel=function(){if(this.i=Pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Pn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const E of f.g.values())g=g.concat(E.D);return g}return V(f.i)}function Mh(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(p(f)){for(var g=[],E=f.length,N=0;N<E;N++)g.push(f[N]);return g}g=[],E=0;for(N in f)g[E++]=f[N];return g}function nm(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(p(f)||typeof f=="string"){var g=[];f=f.length;for(var E=0;E<f;E++)g.push(E);return g}g=[],E=0;for(const N in f)g[E++]=N;return g}}}function ka(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(p(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var E=nm(f),N=Mh(f),q=N.length,K=0;K<q;K++)g.call(void 0,N[K],E&&E[K],f)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Po(f,g){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var N=f[E].indexOf("="),q=null;if(0<=N){var K=f[E].substring(0,N);q=f[E].substring(N+1)}else K=f[E];g(K,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Rr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Rr){this.h=f.h,Ns(this,f.j),this.o=f.o,this.g=f.g,Ma(this,f.s),this.l=f.l;var g=f.i,E=new tr;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),Lo(this,E),this.m=f.m}else f&&(g=String(f).match(pu))?(this.h=!1,Ns(this,g[1]||"",!0),this.o=xs(g[2]||""),this.g=xs(g[3]||"",!0),Ma(this,g[4]),this.l=xs(g[5]||"",!0),Lo(this,g[6]||"",!0),this.m=xs(g[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}Rr.prototype.toString=function(){var f=[],g=this.j;g&&f.push(di(g,mu,!0),":");var E=this.g;return(E||g=="file")&&(f.push("//"),(g=this.o)&&f.push(di(g,mu,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(di(E,E.charAt(0)=="/"?_u:Ph,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",di(E,sm)),f.join("")};function Dt(f){return new Rr(f)}function Ns(f,g,E){f.j=E?xs(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function Ma(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function Lo(f,g,E){g instanceof tr?(f.i=g,gu(f.i,f.h)):(E||(g=di(g,rm)),f.i=new tr(g,f.h))}function it(f,g,E){f.i.set(g,E)}function Pa(f){return it(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function xs(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function di(f,g,E){return typeof f=="string"?(f=encodeURI(f).replace(g,im),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function im(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var mu=/[#\/\?@]/g,Ph=/[#\?:]/g,_u=/[#\?]/g,rm=/[#\?@]/g,sm=/#/g;function tr(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function pi(f){f.g||(f.g=new Map,f.h=0,f.i&&Po(f.i,function(g,E){f.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}n=tr.prototype,n.add=function(f,g){pi(this),this.i=null,f=xr(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(g),this.h+=1,this};function Vo(f,g){pi(f),g=xr(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function Ir(f,g){return pi(f),g=xr(f,g),f.g.has(g)}n.forEach=function(f,g){pi(this),this.g.forEach(function(E,N){E.forEach(function(q){f.call(g,q,N,this)},this)},this)},n.na=function(){pi(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let N=0;N<g.length;N++){const q=f[N];for(let K=0;K<q.length;K++)E.push(g[N])}return E},n.V=function(f){pi(this);let g=[];if(typeof f=="string")Ir(this,f)&&(g=g.concat(this.g.get(xr(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)g=g.concat(f[E])}return g},n.set=function(f,g){return pi(this),this.i=null,f=xr(this,f),Ir(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},n.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function Nr(f,g,E){Vo(f,g),0<E.length&&(f.i=null,f.g.set(xr(f,g),V(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var N=g[E];const K=encodeURIComponent(String(N)),ie=this.V(N);for(N=0;N<ie.length;N++){var q=K;ie[N]!==""&&(q+="="+encodeURIComponent(String(ie[N]))),f.push(q)}}return this.i=f.join("&")};function xr(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function gu(f,g){g&&!f.j&&(pi(f),f.i=null,f.g.forEach(function(E,N){var q=N.toLowerCase();N!=q&&(Vo(this,N),Nr(this,q,E))},f)),f.j=g}function Lh(f,g){const E=new Ts;if(h.Image){const N=new Image;N.onload=I(mi,E,"TestLoadImage: loaded",!0,g,N),N.onerror=I(mi,E,"TestLoadImage: error",!1,g,N),N.onabort=I(mi,E,"TestLoadImage: abort",!1,g,N),N.ontimeout=I(mi,E,"TestLoadImage: timeout",!1,g,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else g(!1)}function La(f,g){const E=new Ts,N=new AbortController,q=setTimeout(()=>{N.abort(),mi(E,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:N.signal}).then(K=>{clearTimeout(q),K.ok?mi(E,"TestPingServer: ok",!0,g):mi(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),mi(E,"TestPingServer: error",!1,g)})}function mi(f,g,E,N,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),N(E)}catch{}}function Va(){this.g=new Mn}function nr(f,g,E){const N=E||"";try{ka(f,function(q,K){let ie=q;m(q)&&(ie=ou(q)),g.push(N+K+"="+encodeURIComponent(ie))})}catch(q){throw g.push(N+"type="+encodeURIComponent("_badmap")),q}}function Ds(f){this.l=f.Ub||null,this.j=f.eb||!1}x(Ds,lu),Ds.prototype.g=function(){return new Dr(this.l,this.j)},Ds.prototype.i=function(f){return function(){return f}}({});function Dr(f,g){Ve.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Dr,Ve),n=Dr.prototype,n.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,rr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?ir(this):rr(this),this.readyState==3&&yu(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,ir(this))},n.Qa=function(f){this.g&&(this.response=f,ir(this))},n.ga=function(){this.g&&ir(this)};function ir(f){f.readyState=4,f.l=null,f.j=null,f.v=null,rr(f)}n.setRequestHeader=function(f,g){this.u.append(f,g)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=g.next();return f.join(`\r
`)};function rr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function vu(f){let g="";return ne(f,function(E,N){g+=N,g+=":",g+=E,g+=`\r
`}),g}function ln(f,g,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=vu(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):it(f,g,E))}function ut(f){Ve.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ut,Ve);var Uo=/^https?$/i,Ua=["POST","PUT"];n=ut.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,g,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Da.g(),this.v=this.o?Ih(this.o):Ih(Da),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(K){Vh(this,K);return}if(f=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var q in N)E.set(q,N[q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const K of N.keys())E.set(K,N.get(K));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(K=>K.toLowerCase()=="content-type"),q=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ua,g,void 0))||N||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ie]of E)this.g.setRequestHeader(K,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ja(this),this.u=!0,this.g.send(f),this.u=!1}catch(K){Vh(this,K)}};function Vh(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,jo(f),sr(f)}function jo(f){f.A||(f.A=!0,et(f,"complete"),et(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,et(this,"complete"),et(this,"abort"),sr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sr(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zo(this):this.bb())},n.bb=function(){zo(this)};function zo(f){if(f.h&&typeof u<"u"&&(!f.v[1]||_i(f)!=4||f.Z()!=2)){if(f.u&&_i(f)==4)_s(f.Ea,0,f);else if(et(f,"readystatechange"),_i(f)==4){f.h=!1;try{const ie=f.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var N;if(N=ie===0){var q=String(f.D).match(pu)[1]||null;!q&&h.self&&h.self.location&&(q=h.self.location.protocol.slice(0,-1)),N=!Uo.test(q?q.toLowerCase():"")}E=N}if(E)et(f,"complete"),et(f,"success");else{f.m=6;try{var K=2<_i(f)?f.g.statusText:""}catch{K=""}f.l=K+" ["+f.Z()+"]",jo(f)}}finally{sr(f)}}}}function sr(f,g){if(f.g){ja(f);const E=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||et(f,"ready");try{E.onreadystatechange=N}catch{}}}function ja(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function _i(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),Xi(g)}};function Uh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function am(f){const g={};f=(f.g&&2<=_i(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(Q(f[N]))continue;var E=O(f[N]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const K=g[q]||[];g[q]=K,K.push(E)}P(g,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(f,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||g}function Fo(f){this.Aa=0,this.i=[],this.j=new Ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,f),this.cb=za("retryDelaySeedMs",1e4,f),this.Wa=za("forwardChannelMaxRetries",2,f),this.wa=za("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new fu(f&&f.concurrentRequestLimit),this.Da=new Va,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fo.prototype,n.la=8,n.G=1,n.connect=function(f,g,E,N){Vt(0),this.W=f,this.H=g||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=Gh(this,null,this.W),qo(this)};function Eu(f){if(jh(f),f.G==3){var g=f.U++,E=Dt(f.I);if(it(E,"SID",f.K),it(E,"RID",g),it(E,"TYPE","terminate"),Fa(f,E),g=new er(f,f.j,g),g.L=2,g.v=Pa(Dt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=g.v,E=!0),E||(g.g=$h(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ct(g)}Hh(f)}function Bo(f){f.g&&(Ba(f),f.g.cancel(),f.g=null)}function jh(f){Bo(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ho(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function qo(f){if(!du(f.h)&&!f.s){f.s=!0;var g=f.Ga;ae||ke(),ue||(ae(),ue=!0),ce.add(g,f),f.B=0}}function om(f,g){return kh(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ws(b(f.Ga,f,g),bu(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const q=new er(this,this.j,f);let K=this.o;if(this.S&&(K?(K=S(K),R(K,this.S)):K=this.S),this.m!==null||this.O||(q.H=K,K=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=zh(this,q,g),E=Dt(this.I),it(E,"RID",f),it(E,"CVER",22),this.D&&it(E,"X-HTTP-Session-Id",this.D),Fa(this,E),K&&(this.O?g="headers="+encodeURIComponent(String(vu(K)))+"&"+g:this.m&&ln(E,this.m,K)),Is(this.h,q),this.Ua&&it(E,"TYPE","init"),this.P?(it(E,"$req",g),it(E,"SID","null"),q.T=!0,Oi(q,E,null)):Oi(q,E,g),this.G=2}}else this.G==3&&(f?wu(this,f):this.i.length==0||du(this.h)||wu(this))};function wu(f,g){var E;g?E=g.l:E=f.U++;const N=Dt(f.I);it(N,"SID",f.K),it(N,"RID",E),it(N,"AID",f.T),Fa(f,N),f.m&&f.o&&ln(N,f.m,f.o),E=new er(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),g&&(f.i=g.D.concat(f.i)),g=zh(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Is(f.h,E),Oi(E,N,g)}function Fa(f,g){f.H&&ne(f.H,function(E,N){it(g,N,E)}),f.l&&ka({},function(E,N){it(g,N,E)})}function zh(f,g,E){E=Math.min(f.i.length,E);var N=f.l?b(f.l.Na,f.l,f):null;e:{var q=f.i;let K=-1;for(;;){const ie=["count="+E];K==-1?0<E?(K=q[0].g,ie.push("ofs="+K)):K=0:ie.push("ofs="+K);let Ye=!0;for(let Xt=0;Xt<E;Xt++){let Xe=q[Xt].g;const un=q[Xt].map;if(Xe-=K,0>Xe)K=Math.max(0,q[Xt].g-100),Ye=!1;else try{nr(un,ie,"req"+Xe+"_")}catch{N&&N(un)}}if(Ye){N=ie.join("&");break e}}}return f=f.i.splice(0,E),g.D=f,N}function Fh(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;ae||ke(),ue||(ae(),ue=!0),ce.add(g,f),f.v=0}}function Tu(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ws(b(f.Fa,f),bu(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Bh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ws(b(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),Bo(this),Bh(this))};function Ba(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Bh(f){f.g=new er(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=Dt(f.qa);it(g,"RID","rpc"),it(g,"SID",f.K),it(g,"AID",f.T),it(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&it(g,"TO",f.ja),it(g,"TYPE","xmlhttp"),Fa(f,g),f.m&&f.o&&ln(g,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Pa(Dt(g)),E.m=null,E.P=!0,Cr(E,f)}n.Za=function(){this.C!=null&&(this.C=null,Bo(this),Tu(this),Vt(19))};function Ho(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function qh(f,g){var E=null;if(f.g==g){Ho(f),Ba(f),f.g=null;var N=2}else if(Rs(f.h,g))E=g.D,fi(f.h,g),N=1;else return;if(f.G!=0){if(g.o)if(N==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var q=f.B;N=Do(),et(N,new xh(N,E)),qo(f)}else Fh(f);else if(q=g.s,q==3||q==0&&0<g.X||!(N==1&&om(f,g)||N==2&&Tu(f)))switch(E&&0<E.length&&(g=f.h,g.i=g.i.concat(E)),q){case 1:Or(f,5);break;case 4:Or(f,10);break;case 3:Or(f,6);break;default:Or(f,2)}}}function bu(f,g){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*g}function Or(f,g){if(f.j.info("Error code "+g),g==2){var E=b(f.fb,f),N=f.Xa;const q=!N;N=new Rr(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ns(N,"https"),Pa(N),q?Lh(N.toString(),E):La(N.toString(),E)}else Vt(2);f.G=0,f.l&&f.l.sa(g),Hh(f),jh(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Hh(f){if(f.G=0,f.ka=[],f.l){const g=Pn(f.h);(g.length!=0||f.i.length!=0)&&(M(f.ka,g),M(f.ka,f.i),f.h.i.length=0,V(f.i),f.i.length=0),f.l.ra()}}function Gh(f,g,E){var N=E instanceof Rr?Dt(E):new Rr(E);if(N.g!="")g&&(N.g=g+"."+N.g),Ma(N,N.s);else{var q=h.location;N=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;var K=new Rr(null);N&&Ns(K,N),g&&(K.g=g),q&&Ma(K,q),E&&(K.l=E),N=K}return E=f.D,g=f.ya,E&&g&&it(N,E,g),it(N,"VER",f.la),Fa(f,N),N}function $h(f,g,E){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new ut(new Ds({eb:E})):new ut(f.pa),g.Ha(f.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kh(){}n=Kh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Go(){}Go.prototype.g=function(f,g){return new Ln(f,g)};function Ln(f,g){Ve.call(this),this.g=new Fo(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!Q(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new ar(this)}x(Ln,Ve),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){Eu(this.g)},Ln.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=ou(f),f=E);g.i.push(new tm(g.Ya++,f)),g.G==3&&qo(g)},Ln.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,Ln.aa.N.call(this)};function Qh(f){ys.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const E in g){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}x(Qh,ys);function Wh(){Di.call(this),this.status=1}x(Wh,Di);function ar(f){this.g=f}x(ar,Kh),ar.prototype.ua=function(){et(this.g,"a")},ar.prototype.ta=function(f){et(this.g,new Qh(f))},ar.prototype.sa=function(f){et(this.g,new Wh)},ar.prototype.ra=function(){et(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,cA=function(){return new Go},uA=function(){return Do()},lA=hi,Zg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yt.NO_ERROR=0,Yt.TIMEOUT=8,Yt.HTTP_ERROR=6,cd=Yt,Ar.COMPLETE="complete",oA=Ar,Nh.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,Tc=Nh,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,aA=ut}).apply(typeof Yf<"u"?Yf:typeof self<"u"?self:typeof window<"u"?window:{});const lT="@firebase/firestore",uT="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new Ap("@firebase/firestore");function Tl(){return _o.logLevel}function he(n,...e){if(_o.logLevel<=Be.DEBUG){const t=e.map(Wy);_o.debug(`Firestore (${Zl}): ${n}`,...t)}}function cs(n,...e){if(_o.logLevel<=Be.ERROR){const t=e.map(Wy);_o.error(`Firestore (${Zl}): ${n}`,...t)}}function Vl(n,...e){if(_o.logLevel<=Be.WARN){const t=e.map(Wy);_o.warn(`Firestore (${Zl}): ${n}`,...t)}}function Wy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Zl}) INTERNAL ASSERTION FAILED: `+n;throw cs(e),new Error(e)}function ct(n,e){n||Re()}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nn.UNAUTHENTICATED))}shutdown(){}}class u4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c4{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new rs,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},h=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new rs)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string"),new hA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new Nn(e)}}class h4{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class f4{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new h4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Yn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ct(this.o===void 0);const i=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new cT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct(typeof t.token=="string"),this.R=t.token,new cT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=p4(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function We(n,e){return n<e?-1:n>e?1:0}function Ul(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=-62135596800,fT=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*fT);return new $t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hT)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fT}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new $t(0,0))}static max(){return new xe(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="__name__";class dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(),i===void 0?i=e.length-t:i>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=dr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=dr.isNumericId(e),a=dr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?dr.extractNumericId(e).compare(dr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class Tt extends dr{construct(e,t,i){return new Tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Tt(t)}static emptyPath(){return new Tt([])}}const m4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends dr{construct(e,t,i){return new Sn(e,t,i)}static isValidIdentifier(e){return m4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dT}static keyField(){return new Sn([dT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(l(),a++)}if(l(),u)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Tt.fromString(e))}static fromName(e){return new ye(Tt.fromString(e).popFirst(5))}static empty(){return new ye(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;function _4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=xe.fromTimestamp(i===1e9?new $t(t+1,0):new $t(t,i));return new _a(a,ye.empty(),e)}function g4(n){return new _a(n.readTime,n.key,qc)}class _a{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new _a(xe.min(),ye.empty(),qc)}static max(){return new _a(xe.max(),ye.empty(),qc)}}function y4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==v4)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let a=0,l=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++l,u&&l===a&&t()},p=>i(p))}),u=!0,l===a&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(a=>a?J.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new J((i,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next(y=>{u[m]=y,++h,h===l&&i(u)},y=>a(y))}})}static doWhile(e,t){return new J((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function w4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function eu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Rp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=-1;function Ip(n){return n==null}function Ld(n){return n===0&&1/n==-1/0}function T4(n){return typeof n=="number"&&Number.isInteger(n)&&!Ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="";function b4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pT(e)),e=S4(n.get(t),e);return pT(e)}function S4(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case dA:t+="";break;default:t+=l}}return t}function pT(n){return n+dA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class Jg{constructor(e,t){this.comparator=e,this.root=t||la.EMPTY}insert(e,t){return new Jg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,la.BLACK,null,null))}remove(e){return new Jg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,la.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xf(this.root,e,this.comparator,!0)}},Xf=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},la=class Xr{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Xr.RED,this.left=a??Xr.EMPTY,this.right=l??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Xr(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Xr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}};la.EMPTY=null,la.RED=!0,la.BLACK=!1;la.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,i,a,l){return this}insert(e,t,i){return new la(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _T(this.data.getIterator())}getIteratorFrom(e){return new _T(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class _T{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new zi([])}unionWith(e){let t=new sn(Sn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new mA("Invalid base64 string: "+l):l}}(e);return new An(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const A4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(ct(!!n),typeof n=="string"){let e=0;const t=A4.exec(n);if(ct(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zt(n.seconds),nanos:zt(n.nanos)}}function zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ya(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="server_timestamp",gA="__type__",yA="__previous_value__",vA="__local_write_time__";function Xy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[gA])===null||t===void 0?void 0:t.stringValue)===_A}function Np(n){const e=n.mapValue.fields[yA];return Xy(e)?Np(e):e}function Hc(n){const e=ga(n.mapValue.fields[vA].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t,i,a,l,u,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}}const Vd="(default)";class Gc{constructor(e,t){this.projectId=e,this.database=t||Vd}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="__type__",R4="__max__",Zf={mapValue:{}},wA="__vector__",Ud="value";function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xy(n)?4:N4(n)?9007199254740991:I4(n)?10:11:Re()}function vr(n,e){if(n===e)return!0;const t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hc(n).isEqual(Hc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ga(a.timestampValue),h=ga(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return ya(a.bytesValue).isEqual(ya(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return zt(a.geoPointValue.latitude)===zt(l.geoPointValue.latitude)&&zt(a.geoPointValue.longitude)===zt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return zt(a.integerValue)===zt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=zt(a.doubleValue),h=zt(l.doubleValue);return u===h?Ld(u)===Ld(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Ul(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(mT(u)!==mT(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!vr(u[p],h[p])))return!1;return!0}(n,e);default:return Re()}}function $c(n,e){return(n.values||[]).find(t=>vr(t,e))!==void 0}function jl(n,e){if(n===e)return 0;const t=va(n),i=va(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(l,u){const h=zt(l.integerValue||l.doubleValue),p=zt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return gT(n.timestampValue,e.timestampValue);case 4:return gT(Hc(n),Hc(e));case 5:return We(n.stringValue,e.stringValue);case 6:return function(l,u){const h=ya(l),p=ya(u);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const h=l.split("/"),p=u.split("/");for(let m=0;m<h.length&&m<p.length;m++){const y=We(h[m],p[m]);if(y!==0)return y}return We(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const h=We(zt(l.latitude),zt(u.latitude));return h!==0?h:We(zt(l.longitude),zt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return yT(n.arrayValue,e.arrayValue);case 10:return function(l,u){var h,p,m,y;const v=l.fields||{},b=u.fields||{},I=(h=v[Ud])===null||h===void 0?void 0:h.arrayValue,x=(p=b[Ud])===null||p===void 0?void 0:p.arrayValue,V=We(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((y=x==null?void 0:x.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:yT(I,x)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===Zf.mapValue&&u===Zf.mapValue)return 0;if(l===Zf.mapValue)return 1;if(u===Zf.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),m=u.fields||{},y=Object.keys(m);p.sort(),y.sort();for(let v=0;v<p.length&&v<y.length;++v){const b=We(p[v],y[v]);if(b!==0)return b;const I=jl(h[p[v]],m[y[v]]);if(I!==0)return I}return We(p.length,y.length)}(n.mapValue,e.mapValue);default:throw Re()}}function gT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ga(n),i=ga(e),a=We(t.seconds,i.seconds);return a!==0?a:We(t.nanos,i.nanos)}function yT(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=jl(t[a],i[a]);if(l)return l}return We(t.length,i.length)}function zl(n){return ey(n)}function ey(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ga(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ya(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=ey(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${ey(t.fields[u])}`;return a+"}"}(n.mapValue):Re()}function hd(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Np(n);return e?16+hd(e):16;case 5:return 2*n.stringValue.length;case 6:return ya(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+hd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ao(i.fields,(l,u)=>{a+=l.length+hd(u)}),a}(n.mapValue);default:throw Re()}}function vT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ty(n){return!!n&&"integerValue"in n}function Zy(n){return!!n&&"arrayValue"in n}function ET(n){return!!n&&"nullValue"in n}function wT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fd(n){return!!n&&"mapValue"in n}function I4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[EA])===null||t===void 0?void 0:t.stringValue)===wA}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ao(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Rc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function N4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===R4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!fd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=Sn.emptyPath(),i={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=h.popLast()}u?i[h.lastSegment()]=Rc(u):a.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());fd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];fd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ao(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Ri(Rc(this.value))}}function TA(n){const e=[];return Ao(n.fields,(t,i)=>{const a=new Sn([t]);if(fd(i)){const l=TA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,i,a,l,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new xn(e,0,xe.min(),xe.min(),xe.min(),Ri.empty(),0)}static newFoundDocument(e,t,i,a){return new xn(e,1,t,xe.min(),i,a,0)}static newNoDocument(e,t){return new xn(e,2,t,xe.min(),xe.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,xe.min(),xe.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function TT(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(u.referenceValue),t.key):i=jl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function bT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function x4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{}class Gt extends bA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new O4(e,t,i):t==="array-contains"?new P4(e,i):t==="in"?new L4(e,i):t==="not-in"?new V4(e,i):t==="array-contains-any"?new U4(e,i):new Gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new k4(e,i):new M4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(jl(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ki extends bA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ki(e,t)}matches(e){return SA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function SA(n){return n.op==="and"}function AA(n){return D4(n)&&SA(n)}function D4(n){for(const e of n.filters)if(e instanceof Ki)return!1;return!0}function ny(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+zl(n.value);if(AA(n))return n.filters.map(e=>ny(e)).join(",");{const e=n.filters.map(t=>ny(t)).join(",");return`${n.op}(${e})`}}function CA(n,e){return n instanceof Gt?function(i,a){return a instanceof Gt&&i.op===a.op&&i.field.isEqual(a.field)&&vr(i.value,a.value)}(n,e):n instanceof Ki?function(i,a){return a instanceof Ki&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,u,h)=>l&&CA(u,a.filters[h]),!0):!1}(n,e):void Re()}function RA(n){return n instanceof Gt?function(t){return`${t.field.canonicalString()} ${t.op} ${zl(t.value)}`}(n):n instanceof Ki?function(t){return t.op.toString()+" {"+t.getFilters().map(RA).join(" ,")+"}"}(n):"Filter"}class O4 extends Gt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class k4 extends Gt{constructor(e,t){super(e,"in",t),this.keys=IA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class M4 extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=IA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class P4 extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zy(t)&&$c(t.arrayValue,this.value)}}class L4 extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$c(this.value.arrayValue,t)}}class V4 extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!$c(this.value.arrayValue,t)}}class U4 extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>$c(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t=null,i=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.le=null}}function ST(n,e=null,t=[],i=[],a=null,l=null,u=null){return new j4(n,e,t,i,a,l,u)}function Jy(n){const e=Oe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>ny(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Ip(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>zl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>zl(i)).join(",")),e.le=t}return e.le}function ev(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!x4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bT(n.startAt,e.startAt)&&bT(n.endAt,e.endAt)}function iy(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t=null,i=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function z4(n,e,t,i,a,l,u,h){return new tu(n,e,t,i,a,l,u,h)}function xp(n){return new tu(n)}function AT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NA(n){return n.collectionGroup!==null}function Ic(n){const e=Oe(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new sn(Sn.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new Kc(l,i))}),t.has(Sn.keyField().canonicalString())||e.he.push(new Kc(Sn.keyField(),i))}return e.he}function pr(n){const e=Oe(n);return e.Pe||(e.Pe=F4(e,Ic(n))),e.Pe}function F4(n,e){if(n.limitType==="F")return ST(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Kc(a.field,l)});const t=n.endAt?new jd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new jd(n.startAt.position,n.startAt.inclusive):null;return ST(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ry(n,e){const t=n.filters.concat([e]);return new tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sy(n,e,t){return new tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dp(n,e){return ev(pr(n),pr(e))&&n.limitType===e.limitType}function xA(n){return`${Jy(pr(n))}|lt:${n.limitType}`}function bl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>RA(a)).join(", ")}]`),Ip(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>zl(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>zl(a)).join(",")),`Target(${i})`}(pr(n))}; limitType=${n.limitType})`}function Op(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of Ic(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,h,p){const m=TT(u,h,p);return u.inclusive?m<=0:m<0}(i.startAt,Ic(i),a)||i.endAt&&!function(u,h,p){const m=TT(u,h,p);return u.inclusive?m>=0:m>0}(i.endAt,Ic(i),a))}(n,e)}function B4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DA(n){return(e,t)=>{let i=!1;for(const a of Ic(n)){const l=q4(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function q4(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):function(l,u,h){const p=u.data.field(l),m=h.data.field(l);return p!==null&&m!==null?jl(p,m):Re()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=new Kt(ye.comparator);function hs(){return H4}const OA=new Kt(ye.comparator);function bc(...n){let e=OA;for(const t of n)e=e.insert(t.key,t);return e}function kA(n){let e=OA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function co(){return Nc()}function MA(){return Nc()}function Nc(){return new Co(n=>n.toString(),(n,e)=>n.isEqual(e))}const G4=new Kt(ye.comparator),$4=new sn(ye.comparator);function $e(...n){let e=$4;for(const t of n)e=e.add(t);return e}const K4=new sn(We);function Q4(){return K4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function PA(n){return{integerValue:""+n}}function W4(n,e){return T4(e)?PA(e):tv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this._=void 0}}function Y4(n,e,t){return n instanceof zd?function(a,l){const u={fields:{[gA]:{stringValue:_A},[vA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Xy(l)&&(l=Np(l)),l&&(u.fields[yA]=l),{mapValue:u}}(t,e):n instanceof Qc?VA(n,e):n instanceof Wc?UA(n,e):function(a,l){const u=LA(a,l),h=CT(u)+CT(a.Ie);return ty(u)&&ty(a.Ie)?PA(h):tv(a.serializer,h)}(n,e)}function X4(n,e,t){return n instanceof Qc?VA(n,e):n instanceof Wc?UA(n,e):t}function LA(n,e){return n instanceof Fd?function(i){return ty(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class zd extends kp{}class Qc extends kp{constructor(e){super(),this.elements=e}}function VA(n,e){const t=jA(e);for(const i of n.elements)t.some(a=>vr(a,i))||t.push(i);return{arrayValue:{values:t}}}class Wc extends kp{constructor(e){super(),this.elements=e}}function UA(n,e){let t=jA(e);for(const i of n.elements)t=t.filter(a=>!vr(a,i));return{arrayValue:{values:t}}}class Fd extends kp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function CT(n){return zt(n.integerValue||n.doubleValue)}function jA(n){return Zy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Z4(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Qc&&a instanceof Qc||i instanceof Wc&&a instanceof Wc?Ul(i.elements,a.elements,vr):i instanceof Fd&&a instanceof Fd?vr(i.Ie,a.Ie):i instanceof zd&&a instanceof zd}(n.transform,e.transform)}class J4{constructor(e,t){this.version=e,this.transformResults=t}}class Hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mp{}function zA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nv(n.key,Hi.none()):new fh(n.key,n.data,Hi.none());{const t=n.data,i=Ri.empty();let a=new sn(Sn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ro(n.key,i,new zi(a.toArray()),Hi.none())}}function eM(n,e,t){n instanceof fh?function(a,l,u){const h=a.value.clone(),p=IT(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ro?function(a,l,u){if(!dd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=IT(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(FA(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function xc(n,e,t,i){return n instanceof fh?function(l,u,h,p){if(!dd(l.precondition,u))return h;const m=l.value.clone(),y=NT(l.fieldTransforms,p,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ro?function(l,u,h,p){if(!dd(l.precondition,u))return h;const m=NT(l.fieldTransforms,p,u),y=u.data;return y.setAll(FA(l)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(l,u,h){return dd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function tM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=LA(i.transform,a||null);l!=null&&(t===null&&(t=Ri.empty()),t.set(i.field,l))}return t||null}function RT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Ul(i,a,(l,u)=>Z4(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fh extends Mp{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ro extends Mp{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function FA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function IT(n,e,t){const i=new Map;ct(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);i.set(l.field,X4(u,h,t[a]))}return i}function NT(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,Y4(l,u,e))}return i}class nv extends Mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nM extends Mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&eM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=MA();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=zA(u,h);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(xe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,(t,i)=>RT(t,i))&&Ul(this.baseMutations,e.baseMutations,(t,i)=>RT(t,i))}}class iv{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ct(e.mutations.length===i.length);let a=function(){return G4}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new iv(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Je;function aM(n){switch(n){case Z.OK:return Re();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Re()}}function BA(n){if(n===void 0)return cs("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Ht.OK:return Z.OK;case Ht.CANCELLED:return Z.CANCELLED;case Ht.UNKNOWN:return Z.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return Z.INTERNAL;case Ht.UNAVAILABLE:return Z.UNAVAILABLE;case Ht.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ht.NOT_FOUND:return Z.NOT_FOUND;case Ht.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ht.ABORTED:return Z.ABORTED;case Ht.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ht.DATA_LOSS:return Z.DATA_LOSS;default:return Re()}}(Je=Ht||(Ht={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new oa([4294967295,4294967295],0);function xT(n){const e=oM().encode(n),t=new sA;return t.update(e),new Uint8Array(t.digest())}function DT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new oa([t,i],0),new oa([a,l],0)]}class rv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sc(`Invalid padding: ${t}`);if(i<0)throw new Sc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=oa.fromNumber(this.Ee)}Ae(e,t,i){let a=e.add(t.multiply(oa.fromNumber(i)));return a.compare(lM)===1&&(a=new oa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=xT(e),[i,a]=DT(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(i,a,l);if(!this.Re(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new rv(l,a,t);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=xT(e),[i,a]=DT(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(i,a,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Pp(xe.min(),a,new Kt(We),hs(),$e())}}class dh{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new dh(i,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,i,a){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=a}}class qA{constructor(e,t){this.targetId=e,this.ge=t}}class HA{constructor(e,t,i=An.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class OT{constructor(){this.pe=0,this.ye=kT(),this.we=An.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=$e(),t=$e(),i=$e();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Re()}}),new dh(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=kT()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ct(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class uM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=hs(),this.$e=Jf(),this.Ke=Jf(),this.Ue=new Kt(We)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,i=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(iy(l))if(i===0){const u=new ye(l.path);this.ze(t,u,xn.newNoDocument(u,xe.min()))}else ct(i===1);else{const u=this.et(t);if(u!==i){const h=this.tt(e),p=h?this.nt(h,e,u):1;if(p!==0){this.Ye(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=ya(i).toUint8Array()}catch(p){if(p instanceof mA)return Vl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new rv(u,a,l)}catch(p){return Vl(p instanceof Sc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const h=this.Xe(u);if(h){if(l.current&&iy(h.target)){const p=new ye(h.target.path);this._t(p).has(u)||this.ut(u,p)||this.ze(u,p,xn.newNoDocument(p,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let i=$e();this.Ke.forEach((l,u)=>{let h=!0;u.forEachWhile(p=>{const m=this.Xe(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const a=new Pp(e,t,this.Ue,this.Qe,i);return this.Qe=hs(),this.$e=Jf(),this.Ke=Jf(),this.Ue=new Kt(We),a}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new OT,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new sn(We),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new sn(We),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new OT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Jf(){return new Kt(ye.comparator)}function kT(){return new Kt(ye.comparator)}const cM={asc:"ASCENDING",desc:"DESCENDING"},hM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fM={and:"AND",or:"OR"};class dM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ay(n,e){return n.useProto3Json||Ip(e)?e:{value:e}}function Bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pM(n,e){return Bd(n,e.toTimestamp())}function mr(n){return ct(!!n),xe.fromTimestamp(function(t){const i=ga(t);return new $t(i.seconds,i.nanos)}(n))}function sv(n,e){return oy(n,e).canonicalString()}function oy(n,e){const t=function(a){return new Tt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $A(n){const e=Tt.fromString(n);return ct(XA(e)),e}function ly(n,e){return sv(n.databaseId,e.path)}function gg(n,e){const t=$A(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(QA(t))}function KA(n,e){return sv(n.databaseId,e)}function mM(n){const e=$A(n);return e.length===4?Tt.emptyPath():QA(e)}function uy(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QA(n){return ct(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function MT(n,e,t){return{name:ly(n,e),fields:t.value.mapValue.fields}}function _M(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ct(y===void 0||typeof y=="string"),An.fromBase64String(y||"")):(ct(y===void 0||y instanceof Buffer||y instanceof Uint8Array),An.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const y=m.code===void 0?Z.UNKNOWN:BA(m.code);return new fe(y,m.message||"")}(u);t=new HA(i,a,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=gg(n,i.document.name),l=mr(i.document.updateTime),u=i.document.createTime?mr(i.document.createTime):xe.min(),h=new Ri({mapValue:{fields:i.document.fields}}),p=xn.newFoundDocument(a,l,u,h),m=i.targetIds||[],y=i.removedTargetIds||[];t=new pd(m,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=gg(n,i.document),l=i.readTime?mr(i.readTime):xe.min(),u=xn.newNoDocument(a,l),h=i.removedTargetIds||[];t=new pd([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=gg(n,i.document),l=i.removedTargetIds||[];t=new pd([],l,a,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new sM(a,l),h=i.targetId;t=new qA(h,u)}}return t}function gM(n,e){let t;if(e instanceof fh)t={update:MT(n,e.key,e.value)};else if(e instanceof nv)t={delete:ly(n,e.key)};else if(e instanceof Ro)t={update:MT(n,e.key,e.data),updateMask:CM(e.fieldMask)};else{if(!(e instanceof nM))return Re();t={verify:ly(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,u){const h=u.transform;if(h instanceof zd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Qc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Wc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Fd)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Re()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:pM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re()}(n,e.precondition)),t}function yM(n,e){return n&&n.length>0?(ct(e!==void 0),n.map(t=>function(a,l){let u=a.updateTime?mr(a.updateTime):mr(l);return u.isEqual(xe.min())&&(u=mr(l)),new J4(u,a.transformResults||[])}(t,e))):[]}function vM(n,e){return{documents:[KA(n,e.path)]}}function EM(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=KA(n,a);const l=function(m){if(m.length!==0)return YA(Ki.create(m,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(m){if(m.length!==0)return m.map(y=>function(b){return{field:Sl(b.field),direction:bM(b.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=ay(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:a}}function wM(n){let e=mM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ct(i===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=function(v){const b=WA(v);return b instanceof Ki&&AA(b)?b.getFilters():[b]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(b=>function(x){return new Kc(Al(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(b))}(t.orderBy));let h=null;t.limit&&(h=function(v){let b;return b=typeof v=="object"?v.value:v,Ip(b)?null:b}(t.limit));let p=null;t.startAt&&(p=function(v){const b=!!v.before,I=v.values||[];return new jd(I,b)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const b=!v.before,I=v.values||[];return new jd(I,b)}(t.endAt)),z4(e,a,u,l,h,"F",p,m)}function TM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Al(t.unaryFilter.field);return Gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Al(t.unaryFilter.field);return Gt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Al(t.unaryFilter.field);return Gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Al(t.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(n):n.fieldFilter!==void 0?function(t){return Gt.create(Al(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ki.create(t.compositeFilter.filters.map(i=>WA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(n):Re()}function bM(n){return cM[n]}function SM(n){return hM[n]}function AM(n){return fM[n]}function Sl(n){return{fieldPath:n.canonicalString()}}function Al(n){return Sn.fromServerFormat(n.fieldPath)}function YA(n){return n instanceof Gt?function(t){if(t.op==="=="){if(wT(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NAN"}};if(ET(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wT(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NOT_NAN"}};if(ET(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(t.field),op:SM(t.op),value:t.value}}}(n):n instanceof Ki?function(t){const i=t.getFilters().map(a=>YA(a));return i.length===1?i[0]:{compositeFilter:{op:AM(t.op),filters:i}}}(n):Re()}function CM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t,i,a,l=xe.min(),u=xe.min(),h=An.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.Tt=e}}function IM(n){const e=wM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.Tn=new xM}addToCollectionParentIndex(e,t){return this.Tn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(_a.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class xM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new sn(Tt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new sn(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZA=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(ZA,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Fl(0)}static Un(){return new Fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="LruGarbageCollector",DM=1048576;function VT([n,e],[t,i]){const a=We(n,t);return a===0?We(e,i):a}class OM{constructor(e){this.Hn=e,this.buffer=new sn(VT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();VT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(LT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){eu(t)?he(LT,"Ignoring IndexedDB error during garbage collection: ",t):await Jl(t)}await this.er(3e5)})}}class MM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Rp.ae);const i=new OM(t);return this.tr.forEachTarget(e,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(PT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PT):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,a,l,u,h,p,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,t))).next(v=>(l=v,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(m=Date.now(),Tl()<=Be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${v} documents in `+(m-p)+`ms
Total Duration: ${m-y}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function PM(n,e){return new MM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.changes=new Co(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&xc(i.mutation,a,zi.empty(),$t.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,$e()).next(()=>i))}getLocalViewOfDocuments(e,t,i=$e()){const a=co();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let u=bc();return l.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,$e()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,i,a){let l=hs();const u=Nc(),h=function(){return Nc()}();return t.forEach((p,m)=>{const y=i.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof Ro)?l=l.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),xc(y.mutation,m,y.mutation.getFieldMask(),$t.now())):u.set(m.key,zi.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((m,y)=>u.set(m,y)),t.forEach((m,y)=>{var v;return h.set(m,new VM(y,(v=u.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const i=Nc();let a=new Kt((u,h)=>u-h),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let y=i.get(p)||zi.empty();y=h.applyToLocalView(m,y),i.set(p,y);const v=(a.get(h.batchId)||$e()).add(p);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,y=p.value,v=MA();y.forEach(b=>{if(!l.has(b)){const I=zA(t.get(b),i.get(b));I!==null&&v.set(b,I),l=l.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return J.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):J.resolve(co());let h=qc,p=l;return u.next(m=>J.forEach(m,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(y)?J.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{p=p.insert(y,b)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,p,m,$e())).next(y=>({batchId:h,changes:kA(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let a=bc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=bc();return this.indexManager.getCollectionParents(e,l).next(h=>J.forEach(h,p=>{const m=function(v,b){return new tu(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next(y=>{y.forEach((v,b)=>{u=u.insert(v,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(u=>{l.forEach((p,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,xn.newInvalidDocument(y)))});let h=bc();return u.forEach((p,m)=>{const y=l.get(p);y!==void 0&&xc(y.mutation,m,zi.empty(),$t.now()),Op(t,m)&&(h=h.insert(p,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return J.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:mr(a.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:IM(a.bundledQuery),readTime:mr(a.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.overlays=new Kt(ye.comparator),this.Rr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=co();return J.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.Et(e,t,l)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const a=co(),l=t.length+1,u=new ye(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return J.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Kt((m,y)=>m-y);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let y=l.get(m.largestBatchId);y===null&&(y=co(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=co(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=a)););return J.resolve(h)}Et(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new rM(t,i));let l=this.Rr.get(t);l===void 0&&(l=$e(),this.Rr.set(t,l)),this.Rr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.Vr=new sn(mn.mr),this.gr=new sn(mn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new mn(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new mn(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new ye(new Tt([])),i=new mn(t,e),a=new mn(t,e+1),l=[];return this.gr.forEachInRange([i,a],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ye(new Tt([])),i=new mn(t,e),a=new mn(t,e+1);let l=$e();return this.gr.forEachInRange([i,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new mn(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class mn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ye.comparator(e.key,t.key)||We(e.Cr,t.Cr)}static pr(e,t){return We(e.Cr,t.Cr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new sn(mn.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new iM(l,t,i,a);this.mutationQueue.push(u);for(const h of a)this.Mr=this.Mr.add(new mn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Nr(i),l=a<0?0:a;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Yy:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new mn(t,0),a=new mn(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([i,a],u=>{const h=this.Or(u.Cr);l.push(h)}),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(We);return t.forEach(a=>{const l=new mn(a,0),u=new mn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],h=>{i=i.add(h.Cr)})}),J.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const u=new mn(new ye(l),0);let h=new sn(We);return this.Mr.forEachWhile(p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(p.Cr)),!0)},u),J.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const a=this.Or(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ct(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return J.forEach(t.mutations,a=>{const l=new mn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new mn(t,0),a=this.Mr.firstAfterOrEqual(i);return J.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.kr=e,this.docs=function(){return new Kt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let i=hs();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=hs();const u=t.path,h=new ye(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:y}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||y4(g4(y),i)<=0||(a.has(y.key)||Op(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Re()}qr(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new HM(this)}getSize(e){return J.resolve(this.size)}}class HM extends LM{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.persistence=e,this.Qr=new Co(t=>Jy(t),ev),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new av,this.targetCount=0,this.Ur=Fl.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,a)=>t(a)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),J.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.zn(t),J.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),J.waitFor(l).next(()=>a)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Rp(0),this.zr=!1,this.zr=!0,this.jr=new FM,this.referenceDelegate=e(this),this.Hr=new GM(this),this.indexManager=new NM,this.remoteDocumentCache=function(a){return new qM(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new RM(t),this.Yr=new jM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new BM(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const a=new $M(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return J.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class $M extends E4{constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.ti=new av,this.ni=null}static ri(e){return new ov(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),J.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,i=>{const a=ye.fromPath(i);return this.si(e,a).next(l=>{l||t.removeEntry(a,xe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return J.or([()=>J.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class qd{constructor(e,t){this.persistence=e,this.oi=new Co(i=>b4(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=PM(this,t)}static ri(e,t){return new qd(e,t)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return J.forEach(this.oi,(i,a)=>this.ar(e,i,a).next(l=>l?J.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(h=>{h||(i++,l.removeEntry(u,xe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),J.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hd(e.data.value)),t}ar(e,t,i){return J.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return J.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=a}static Yi(e,t){let i=$e(),a=$e();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new lv(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return jO()?8:w4(On())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,a,i).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new KM;return this._s(e,t,u).next(h=>{if(l.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>l.result)}us(e,t,i,a){return i.documentReadCount<this.es?(Tl()<=Be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):(Tl()<=Be.DEBUG&&he("QueryEngine","Query:",bl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(Tl()<=Be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(t))):J.resolve())}rs(e,t){if(AT(t))return J.resolve(null);let i=pr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=sy(t,null,"F"),i=pr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const u=$e(...l);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const m=this.cs(t,h);return this.ls(t,m,u,p.readTime)?this.rs(e,sy(t,null,"F")):this.hs(e,m,t,p)}))})))}ss(e,t,i,a){return AT(t)||a.isEqual(xe.min())?J.resolve(null):this.ns.getDocuments(e,i).next(l=>{const u=this.cs(t,l);return this.ls(t,u,i,a)?J.resolve(null):(Tl()<=Be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bl(t)),this.hs(e,u,t,_4(a,qc)).next(h=>h))})}cs(e,t){let i=new sn(DA(e));return t.forEach((a,l)=>{Op(e,l)&&(i=i.add(l))}),i}ls(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,i){return Tl()<=Be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",bl(t)),this.ns.getDocumentsMatchingQuery(e,t,_a.min(),i)}hs(e,t,i,a){return this.ns.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="LocalStore",WM=3e8;class YM{constructor(e,t,i,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new Kt(We),this.Is=new Co(l=>Jy(l),ev),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UM(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function XM(n,e,t,i){return new YM(n,e,t,i)}async function eC(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const u=[],h=[];let p=$e();for(const m of a){u.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}for(const m of l){h.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(i,p).next(m=>({Rs:m,removedBatchIds:u,addedBatchIds:h}))})})}function ZM(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,m,y){const v=m.batch,b=v.keys();let I=J.resolve();return b.forEach(x=>{I=I.next(()=>y.getEntry(p,x)).next(V=>{const M=m.docVersions.get(x);ct(M!==null),V.version.compareTo(M)<0&&(v.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),y.addEntry(V)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(p,v))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=$e();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function tC(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function JM(n,e){const t=Oe(n),i=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const h=[];e.targetChanges.forEach((y,v)=>{const b=a.get(v);if(!b)return;h.push(t.Hr.removeMatchingKeys(l,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(l,y.addedDocuments,v)));let I=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(An.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,i)),a=a.insert(v,I),function(V,M,H){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=WM?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(b,I,y)&&h.push(t.Hr.updateTargetData(l,I))});let p=hs(),m=$e();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))}),h.push(eP(l,u,e.documentUpdates).next(y=>{p=y.Vs,m=y.fs})),!i.isEqual(xe.min())){const y=t.Hr.getLastRemoteSnapshotVersion(l).next(v=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(y)}return J.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,m)).next(()=>p)}).then(l=>(t.Ts=a,l))}function eP(n,e,t){let i=$e(),a=$e();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let u=hs();return t.forEach((h,p)=>{const m=l.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):he(uv,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Vs:u,fs:a}})}function tP(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Yy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nP(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Hr.getTargetData(i,e).next(l=>l?(a=l,J.resolve(a)):t.Hr.allocateTargetId(i).next(u=>(a=new ia(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function cy(n,e,t){const i=Oe(n),a=i.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!eu(u))throw u;he(uv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(a.target)}function UT(n,e,t){const i=Oe(n);let a=xe.min(),l=$e();return i.persistence.runTransaction("Execute query","readwrite",u=>function(p,m,y){const v=Oe(p),b=v.Is.get(y);return b!==void 0?J.resolve(v.Ts.get(b)):v.Hr.getTargetData(m,y)}(i,u,pr(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,h.targetId).next(p=>{l=p})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,t?a:xe.min(),t?l:$e())).next(h=>(iP(i,B4(e),h),{documents:h,gs:l})))}function iP(n,e,t){let i=n.Es.get(e)||xe.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Es.set(e,i)}class jT{constructor(){this.activeTargetIds=Q4()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rP{constructor(){this.ho=new jT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new jT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="ConnectivityMonitor";class FT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(zT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(zT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed=null;function hy(){return ed===null?ed=function(){return 268435456+Math.round(2147483648*Math.random())}():ed++,"0x"+ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="RestConnection",aP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oP{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===Vd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}bo(e,t,i,a,l){const u=hy(),h=this.So(e,t.toUriEncodedString());he(yg,`Sending RPC '${e}' ${u}:`,h,i);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,a,l),this.vo(e,h,p,i).then(m=>(he(yg,`Received RPC '${e}' ${u}: `,m),m),m=>{throw Vl(yg,`RPC '${e}' ${u} failed with error: `,m,"url: ",h,"request:",i),m})}Co(e,t,i,a,l,u){return this.bo(e,t,i,a,l)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}So(e,t){const i=aP[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class uP extends oP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,a){const l=hy();return new Promise((u,h)=>{const p=new aA;p.setWithCredentials(!0),p.listenOnce(oA.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case cd.NO_ERROR:const y=p.getResponseJson();he(In,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case cd.TIMEOUT:he(In,`RPC '${e}' ${l} timed out`),h(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const v=p.getStatus();if(he(In,`RPC '${e}' ${l} failed with status:`,v,"response text:",p.getResponseText()),v>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const I=b==null?void 0:b.error;if(I&&I.status&&I.message){const x=function(M){const H=M.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(H)>=0?H:Z.UNKNOWN}(I.status);h(new fe(x,I.message))}else h(new fe(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{he(In,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(a);he(In,`RPC '${e}' ${l} sending request:`,a),p.send(t,"POST",m,i,15)})}Wo(e,t,i){const a=hy(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=cA(),h=uA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=l.join("");he(In,`Creating RPC '${e}' stream ${a}: ${y}`,p);const v=u.createWebChannel(y,p);let b=!1,I=!1;const x=new lP({Fo:M=>{I?he(In,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(b||(he(In,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),he(In,`RPC '${e}' stream ${a} sending:`,M),v.send(M))},Mo:()=>v.close()}),V=(M,H,Q)=>{M.listen(H,z=>{try{Q(z)}catch(te){setTimeout(()=>{throw te},0)}})};return V(v,Tc.EventType.OPEN,()=>{I||(he(In,`RPC '${e}' stream ${a} transport opened.`),x.Qo())}),V(v,Tc.EventType.CLOSE,()=>{I||(I=!0,he(In,`RPC '${e}' stream ${a} transport closed`),x.Ko())}),V(v,Tc.EventType.ERROR,M=>{I||(I=!0,Vl(In,`RPC '${e}' stream ${a} transport errored:`,M),x.Ko(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),V(v,Tc.EventType.MESSAGE,M=>{var H;if(!I){const Q=M.data[0];ct(!!Q);const z=Q,te=(z==null?void 0:z.error)||((H=z[0])===null||H===void 0?void 0:H.error);if(te){he(In,`RPC '${e}' stream ${a} received error:`,te);const le=te.status;let ne=function(T){const R=Ht[T];if(R!==void 0)return BA(R)}(le),P=te.message;ne===void 0&&(ne=Z.INTERNAL,P="Unknown error status: "+le+" with message "+te.message),I=!0,x.Ko(new fe(ne,P)),v.close()}else he(In,`RPC '${e}' stream ${a} received:`,Q),x.Uo(Q)}}),V(h,lA.STAT_EVENT,M=>{M.stat===Zg.PROXY?he(In,`RPC '${e}' stream ${a} detected buffering proxy`):M.stat===Zg.NOPROXY&&he(In,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(n){return new dM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-i);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="PersistentStream";class iC{constructor(e,t,i,a,l,u,h,p){this.Ti=e,this.n_=i,this.r_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new nC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(cs(t.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===t&&this.V_(i,a)},i=>{e(()=>{const a=new fe(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(BT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(BT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cP extends iC{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=_M(this.serializer,e),i=function(l){if(!("targetChange"in l))return xe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?mr(u.readTime):xe.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=uy(this.serializer),t.addTarget=function(l,u){let h;const p=u.target;if(h=iy(p)?{documents:vM(l,p)}:{query:EM(l,p).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=GA(l,u.resumeToken);const m=ay(l,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(xe.min())>0){h.readTime=Bd(l,u.snapshotVersion.toTimestamp());const m=ay(l,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=TM(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=uy(this.serializer),t.removeTarget=e,this.I_(t)}}class hP extends iC{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=yM(e.writeResults,e.commitTime),i=mr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=uy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>gM(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{}class dP extends fP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.bo(e,oy(t,i),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Z.UNKNOWN,l.toString())})}Co(e,t,i,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,oy(t,i),a,u,h,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(Z.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class pP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(cs(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class mP{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{i.enqueueAndForget(async()=>{Io(this)&&(he(go,"Restarting streams for network reachability change."),await async function(p){const m=Oe(p);m.W_.add(4),await ph(m),m.j_.set("Unknown"),m.W_.delete(4),await Vp(m)}(this))})}),this.j_=new pP(i,a)}}async function Vp(n){if(Io(n))for(const e of n.G_)await e(!0)}async function ph(n){for(const e of n.G_)await e(!1)}function rC(n,e){const t=Oe(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),dv(t)?fv(t):nu(t).c_()&&hv(t,e))}function cv(n,e){const t=Oe(n),i=nu(t);t.U_.delete(e),i.c_()&&sC(t,e),t.U_.size===0&&(i.c_()?i.P_():Io(t)&&t.j_.set("Unknown"))}function hv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nu(n).y_(e)}function sC(n,e){n.H_.Ne(e),nu(n).w_(e)}function fv(n){n.H_=new uM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),nu(n).start(),n.j_.B_()}function dv(n){return Io(n)&&!nu(n).u_()&&n.U_.size>0}function Io(n){return Oe(n).W_.size===0}function aC(n){n.H_=void 0}async function _P(n){n.j_.set("Online")}async function gP(n){n.U_.forEach((e,t)=>{hv(n,e)})}async function yP(n,e){aC(n),dv(n)?(n.j_.q_(e),fv(n)):n.j_.set("Unknown")}async function vP(n,e,t){if(n.j_.set("Online"),e instanceof HA&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const h of l.targetIds)a.U_.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.U_.delete(h),a.H_.removeTarget(h))}(n,e)}catch(i){he(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hd(n,i)}else if(e instanceof pd?n.H_.We(e):e instanceof qA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(xe.min()))try{const i=await tC(n.localStore);t.compareTo(i)>=0&&await function(l,u){const h=l.H_.ot(u);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.U_.get(m);y&&l.U_.set(m,y.withResumeToken(p.resumeToken,u))}}),h.targetMismatches.forEach((p,m)=>{const y=l.U_.get(p);if(!y)return;l.U_.set(p,y.withResumeToken(An.EMPTY_BYTE_STRING,y.snapshotVersion)),sC(l,p);const v=new ia(y.target,p,m,y.sequenceNumber);hv(l,v)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){he(go,"Failed to raise snapshot:",i),await Hd(n,i)}}async function Hd(n,e,t){if(!eu(e))throw e;n.W_.add(1),await ph(n),n.j_.set("Offline"),t||(t=()=>tC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(go,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Vp(n)})}function oC(n,e){return e().catch(t=>Hd(n,t,e))}async function Up(n){const e=Oe(n),t=Ea(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Yy;for(;EP(e);)try{const a=await tP(e.localStore,i);if(a===null){e.K_.length===0&&t.P_();break}i=a.batchId,wP(e,a)}catch(a){await Hd(e,a)}lC(e)&&uC(e)}function EP(n){return Io(n)&&n.K_.length<10}function wP(n,e){n.K_.push(e);const t=Ea(n);t.c_()&&t.b_&&t.S_(e.mutations)}function lC(n){return Io(n)&&!Ea(n).u_()&&n.K_.length>0}function uC(n){Ea(n).start()}async function TP(n){Ea(n).C_()}async function bP(n){const e=Ea(n);for(const t of n.K_)e.S_(t.mutations)}async function SP(n,e,t){const i=n.K_.shift(),a=iv.from(i,e,t);await oC(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Up(n)}async function AP(n,e){e&&Ea(n).b_&&await async function(i,a){if(function(u){return aM(u)&&u!==Z.ABORTED}(a.code)){const l=i.K_.shift();Ea(i).h_(),await oC(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Up(i)}}(n,e),lC(n)&&uC(n)}async function qT(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),he(go,"RemoteStore received new credentials");const i=Io(t);t.W_.add(3),await ph(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Vp(t)}async function CP(n,e){const t=Oe(n);e?(t.W_.delete(2),await Vp(t)):e||(t.W_.add(2),await ph(t),t.j_.set("Unknown"))}function nu(n){return n.J_||(n.J_=function(t,i,a){const l=Oe(t);return l.M_(),new cP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:_P.bind(null,n),No:gP.bind(null,n),Lo:yP.bind(null,n),p_:vP.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),dv(n)?fv(n):n.j_.set("Unknown")):(await n.J_.stop(),aC(n))})),n.J_}function Ea(n){return n.Y_||(n.Y_=function(t,i,a){const l=Oe(t);return l.M_(),new hP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:TP.bind(null,n),Lo:AP.bind(null,n),D_:bP.bind(null,n),v_:SP.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Up(n)):(await n.Y_.stop(),n.K_.length>0&&(he(go,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,h=new pv(e,t,u,a,l);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mv(n,e){if(cs("AsyncQueue",`${e}: ${n}`),eu(n))return new fe(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{static emptySet(e){return new Nl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=bc(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Nl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.Z_=new Kt(ye.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Bl{constructor(e,t,i,a,l,u,h,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Bl(e,t,Nl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class IP{constructor(){this.queries=GT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const a=Oe(t),l=a.queries;a.queries=GT(),l.forEach((u,h)=>{for(const p of h.ta)p.onError(i)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function GT(){return new Co(n=>xA(n),Dp)}async function _v(n,e){const t=Oe(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(i=2):(l=new RP,i=e.ra()?0:1);try{switch(i){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=mv(u,`Initialization of query '${bl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&yv(t)}async function gv(n,e){const t=Oe(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function NP(n,e){const t=Oe(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.ta)h.oa(a)&&(i=!0);u.ea=a}}i&&yv(t)}function xP(n,e,t){const i=Oe(n),a=i.queries.get(e);if(a)for(const l of a.ta)l.onError(t);i.queries.delete(e)}function yv(n){n.ia.forEach(e=>{e.next()})}var fy,$T;($T=fy||(fy={}))._a="default",$T.Cache="cache";class vv{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Bl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.key=e}}class hC{constructor(e){this.key=e}}class DP{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=$e(),this.mutatedKeys=$e(),this.ya=DA(e),this.wa=new Nl(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new HT,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const b=a.get(y),I=Op(this.query,v)?v:null,x=!!b&&this.mutatedKeys.has(b.key),V=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let M=!1;b&&I?b.data.isEqual(I.data)?x!==V&&(i.track({type:3,doc:I}),M=!0):this.va(b,I)||(i.track({type:2,doc:I}),M=!0,(p&&this.ya(I,p)>0||m&&this.ya(I,m)<0)&&(h=!0)):!b&&I?(i.track({type:0,doc:I}),M=!0):b&&!I&&(i.track({type:1,doc:b}),M=!0,(p||m)&&(h=!0)),M&&(I?(u=u.add(I),l=V?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{wa:u,Da:i,ls:h,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,v)=>function(I,x){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return V(I)-V(x)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(i),a=a!=null&&a;const h=t&&!a?this.Fa():[],p=this.pa.size===0&&this.current&&!a?1:0,m=p!==this.ga;return this.ga=p,u.length!==0||m?{snapshot:new Bl(this.query,e.wa,l,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new HT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=$e(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new hC(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new cC(i))}),t}Oa(e){this.fa=e.gs,this.pa=$e();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Bl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ev="SyncEngine";class OP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class kP{constructor(e){this.key=e,this.Ba=!1}}class MP{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Co(h=>xA(h),Dp),this.qa=new Map,this.Qa=new Set,this.$a=new Kt(ye.comparator),this.Ka=new Map,this.Ua=new av,this.Wa={},this.Ga=new Map,this.za=Fl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function PP(n,e,t=!0){const i=gC(n);let a;const l=i.ka.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await fC(i,e,t,!0),a}async function LP(n,e){const t=gC(n);await fC(t,e,!0,!1)}async function fC(n,e,t,i){const a=await nP(n.localStore,pr(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await VP(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&rC(n.remoteStore,a),h}async function VP(n,e,t,i,a){n.Ha=(v,b,I)=>async function(V,M,H,Q){let z=M.view.Sa(H);z.ls&&(z=await UT(V.localStore,M.query,!1).then(({documents:P})=>M.view.Sa(P,z)));const te=Q&&Q.targetChanges.get(M.targetId),le=Q&&Q.targetMismatches.get(M.targetId)!=null,ne=M.view.applyChanges(z,V.isPrimaryClient,te,le);return QT(V,M.targetId,ne.Ma),ne.snapshot}(n,v,b,I);const l=await UT(n.localStore,e,!0),u=new DP(e,l.gs),h=u.Sa(l.documents),p=dh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,p);QT(n,t,m.Ma);const y=new OP(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function UP(n,e,t){const i=Oe(n),a=i.ka.get(e),l=i.qa.get(a.targetId);if(l.length>1)return i.qa.set(a.targetId,l.filter(u=>!Dp(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await cy(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&cv(i.remoteStore,a.targetId),dy(i,a.targetId)}).catch(Jl)):(dy(i,a.targetId),await cy(i.localStore,a.targetId,!0))}async function jP(n,e){const t=Oe(n),i=t.ka.get(e),a=t.qa.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),cv(t.remoteStore,i.targetId))}async function zP(n,e,t){const i=KP(n);try{const a=await function(u,h){const p=Oe(u),m=$t.now(),y=h.reduce((I,x)=>I.add(x.key),$e());let v,b;return p.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=hs(),V=$e();return p.ds.getEntries(I,y).next(M=>{x=M,x.forEach((H,Q)=>{Q.isValidDocument()||(V=V.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(I,x)).next(M=>{v=M;const H=[];for(const Q of h){const z=tM(Q,v.get(Q.key).overlayedDocument);z!=null&&H.push(new Ro(Q.key,z,TA(z.value.mapValue),Hi.exists(!0)))}return p.mutationQueue.addMutationBatch(I,m,H,h)}).next(M=>{b=M;const H=M.applyToLocalDocumentSet(v,V);return p.documentOverlayCache.saveOverlays(I,M.batchId,H)})}).then(()=>({batchId:b.batchId,changes:kA(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,h,p){let m=u.Wa[u.currentUser.toKey()];m||(m=new Kt(We)),m=m.insert(h,p),u.Wa[u.currentUser.toKey()]=m}(i,a.batchId,t),await mh(i,a.changes),await Up(i.remoteStore)}catch(a){const l=mv(a,"Failed to persist write");t.reject(l)}}async function dC(n,e){const t=Oe(n);try{const i=await JM(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Ka.get(l);u&&(ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?ct(u.Ba):a.removedDocuments.size>0&&(ct(u.Ba),u.Ba=!1))}),await mh(t,i,e)}catch(i){await Jl(i)}}function KT(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ka.forEach((l,u)=>{const h=u.view.sa(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const p=Oe(u);p.onlineState=h;let m=!1;p.queries.forEach((y,v)=>{for(const b of v.ta)b.sa(h)&&(m=!0)}),m&&yv(p)}(i.eventManager,e),a.length&&i.La.p_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function FP(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Ka.get(e),l=a&&a.key;if(l){let u=new Kt(ye.comparator);u=u.insert(l,xn.newNoDocument(l,xe.min()));const h=$e().add(l),p=new Pp(xe.min(),new Map,new Kt(We),u,h);await dC(i,p),i.$a=i.$a.remove(l),i.Ka.delete(e),wv(i)}else await cy(i.localStore,e,!1).then(()=>dy(i,e,t)).catch(Jl)}async function BP(n,e){const t=Oe(n),i=e.batch.batchId;try{const a=await ZM(t.localStore,e);mC(t,i,null),pC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await mh(t,a)}catch(a){await Jl(a)}}async function qP(n,e,t){const i=Oe(n);try{const a=await function(u,h){const p=Oe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return p.mutationQueue.lookupMutationBatch(m,h).next(v=>(ct(v!==null),y=v.keys(),p.mutationQueue.removeMutationBatch(m,v))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>p.localDocuments.getDocuments(m,y))})}(i.localStore,e);mC(i,e,t),pC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await mh(i,a)}catch(a){await Jl(a)}}function pC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function mC(n,e,t){const i=Oe(n);let a=i.Wa[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Wa[i.currentUser.toKey()]=a}}function dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||_C(n,i)})}function _C(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(cv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),wv(n))}function QT(n,e,t){for(const i of t)i instanceof cC?(n.Ua.addReference(i.key,e),HP(n,i)):i instanceof hC?(he(Ev,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||_C(n,i.key)):Re()}function HP(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(he(Ev,"New document in limbo: "+t),n.Qa.add(i),wv(n))}function wv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ye(Tt.fromString(e)),i=n.za.next();n.Ka.set(i,new kP(t)),n.$a=n.$a.insert(t,i),rC(n.remoteStore,new ia(pr(xp(t.path)),i,"TargetPurposeLimboResolution",Rp.ae))}}async function mh(n,e,t){const i=Oe(n),a=[],l=[],u=[];i.ka.isEmpty()||(i.ka.forEach((h,p)=>{u.push(i.Ha(p,e,t).then(m=>{var y;if((m||t)&&i.isPrimaryClient){const v=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(m){a.push(m);const v=lv.Yi(p.targetId,m);l.push(v)}}))}),await Promise.all(u),i.La.p_(a),await async function(p,m){const y=Oe(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>J.forEach(m,b=>J.forEach(b.Hi,I=>y.persistence.referenceDelegate.addReference(v,b.targetId,I)).next(()=>J.forEach(b.Ji,I=>y.persistence.referenceDelegate.removeReference(v,b.targetId,I)))))}catch(v){if(!eu(v))throw v;he(uv,"Failed to update sequence numbers: "+v)}for(const v of m){const b=v.targetId;if(!v.fromCache){const I=y.Ts.get(b),x=I.snapshotVersion,V=I.withLastLimboFreeSnapshotVersion(x);y.Ts=y.Ts.insert(b,V)}}}(i.localStore,l))}async function GP(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){he(Ev,"User change. New user:",e.toKey());const i=await eC(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(h=>{h.forEach(p=>{p.reject(new fe(Z.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mh(t,i.Rs)}}function $P(n,e){const t=Oe(n),i=t.Ka.get(e);if(i&&i.Ba)return $e().add(i.key);{let a=$e();const l=t.qa.get(e);if(!l)return a;for(const u of l){const h=t.ka.get(u);a=a.unionWith(h.view.ba)}return a}}function gC(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$P.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FP.bind(null,e),e.La.p_=NP.bind(null,e.eventManager),e.La.Ja=xP.bind(null,e.eventManager),e}function KP(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qP.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lp(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return XM(this.persistence,new QM,e.initialUser,this.serializer)}Xa(e){return new JA(ov.ri,this.serializer)}Za(e){return new rP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class QP extends Gd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ct(this.persistence.referenceDelegate instanceof qd);const i=this.persistence.referenceDelegate.garbageCollector;return new kM(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new JA(i=>qd.ri(i,t),this.serializer)}}class py{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=GP.bind(null,this.syncEngine),await CP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IP}()}createDatastore(e){const t=Lp(e.databaseInfo.databaseId),i=function(l){return new uP(l)}(e.databaseInfo);return function(l,u,h,p){return new dP(l,u,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,u,h){return new mP(i,a,l,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>KT(this.syncEngine,t,0),function(){return FT.D()?new FT:new sP}())}createSyncEngine(e,t){return function(a,l,u,h,p,m,y){const v=new MP(a,l,u,h,p,m);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Oe(a);he(go,"RemoteStore shutting down."),l.W_.add(5),await ph(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}py.provider={build:()=>new py};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="FirestoreClient";class WP{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Nn.UNAUTHENTICATED,this.clientId=fA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async u=>{he(wa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(he(wa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=mv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Eg(n,e){n.asyncQueue.verifyOperationInProgress(),he(wa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await eC(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function WT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await YP(n);he(wa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>qT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>qT(e.remoteStore,a)),n._onlineComponents=e}async function YP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(wa,"Using user provided OfflineComponentProvider");try{await Eg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Vl("Error using user provided cache. Falling back to memory cache: "+t),await Eg(n,new Gd)}}else he(wa,"Using default OfflineComponentProvider"),await Eg(n,new QP(void 0));return n._offlineComponents}async function yC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(wa,"Using user provided OnlineComponentProvider"),await WT(n,n._uninitializedComponentsProvider._online)):(he(wa,"Using default OnlineComponentProvider"),await WT(n,new py))),n._onlineComponents}function XP(n){return yC(n).then(e=>e.syncEngine)}async function $d(n){const e=await yC(n),t=e.eventManager;return t.onListen=PP.bind(null,e.syncEngine),t.onUnlisten=UP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jP.bind(null,e.syncEngine),t}function ZP(n,e,t={}){const i=new rs;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,p,m){const y=new Tv({next:b=>{y.su(),u.enqueueAndForget(()=>gv(l,v));const I=b.docs.has(h);!I&&b.fromCache?m.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&p&&p.source==="server"?m.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new vv(xp(h.path),y,{includeMetadataChanges:!0,Ta:!0});return _v(l,v)}(await $d(n),n.asyncQueue,e,t,i)),i.promise}function JP(n,e,t={}){const i=new rs;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,p,m){const y=new Tv({next:b=>{y.su(),u.enqueueAndForget(()=>gv(l,v)),b.fromCache&&p.source==="server"?m.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new vv(h,y,{includeMetadataChanges:!0,Ta:!0});return _v(l,v)}(await $d(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(n,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function e5(n,e,t,i){if(e===!0&&i===!0)throw new fe(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XT(n){if(!ye.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZT(n){if(ye.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function Ni(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jp(n);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firestore.googleapis.com",JT=!0;class eb{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wC,this.ssl=JT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DM)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zp{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new l4;switch(i.type){case"firstParty":return new f4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=YT.get(t);i&&(he("ComponentProvider","Removing Datastore"),YT.delete(t),i.terminate())}(this),Promise.resolve()}}function t5(n,e,t,i={}){var a;const l=(n=Ni(n,zp))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;l.host!==wC&&l.host!==h&&Vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:h,ssl:!1,emulatorOptions:i});if(!pa(p,u)&&(n._setSettings(p),i.mockUserToken)){let m,y;if(typeof i.mockUserToken=="string")m=i.mockUserToken,y=Nn.MOCK_USER;else{m=Gy(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Nn(v)}n._authCredentials=new u4(new hA(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class Bn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class ua extends Ia{constructor(e,t,i){super(e,t,xp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new ye(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function _h(n,e,...t){if(n=xt(n),EC("collection","path",e),n instanceof zp){const i=Tt.fromString(e,...t);return ZT(i),new ua(n,null,i)}{if(!(n instanceof Bn||n instanceof ua))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Tt.fromString(e,...t));return ZT(i),new ua(n.firestore,null,i)}}function Gi(n,e,...t){if(n=xt(n),arguments.length===1&&(e=fA.newId()),EC("doc","path",e),n instanceof zp){const i=Tt.fromString(e,...t);return XT(i),new Bn(n,null,new ye(i))}{if(!(n instanceof Bn||n instanceof ua))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Tt.fromString(e,...t));return XT(i),new Bn(n.firestore,n instanceof ua?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="AsyncQueue";class nb{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new nC(this,"async_queue_retry"),this.bu=()=>{const i=vg();i&&he(tb,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=vg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=vg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new rs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!eu(e))throw e;he(tb,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const a=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw cs("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=pv.createAndSchedule(this,e,t,i,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function ib(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Ta extends zp{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new nb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nb(e),this._firestoreClient=void 0,await e}}}function n5(n,e){const t=typeof n=="object"?n:Cp(),i=typeof n=="string"?n:Vd,a=hh(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Hy("firestore");l&&t5(a,...l)}return a}function Fp(n){if(n._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||i5(n),n._firestoreClient}function i5(n){var e,t,i;const a=n._freezeSettings(),l=function(h,p,m,y){return new C4(h,p,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,vC(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new WP(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ql(An.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ql(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=/^__.*__$/;class s5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new fh(e,this.data,t,this.fieldTransforms)}}function bC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Cv{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.$u(e),a}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Kd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(bC(this.Lu)&&r5.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class a5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Lp(e)}ju(e,t,i,a=!1){return new Cv({Lu:e,methodName:t,zu:i,path:Sn.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rv(n){const e=n._freezeSettings(),t=Lp(n._databaseId);return new a5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SC(n,e,t,i,a,l={}){const u=n.ju(l.merge||l.mergeFields?2:0,e,t,a);RC("Data must be an object, but it was:",u,i);const h=AC(i,u);let p,m;if(l.merge)p=new zi(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=l5(e,v,t);if(!u.contains(b))throw new fe(Z.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);c5(y,b)||y.push(b)}p=new zi(y),m=u.fieldTransforms.filter(v=>p.covers(v.field))}else p=null,m=u.fieldTransforms;return new s5(new Ri(h),p,m)}function o5(n,e,t,i=!1){return Iv(t,n.ju(i?4:3,e))}function Iv(n,e){if(CC(n=xt(n)))return RC("Unsupported field value:",e,n),AC(n,e);if(n instanceof TC)return function(i,a){if(!bC(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,a){const l=[];let u=0;for(const h of i){let p=Iv(h,a.Uu(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return W4(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=$t.fromDate(i);return{timestampValue:Bd(a.serializer,l)}}if(i instanceof $t){const l=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bd(a.serializer,l)}}if(i instanceof Sv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ql)return{bytesValue:GA(a.serializer,i._byteString)};if(i instanceof Bn){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:sv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Av)return function(u,h){return{mapValue:{fields:{[EA]:{stringValue:wA},[Ud]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return tv(h.serializer,m)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${jp(i)}`)}(n,e)}function AC(n,e){const t={};return pA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(n,(i,a)=>{const l=Iv(a,e.qu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function CC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof Sv||n instanceof ql||n instanceof Bn||n instanceof TC||n instanceof Av)}function RC(n,e,t){if(!CC(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=jp(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function l5(n,e,t){if((e=xt(e))instanceof bv)return e._internalPath;if(typeof e=="string")return IC(n,e);throw Kd("Field path arguments must be of type string or ",n,!1,void 0,t)}const u5=new RegExp("[~\\*/\\[\\]]");function IC(n,e,t){if(e.search(u5)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bv(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kd(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new fe(Z.INVALID_ARGUMENT,h+n+p)}function c5(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class h5 extends NC{data(){return super.data()}}function Nv(n,e){return typeof e=="string"?IC(n,e):e instanceof bv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xv{}class DC extends xv{}function f5(n,e,...t){let i=[];e instanceof xv&&i.push(e),i=i.concat(t),function(l){const u=l.filter(p=>p instanceof Ov).length,h=l.filter(p=>p instanceof Dv).length;if(u>1||u>0&&h>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Dv extends DC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Dv(e,t,i)}_apply(e){const t=this._parse(e);return OC(e._query,t),new Ia(e.firestore,e.converter,ry(e._query,t))}_parse(e){const t=Rv(e.firestore);return function(l,u,h,p,m,y,v){let b;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){sb(v,y);const x=[];for(const V of v)x.push(rb(p,l,V));b={arrayValue:{values:x}}}else b=rb(p,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||sb(v,y),b=o5(h,u,v,y==="in"||y==="not-in");return Gt.create(m,y,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ov extends xv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ov(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)OC(u,p),u=ry(u,p)}(e._query,t),new Ia(e.firestore,e.converter,ry(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kv extends DC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kv(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kc(l,u)}(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new tu(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function d5(n,e="asc"){const t=e,i=Nv("orderBy",n);return kv._create(i,t)}function rb(n,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NA(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Tt.fromString(t));if(!ye.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vT(n,new ye(i))}if(t instanceof Bn)return vT(n,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(t)}.`)}function sb(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OC(n,e){const t=function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class p5{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ao(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[Ud].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>zt(u.doubleValue));return new Av(l)}convertGeoPoint(e){return new Sv(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Np(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const t=ga(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Tt.fromString(e);ct(XA(i));const a=new Gc(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return a.isEqual(t)||cs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class MC extends NC{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Nv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class md extends MC{data(e={}){return super.data(e)}}class PC{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ac(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new md(this._firestore,this._userDataWriter,i.key,i,new Ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const p=new md(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ac(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const p=new md(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ac(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:m5(h.type),doc:p,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function m5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){n=Ni(n,Bn);const e=Ni(n.firestore,Ta);return ZP(Fp(e),n._key).then(t=>jC(e,n,t))}class Mv extends p5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ql(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function LC(n){n=Ni(n,Ia);const e=Ni(n.firestore,Ta),t=Fp(e),i=new Mv(e);return xC(n._query),JP(t,n._query).then(a=>new PC(e,i,n,a))}function Pv(n,e,t){n=Ni(n,Bn);const i=Ni(n.firestore,Ta),a=kC(n.converter,e,t);return Lv(i,[SC(Rv(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Hi.none())])}function VC(n){return Lv(Ni(n.firestore,Ta),[new nv(n._key,Hi.none())])}function UC(n,e){const t=Ni(n.firestore,Ta),i=Gi(n),a=kC(n.converter,e);return Lv(t,[SC(Rv(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Hi.exists(!1))]).then(()=>i)}function _5(n,...e){var t,i,a;n=xt(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||ib(e[u])||(l=e[u],u++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(ib(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let p,m,y;if(n instanceof Bn)m=Ni(n.firestore,Ta),y=xp(n._key.path),p={next:v=>{e[u]&&e[u](jC(m,n,v))},error:e[u+1],complete:e[u+2]};else{const v=Ni(n,Ia);m=Ni(v.firestore,Ta),y=v._query;const b=new Mv(m);p={next:I=>{e[u]&&e[u](new PC(m,b,v,I))},error:e[u+1],complete:e[u+2]},xC(n._query)}return function(b,I,x,V){const M=new Tv(V),H=new vv(I,M,x);return b.asyncQueue.enqueueAndForget(async()=>_v(await $d(b),H)),()=>{M.su(),b.asyncQueue.enqueueAndForget(async()=>gv(await $d(b),H))}}(Fp(m),y,h,p)}function Lv(n,e){return function(i,a){const l=new rs;return i.asyncQueue.enqueueAndForget(async()=>zP(await XP(i),a,l)),l.promise}(Fp(n),e)}function jC(n,e,t){const i=t.docs.get(e._key),a=new Mv(n);return new MC(n,a,e._key,i,new Ac(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Zl=a})(Ra),ma(new ls("firestore",(i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),h=new Ta(new c4(i.getProvider("auth-internal")),new d4(u,i.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(m.options.projectId,y)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Ii(lT,uT,e),Ii(lT,uT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="firebasestorage.googleapis.com",g5="storageBucket",y5=2*60*1e3,v5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends br{constructor(e,t,i=0){super(wg(e),`Firebase Storage: ${t} (${wg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Er;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Er||(Er={}));function wg(n){return"storage/"+n}function E5(){const n="An unknown error occurred, please check the error payload for server response.";return new Sr(Er.UNKNOWN,n)}function w5(){return new Sr(Er.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function T5(){return new Sr(Er.CANCELED,"User canceled the upload/download.")}function b5(n){return new Sr(Er.INVALID_URL,"Invalid URL '"+n+"'.")}function S5(n){return new Sr(Er.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ab(n){return new Sr(Er.INVALID_ARGUMENT,n)}function FC(){return new Sr(Er.APP_DELETED,"The Firebase app was deleted.")}function A5(n){return new Sr(Er.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Fi.makeFromUrl(e,t)}catch{return new Fi(e,"")}if(i.path==="")return i;throw S5(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),p={bucket:1,path:3};function m(te){te.path_=decodeURIComponent(te.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${y}/b/${a}/o${b}`,"i"),x={bucket:1,path:3},V=t===zC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",H=new RegExp(`^https?://${V}/${a}/${M}`,"i"),z=[{regex:h,indices:p,postModify:l},{regex:I,indices:x,postModify:m},{regex:H,indices:{bucket:1,path:2},postModify:m}];for(let te=0;te<z.length;te++){const le=z[te],ne=le.regex.exec(e);if(ne){const P=ne[le.indices.bucket];let S=ne[le.indices.path];S||(S=""),i=new Fi(P,S),le.postModify(i);break}}if(i==null)throw b5(e);return i}}class C5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(n,e,t){let i=1,a=null,l=null,u=!1,h=0;function p(){return h===2}let m=!1;function y(...M){m||(m=!0,e.apply(null,M))}function v(M){a=setTimeout(()=>{a=null,n(I,p())},M)}function b(){l&&clearTimeout(l)}function I(M,...H){if(m){b();return}if(M){b(),y.call(null,M,...H);return}if(p()||u){b(),y.call(null,M,...H);return}i<64&&(i*=2);let z;h===1?(h=2,z=0):z=(i+Math.random())*1e3,v(z)}let x=!1;function V(M){x||(x=!0,b(),!m&&(a!==null?(M||(h=2),clearTimeout(a),v(0)):M||(h=1)))}return v(0),l=setTimeout(()=>{u=!0,V(!0)},t),V}function I5(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(n){return n!==void 0}function ob(n,e,t,i){if(i<e)throw ab(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ab(`Invalid value for '${n}'. Expected ${t} or less.`)}function x5(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Qd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qd||(Qd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,t,i,a,l,u,h,p,m,y,v,b=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=v,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,x)=>{this.resolve_=I,this.reject_=x,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new td(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const p=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===Qd.NO_ERROR,p=l.getStatus();if(!h||D5(p,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Qd.ABORT;i(!1,new td(!1,null,y));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new td(m,l))})},t=(i,a)=>{const l=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());N5(p)?l(p):l()}catch(p){u(p)}else if(h!==null){const p=E5();p.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,p)):u(p)}else if(a.canceled){const p=this.appDelete_?FC():T5();u(p)}else{const p=w5();u(p)}};this.canceled_?t(!1,new td(!1,null,!0)):this.backoffId_=R5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class td{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function k5(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function M5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P5(n,e){e&&(n["X-Firebase-GMPID"]=e)}function L5(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function V5(n,e,t,i,a,l,u=!0){const h=x5(n.urlParams),p=n.url+h,m=Object.assign({},n.headers);return P5(m,e),k5(m,t),M5(m,l),L5(m,i),new O5(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function j5(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this._service=e,t instanceof Fi?this._location=t:this._location=Fi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wd(e,t)}get root(){const e=new Fi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j5(this._location.path)}get storage(){return this._service}get parent(){const e=U5(this._location.path);if(e===null)return null;const t=new Fi(this._location.bucket,e);return new Wd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw A5(e)}}function lb(n,e){const t=e==null?void 0:e[g5];return t==null?null:Fi.makeFromBucketSpec(t,n)}function z5(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:Gy(a,n.app.options.projectId))}class F5{constructor(e,t,i,a,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._bucket=null,this._host=zC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y5,this._maxUploadRetryTime=v5,this._requests=new Set,a!=null?this._bucket=Fi.makeFromBucketSpec(a,this._host):this._bucket=lb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fi.makeFromBucketSpec(this._url,e):this._bucket=lb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ob("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ob("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wd(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new C5(FC());{const u=V5(e,this._appId,i,a,t,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const ub="@firebase/storage",cb="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="storage";function B5(n=Cp(),e){n=xt(n);const i=hh(n,BC).getImmediate({identifier:e}),a=Hy("storage");return a&&q5(i,...a),i}function q5(n,e,t,i={}){z5(n,e,t,i)}function H5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new F5(t,i,a,e,Ra)}function G5(){ma(new ls(BC,H5,"PUBLIC").setMultipleInstances(!0)),Ii(ub,cb,""),Ii(ub,cb,"esm2017")}G5();function Vv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function qC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $5=qC,HC=new ch("auth","Firebase",qC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Ap("@firebase/auth");function K5(n,...e){Yd.logLevel<=Be.WARN&&Yd.warn(`Auth (${Ra}): ${n}`,...e)}function _d(n,...e){Yd.logLevel<=Be.ERROR&&Yd.error(`Auth (${Ra}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,...e){throw Uv(n,...e)}function _r(n,...e){return Uv(n,...e)}function GC(n,e,t){const i=Object.assign(Object.assign({},$5()),{[e]:t});return new ch("auth","Firebase",i).create(e,{appName:n.name})}function ss(n){return GC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return HC.create(n,...e)}function Se(n,e,...t){if(!n)throw Uv(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _d(e),new Error(e)}function fs(n,e){n||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Q5(){return hb()==="http:"||hb()==="https:"}function hb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q5()||LO()||"connection"in navigator)?navigator.onLine:!0}function Y5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t){this.shortDelay=e,this.longDelay=t,fs(t>e,"Short delay should be less than long delay!"),this.isMobile=$y()||ZS()}get(){return W5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n,e){fs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new gh(3e4,6e4);function Na(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function xa(n,e,t,i,a={}){return KC(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const h=Xl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},l);return PO()||(m.referrerPolicy="no-referrer"),$C.fetch()(QC(n,n.config.apiHost,t,h),m)})}async function KC(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},X5),e);try{const a=new e3(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw nd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw nd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw nd(n,"user-disabled",u);const y=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw GC(n,y,m);Qi(n,y)}}catch(a){if(a instanceof br)throw a;Qi(n,"network-request-failed",{message:String(a)})}}async function yh(n,e,t,i,a={}){const l=await xa(n,e,t,i,a);return"mfaPendingCredential"in l&&Qi(n,"multi-factor-auth-required",{_serverResponse:l}),l}function QC(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?jv(n.config,a):`${n.config.apiScheme}://${a}`}function J5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class e3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_r(this.auth,"network-request-failed")),Z5.get())})}}function nd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=_r(n,e,i);return a.customData._tokenResponse=t,a}function fb(n){return n!==void 0&&n.enterprise!==void 0}class t3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return J5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function n3(n,e){return xa(n,"GET","/v2/recaptchaConfig",Na(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(n,e){return xa(n,"POST","/v1/accounts:delete",e)}async function WC(n,e){return xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r3(n,e=!1){const t=xt(n),i=await t.getIdToken(e),a=zv(i);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Dc(Tg(a.auth_time)),issuedAtTime:Dc(Tg(a.iat)),expirationTime:Dc(Tg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Tg(n){return Number(n)*1e3}function zv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const a=kd(t);return a?JSON.parse(a):(_d("Failed to decode base64 JWT payload"),null)}catch(a){return _d("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function db(n){const e=zv(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof br&&s3(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function s3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Xc(n,WC(t,{idToken:i}));Se(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?YC(l.providerUserInfo):[],h=l3(n.providerData,u),p=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),y=p?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new _y(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function o3(n){const e=xt(n);await Xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l3(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function YC(n){return n.map(e=>{var{providerId:t}=e,i=Vv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(n,e){const t=await KC(n,{},async()=>{const i=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=QC(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",$C.fetch()(u,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function c3(n,e){return xa(n,"POST","/v2/accounts:revokeToken",Na(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=db(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await u3(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new xl;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Se(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Jr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Vv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _y(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return r3(this,e)}reload(){return o3(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Xc(this,i3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,u,h,p,m,y;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(a=t.email)!==null&&a!==void 0?a:void 0,I=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,V=(h=t.tenantId)!==null&&h!==void 0?h:void 0,M=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:z,emailVerified:te,isAnonymous:le,providerData:ne,stsTokenManager:P}=t;Se(z&&P,e,"internal-error");const S=xl.fromJSON(this.name,P);Se(typeof z=="string",e,"internal-error"),Zs(v,e.name),Zs(b,e.name),Se(typeof te=="boolean",e,"internal-error"),Se(typeof le=="boolean",e,"internal-error"),Zs(I,e.name),Zs(x,e.name),Zs(V,e.name),Zs(M,e.name),Zs(H,e.name),Zs(Q,e.name);const T=new Jr({uid:z,auth:e,email:b,emailVerified:te,displayName:v,isAnonymous:le,photoURL:x,phoneNumber:I,tenantId:V,stsTokenManager:S,createdAt:H,lastLoginAt:Q});return ne&&Array.isArray(ne)&&(T.providerData=ne.map(R=>Object.assign({},R))),M&&(T._redirectEventId=M),T}static async _fromIdTokenResponse(e,t,i=!1){const a=new xl;a.updateFromServerResponse(t);const l=new Jr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Xd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?YC(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new xl;h.updateFromIdToken(i);const p=new Jr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;function es(n){fs(n instanceof Function,"Expected a class definition");let e=pb.get(n);return e?(fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}XC.type="NONE";const mb=XC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(n,e,t){return`firebase:${n}:${e}:${t}`}class Dl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=gd(this.userKey,a.apiKey,l),this.fullPersistenceKey=gd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Dl(es(mb),e,i);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||es(mb);const u=gd(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(u);if(y){const v=Jr._fromJSON(e,y);m!==l&&(h=v),l=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Dl(l,e,i):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new Dl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iR(e))return"Blackberry";if(rR(e))return"Webos";if(JC(e))return"Safari";if((e.includes("chrome/")||eR(e))&&!e.includes("edge/"))return"Chrome";if(nR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ZC(n=On()){return/firefox\//i.test(n)}function JC(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eR(n=On()){return/crios\//i.test(n)}function tR(n=On()){return/iemobile/i.test(n)}function nR(n=On()){return/android/i.test(n)}function iR(n=On()){return/blackberry/i.test(n)}function rR(n=On()){return/webos/i.test(n)}function Fv(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function h3(n=On()){var e;return Fv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function f3(){return VO()&&document.documentMode===10}function sR(n=On()){return Fv(n)||nR(n)||rR(n)||iR(n)||/windows phone/i.test(n)||tR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n,e=[]){let t;switch(n){case"Browser":t=_b(On());break;case"Worker":t=`${_b(On())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ra}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(n,e={}){return xa(n,"GET","/v2/passwordPolicy",Na(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=6;class _3{constructor(e){var t,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:m3,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,u,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gb(this),this.idTokenSubscription=new gb(this),this.beforeStateQueue=new d3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await WC(this,{idToken:e}),i=await Jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(ss(this));const t=e?xt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p3(this),t=new _3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ch("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await c3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&K5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function No(n){return xt(n)}class gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=QO(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y3(n){Bp=n}function oR(n){return Bp.loadJS(n)}function v3(){return Bp.recaptchaEnterpriseScript}function E3(){return Bp.gapiScript}function w3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class T3{constructor(){this.enterprise=new b3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class b3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const S3="recaptcha-enterprise",lR="NO_RECAPTCHA";class A3{constructor(e){this.type=S3,this.auth=No(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{n3(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new t3(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(p=>{h(p)})})}function a(l,u,h){const p=window.grecaptcha;fb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(lR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new T3().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(h=>{if(!t&&fb(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=v3();p.length!==0&&(p+=h),oR(p).then(()=>{a(h,l,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function yb(n,e,t,i=!1,a=!1){const l=new A3(n);let u;if(a)u=lR;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function gy(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await yb(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await yb(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(n,e){const t=hh(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(pa(l,e??{}))return a;Qi(a,"already-initialized")}return t.initialize({options:e})}function R3(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(es);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function I3(n,e,t){const i=No(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=uR(e),{host:u,port:h}=N3(e),p=h===null?"":`:${h}`,m={url:`${l}//${u}${p}/`},y=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(pa(m,i.config.emulator)&&pa(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,x3()}function uR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function N3(n){const e=uR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:vb(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:vb(u)}}}function vb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function x3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function D3(n,e){return xa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(n,e){return yh(n,"POST","/v1/accounts:signInWithPassword",Na(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(n,e){return yh(n,"POST","/v1/accounts:signInWithEmailLink",Na(n,e))}async function M3(n,e){return yh(n,"POST","/v1/accounts:signInWithEmailLink",Na(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Bv{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Zc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Zc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gy(e,t,"signInWithPassword",O3);case"emailLink":return k3(e,{email:this._email,oobCode:this._password});default:Qi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gy(e,i,"signUpPassword",D3);case"emailLink":return M3(e,{idToken:t,email:this._email,oobCode:this._password});default:Qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n,e){return yh(n,"POST","/v1/accounts:signInWithIdp",Na(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="http://localhost";class yo extends Bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Vv(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new yo(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ol(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ol(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ol(e,t)}buildRequest(){const e={requestUri:P3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V3(n){const e=Ec(wc(n)).link,t=e?Ec(wc(e)).deep_link_id:null,i=Ec(wc(n)).deep_link_id;return(i?Ec(wc(i)).link:null)||i||t||e||n}class qv{constructor(e){var t,i,a,l,u,h;const p=Ec(wc(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,y=(i=p.oobCode)!==null&&i!==void 0?i:null,v=L3((a=p.mode)!==null&&a!==void 0?a:null);Se(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=V3(e);try{return new qv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(){this.providerId=iu.PROVIDER_ID}static credential(e,t){return Zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=qv.parseLink(t);return Se(i,"argument-error"),Zc._fromEmailAndCode(e,i.code,i.tenantId)}}iu.PROVIDER_ID="password";iu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";iu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends cR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends vh{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ea.credential(t,i)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends vh{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends vh{constructor(){super("twitter.com")}static credential(e,t){return yo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return na.credential(t,i)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(n,e){return yh(n,"POST","/v1/accounts:signUp",Na(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Jr._fromIdTokenResponse(e,i,a),u=Eb(i);return new vo({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Eb(i);return new vo({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Eb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends br{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Zd(e,t,i,a)}}function hR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Zd._fromErrorAndOperation(n,l,e,i):l})}async function j3(n,e,t=!1){const i=await Xc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return vo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(n,e,t=!1){const{auth:i}=n;if(Yn(i.app))return Promise.reject(ss(i));const a="reauthenticate";try{const l=await Xc(n,hR(i,a,e,n),t);Se(l.idToken,i,"internal-error");const u=zv(l.idToken);Se(u,i,"internal-error");const{sub:h}=u;return Se(n.uid===h,i,"user-mismatch"),vo._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n,e,t=!1){if(Yn(n.app))return Promise.reject(ss(n));const i="signIn",a=await hR(n,i,e),l=await vo._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function F3(n,e){return fR(No(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n){const e=No(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B3(n,e,t){if(Yn(n.app))return Promise.reject(ss(n));const i=No(n),u=await gy(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",U3).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&dR(n),p}),h=await vo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function q3(n,e,t){return Yn(n.app)?Promise.reject(ss(n)):F3(xt(n),iu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dR(n),i})}function H3(n,e,t,i){return xt(n).onIdTokenChanged(e,t,i)}function G3(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function $3(n,e,t,i){return xt(n).onAuthStateChanged(e,t,i)}function K3(n){return xt(n).signOut()}const Jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=1e3,W3=10;class mR extends pR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);f3()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,W3):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Q3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mR.type="LOCAL";const Y3=mR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends pR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_R.type="SESSION";const gR=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new qp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async m=>m(t.origin,l)),p=await X3(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const m=Hv("",20);a.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(b.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function J3(n){gr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function e9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t9(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function n9(){return yR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firebaseLocalStorageDb",i9=1,ep="firebaseLocalStorage",ER="fbase_key";class Eh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hp(n,e){return n.transaction([ep],e?"readwrite":"readonly").objectStore(ep)}function r9(){const n=indexedDB.deleteDatabase(vR);return new Eh(n).toPromise()}function yy(){const n=indexedDB.open(vR,i9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ep,{keyPath:ER})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ep)?e(i):(i.close(),await r9(),e(await yy()))})})}async function wb(n,e,t){const i=Hp(n,!0).put({[ER]:e,value:t});return new Eh(i).toPromise()}async function s9(n,e){const t=Hp(n,!1).get(e),i=await new Eh(t).toPromise();return i===void 0?null:i.value}function Tb(n,e){const t=Hp(n,!0).delete(e);return new Eh(t).toPromise()}const a9=800,o9=3;class wR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>o9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qp._getInstance(n9()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await e9(),!this.activeServiceWorker)return;this.sender=new Z3(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yy();return await wb(e,Jd,"1"),await Tb(e,Jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>wb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>s9(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Hp(a,!1).getAll();return new Eh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wR.type="LOCAL";const l9=wR;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(n,e){return e?es(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends Bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ol(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function c9(n){return fR(n.auth,new Gv(n),n.bypassAuthState)}function h9(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),z3(t,new Gv(n),n.bypassAuthState)}async function f9(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),j3(t,new Gv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c9;case"linkViaPopup":case"linkViaRedirect":return f9;case"reauthViaPopup":case"reauthViaRedirect":return h9;default:Qi(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=new gh(2e3,1e4);class Cl extends TR{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Cl.currentPopupAction&&Cl.currentPopupAction.cancel(),Cl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=Hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d9.get())};e()}}Cl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="pendingRedirect",yd=new Map;class m9 extends TR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=yd.get(this.auth._key());if(!e){try{const i=await _9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}yd.set(this.auth._key(),e)}return this.bypassAuthState||yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _9(n,e){const t=v9(e),i=y9(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function g9(n,e){yd.set(n._key(),e)}function y9(n){return es(n._redirectPersistence)}function v9(n){return gd(p9,n.config.apiKey,n.name)}async function E9(n,e,t=!1){if(Yn(n.app))return Promise.reject(ss(n));const i=No(n),a=u9(i,e),u=await new m9(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=10*60*1e3;class T9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!bR(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w9&&this.cachedEventUids.clear(),this.cachedEventUids.has(bb(e))}saveEventToCache(e){this.cachedEventUids.add(bb(e)),this.lastProcessedEventTime=Date.now()}}function bb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(n,e={}){return xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C9=/^https?/;async function R9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await S9(n);for(const t of e)try{if(I9(t))return}catch{}Qi(n,"unauthorized-domain")}function I9(n){const e=my(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!C9.test(t))return!1;if(A9.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=new gh(3e4,6e4);function Sb(){const n=gr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function x9(n){return new Promise((e,t)=>{var i,a,l;function u(){Sb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sb(),t(_r(n,"network-request-failed"))},timeout:N9.get()})}if(!((a=(i=gr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=gr().gapi)===null||l===void 0)&&l.load)u();else{const h=w3("iframefcb");return gr()[h]=()=>{gapi.load?u():t(_r(n,"network-request-failed"))},oR(`${E3()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw vd=null,e})}let vd=null;function D9(n){return vd=vd||x9(n),vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=new gh(5e3,15e3),k9="__/auth/iframe",M9="emulator/auth/iframe",P9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V9(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?jv(e,M9):`https://${n.config.authDomain}/${k9}`,i={apiKey:e.apiKey,appName:n.name,v:Ra},a=L9.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Xl(i).slice(1)}`}async function U9(n){const e=await D9(n),t=gr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:V9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P9,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=_r(n,"network-request-failed"),h=gr().setTimeout(()=>{l(u)},O9.get());function p(){gr().clearTimeout(h),a(i)}i.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z9=500,F9=600,B9="_blank",q9="http://localhost";class Ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H9(n,e,t,i=z9,a=F9){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},j9),{width:i.toString(),height:a.toString(),top:l,left:u}),m=On().toLowerCase();t&&(h=eR(m)?B9:t),ZC(m)&&(e=e||q9,p.scrollbars="yes");const y=Object.entries(p).reduce((b,[I,x])=>`${b}${I}=${x},`,"");if(h3(m)&&h!=="_self")return G9(e||"",h),new Ab(null);const v=window.open(e||"",h,y);Se(v,n,"popup-blocked");try{v.focus()}catch{}return new Ab(v)}function G9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="__/auth/handler",K9="emulator/auth/handler",Q9=encodeURIComponent("fac");async function Cb(n,e,t,i,a,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ra,eventId:a};if(e instanceof cR){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",$g(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof vh){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const p=await n._getAppCheckToken(),m=p?`#${Q9}=${encodeURIComponent(p)}`:"";return`${W9(n)}?${Xl(h).slice(1)}${m}`}function W9({config:n}){return n.emulator?jv(n,K9):`https://${n.authDomain}/${$9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="webStorageSupport";class Y9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gR,this._completeRedirectFn=E9,this._overrideRedirectResult=g9}async _openPopup(e,t,i,a){var l;fs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Cb(e,t,i,my(),a);return H9(e,u,Hv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Cb(e,t,i,my(),a);return J3(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(fs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await U9(e),i=new T9(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bg,{type:bg},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[bg];u!==void 0&&t(!!u),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=R9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sR()||JC()||Fv()}}const X9=Y9;var Rb="@firebase/auth",Ib="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eL(n){ma(new ls("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aR(n)},m=new g3(i,a,l,p);return R3(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ma(new ls("auth-internal",e=>{const t=No(e.getProvider("auth").getImmediate());return(i=>new Z9(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(Rb,Ib,J9(n)),Ii(Rb,Ib,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=5*60,nL=XS("authIdTokenMaxAge")||tL;let Nb=null;const iL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>nL)return;const a=t==null?void 0:t.token;Nb!==a&&(Nb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function rL(n=Cp()){const e=hh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=C3(n,{popupRedirectResolver:X9,persistence:[l9,Y3,gR]}),i=XS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=iL(l.toString());G3(t,u,()=>u(t.currentUser)),H3(t,h=>u(h))}}const a=WS("auth");return a&&I3(t,`http://${a}`),t}function sL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}y3({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=_r("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",sL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eL("Browser");var xb={};const Db="@firebase/database",Ob="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SR="";function aL(n){SR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Fc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ps(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new oL(e)}}catch{}return new lL},ho=AR("localStorage"),uL=AR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Ap("@firebase/database"),cL=function(){let n=1;return function(){return n++}}(),CR=function(n){const e=XO(n),t=new KO;t.update(e);const i=t.digest();return qy.encodeByteArray(i)},wh=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=wh.apply(null,i):typeof i=="object"?e+=nn(i):e+=i,e+=" "}return e};let Oc=null,kb=!0;const hL=function(n,e){re(!0,"Can't turn on custom loggers persistently."),kl.logLevel=Be.VERBOSE,Oc=kl.log.bind(kl)},Dn=function(...n){if(kb===!0&&(kb=!1,Oc===null&&uL.get("logging_enabled")===!0&&hL()),Oc){const e=wh.apply(null,n);Oc(e)}},Th=function(n){return function(...e){Dn(n,...e)}},vy=function(...n){const e="FIREBASE INTERNAL ERROR: "+wh(...n);kl.error(e)},ds=function(...n){const e=`FIREBASE FATAL ERROR: ${wh(...n)}`;throw kl.error(e),new Error(e)},Zn=function(...n){const e="FIREBASE WARNING: "+wh(...n);kl.warn(e)},fL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},RR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},dL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Hl="[MIN_NAME]",Eo="[MAX_NAME]",ru=function(n,e){if(n===e)return 0;if(n===Hl||e===Eo)return-1;if(e===Hl||n===Eo)return 1;{const t=Mb(n),i=Mb(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},pL=function(n,e){return n===e?0:n<e?-1:1},dc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+nn(e))},$v=function(n){if(typeof n!="object"||n===null)return nn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=nn(e[i]),t+=":",t+=$v(n[e[i]]);return t+="}",t},IR=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const NR=function(n){re(!RR(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,l,u,h,p;n===0?(l=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=h+i,u=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(l=0,u=Math.round(n/Math.pow(2,1-i-t))));const m=[];for(p=t;p;p-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(p=e;p;p-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(a?1:0),m.reverse();const y=m.join("");let v="";for(p=0;p<64;p+=8){let b=parseInt(y.substr(p,8),2).toString(16);b.length===1&&(b="0"+b),v=v+b}return v.toLowerCase()},mL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_L=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function gL(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const yL=new RegExp("^-?(0*)\\d{1,10}$"),vL=-2147483648,EL=2147483647,Mb=function(n){if(yL.test(n)){const e=Number(n);if(e>=vL&&e<=EL)return e}return null},su=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Zn("Exception was thrown by user callback.",t),e},Math.floor(0))}},wL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Zn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zn(e)}}class Ed{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ed.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="5",xR="v",DR="s",OR="r",kR="f",MR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PR="ls",LR="p",Ey="ac",VR="websocket",UR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t,i,a,l=!1,u="",h=!1,p=!1,m=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ho.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ho.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function SL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function zR(n,e,t){re(typeof e=="string","typeof type must == string"),re(typeof t=="object","typeof params must == object");let i;if(e===VR)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===UR)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SL(n)&&(t.ns=n.namespace);const a=[];return ei(t,(l,u)=>{a.push(l+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.counters_={}}incrementCounter(e,t=1){ps(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return IO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg={},Ag={};function Qv(n){const e=n.toString();return Sg[e]||(Sg[e]=new AL),Sg[e]}function CL(n,e){const t=n.toString();return Ag[t]||(Ag[t]=e()),Ag[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&su(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="start",IL="close",NL="pLPCommand",xL="pRTLPCB",FR="id",BR="pw",qR="ser",DL="cb",OL="seg",kL="ts",ML="d",PL="dframe",HR=1870,GR=30,LL=HR-GR,VL=25e3,UL=3e4;class Rl{constructor(e,t,i,a,l,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Th(e),this.stats_=Qv(t),this.urlFn=p=>(this.appCheckToken&&(p[Ey]=this.appCheckToken),zR(t,UR,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new RL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(UL)),dL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wv((...l)=>{const[u,h,p,m,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Pb)this.id=h,this.password=p;else if(u===IL)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[Pb]="t",i[qR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[DL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[xR]=Kv,this.transportSessionId&&(i[DR]=this.transportSessionId),this.lastSessionId&&(i[PR]=this.lastSessionId),this.applicationId&&(i[LR]=this.applicationId),this.appCheckToken&&(i[Ey]=this.appCheckToken),typeof location<"u"&&location.hostname&&MR.test(location.hostname)&&(i[OR]=kR);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rl.forceAllow_=!0}static forceDisallow(){Rl.forceDisallow_=!0}static isAvailable(){return Rl.forceAllow_?!0:!Rl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!mL()&&!_L()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=KS(t),a=IR(i,LL);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[PL]="t",i[FR]=e,i[BR]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=nn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Wv{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=cL(),window[NL+this.uniqueCallbackIdentifier]=e,window[xL+this.uniqueCallbackIdentifier]=t,this.myIFrame=Wv.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Dn("frame writing exception"),h.stack&&Dn(h.stack),Dn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Dn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[FR]=this.myID,e[BR]=this.myPW,e[qR]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+GR+i.length<=HR;){const u=this.pendingSegs.shift();i=i+"&"+OL+a+"="+u.seg+"&"+kL+a+"="+u.ts+"&"+ML+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(VL)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=16384,zL=45e3;let tp=null;typeof MozWebSocket<"u"?tp=MozWebSocket:typeof WebSocket<"u"&&(tp=WebSocket);class ji{constructor(e,t,i,a,l,u,h){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Th(this.connId),this.stats_=Qv(t),this.connURL=ji.connectionURL_(t,u,h,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,l){const u={};return u[xR]=Kv,typeof location<"u"&&location.hostname&&MR.test(location.hostname)&&(u[OR]=kR),t&&(u[DR]=t),i&&(u[PR]=i),a&&(u[Ey]=a),l&&(u[LR]=l),zR(e,VR,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ho.set("previous_websocket_failure",!0);try{let i;UO(),this.mySock=new tp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){ji.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&tp!==null&&!ji.forceDisallow_}static previouslyFailed(){return ho.isInMemoryStorage||ho.get("previous_websocket_failure")===!0}markConnectionHealthy(){ho.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Fc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(re(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=IR(t,jL);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(zL))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ji.responsesRequiredToBeHealthy=2;ji.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{static get ALL_TRANSPORTS(){return[Rl,ji]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ji&&ji.isAvailable();let i=t&&!ji.previouslyFailed();if(e.webSocketOnly&&(t||Zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ji];else{const a=this.transports_=[];for(const l of Jc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Jc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Jc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=6e4,BL=5e3,qL=10*1024,HL=100*1024,Cg="t",Lb="d",GL="s",Vb="r",$L="e",Ub="o",jb="a",zb="n",Fb="p",KL="h";class QL{constructor(e,t,i,a,l,u,h,p,m,y){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Th("c:"+this.id+":"),this.transportManager_=new Jc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=kc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>HL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cg in e){const t=e[Cg];t===jb?this.upgradeIfSecondaryHealthy_():t===Vb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Ub&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=dc("t",e),i=dc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Fb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=dc("t",e),i=dc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=dc(Cg,e);if(Lb in e){const i=e[Lb];if(t===KL){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===zb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===GL?this.onConnectionShutdown_(i):t===Vb?this.onReset_(i):t===$L?vy("Server Error: "+i):t===Ub?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Kv!==i&&Zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),kc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(BL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Fb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ho.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.allowedEvents_=e,this.listeners_={},re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){re(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends KR{static getInstance(){return new np}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$y()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return re(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=32,qb=768;class _t{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function at(){return new _t("")}function Ge(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ba(n){return n.pieces_.length-n.pieceNum_}function Et(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _t(n.pieces_,e)}function QR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function WL(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function WR(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function YR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _t(e,0)}function rn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof _t)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new _t(t,0)}function qe(n){return n.pieceNum_>=n.pieces_.length}function zn(n,e){const t=Ge(n),i=Ge(e);if(t===null)return e;if(t===i)return zn(Et(n),Et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XR(n,e){if(ba(n)!==ba(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Bi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ba(n)>ba(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class YL{constructor(e,t){this.errorPrefix_=t,this.parts_=WR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Sp(this.parts_[i]);ZR(this)}}function XL(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Sp(e),ZR(n)}function ZL(n){const e=n.parts_.pop();n.byteLength_-=Sp(e),n.parts_.length>0&&(n.byteLength_-=1)}function ZR(n){if(n.byteLength_>qb)throw new Error(n.errorPrefix_+"has a key path longer than "+qb+" bytes ("+n.byteLength_+").");if(n.parts_.length>Bb)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bb+") or object contains a cycle "+uo(n))}function uo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends KR{static getInstance(){return new Yv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return re(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=1e3,JL=60*5*1e3,Hb=30*1e3,e6=1.3,t6=3e4,n6="server_kill",Gb=3;class as extends $R{constructor(e,t,i,a,l,u,h,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=as.nextPersistentConnectionId_++,this.log_=Th("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pc,this.maxReconnectDelay_=JL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&np.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(nn(l)),re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new bp,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,a){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),re(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(l,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,h=>{const p=h.d,m=h.s;as.warnOnListenWarnings_(p,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(m,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ps(e,"w")){const i=Ll(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();Zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||$O(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=GO(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const l=a.s,u=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";a&&(l.q=i,l.t=a),this.sendRequest(u,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,l){this.initConnection_();const u={p:t,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+nn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):vy("Unrecognized action received from server: "+nn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>t6&&(this.reconnectDelay_=pc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*e6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+as.nextConnectionId_++,l=this.lastSessionId;let u=!1,h=null;const p=function(){h?h.close():(u=!0,i())},m=function(v){re(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:p,sendRequest:m};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,b]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?Dn("getToken() completed but was canceled"):(Dn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=b&&b.token,h=new QL(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,I=>{Zn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(n6)},l))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&Zn(v),p())}}}interrupt(e){Dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$g(this.interruptReasons_)&&(this.reconnectDelay_=pc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>$v(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new _t(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){Dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Gb&&(this.reconnectDelay_=Hb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Gb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+SR.replace(/\./g,"-")]=1,$y()?e["framework.cordova"]=1:ZS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=np.getInstance().currentlyOnline();return $g(this.interruptReasons_)&&e}}as.nextPersistentConnectionId_=0;as.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new je(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new je(Hl,e),a=new je(Hl,t);return this.compare(i,a)!==0}minPost(){return je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id;class JR extends Gp{static get __EMPTY_NODE(){return id}static set __EMPTY_NODE(e){id=e}compare(e,t){return ru(e.name,t.name)}isDefinedOn(e){throw Yl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return je.MIN}maxPost(){return new je(Eo,id)}makePost(e,t){return re(typeof e=="string","KeyIndex indexValue must always be a string."),new je(e,id)}toString(){return".key"}}const Ml=new JR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _n{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??_n.RED,this.left=a??Xn.EMPTY_NODE,this.right=l??Xn.EMPTY_NODE}copy(e,t,i,a,l){return new _n(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_n.RED=!0;_n.BLACK=!1;class i6{copy(e,t,i,a,l){return this}insert(e,t,i){return new _n(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xn{constructor(e,t=Xn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_n.BLACK,null,null))}remove(e){return new Xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_n.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rd(this.root_,null,this.comparator_,!0,e)}}Xn.EMPTY_NODE=new i6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(n,e){return ru(n.name,e.name)}function Xv(n,e){return ru(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wy;function s6(n){wy=n}const eI=function(n){return typeof n=="number"?"number:"+NR(n):"string:"+n},tI=function(n){if(n.isLeafNode()){const e=n.val();re(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ps(e,".sv"),"Priority must be a string or number.")}else re(n===wy||n.isEmpty(),"priority of unexpected type.");re(n===wy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $b;class pn{static set __childrenNodeConstructor(e){$b=e}static get __childrenNodeConstructor(){return $b}constructor(e,t=pn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,re(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qe(e)?this:Ge(e)===".priority"?this.priorityNode_:pn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:pn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ge(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(re(i!==".priority"||ba(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,pn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Et(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+eI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=NR(this.value_):e+=this.value_,this.lazyHash_=CR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pn.__childrenNodeConstructor?-1:(re(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=pn.VALUE_TYPE_ORDER.indexOf(t),l=pn.VALUE_TYPE_ORDER.indexOf(i);return re(a>=0,"Unknown leaf type: "+t),re(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}pn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nI,iI;function a6(n){nI=n}function o6(n){iI=n}class l6 extends Gp{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),l=i.compareTo(a);return l===0?ru(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return je.MIN}maxPost(){return new je(Eo,new pn("[PRIORITY-POST]",iI))}makePost(e,t){const i=nI(e);return new je(t,new pn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Pt=new l6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=Math.log(2);class c6{constructor(e){const t=l=>parseInt(Math.log(l)/u6,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ip=function(n,e,t,i){n.sort(e);const a=function(p,m){const y=m-p;let v,b;if(y===0)return null;if(y===1)return v=n[p],b=t?t(v):v,new _n(b,v.node,_n.BLACK,null,null);{const I=parseInt(y/2,10)+p,x=a(p,I),V=a(I+1,m);return v=n[I],b=t?t(v):v,new _n(b,v.node,_n.BLACK,x,V)}},l=function(p){let m=null,y=null,v=n.length;const b=function(x,V){const M=v-x,H=v;v-=x;const Q=a(M+1,H),z=n[M],te=t?t(z):z;I(new _n(te,z.node,V,null,Q))},I=function(x){m?(m.left=x,m=x):(y=x,m=x)};for(let x=0;x<p.count;++x){const V=p.nextBitIsOne(),M=Math.pow(2,p.count-(x+1));V?b(M,_n.BLACK):(b(M,_n.BLACK),b(M,_n.RED))}return y},u=new c6(n.length),h=l(u);return new Xn(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg;const yl={};class ts{static get Default(){return re(yl&&Pt,"ChildrenNode.ts has not been loaded"),Rg=Rg||new ts({".priority":yl},{".priority":Pt}),Rg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ll(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xn?t:null}hasIndex(e){return ps(this.indexSet_,e.toString())}addIndex(e,t){re(e!==Ml,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=t.getIterator(je.Wrap);let u=l.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let h;a?h=ip(i,e.getCompare()):h=yl;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const y=Object.assign({},this.indexes_);return y[p]=h,new ts(y,m)}addToIndexes(e,t){const i=Md(this.indexes_,(a,l)=>{const u=Ll(this.indexSet_,l);if(re(u,"Missing index implementation for "+l),a===yl)if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(je.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&h.push(m),m=p.getNext();return h.push(e),ip(h,u.getCompare())}else return yl;else{const h=t.get(e.name);let p=a;return h&&(p=p.remove(new je(e.name,h))),p.insert(e,e.node)}});return new ts(i,this.indexSet_)}removeFromIndexes(e,t){const i=Md(this.indexes_,a=>{if(a===yl)return a;{const l=t.get(e.name);return l?a.remove(new je(e.name,l)):a}});return new ts(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc;class Ae{static get EMPTY_NODE(){return mc||(mc=new Ae(new Xn(Xv),null,ts.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&tI(this.priorityNode_),this.children_.isEmpty()&&re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mc}updatePriority(e){return this.children_.isEmpty()?this:new Ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?mc:t}}getChild(e){const t=Ge(e);return t===null?this:this.getImmediateChild(t).getChild(Et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(re(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new je(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?mc:this.priorityNode_;return new Ae(a,u,l)}}updateChild(e,t){const i=Ge(e);if(i===null)return t;{re(Ge(e)!==".priority"||ba(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Et(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,l=!0;if(this.forEachChild(Pt,(u,h)=>{t[u]=h.val(e),i++,l&&Ae.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!e&&l&&a<2*i){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+eI(this.getPriority().val())+":"),this.forEachChild(Pt,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":CR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new je(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new je(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new je(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,je.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,je.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===bh?-1:0}withIndex(e){if(e===Ml||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ae(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ml||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Pt),a=t.getIterator(Pt);let l=i.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Ml?null:this.indexMap_.get(e.toString())}}Ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class h6 extends Ae{constructor(){super(new Xn(Xv),Ae.EMPTY_NODE,ts.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ae.EMPTY_NODE}isEmpty(){return!1}}const bh=new h6;Object.defineProperties(je,{MIN:{value:new je(Hl,Ae.EMPTY_NODE)},MAX:{value:new je(Eo,bh)}});JR.__EMPTY_NODE=Ae.EMPTY_NODE;pn.__childrenNodeConstructor=Ae;s6(bh);o6(bh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=!0;function gn(n,e=null){if(n===null)return Ae.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),re(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new pn(t,gn(e))}if(!(n instanceof Array)&&f6){const t=[];let i=!1;if(ei(n,(u,h)=>{if(u.substring(0,1)!=="."){const p=gn(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new je(u,p)))}}),t.length===0)return Ae.EMPTY_NODE;const l=ip(t,r6,u=>u.name,Xv);if(i){const u=ip(t,Pt.getCompare());return new Ae(l,gn(e),new ts({".priority":u},{".priority":Pt}))}else return new Ae(l,gn(e),ts.Default)}else{let t=Ae.EMPTY_NODE;return ei(n,(i,a)=>{if(ps(n,i)&&i.substring(0,1)!=="."){const l=gn(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(gn(e))}}a6(gn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6 extends Gp{constructor(e){super(),this.indexPath_=e,re(!qe(e)&&Ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),l=i.compareTo(a);return l===0?ru(e.name,t.name):l}makePost(e,t){const i=gn(e),a=Ae.EMPTY_NODE.updateChild(this.indexPath_,i);return new je(t,a)}maxPost(){const e=Ae.EMPTY_NODE.updateChild(this.indexPath_,bh);return new je(Eo,e)}toString(){return WR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6 extends Gp{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ru(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,t){const i=gn(e);return new je(t,i)}toString(){return".value"}}const m6=new p6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){return{type:"value",snapshotNode:n}}function Gl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function eh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function th(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function _6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.index_=e}updateChild(e,t,i,a,l,u){re(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(eh(t,h)):re(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Gl(t,i)):u.trackChildChange(th(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Pt,(a,l)=>{t.hasChild(a)||i.trackChildChange(eh(a,l))}),t.isLeafNode()||t.forEachChild(Pt,(a,l)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(l)||i.trackChildChange(th(a,l,u))}else i.trackChildChange(Gl(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ae.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.indexedFilter_=new Zv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nh.getStartPost_(e),this.endPost_=nh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,l,u){return this.matches(new je(t,i))||(i=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,l,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ae.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Ae.EMPTY_NODE);const l=this;return t.forEachChild(Pt,(u,h)=>{l.matches(new je(u,h))||(a=a.updateImmediateChild(u,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new nh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,l,u){return this.rangedFilter_.matches(new je(t,i))||(i=Ae.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,l,u):this.fullLimitUpdateChild_(e,t,i,l,u)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=Ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=Ae.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(Ae.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let u=0;for(;l.hasNext();){const h=l.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:a=a.updateImmediateChild(h.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,l){let u;if(this.reverse_){const v=this.index_.getCompare();u=(b,I)=>v(I,b)}else u=this.index_.getCompare();const h=e;re(h.numChildren()===this.limit_,"");const p=new je(t,i),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),y=this.rangedFilter_.matches(p);if(h.hasChild(t)){const v=h.getImmediateChild(t);let b=a.getChildAfterChild(this.index_,m,this.reverse_);for(;b!=null&&(b.name===t||h.hasChild(b.name));)b=a.getChildAfterChild(this.index_,b,this.reverse_);const I=b==null?1:u(b,p);if(y&&!i.isEmpty()&&I>=0)return l!=null&&l.trackChildChange(th(t,i,v)),h.updateImmediateChild(t,i);{l!=null&&l.trackChildChange(eh(t,v));const V=h.updateImmediateChild(t,Ae.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(l!=null&&l.trackChildChange(Gl(b.name,b.node)),V.updateImmediateChild(b.name,b.node)):V}}else return i.isEmpty()?e:y&&u(m,p)>=0?(l!=null&&(l.trackChildChange(eh(m.name,m.node)),l.trackChildChange(Gl(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(m.name,Ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hl}hasEnd(){return this.endSet_}getIndexEndValue(){return re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pt}copy(){const e=new Jv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function y6(n){return n.loadsAllData()?new Zv(n.getIndex()):n.hasLimit()?new g6(n):new nh(n)}function Kb(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Pt?t="$priority":n.index_===m6?t="$value":n.index_===Ml?t="$key":(re(n.index_ instanceof d6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=nn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=nn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+nn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=nn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+nn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Qb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Pt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends $R{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=Th("p:rest:"),this.listens_={}}listen(e,t,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=rp.getListenId_(e,i),h={};this.listens_[u]=h;const p=Kb(e._queryParams);this.restRequest_(l+".json",p,(m,y)=>{let v=y;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(l,v,!1,i),Ll(this.listens_,u)===h){let b;m?m===401?b="permission_denied":b="rest_error:"+m:b="ok",a(b,null)}})}unlisten(e,t){const i=rp.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Kb(e._queryParams),i=e._path.toString(),a=new bp;return this.restRequest_(i+".json",t,(l,u)=>{let h=u;l===404&&(h=null,l=null),l===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xl(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=Fc(h.responseText)}catch{Zn("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,p)}else h.status!==401&&h.status!==404&&Zn("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(){return{value:null,children:new Map}}function sI(n,e,t){if(qe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ge(e);n.children.has(i)||n.children.set(i,sp());const a=n.children.get(i);e=Et(e),sI(a,e,t)}}function Ty(n,e,t){n.value!==null?t(e,n.value):E6(n,(i,a)=>{const l=new _t(e.toString()+"/"+i);Ty(a,l,t)})}function E6(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ei(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=10*1e3,T6=30*1e3,b6=5*60*1e3;class S6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new w6(e);const i=Wb+(T6-Wb)*Math.random();kc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ei(e,(a,l)=>{l>0&&ps(this.statsToReport_,a)&&(t[a]=l,i=!0)}),i&&this.server_.reportStats(t),kc(this.reportStats_.bind(this),Math.floor(Math.random()*2*b6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(qi||(qi={}));function aI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function e0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function t0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=qi.ACK_USER_WRITE,this.source=aI()}operationForChild(e){if(qe(this.path)){if(this.affectedTree.value!=null)return re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _t(e));return new ap(at(),t,this.revert)}}else return re(Ge(this.path)===e,"operationForChild called for unrelated child."),new ap(Et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t){this.source=e,this.path=t,this.type=qi.LISTEN_COMPLETE}operationForChild(e){return qe(this.path)?new ih(this.source,at()):new ih(this.source,Et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=qi.OVERWRITE}operationForChild(e){return qe(this.path)?new wo(this.source,at(),this.snap.getImmediateChild(e)):new wo(this.source,Et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=qi.MERGE}operationForChild(e){if(qe(this.path)){const t=this.children.subtree(new _t(e));return t.isEmpty()?null:t.value?new wo(this.source,at(),t.value):new rh(this.source,at(),t)}else return re(Ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rh(this.source,Et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qe(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function C6(n,e,t,i){const a=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(_6(u.childName,u.snapshotNode))}),_c(n,a,"child_removed",e,i,t),_c(n,a,"child_added",e,i,t),_c(n,a,"child_moved",l,i,t),_c(n,a,"child_changed",e,i,t),_c(n,a,"value",e,i,t),a}function _c(n,e,t,i,a,l){const u=i.filter(h=>h.type===t);u.sort((h,p)=>I6(n,h,p)),u.forEach(h=>{const p=R6(n,h,l);a.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(p,n.query_))})})}function R6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function I6(n,e,t){if(e.childName==null||t.childName==null)throw Yl("Should only compare child_ events.");const i=new je(e.childName,e.snapshotNode),a=new je(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(n,e){return{eventCache:n,serverCache:e}}function Mc(n,e,t,i){return $p(new Sa(e,t,i),n.serverCache)}function oI(n,e,t,i){return $p(n.eventCache,new Sa(e,t,i))}function op(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function To(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig;const N6=()=>(Ig||(Ig=new Xn(pL)),Ig);class wt{static fromObject(e){let t=new wt(null);return ei(e,(i,a)=>{t=t.set(new _t(i),a)}),t}constructor(e,t=N6()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:at(),value:this.value};if(qe(e))return null;{const i=Ge(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(Et(e),t);return l!=null?{path:rn(new _t(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qe(e))return this;{const t=Ge(e),i=this.children.get(t);return i!==null?i.subtree(Et(e)):new wt(null)}}set(e,t){if(qe(e))return new wt(t,this.children);{const i=Ge(e),l=(this.children.get(i)||new wt(null)).set(Et(e),t),u=this.children.insert(i,l);return new wt(this.value,u)}}remove(e){if(qe(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const t=Ge(e),i=this.children.get(t);if(i){const a=i.remove(Et(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new wt(null):new wt(this.value,l)}else return this}}get(e){if(qe(e))return this.value;{const t=Ge(e),i=this.children.get(t);return i?i.get(Et(e)):null}}setTree(e,t){if(qe(e))return t;{const i=Ge(e),l=(this.children.get(i)||new wt(null)).setTree(Et(e),t);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new wt(this.value,u)}}fold(e){return this.fold_(at(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(rn(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,at(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(qe(e))return null;{const l=Ge(e),u=this.children.get(l);return u?u.findOnPath_(Et(e),rn(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,at(),t)}foreachOnPath_(e,t,i){if(qe(e))return this;{this.value&&i(t,this.value);const a=Ge(e),l=this.children.get(a);return l?l.foreachOnPath_(Et(e),rn(t,a),i):new wt(null)}}foreach(e){this.foreach_(at(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(rn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.writeTree_=e}static empty(){return new $i(new wt(null))}}function Pc(n,e,t){if(qe(e))return new $i(new wt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const u=zn(a,e);return l=l.updateChild(u,t),new $i(n.writeTree_.set(a,l))}else{const a=new wt(t),l=n.writeTree_.setTree(e,a);return new $i(l)}}}function Yb(n,e,t){let i=n;return ei(t,(a,l)=>{i=Pc(i,rn(e,a),l)}),i}function Xb(n,e){if(qe(e))return $i.empty();{const t=n.writeTree_.setTree(e,new wt(null));return new $i(t)}}function by(n,e){return xo(n,e)!=null}function xo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(zn(t.path,e)):null}function Zb(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Pt,(i,a)=>{e.push(new je(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new je(i,a.value))}),e}function ca(n,e){if(qe(e))return n;{const t=xo(n,e);return t!=null?new $i(new wt(t)):new $i(n.writeTree_.subtree(e))}}function Sy(n){return n.writeTree_.isEmpty()}function $l(n,e){return lI(at(),n.writeTree_,e)}function lI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(re(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=lI(rn(n,a),l,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(rn(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n,e){return fI(e,n)}function x6(n,e,t,i,a){re(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=Pc(n.visibleWrites,e,t)),n.lastWriteId=i}function D6(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function O6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);re(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,l=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&k6(h,i.path)?a=!1:Bi(i.path,h.path)&&(l=!0)),u--}if(a){if(l)return M6(n),!0;if(i.snap)n.visibleWrites=Xb(n.visibleWrites,i.path);else{const h=i.children;ei(h,p=>{n.visibleWrites=Xb(n.visibleWrites,rn(i.path,p))})}return!0}else return!1}function k6(n,e){if(n.snap)return Bi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Bi(rn(n.path,t),e))return!0;return!1}function M6(n){n.visibleWrites=uI(n.allWrites,P6,at()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function P6(n){return n.visible}function uI(n,e,t){let i=$i.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const u=l.path;let h;if(l.snap)Bi(t,u)?(h=zn(t,u),i=Pc(i,h,l.snap)):Bi(u,t)&&(h=zn(u,t),i=Pc(i,at(),l.snap.getChild(h)));else if(l.children){if(Bi(t,u))h=zn(t,u),i=Yb(i,h,l.children);else if(Bi(u,t))if(h=zn(u,t),qe(h))i=Yb(i,at(),l.children);else{const p=Ll(l.children,Ge(h));if(p){const m=p.getChild(Et(h));i=Pc(i,at(),m)}}}else throw Yl("WriteRecord should have .snap or .children")}}return i}function cI(n,e,t,i,a){if(!i&&!a){const l=xo(n.visibleWrites,e);if(l!=null)return l;{const u=ca(n.visibleWrites,e);if(Sy(u))return t;if(t==null&&!by(u,at()))return null;{const h=t||Ae.EMPTY_NODE;return $l(u,h)}}}else{const l=ca(n.visibleWrites,e);if(!a&&Sy(l))return t;if(!a&&t==null&&!by(l,at()))return null;{const u=function(m){return(m.visible||a)&&(!i||!~i.indexOf(m.writeId))&&(Bi(m.path,e)||Bi(e,m.path))},h=uI(n.allWrites,u,e),p=t||Ae.EMPTY_NODE;return $l(h,p)}}}function L6(n,e,t){let i=Ae.EMPTY_NODE;const a=xo(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Pt,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=ca(n.visibleWrites,e);return t.forEachChild(Pt,(u,h)=>{const p=$l(ca(l,new _t(u)),h);i=i.updateImmediateChild(u,p)}),Zb(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=ca(n.visibleWrites,e);return Zb(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function V6(n,e,t,i,a){re(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=rn(e,t);if(by(n.visibleWrites,l))return null;{const u=ca(n.visibleWrites,l);return Sy(u)?a.getChild(t):$l(u,a.getChild(t))}}function U6(n,e,t,i){const a=rn(e,t),l=xo(n.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(t)){const u=ca(n.visibleWrites,a);return $l(u,i.getNode().getImmediateChild(t))}else return null}function j6(n,e){return xo(n.visibleWrites,e)}function z6(n,e,t,i,a,l,u){let h;const p=ca(n.visibleWrites,e),m=xo(p,at());if(m!=null)h=m;else if(t!=null)h=$l(p,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const y=[],v=u.getCompare(),b=l?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let I=b.getNext();for(;I&&y.length<a;)v(I,i)!==0&&y.push(I),I=b.getNext();return y}else return[]}function F6(){return{visibleWrites:$i.empty(),allWrites:[],lastWriteId:-1}}function lp(n,e,t,i){return cI(n.writeTree,n.treePath,e,t,i)}function n0(n,e){return L6(n.writeTree,n.treePath,e)}function Jb(n,e,t,i){return V6(n.writeTree,n.treePath,e,t,i)}function up(n,e){return j6(n.writeTree,rn(n.treePath,e))}function B6(n,e,t,i,a,l){return z6(n.writeTree,n.treePath,e,t,i,a,l)}function i0(n,e,t){return U6(n.writeTree,n.treePath,e,t)}function hI(n,e){return fI(rn(n.treePath,e),n.writeTree)}function fI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;re(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),re(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,th(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,eh(i,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,Gl(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,th(i,e.snapshotNode,a.oldSnap));else throw Yl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const dI=new H6;class r0{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Sa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return i0(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:To(this.viewCache_),l=B6(this.writes_,a,t,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n){return{filter:n}}function $6(n,e){re(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),re(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function K6(n,e,t,i,a){const l=new q6;let u,h;if(t.type===qi.OVERWRITE){const m=t;m.source.fromUser?u=Ay(n,e,m.path,m.snap,i,a,l):(re(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!qe(m.path),u=cp(n,e,m.path,m.snap,i,a,h,l))}else if(t.type===qi.MERGE){const m=t;m.source.fromUser?u=W6(n,e,m.path,m.children,i,a,l):(re(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),u=Cy(n,e,m.path,m.children,i,a,h,l))}else if(t.type===qi.ACK_USER_WRITE){const m=t;m.revert?u=Z6(n,e,m.path,i,a,l):u=Y6(n,e,m.path,m.affectedTree,i,a,l)}else if(t.type===qi.LISTEN_COMPLETE)u=X6(n,e,t.path,i,l);else throw Yl("Unknown operation type: "+t.type);const p=l.getChanges();return Q6(e,u,p),{viewCache:u,changes:p}}function Q6(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=op(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(rI(op(e)))}}function pI(n,e,t,i,a,l){const u=e.eventCache;if(up(i,t)!=null)return e;{let h,p;if(qe(t))if(re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=To(e),y=m instanceof Ae?m:Ae.EMPTY_NODE,v=n0(i,y);h=n.filter.updateFullNode(e.eventCache.getNode(),v,l)}else{const m=lp(i,To(e));h=n.filter.updateFullNode(e.eventCache.getNode(),m,l)}else{const m=Ge(t);if(m===".priority"){re(ba(t)===1,"Can't have a priority with additional path components");const y=u.getNode();p=e.serverCache.getNode();const v=Jb(i,t,y,p);v!=null?h=n.filter.updatePriority(y,v):h=u.getNode()}else{const y=Et(t);let v;if(u.isCompleteForChild(m)){p=e.serverCache.getNode();const b=Jb(i,t,u.getNode(),p);b!=null?v=u.getNode().getImmediateChild(m).updateChild(y,b):v=u.getNode().getImmediateChild(m)}else v=i0(i,m,e.serverCache);v!=null?h=n.filter.updateChild(u.getNode(),m,v,y,a,l):h=u.getNode()}}return Mc(e,h,u.isFullyInitialized()||qe(t),n.filter.filtersNodes())}}function cp(n,e,t,i,a,l,u,h){const p=e.serverCache;let m;const y=u?n.filter:n.filter.getIndexedFilter();if(qe(t))m=y.updateFullNode(p.getNode(),i,null);else if(y.filtersNodes()&&!p.isFiltered()){const I=p.getNode().updateChild(t,i);m=y.updateFullNode(p.getNode(),I,null)}else{const I=Ge(t);if(!p.isCompleteForPath(t)&&ba(t)>1)return e;const x=Et(t),M=p.getNode().getImmediateChild(I).updateChild(x,i);I===".priority"?m=y.updatePriority(p.getNode(),M):m=y.updateChild(p.getNode(),I,M,x,dI,null)}const v=oI(e,m,p.isFullyInitialized()||qe(t),y.filtersNodes()),b=new r0(a,v,l);return pI(n,v,t,a,b,h)}function Ay(n,e,t,i,a,l,u){const h=e.eventCache;let p,m;const y=new r0(a,e,l);if(qe(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,u),p=Mc(e,m,!0,n.filter.filtersNodes());else{const v=Ge(t);if(v===".priority")m=n.filter.updatePriority(e.eventCache.getNode(),i),p=Mc(e,m,h.isFullyInitialized(),h.isFiltered());else{const b=Et(t),I=h.getNode().getImmediateChild(v);let x;if(qe(b))x=i;else{const V=y.getCompleteChild(v);V!=null?QR(b)===".priority"&&V.getChild(YR(b)).isEmpty()?x=V:x=V.updateChild(b,i):x=Ae.EMPTY_NODE}if(I.equals(x))p=e;else{const V=n.filter.updateChild(h.getNode(),v,x,b,y,u);p=Mc(e,V,h.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function eS(n,e){return n.eventCache.isCompleteForChild(e)}function W6(n,e,t,i,a,l,u){let h=e;return i.foreach((p,m)=>{const y=rn(t,p);eS(e,Ge(y))&&(h=Ay(n,h,y,m,a,l,u))}),i.foreach((p,m)=>{const y=rn(t,p);eS(e,Ge(y))||(h=Ay(n,h,y,m,a,l,u))}),h}function tS(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Cy(n,e,t,i,a,l,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,m;qe(t)?m=i:m=new wt(null).setTree(t,i);const y=e.serverCache.getNode();return m.children.inorderTraversal((v,b)=>{if(y.hasChild(v)){const I=e.serverCache.getNode().getImmediateChild(v),x=tS(n,I,b);p=cp(n,p,new _t(v),x,a,l,u,h)}}),m.children.inorderTraversal((v,b)=>{const I=!e.serverCache.isCompleteForChild(v)&&b.value===null;if(!y.hasChild(v)&&!I){const x=e.serverCache.getNode().getImmediateChild(v),V=tS(n,x,b);p=cp(n,p,new _t(v),V,a,l,u,h)}}),p}function Y6(n,e,t,i,a,l,u){if(up(a,t)!=null)return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if(qe(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return cp(n,e,t,p.getNode().getChild(t),a,l,h,u);if(qe(t)){let m=new wt(null);return p.getNode().forEachChild(Ml,(y,v)=>{m=m.set(new _t(y),v)}),Cy(n,e,t,m,a,l,h,u)}else return e}else{let m=new wt(null);return i.foreach((y,v)=>{const b=rn(t,y);p.isCompleteForPath(b)&&(m=m.set(y,p.getNode().getChild(b)))}),Cy(n,e,t,m,a,l,h,u)}}function X6(n,e,t,i,a){const l=e.serverCache,u=oI(e,l.getNode(),l.isFullyInitialized()||qe(t),l.isFiltered());return pI(n,u,t,i,dI,a)}function Z6(n,e,t,i,a,l){let u;if(up(i,t)!=null)return e;{const h=new r0(i,e,a),p=e.eventCache.getNode();let m;if(qe(t)||Ge(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=lp(i,To(e));else{const v=e.serverCache.getNode();re(v instanceof Ae,"serverChildren would be complete if leaf node"),y=n0(i,v)}y=y,m=n.filter.updateFullNode(p,y,l)}else{const y=Ge(t);let v=i0(i,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=p.getImmediateChild(y)),v!=null?m=n.filter.updateChild(p,y,v,Et(t),h,l):e.eventCache.getNode().hasChild(y)?m=n.filter.updateChild(p,y,Ae.EMPTY_NODE,Et(t),h,l):m=p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=lp(i,To(e)),u.isLeafNode()&&(m=n.filter.updateFullNode(m,u,l)))}return u=e.serverCache.isFullyInitialized()||up(i,at())!=null,Mc(e,m,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new Zv(i.getIndex()),l=y6(i);this.processor_=G6(l);const u=t.serverCache,h=t.eventCache,p=a.updateFullNode(Ae.EMPTY_NODE,u.getNode(),null),m=l.updateFullNode(Ae.EMPTY_NODE,h.getNode(),null),y=new Sa(p,u.isFullyInitialized(),a.filtersNodes()),v=new Sa(m,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=$p(v,y),this.eventGenerator_=new A6(this.query_)}get query(){return this.query_}}function eV(n){return n.viewCache_.serverCache.getNode()}function tV(n){return op(n.viewCache_)}function nV(n,e){const t=To(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qe(e)&&!t.getImmediateChild(Ge(e)).isEmpty())?t.getChild(e):null}function nS(n){return n.eventRegistrations_.length===0}function iV(n,e){n.eventRegistrations_.push(e)}function iS(n,e,t){const i=[];if(t){re(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,a);u&&i.push(u)})}if(e){let a=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function rS(n,e,t,i){e.type===qi.MERGE&&e.source.queryId!==null&&(re(To(n.viewCache_),"We should always have a full cache before handling merges"),re(op(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=K6(n.processor_,a,e,t,i);return $6(n.processor_,l.viewCache),re(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,mI(n,l.changes,l.viewCache.eventCache.getNode(),null)}function rV(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Pt,(l,u)=>{i.push(Gl(l,u))}),t.isFullyInitialized()&&i.push(rI(t.getNode())),mI(n,i,t.getNode(),e)}function mI(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return C6(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp;class _I{constructor(){this.views=new Map}}function sV(n){re(!hp,"__referenceConstructor has already been defined"),hp=n}function aV(){return re(hp,"Reference.ts has not been loaded"),hp}function oV(n){return n.views.size===0}function s0(n,e,t,i){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return re(l!=null,"SyncTree gave us an op for an invalid query."),rS(l,e,t,i)}else{let l=[];for(const u of n.views.values())l=l.concat(rS(u,e,t,i));return l}}function gI(n,e,t,i,a){const l=e._queryIdentifier,u=n.views.get(l);if(!u){let h=lp(t,a?i:null),p=!1;h?p=!0:i instanceof Ae?(h=n0(t,i),p=!1):(h=Ae.EMPTY_NODE,p=!1);const m=$p(new Sa(h,p,!1),new Sa(i,a,!1));return new J6(e,m)}return u}function lV(n,e,t,i,a,l){const u=gI(n,e,i,a,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),iV(u,t),rV(u,t)}function uV(n,e,t,i){const a=e._queryIdentifier,l=[];let u=[];const h=Aa(n);if(a==="default")for(const[p,m]of n.views.entries())u=u.concat(iS(m,t,i)),nS(m)&&(n.views.delete(p),m.query._queryParams.loadsAllData()||l.push(m.query));else{const p=n.views.get(a);p&&(u=u.concat(iS(p,t,i)),nS(p)&&(n.views.delete(a),p.query._queryParams.loadsAllData()||l.push(p.query)))}return h&&!Aa(n)&&l.push(new(aV())(e._repo,e._path)),{removed:l,events:u}}function yI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ha(n,e){let t=null;for(const i of n.views.values())t=t||nV(i,e);return t}function vI(n,e){if(e._queryParams.loadsAllData())return Qp(n);{const i=e._queryIdentifier;return n.views.get(i)}}function EI(n,e){return vI(n,e)!=null}function Aa(n){return Qp(n)!=null}function Qp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fp;function cV(n){re(!fp,"__referenceConstructor has already been defined"),fp=n}function hV(){return re(fp,"Reference.ts has not been loaded"),fp}let fV=1;class sS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=F6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wI(n,e,t,i,a){return x6(n.pendingWriteTree_,e,t,i,a),a?Ah(n,new wo(aI(),e,t)):[]}function fo(n,e,t=!1){const i=D6(n.pendingWriteTree_,e);if(O6(n.pendingWriteTree_,e)){let l=new wt(null);return i.snap!=null?l=l.set(at(),!0):ei(i.children,u=>{l=l.set(new _t(u),!0)}),Ah(n,new ap(i.path,l,t))}else return[]}function Sh(n,e,t){return Ah(n,new wo(e0(),e,t))}function dV(n,e,t){const i=wt.fromObject(t);return Ah(n,new rh(e0(),e,i))}function pV(n,e){return Ah(n,new ih(e0(),e))}function mV(n,e,t){const i=o0(n,t);if(i){const a=l0(i),l=a.path,u=a.queryId,h=zn(l,e),p=new ih(t0(u),h);return u0(n,l,p)}else return[]}function TI(n,e,t,i,a=!1){const l=e._path,u=n.syncPointTree_.get(l);let h=[];if(u&&(e._queryIdentifier==="default"||EI(u,e))){const p=uV(u,e,t,i);oV(u)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const m=p.removed;if(h=p.events,!a){const y=m.findIndex(b=>b._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(l,(b,I)=>Aa(I));if(y&&!v){const b=n.syncPointTree_.subtree(l);if(!b.isEmpty()){const I=vV(b);for(let x=0;x<I.length;++x){const V=I[x],M=V.query,H=CI(n,V);n.listenProvider_.startListening(Lc(M),sh(n,M),H.hashFn,H.onComplete)}}}!v&&m.length>0&&!i&&(y?n.listenProvider_.stopListening(Lc(e),null):m.forEach(b=>{const I=n.queryToTagMap.get(Wp(b));n.listenProvider_.stopListening(Lc(b),I)}))}EV(n,m)}return h}function bI(n,e,t,i){const a=o0(n,i);if(a!=null){const l=l0(a),u=l.path,h=l.queryId,p=zn(u,e),m=new wo(t0(h),p,t);return u0(n,u,m)}else return[]}function _V(n,e,t,i){const a=o0(n,i);if(a){const l=l0(a),u=l.path,h=l.queryId,p=zn(u,e),m=wt.fromObject(t),y=new rh(t0(h),p,m);return u0(n,u,y)}else return[]}function gV(n,e,t,i=!1){const a=e._path;let l=null,u=!1;n.syncPointTree_.foreachOnPath(a,(b,I)=>{const x=zn(b,a);l=l||ha(I,x),u=u||Aa(I)});let h=n.syncPointTree_.get(a);h?(u=u||Aa(h),l=l||ha(h,at())):(h=new _I,n.syncPointTree_=n.syncPointTree_.set(a,h));let p;l!=null?p=!0:(p=!1,l=Ae.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((I,x)=>{const V=ha(x,at());V&&(l=l.updateImmediateChild(I,V))}));const m=EI(h,e);if(!m&&!e._queryParams.loadsAllData()){const b=Wp(e);re(!n.queryToTagMap.has(b),"View does not exist, but we have a tag");const I=wV();n.queryToTagMap.set(b,I),n.tagToQueryMap.set(I,b)}const y=Kp(n.pendingWriteTree_,a);let v=lV(h,e,t,y,l,p);if(!m&&!u&&!i){const b=vI(h,e);v=v.concat(TV(n,e,b))}return v}function a0(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,h)=>{const p=zn(u,e),m=ha(h,p);if(m)return m});return cI(a,e,l,t,!0)}function yV(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(m,y)=>{const v=zn(m,t);i=i||ha(y,v)});let a=n.syncPointTree_.get(t);a?i=i||ha(a,at()):(a=new _I,n.syncPointTree_=n.syncPointTree_.set(t,a));const l=i!=null,u=l?new Sa(i,!0,!1):null,h=Kp(n.pendingWriteTree_,e._path),p=gI(a,e,h,l?u.getNode():Ae.EMPTY_NODE,l);return tV(p)}function Ah(n,e){return SI(e,n.syncPointTree_,null,Kp(n.pendingWriteTree_,at()))}function SI(n,e,t,i){if(qe(n.path))return AI(n,e,t,i);{const a=e.get(at());t==null&&a!=null&&(t=ha(a,at()));let l=[];const u=Ge(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const m=t?t.getImmediateChild(u):null,y=hI(i,u);l=l.concat(SI(h,p,m,y))}return a&&(l=l.concat(s0(a,n,i,t))),l}}function AI(n,e,t,i){const a=e.get(at());t==null&&a!=null&&(t=ha(a,at()));let l=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,m=hI(i,u),y=n.operationForChild(u);y&&(l=l.concat(AI(y,h,p,m)))}),a&&(l=l.concat(s0(a,n,i,t))),l}function CI(n,e){const t=e.query,i=sh(n,t);return{hashFn:()=>(eV(e)||Ae.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?mV(n,t._path,i):pV(n,t._path);{const l=gL(a,t);return TI(n,t,null,l)}}}}function sh(n,e){const t=Wp(e);return n.queryToTagMap.get(t)}function Wp(n){return n._path.toString()+"$"+n._queryIdentifier}function o0(n,e){return n.tagToQueryMap.get(e)}function l0(n){const e=n.indexOf("$");return re(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _t(n.substr(0,e))}}function u0(n,e,t){const i=n.syncPointTree_.get(e);re(i,"Missing sync point for query tag that we're tracking");const a=Kp(n.pendingWriteTree_,e);return s0(i,t,a,null)}function vV(n){return n.fold((e,t,i)=>{if(t&&Aa(t))return[Qp(t)];{let a=[];return t&&(a=yI(t)),ei(i,(l,u)=>{a=a.concat(u)}),a}})}function Lc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(hV())(n._repo,n._path):n}function EV(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=Wp(i),l=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(l)}}}function wV(){return fV++}function TV(n,e,t){const i=e._path,a=sh(n,e),l=CI(n,t),u=n.listenProvider_.startListening(Lc(e),a,l.hashFn,l.onComplete),h=n.syncPointTree_.subtree(i);if(a)re(!Aa(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((m,y,v)=>{if(!qe(m)&&y&&Aa(y))return[Qp(y).query];{let b=[];return y&&(b=b.concat(yI(y).map(I=>I.query))),ei(v,(I,x)=>{b=b.concat(x)}),b}});for(let m=0;m<p.length;++m){const y=p[m];n.listenProvider_.stopListening(Lc(y),sh(n,y))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new c0(t)}node(){return this.node_}}class h0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=rn(this.path_,e);return new h0(this.syncTree_,t)}node(){return a0(this.syncTree_,this.path_)}}const bV=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},aS=function(n,e,t){if(!n||typeof n!="object")return n;if(re(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return SV(n[".sv"],e,t);if(typeof n[".sv"]=="object")return AV(n[".sv"],e);re(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},SV=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:re(!1,"Unexpected server value: "+n)}},AV=function(n,e,t){n.hasOwnProperty("increment")||re(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&re(!1,"Unexpected increment value: "+i);const a=e.node();if(re(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},CV=function(n,e,t,i){return f0(e,new h0(t,n),i)},RI=function(n,e,t){return f0(n,new c0(e),t)};function f0(n,e,t){const i=n.getPriority().val(),a=aS(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,h=aS(u.getValue(),e,t);return h!==u.getValue()||a!==u.getPriority().val()?new pn(h,gn(a)):n}else{const u=n;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new pn(a))),u.forEachChild(Pt,(h,p)=>{const m=f0(p,e.getImmediateChild(h),t);m!==p&&(l=l.updateImmediateChild(h,m))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function p0(n,e){let t=e instanceof _t?e:new _t(e),i=n,a=Ge(t);for(;a!==null;){const l=Ll(i.node.children,a)||{children:{},childCount:0};i=new d0(a,i,l),t=Et(t),a=Ge(t)}return i}function au(n){return n.node.value}function II(n,e){n.node.value=e,Ry(n)}function NI(n){return n.node.childCount>0}function RV(n){return au(n)===void 0&&!NI(n)}function Yp(n,e){ei(n.node.children,(t,i)=>{e(new d0(t,n,i))})}function xI(n,e,t,i){t&&e(n),Yp(n,a=>{xI(a,e,!0)})}function IV(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ch(n){return new _t(n.parent===null?n.name:Ch(n.parent)+"/"+n.name)}function Ry(n){n.parent!==null&&NV(n.parent,n.name,n)}function NV(n,e,t){const i=RV(t),a=ps(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,Ry(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,Ry(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=/[\[\].#$\/\u0000-\u001F\u007F]/,DV=/[\[\].#$\u0000-\u001F\u007F]/,Ng=10*1024*1024,DI=function(n){return typeof n=="string"&&n.length!==0&&!xV.test(n)},OI=function(n){return typeof n=="string"&&n.length!==0&&!DV.test(n)},OV=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),OI(n)},kV=function(n,e,t,i){m0(Ky(n,"value"),e,t)},m0=function(n,e,t){const i=t instanceof _t?new YL(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+uo(i));if(typeof e=="function")throw new Error(n+"contains a function "+uo(i)+" with contents = "+e.toString());if(RR(e))throw new Error(n+"contains "+e.toString()+" "+uo(i));if(typeof e=="string"&&e.length>Ng/3&&Sp(e)>Ng)throw new Error(n+"contains a string greater than "+Ng+" utf8 bytes "+uo(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(ei(e,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!DI(u)))throw new Error(n+" contains an invalid key ("+u+") "+uo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);XL(i,u),m0(n,h,i),ZL(i)}),a&&l)throw new Error(n+' contains ".value" child '+uo(i)+" in addition to actual children.")}},kI=function(n,e,t,i){if(!OI(t))throw new Error(Ky(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},MV=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kI(n,e,t)},MI=function(n,e){if(Ge(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},PV=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!DI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!OV(t))throw new Error(Ky(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function PI(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();t!==null&&!XR(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function wr(n,e,t){PI(n,t),VV(n,i=>Bi(i,e)||Bi(e,i))}function VV(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const l=a.path;e(l)?(UV(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function UV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Oc&&Dn("event: "+t.toString()),su(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="repo_interrupt",zV=25;class FV{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new LV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sp(),this.transactionQueueTree_=new d0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function BV(n,e,t){if(n.stats_=Qv(n.repoInfo_),n.forceRestClient_||wL())n.server_=new rp(n.repoInfo_,(i,a,l,u)=>{oS(n,i,a,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>lS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new as(n.repoInfo_,e,(i,a,l,u)=>{oS(n,i,a,l,u)},i=>{lS(n,i)},i=>{HV(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=CL(n.repoInfo_,()=>new S6(n.stats_,n.server_)),n.infoData_=new v6,n.infoSyncTree_=new sS({startListening:(i,a,l,u)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=Sh(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),g0(n,"connected",!1),n.serverSyncTree_=new sS({startListening:(i,a,l,u)=>(n.server_.listen(i,l,a,(h,p)=>{const m=u(h,p);wr(n.eventQueue_,i._path,m)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function qV(n){const t=n.infoData_.getNode(new _t(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function _0(n){return bV({timestamp:qV(n)})}function oS(n,e,t,i,a){n.dataUpdateCount++;const l=new _t(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const p=Md(t,m=>gn(m));u=_V(n.serverSyncTree_,l,p,a)}else{const p=gn(t);u=bI(n.serverSyncTree_,l,p,a)}else if(i){const p=Md(t,m=>gn(m));u=dV(n.serverSyncTree_,l,p)}else{const p=gn(t);u=Sh(n.serverSyncTree_,l,p)}let h=l;u.length>0&&(h=Zp(n,l)),wr(n.eventQueue_,h,u)}function lS(n,e){g0(n,"connected",e),e===!1&&KV(n)}function HV(n,e){ei(e,(t,i)=>{g0(n,t,i)})}function g0(n,e,t){const i=new _t("/.info/"+e),a=gn(t);n.infoData_.updateSnapshot(i,a);const l=Sh(n.infoSyncTree_,i,a);wr(n.eventQueue_,i,l)}function LI(n){return n.nextWriteId_++}function GV(n,e,t){const i=yV(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const l=gn(a).withIndex(e._queryParams.getIndex());gV(n.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=Sh(n.serverSyncTree_,e._path,l);else{const h=sh(n.serverSyncTree_,e);u=bI(n.serverSyncTree_,e._path,l,h)}return wr(n.eventQueue_,e._path,u),TI(n.serverSyncTree_,e,t,null,!0),l},a=>(Xp(n,"get for query "+nn(e)+" failed: "+a),Promise.reject(new Error(a))))}function $V(n,e,t,i,a){Xp(n,"set",{path:e.toString(),value:t,priority:i});const l=_0(n),u=gn(t,i),h=a0(n.serverSyncTree_,e),p=RI(u,h,l),m=LI(n),y=wI(n.serverSyncTree_,e,p,m,!0);PI(n.eventQueue_,y),n.server_.put(e.toString(),u.val(!0),(b,I)=>{const x=b==="ok";x||Zn("set at "+e+" failed: "+b);const V=fo(n.serverSyncTree_,m,!x);wr(n.eventQueue_,e,V),WV(n,a,b,I)});const v=FI(n,e);Zp(n,v),wr(n.eventQueue_,v,[])}function KV(n){Xp(n,"onDisconnectEvents");const e=_0(n),t=sp();Ty(n.onDisconnect_,at(),(a,l)=>{const u=CV(a,l,n.serverSyncTree_,e);sI(t,a,u)});let i=[];Ty(t,at(),(a,l)=>{i=i.concat(Sh(n.serverSyncTree_,a,l));const u=FI(n,a);Zp(n,u)}),n.onDisconnect_=sp(),wr(n.eventQueue_,at(),i)}function QV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(jV)}function Xp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Dn(t,...e)}function WV(n,e,t,i){e&&su(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;i&&(l+=": "+i);const u=new Error(l);u.code=a,e(u)}})}function VI(n,e,t){return a0(n.serverSyncTree_,e,t)||Ae.EMPTY_NODE}function y0(n,e=n.transactionQueueTree_){if(e||Jp(n,e),au(e)){const t=jI(n,e);re(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&YV(n,Ch(e),t)}else NI(e)&&Yp(e,t=>{y0(n,t)})}function YV(n,e,t){const i=t.map(m=>m.currentWriteId),a=VI(n,e,i);let l=a;const u=a.hash();for(let m=0;m<t.length;m++){const y=t[m];re(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=zn(e,y.path);l=l.updateChild(v,y.currentOutputSnapshotRaw)}const h=l.val(!0),p=e;n.server_.put(p.toString(),h,m=>{Xp(n,"transaction put response",{path:p.toString(),status:m});let y=[];if(m==="ok"){const v=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(fo(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&v.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();Jp(n,p0(n.transactionQueueTree_,e)),y0(n,n.transactionQueueTree_),wr(n.eventQueue_,e,y);for(let b=0;b<v.length;b++)su(v[b])}else{if(m==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{Zn("transaction at "+p.toString()+" failed: "+m);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=m}Zp(n,e)}},u)}function Zp(n,e){const t=UI(n,e),i=Ch(t),a=jI(n,t);return XV(n,a,i),i}function XV(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],m=zn(t,p.path);let y=!1,v;if(re(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)y=!0,v=p.abortReason,a=a.concat(fo(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=zV)y=!0,v="maxretry",a=a.concat(fo(n.serverSyncTree_,p.currentWriteId,!0));else{const b=VI(n,p.path,u);p.currentInputSnapshot=b;const I=e[h].update(b.val());if(I!==void 0){m0("transaction failed: Data returned ",I,p.path);let x=gn(I);typeof I=="object"&&I!=null&&ps(I,".priority")||(x=x.updatePriority(b.getPriority()));const M=p.currentWriteId,H=_0(n),Q=RI(x,b,H);p.currentOutputSnapshotRaw=x,p.currentOutputSnapshotResolved=Q,p.currentWriteId=LI(n),u.splice(u.indexOf(M),1),a=a.concat(wI(n.serverSyncTree_,p.path,Q,p.currentWriteId,p.applyLocally)),a=a.concat(fo(n.serverSyncTree_,M,!0))}else y=!0,v="nodata",a=a.concat(fo(n.serverSyncTree_,p.currentWriteId,!0))}wr(n.eventQueue_,t,a),a=[],y&&(e[h].status=2,function(b){setTimeout(b,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(v),!1,null))))}Jp(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)su(i[h]);y0(n,n.transactionQueueTree_)}function UI(n,e){let t,i=n.transactionQueueTree_;for(t=Ge(e);t!==null&&au(i)===void 0;)i=p0(i,t),e=Et(e),t=Ge(e);return i}function jI(n,e){const t=[];return zI(n,e,t),t.sort((i,a)=>i.order-a.order),t}function zI(n,e,t){const i=au(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Yp(e,a=>{zI(n,a,t)})}function Jp(n,e){const t=au(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,II(e,t.length>0?t:void 0)}Yp(e,i=>{Jp(n,i)})}function FI(n,e){const t=Ch(UI(n,e)),i=p0(n.transactionQueueTree_,e);return IV(i,a=>{xg(n,a)}),xg(n,i),xI(i,a=>{xg(n,a)}),t}function xg(n,e){const t=au(e);if(t){const i=[];let a=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(re(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(re(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(fo(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?II(e,void 0):t.length=l+1,wr(n.eventQueue_,Ch(e),a);for(let u=0;u<i.length;u++)su(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function JV(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Zn(`Invalid query segment '${t}' in query '${n}'`)}return e}const uS=function(n,e){const t=eU(n),i=t.namespace;t.domain==="firebase.com"&&ds(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ds("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||fL();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new jR(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new _t(t.pathString)}},eU=function(n){let e="",t="",i="",a="",l="",u=!0,h="https",p=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let y=n.indexOf("/");y===-1&&(y=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(y,v)),y<v&&(a=ZV(n.substring(y,v)));const b=JV(n.substring(Math.min(n.length,v)));m=e.indexOf(":"),m>=0?(u=h==="https"||h==="wss",p=parseInt(e.substring(m+1),10)):m=e.length;const I=e.slice(0,m);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const x=e.indexOf(".");i=e.substring(0,x).toLowerCase(),t=e.substring(x+1),l=i}"ns"in b&&(l=b.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:u,scheme:h,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nn(this.snapshot.exportVal())}}class nU{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return re(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return qe(this._path)?null:QR(this._path)}get ref(){return new ms(this._repo,this._path)}get _queryIdentifier(){const e=Qb(this._queryParams),t=$v(e);return t==="{}"?"default":t}get _queryObject(){return Qb(this._queryParams)}isEqual(e){if(e=xt(e),!(e instanceof v0))return!1;const t=this._repo===e._repo,i=XR(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+WL(this._path)}}class ms extends v0{constructor(e,t){super(e,t,new Jv,!1)}get parent(){const e=YR(this._path);return e===null?null:new ms(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ah{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new _t(e),i=Iy(this.ref,e);return new ah(this._node.getChild(t),i,Pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new ah(a,Iy(this.ref,i),Pt)))}hasChild(e){const t=new _t(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function E0(n,e){return n=xt(n),n._checkNotDeleted("ref"),e!==void 0?Iy(n._root,e):n._root}function Iy(n,e){return n=xt(n),Ge(n._path)===null?MV("child","path",e):kI("child","path",e),new ms(n._repo,rn(n._path,e))}function rU(n){return MI("remove",n._path),w0(n,null)}function w0(n,e){n=xt(n),MI("set",n._path),kV("set",e,n._path);const t=new bp;return $V(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function BI(n){n=xt(n);const e=new iU(()=>{}),t=new T0(e);return GV(n._repo,n,t).then(i=>new ah(i,new ms(n._repo,n._path),n._queryParams.getIndex()))}class T0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new tU("value",this,new ah(e.snapshotNode,new ms(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new nU(this,e,t):null}matches(e){return e instanceof T0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}sV(ms);cV(ms);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="FIREBASE_DATABASE_EMULATOR_HOST",Ny={};let aU=!1;function oU(n,e,t,i){n.repoInfo_=new jR(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function lU(n,e,t,i,a){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||ds("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Dn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=uS(l,a),h=u.repoInfo,p;typeof process<"u"&&xb&&(p=xb[sU]),p?(l=`http://${p}?ns=${h.namespace}`,u=uS(l,a),h=u.repoInfo):u.repoInfo.secure;const m=new bL(n.name,n.options,e);PV("Invalid Firebase Database URL",u),qe(u.path)||ds("Database URL must point to the root of a Firebase Database (not including a child path).");const y=cU(h,n,m,new TL(n,t));return new hU(y,n)}function uU(n,e){const t=Ny[e];(!t||t[n.key]!==n)&&ds(`Database ${e}(${n.repoInfo_}) has already been deleted.`),QV(n),delete t[n.key]}function cU(n,e,t,i){let a=Ny[e.name];a||(a={},Ny[e.name]=a);let l=a[n.toURLString()];return l&&ds("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new FV(n,aU,t,i),a[n.toURLString()]=l,l}class hU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(BV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ms(this._repo,at())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ds("Cannot call "+e+" on a deleted database.")}}function fU(n=Cp(),e){const t=hh(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Hy("database");i&&dU(t,...i)}return t}function dU(n,e,t,i={}){n=xt(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&pa(i,l.repoInfo_.emulatorOptions))return;ds("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&ds('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Ed(Ed.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:Gy(i.mockUserToken,n.app.options.projectId);u=new Ed(h)}oU(l,a,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(n){aL(Ra),ma(new ls("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return lU(i,a,l,t)},"PUBLIC").setMultipleInstances(!0)),Ii(Db,Ob,n),Ii(Db,Ob,"esm2017")}as.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};as.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};pU();const mU={apiKey:"AIzaSyCOBlr4IVMUZP7gqI706ZjiEEDcE8l4t4s",authDomain:"my-electronics-store.firebaseapp.com",projectId:"my-electronics-store",storageBucket:"my-electronics-store.appspot.com",messagingSenderId:"602301372699",appId:"1:602301372699:web:08ae7f5163dafb249f1bbe",databaseURL:"https://my-electronics-store-default-rtdb.firebaseio.com"},_U="b7636e548e191116b0f327bdc1e07423",em=nA(mU),Fn=n5(em);B5(em);const wd=rL(em),b0=fU(em),gU=n=>$3(wd,n),Td=So("products/fetchProducts",async()=>{const n=await LC(_h(Fn,"products")),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}),qI=So("products/deleteProduct",async n=>(await VC(Gi(Fn,"products",n)),n)),HI=So("products/addProduct",async n=>({id:(await UC(_h(Fn,"products"),{...n,price:Number(n.price)})).id,...n})),yU=Ca({name:"products",initialState:{items:[],status:"idle",error:null},reducers:{},extraReducers:n=>{n.addCase(Td.pending,e=>{e.status="loading"}).addCase(Td.fulfilled,(e,t)=>{e.status="succeeded",e.items=t.payload}).addCase(Td.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(qI.fulfilled,(e,t)=>{e.items=e.items.filter(i=>i.id!==t.payload)}).addCase(HI.fulfilled,(e,t)=>{e.items.push(t.payload)})}}),vU=yU.reducer,GI=Ca({name:"auth",initialState:{user:null,isAdmin:!1},reducers:{setUser:(n,e)=>{const{user:t,role:i}=e.payload;n.user=t,n.isAdmin=i==="admin"},clearUser:n=>{n.user=null,n.isAdmin=!1}}}),{setUser:xy,clearUser:$I}=GI.actions,EU=GI.reducer,bd=So("categories/fetchCategories",async()=>{const n=await LC(_h(Fn,"products")),e=new Set;return n.forEach(t=>{const i=t.data();i.category&&e.add(i.category)}),["Все товары",...Array.from(e)]}),KI=Ca({name:"categories",initialState:{selectedCategory:"Все товары",categories:[],status:"idle",error:null},reducers:{setSelectedCategory:(n,e)=>{n.selectedCategory=e.payload}},extraReducers:n=>{n.addCase(bd.pending,e=>{e.status="loading"}).addCase(bd.fulfilled,(e,t)=>{e.status="succeeded",e.categories=t.payload}).addCase(bd.rejected,(e,t)=>{e.status="failed",e.error=t.error.message})}}),{setSelectedCategory:QI}=KI.actions,wU=KI.reducer,Rh=So("favorite/fetchFavorites",async(n,{getState:e})=>{var l;const t=(l=e().auth.user)==null?void 0:l.uid;if(!t)return[];const i=E0(b0,`favorites/${t}`),a=await BI(i);return a.exists()?Object.entries(a.val()).map(([u,h])=>({productId:u,quantity:h.quantity})):[]}),dp=So("favorite/toggleFavorite",async(n,{getState:e,dispatch:t})=>{var u;const i=(u=e().auth.user)==null?void 0:u.uid;if(!i)return{productId:n,action:"none"};const a=E0(b0,`favorites/${i}/${n}`);return(await BI(a)).exists()?await rU(a):await w0(a,{quantity:1}),await t(Rh()),{productId:n}}),TU=So("favorite/updateFavoriteQuantity",async({productId:n,quantity:e},{getState:t,dispatch:i})=>{var u;const a=(u=t().auth.user)==null?void 0:u.uid;if(!a)return;const l=E0(b0,`favorites/${a}/${n}`);return await w0(l,{quantity:e}),await i(Rh()),{productId:n,quantity:e}}),WI=Ca({name:"favorite",initialState:{items:[]},reducers:{clearFavorites:n=>{n.items=[]}},extraReducers:n=>{n.addCase(Rh.fulfilled,(e,t)=>{e.items=t.payload}).addCase(dp.fulfilled,()=>{}).addCase(dp.rejected,(e,t)=>{console.error("🔥 Ошибка toggleFavorite:",t.error)})}}),{clearFavorites:bU}=WI.actions,SU=WI.reducer,YI=Ca({name:"search",initialState:{query:""},reducers:{setSearchQuery:(n,e)=>{n.query=e.payload}}}),{setSearchQuery:cS}=YI.actions,AU=YI.reducer,XI=Ca({name:"sidePanel",initialState:{isOpen:!1},reducers:{togglePanel:n=>{n.isOpen=!n.isOpen}}}),{togglePanel:Il}=XI.actions,CU=XI.reducer,ZI=Ca({name:"news",initialState:{news:[],viewedLoaded:!1,newNewsCount:0,viewedNewsIds:[]},reducers:{setNews:(n,e)=>{n.news=e.payload},setNewNewsCount:(n,e)=>{n.newNewsCount=e.payload},setViewedNewsIds:(n,e)=>{n.viewedNewsIds=e.payload},addViewedNewsId:(n,e)=>{n.viewedNewsIds.includes(e.payload)||n.viewedNewsIds.push(e.payload)},markAllNewsAsViewed:n=>{const e=n.news.map(t=>t.id);n.viewedNewsIds=[...new Set([...n.viewedNewsIds,...e])],n.newNewsCount=0},clearViewedNews:n=>{n.viewedNewsIds=[],n.newNewsCount=0}}}),{setNews:RU,setNewNewsCount:IU,setViewedNewsIds:Dg,addViewedNewsId:B8,markAllNewsAsViewed:NU,clearViewedNews:xU}=ZI.actions,DU=ZI.reducer,OU=iO({reducer:{menu:SO,products:vU,auth:EU,categories:wU,favorite:SU,search:AU,sidePanel:CU,news:DU}});var JI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hS=ra.createContext&&ra.createContext(JI),kU=["attr","size","title"];function MU(n,e){if(n==null)return{};var t=PU(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function PU(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function pp(){return pp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pp.apply(this,arguments)}function fS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function mp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fS(Object(t),!0).forEach(function(i){LU(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fS(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function LU(n,e,t){return e=VU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VU(n){var e=UU(n,"string");return typeof e=="symbol"?e:e+""}function UU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function e2(n){return n&&n.map((e,t)=>ra.createElement(e.tag,mp({key:t},e.attr),e2(e.child)))}function Lt(n){return e=>ra.createElement(jU,pp({attr:mp({},n.attr)},e),e2(n.child))}function jU(n){var e=t=>{var{attr:i,size:a,title:l}=n,u=MU(n,kU),h=a||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),ra.createElement("svg",pp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:p,style:mp(mp({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&ra.createElement("title",null,l),n.children)};return hS!==void 0?ra.createElement(hS.Consumer,null,t=>e(t)):e(JI)}function zU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2zm3.564 1.426L5.596 5 8 5.961 14.154 3.5zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464z"},child:[]}]})(n)}function FU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.5 7a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"},child:[]},{tag:"path",attr:{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(n)}function BU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"},child:[]}]})(n)}function qU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"},child:[]},{tag:"path",attr:{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"},child:[]}]})(n)}function HU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m7.5-6.923c-.67.204-1.335.82-1.887 1.855q-.215.403-.395.872c.705.157 1.472.257 2.282.287zM4.249 3.539q.214-.577.481-1.078a7 7 0 0 1 .597-.933A7 7 0 0 0 3.051 3.05q.544.277 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9 9 0 0 1-1.565-.667A6.96 6.96 0 0 0 1.018 7.5zm1.4-2.741a12.3 12.3 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332M8.5 5.09V7.5h2.99a12.3 12.3 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.6 13.6 0 0 1 7.5 10.91V8.5zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741zm-3.282 3.696q.18.469.395.872c.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a7 7 0 0 1-.598-.933 9 9 0 0 1-.481-1.079 8.4 8.4 0 0 0-1.198.49 7 7 0 0 0 2.276 1.522zm-1.383-2.964A13.4 13.4 0 0 1 3.508 8.5h-2.49a6.96 6.96 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667m6.728 2.964a7 7 0 0 0 2.275-1.521 8.4 8.4 0 0 0-1.197-.49 9 9 0 0 1-.481 1.078 7 7 0 0 1-.597.933M8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855q.216-.403.395-.872A12.6 12.6 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.96 6.96 0 0 0 14.982 8.5h-2.49a13.4 13.4 0 0 1-.437 3.008M14.982 7.5a6.96 6.96 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008zM11.27 2.461q.266.502.482 1.078a8.4 8.4 0 0 0 1.196-.49 7 7 0 0 0-2.275-1.52c.218.283.418.597.597.932m-.488 1.343a8 8 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"},child:[]}]})(n)}function GU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"},child:[]}]})(n)}function $U(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"},child:[]}]})(n)}function KU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.37 2.37 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0M1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5M4 15h3v-5H4zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3 0h-2v3h2z"},child:[]}]})(n)}function QU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.048 3.323c.022.277-.13.523-.338.55-.21.026-.397-.176-.419-.453s.13-.523.338-.55c.21-.026.397.176.42.453Zm2.265-.24c-.603-.146-.894.256-.936.333-.027.048-.008.117.037.15.045.035.092.025.119-.003.361-.39.751-.172.829-.129l.011.007c.053.024.147.028.193-.098.023-.063.017-.11-.006-.142-.016-.023-.089-.08-.247-.118"},child:[]},{tag:"path",attr:{d:"M11.727 6.719c0-.022.01-.375.01-.557 0-3.07-1.45-6.156-5.015-6.156S1.708 3.092 1.708 6.162c0 .182.01.535.01.557l-.72 1.795a26 26 0 0 0-.534 1.508c-.68 2.187-.46 3.093-.292 3.113.36.044 1.401-1.647 1.401-1.647 0 .979.504 2.256 1.594 3.179-.408.126-.907.319-1.228.556-.29.213-.253.43-.201.518.228.386 3.92.246 4.985.126 1.065.12 4.756.26 4.984-.126.052-.088.088-.305-.2-.518-.322-.237-.822-.43-1.23-.557 1.09-.922 1.594-2.2 1.594-3.178 0 0 1.041 1.69 1.401 1.647.168-.02.388-.926-.292-3.113a26 26 0 0 0-.534-1.508l-.72-1.795ZM9.773 5.53a.1.1 0 0 1-.009.096c-.109.159-1.554.943-3.033.943h-.017c-1.48 0-2.925-.784-3.034-.943a.1.1 0 0 1-.018-.055q0-.022.01-.04c.13-.287 1.43-.606 3.042-.606h.017c1.611 0 2.912.319 3.042.605m-4.32-.989c-.483.022-.896-.529-.922-1.229s.344-1.286.828-1.308c.483-.022.896.529.922 1.23.027.7-.344 1.286-.827 1.307Zm2.538 0c-.484-.022-.854-.607-.828-1.308.027-.7.44-1.25.923-1.23.483.023.853.608.827 1.309-.026.7-.439 1.251-.922 1.23ZM2.928 8.99q.32.063.639.117v2.336s1.104.222 2.21.068V9.363q.49.027.937.023h.017c1.117.013 2.474-.136 3.786-.396.097.622.151 1.386.097 2.284-.146 2.45-1.6 3.99-3.846 4.012h-.091c-2.245-.023-3.7-1.562-3.846-4.011-.054-.9 0-1.663.097-2.285"},child:[]}]})(n)}function WU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},child:[]},{tag:"path",attr:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},child:[]}]})(n)}function YU(n){return Lt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"},child:[]}]})(n)}function t2(n){return Lt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(n)}function XU(n){return Lt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"},child:[]}]})(n)}function ZU(n){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 3H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM9 9H5V5h4v4zm11-6h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-1 6h-4V5h4v4zm-9 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm-1 6H5v-4h4v4zm8-6c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(n)}function JU(n){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"},child:[]}]})(n)}function e7(n){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"},child:[]}]})(n)}function t7(n){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412l7.332 7.332c.17.299.498.492.875.492a.99.99 0 0 0 .792-.409l7.415-7.415c2.354-2.354 2.354-6.049-.002-8.416a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595zm6.791 1.61c1.563 1.571 1.564 4.025.002 5.588L12 18.586l-6.793-6.793c-1.562-1.563-1.561-4.017-.002-5.584.76-.756 1.754-1.172 2.799-1.172s2.035.416 2.789 1.17l.5.5a.999.999 0 0 0 1.414 0l.5-.5c1.512-1.509 4.074-1.505 5.584-.002z"},child:[]}]})(n)}function n2(n){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.205 4.791a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412L12 21.414l8.207-8.207c2.354-2.353 2.355-6.049-.002-8.416z"},child:[]}]})(n)}const n7="_header__wrap_1mmvc_1",i7="_header_1mmvc_1",r7="_icon_1mmvc_61",s7="_header__center_1mmvc_77",a7="_logo__header_1mmvc_107",o7="_searchContainer_1mmvc_115",l7="_searchInput_1mmvc_137",u7="_searchButton_1mmvc_157",c7="_darkOverlay_1mmvc_185",h7="_show_1mmvc_211",f7="_header__left_1mmvc_243",d7="_header__right_1mmvc_247",p7="_hideOnMobile_1mmvc_275",tn={header__wrap:n7,header:i7,icon:r7,header__center:s7,logo__header:a7,searchContainer:o7,searchInput:l7,searchButton:u7,darkOverlay:c7,show:h7,"icon-favorites":"_icon-favorites_1mmvc_221","header__favorite-count":"_header__favorite-count_1mmvc_227",header__left:f7,header__right:d7,"icon-account":"_icon-account_1mmvc_257","icon-cart":"_icon-cart_1mmvc_261",hideOnMobile:p7},i2=()=>{const n=qn(),e=ft(i=>i.favorite.items.length),t=ft(i=>i.auth.user);return A.jsxs("div",{className:tn.header__right,children:[A.jsxs("div",{className:`${tn.icon} ${tn["icon-account"]}`,onClick:()=>n(bO()),children:[A.jsx(XU,{size:24}),A.jsx("span",{children:"Кабинет"})]}),A.jsxs("div",{className:`${tn.icon} ${tn["icon-favorites"]}`,onClick:()=>{n(t?Dd():Il())},children:[e?A.jsx(n2,{style:{fill:"red",stroke:"black",strokeWidth:"2px"},size:24}):A.jsx(t2,{size:24}),A.jsx("span",{children:"Избранное"}),A.jsx("div",{className:tn["header__favorite-count"],children:e||""})]}),A.jsxs("div",{className:`${tn.icon} ${tn["icon-cart"]}`,children:[A.jsx(FU,{size:24}),A.jsx("span",{children:"Корзина"})]})]})},m7=()=>{const[n,e]=F.useState(!1),t=qn();ft(u=>u.favorite.items.length);const i=ft(u=>u.search.query);ft(u=>u.auth.user);const a=()=>{e(!0)},l=()=>{e(!1)};return A.jsx("div",{className:tn.header,children:A.jsxs("div",{className:tn.header__wrap,children:[A.jsx("div",{className:tn.header__left,children:A.jsx("div",{className:tn.logo__header,onClick:()=>{t(QI("Все товары")),t(cS(""))},children:A.jsx(Uy,{to:"/",children:A.jsxs("svg",{width:"100",height:"50",viewBox:"0 -10 150 100",children:[A.jsx("text",{x:"10",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"S"}),A.jsx("text",{x:"140",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"H"}),A.jsx("text",{x:"35",y:"70",fontSize:"90",fontFamily:"Arial",fill:"#6e41e2",children:"O"}),A.jsx("text",{x:"110",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"P"})]})})})}),A.jsxs("div",{className:tn.header__center,children:[A.jsxs("div",{className:tn.searchContainer,children:[A.jsx("input",{type:"text",placeholder:"Поиск...",className:tn.searchInput,onFocus:a,value:i,onChange:u=>t(cS(u.target.value))}),A.jsx("div",{className:tn.searchButton,children:"Найти"})]}),A.jsx("div",{className:`${tn.darkOverlay} ${n?tn.show:""}`,onClick:l})]}),A.jsx("div",{className:tn.hideOnMobile,children:A.jsx(i2,{})})]})})};function r2(n){return Lt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M223.41,32.09,80,134.87,21,123.3A6.23,6.23,0,0,1,20,111.38L222.63,32.07A1,1,0,0,1,223.41,32.09ZM80,200a8,8,0,0,0,13.76,5.56l30.61-31.76L80,134.87Z",opacity:"0.2"},child:[]},{tag:"path",attr:{d:"M228.88,26.19a9,9,0,0,0-9.16-1.57L17.06,103.93a14.22,14.22,0,0,0,2.43,27.21L72,141.45V200a15.92,15.92,0,0,0,10,14.83,15.91,15.91,0,0,0,17.51-3.73l25.32-26.26L165,220a15.88,15.88,0,0,0,10.51,4,16.3,16.3,0,0,0,5-.79,15.85,15.85,0,0,0,10.67-11.63L231.77,35A9,9,0,0,0,228.88,26.19ZM78.15,126.35l-49.61-9.73,139.2-54.48ZM88,200V152.52l24.79,21.74Zm87.53,8L92.85,135.5l119-85.29Z"},child:[]}]})(n)}const _7="_footer_1hhll_1",jt={"footer-wrap":"_footer-wrap_1hhll_1",footer:_7,"footer-content":"_footer-content_1hhll_31","footer-section":"_footer-section_1hhll_49","footer-title":"_footer-title_1hhll_59","footer-text":"_footer-text_1hhll_71","footer-icons":"_footer-icons_1hhll_81","footer-icon":"_footer-icon_1hhll_81","footer-bottom":"_footer-bottom_1hhll_119"},g7=()=>A.jsx("div",{className:jt["footer-wrap"],children:A.jsxs("div",{className:jt.footer,children:[A.jsxs("div",{className:jt["footer-content"],children:[A.jsxs("div",{className:jt["footer-section"],children:[A.jsx("h3",{className:jt["footer-title"],children:"О нас"}),A.jsx("p",{className:jt["footer-text"],children:"Мы предлагаем лучшие товары по отличным ценам. Подписывайтесь на нас в соцсетях!"})]}),A.jsxs("div",{className:jt["footer-section"],children:[A.jsx("h3",{className:jt["footer-title"],children:"Контакты"}),A.jsx("p",{className:jt["footer-text"],children:"Email: support@example.com"}),A.jsx("p",{className:jt["footer-text"],children:"Телефон: +38 555 555 555"})]}),A.jsxs("div",{className:jt["footer-section"],children:[A.jsx("h3",{className:jt["footer-title"],children:"Социальные сети"}),A.jsxs("div",{className:jt["footer-icons"],children:[A.jsx("a",{href:"https://t.me/your_telegram_link",target:"_blank",className:jt["footer-icon"],children:A.jsx(r2,{className:jt["telegram-icon"]})}),A.jsx("a",{href:"https://www.instagram.com/your_instagram_link",target:"_blank",className:jt["footer-icon"],children:A.jsx(GU,{className:jt["instagram-icon"]})}),A.jsx("a",{href:"https://wa.me/your_viber_link",target:"_blank",className:jt["footer-icon"],children:A.jsx(YU,{className:jt["whatsapp-icon"]})})]})]})]}),A.jsx("div",{className:jt["footer-bottom"],children:A.jsx("p",{className:jt["footer-text"],children:"© 2025 Все права защищены."})})]})}),y7=n=>{F.useLayoutEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth;return n?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${e}px`,document.documentElement.style.setProperty("--scrollbar-width",`${e}px`)):(document.body.style.overflow="auto",document.body.style.paddingRight="0",document.documentElement.style.setProperty("--scrollbar-width","0")),()=>{document.body.style.overflow="auto",document.body.style.paddingRight="0",document.documentElement.style.setProperty("--scrollbar-width","0")}},[n])},v7="_defaultButton_1uah1_1",dS={defaultButton:v7};var Og={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var pS;function E7(){return pS||(pS=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var l="",u=0;u<arguments.length;u++){var h=arguments[u];h&&(l=a(l,i(h)))}return l}function i(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return t.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var u="";for(var h in l)e.call(l,h)&&l[h]&&(u=a(u,h));return u}function a(l,u){return u?l?l+" "+u:l+u:l}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Og)),Og.exports}var w7=E7();const T7=Oy(w7);function Jn({children:n,onClick:e,className:t="",customStyle:i,overrideDefault:a=!1}){const l=dS.defaultButton,u=i?dS[i]:null,h=T7(!a&&l,u,t);return A.jsx("div",{className:h,onClick:e,children:n})}const b7="_visible_wna0z_99",St={"auth-form-container":"_auth-form-container_wna0z_1","auth-form-container__value":"_auth-form-container__value_wna0z_35","auth-form":"_auth-form_wna0z_1","auth-form-title":"_auth-form-title_wna0z_53","auth-form-group":"_auth-form-group_wna0z_61","auth-form-group__email":"_auth-form-group__email_wna0z_73","auth-form-group__password":"_auth-form-group__password_wna0z_75","auth-form-error":"_auth-form-error_wna0z_89",visible:b7,"auth-form-button":"_auth-form-button_wna0z_107","auth-form-toggle":"_auth-form-toggle_wna0z_129","auth-form-toggle-link":"_auth-form-toggle-link_wna0z_139","auth-form-container__welcome-emoji-img":"_auth-form-container__welcome-emoji-img_wna0z_159","auth-form-container__wrap-emoji-pointer":"_auth-form-container__wrap-emoji-pointer_wna0z_169","auth-form-container__emoji-pointer":"_auth-form-container__emoji-pointer_wna0z_177"},S7=()=>{const[n,e]=F.useState(!0),[t,i]=F.useState({email:"",password:"",confirmPassword:""}),[a,l]=F.useState(""),[u,h]=F.useState(""),{user:p,isAdmin:m}=ft(V=>V.auth),y=qn(),v=Wl();F.useEffect(()=>{i({email:"",password:"",confirmPassword:""}),l(""),h("")},[n]);const b=async()=>{try{await K3(wd),y(xU()),y(bU()),y($I()),i({email:"",password:"",confirmPassword:""}),h(""),v("/")}catch(V){console.error("Ошибка при выходе:",V)}},I=V=>{const{name:M,value:H}=V.target;i(Q=>({...Q,[M]:H}))},x=async V=>{if(V.preventDefault(),l(""),h(""),!n&&t.password!==t.confirmPassword){l("Пароли не совпадают");return}try{let M;n?M=await q3(wd,t.email,t.password):(M=await B3(wd,t.email,t.password),await Pv(Gi(Fn,"users",M.user.uid),{email:t.email,role:"user"}));const H=await Yc(Gi(Fn,"myStores","admin-1"));if(H.exists()&&H.data().email===t.email)y(xy({user:{email:t.email,uid:M.user.uid},role:"admin"}));else{const Q=await Yc(Gi(Fn,"users",M.user.uid));if(!Q.exists())throw new Error("Данные пользователя не найдены в Firestore.");const z=Q.data().role;y(xy({user:{email:t.email,uid:M.user.uid},role:z}))}h(n?`Вы вошли как ${t.email}`:`Пользователь ${t.email} успешно зарегистрирован`),i({email:"",password:"",confirmPassword:""})}catch(M){switch(console.error("Ошибка аутентификации:",M),M.code){case"auth/email-already-in-use":l("Пользователь с таким email уже существует.");break;case"auth/invalid-email":l("Некорректный email.");break;case"auth/weak-password":l("Пароль должен содержать не менее 6 символов.");break;case"auth/user-not-found":l("Пользователь с таким email не найден.");break;case"auth/wrong-password":l("Неверный пароль.");break;default:l("Неправельный email или password")}}};return F.useEffect(()=>{p&&y(Rh())},[p,y]),p?A.jsxs("div",{className:St["auth-form-container"],children:[A.jsx("div",{className:"auth-form-container__wrap-welcome-emoji-img",children:A.jsx("img",{className:St["auth-form-container__welcome-emoji-img"],src:"/welcome-emoji.png",alt:"веселый смайлик"})}),A.jsx("h2",{className:St["auth-form-title"],children:"Вы вошли в систему"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Email:"}),A.jsx("span",{className:St["auth-form-container__value"],children:p.email})]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Пользователь:"}),A.jsx("span",{className:St["auth-form-container__value"],children:m?"admin":"user"})]}),A.jsx("button",{onClick:b,className:St["auth-form-button"],children:"Выйти"})]}):A.jsxs("div",{className:St["auth-form-container"],children:[A.jsxs("form",{onSubmit:x,className:St["auth-form"],children:[A.jsx("div",{className:St["auth-form-container__wrap-emoji-pointer"],children:A.jsx("img",{src:"/emoji-pointer.png",alt:"смайлик регистрации или входа",className:St["auth-form-container__emoji-pointer"]})}),A.jsx("h2",{className:St["auth-form-title"],children:n?"Вход":"Регистрация"}),A.jsx("p",{className:`${St["auth-form-error"]} ${a?St.visible:""}`,children:a?`${a}`:""}),u&&A.jsx("p",{className:St["auth-form-success"],children:u}),A.jsxs("div",{className:St["auth-form-group"],children:[A.jsx("label",{children:"Email:"}),A.jsx("input",{className:St["auth-form-group__email"],type:"email",name:"email",placeholder:"Email",value:t.email,onChange:I,required:!0})]}),A.jsxs("div",{className:St["auth-form-group"],children:[A.jsx("label",{children:"Пароль:"}),A.jsx("input",{className:St["auth-form-group__password"],type:"password",name:"password",placeholder:"Пароль",value:t.password,onChange:I,required:!0})]}),!n&&A.jsxs("div",{className:St["auth-form-group"],children:[A.jsx("label",{children:"Подтвердите пароль:"}),A.jsx("input",{className:St["auth-form-group__password"],type:"password",name:"confirmPassword",placeholder:"Подтвердите пароль",value:t.confirmPassword,onChange:I,required:!0})]}),A.jsx("button",{type:"submit",className:St["auth-form-button"],children:n?"Войти":"Зарегистрироваться"})]}),A.jsx("div",{className:St["auth-form-toggle"],children:n?A.jsxs("p",{children:["Нет аккаунта?",A.jsx("span",{className:St["auth-form-toggle-link"],onClick:()=>e(!1),children:"Зарегистрироваться"})]}):A.jsxs("p",{children:["Уже есть аккаунт?",A.jsx("span",{className:St["auth-form-toggle-link"],onClick:()=>e(!0),children:"Войти"})]})})]})};function A7(n){return Lt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(n)}const C7="_visible_1n1ih_27",kg={"menu-registration":"_menu-registration_1n1ih_1",visible:C7,"menu-registration__btn":"_menu-registration__btn_1n1ih_35"},R7=F.forwardRef(({isVisible:n},e)=>{const t=qn(),i=()=>{t(zc(!1))};return A.jsxs("div",{ref:e,className:`${kg["menu-registration"]} ${n?kg.visible:""}`,children:[A.jsxs(Jn,{onClick:i,className:kg["menu-registration__btn"],children:[A.jsx(A7,{color:"white",size:30}),A.jsx("span",{children:"Закрыть"})]}),A.jsx("div",{children:A.jsx(S7,{})})]})}),I7="_visible_1p26w_27",sd={"news-section":"_news-section_1p26w_1",visible:I7,"news-section__custom-button-close":"_news-section__custom-button-close_1p26w_35","news-section__wrap":"_news-section__wrap_1p26w_55"},vl={"news-feed":"_news-feed_14pbg_1","news-item":"_news-item_14pbg_9","news-title":"_news-title_14pbg_21","news-content":"_news-content_14pbg_33","news-date":"_news-date_14pbg_41","delete-button":"_delete-button_14pbg_51"},N7=()=>{const n=qn(),e=ft(h=>h.auth.isAdmin),t=ft(h=>h.auth.userId),i=ft(h=>h.news.news),a=ft(h=>h.news.viewedNewsIds);F.useEffect(()=>{const h=f5(_h(Fn,"news"),d5("createdAt","desc")),p=_5(h,m=>{const y=m.docs.map(v=>{var I;const b=v.data();return{id:v.id,...b,createdAt:((I=b.createdAt)==null?void 0:I.toDate().getTime())||null}});n(RU(y))});return()=>p()},[n]),F.useEffect(()=>{if(!t)return;(async()=>{try{const p=Gi(Fn,"users",t),m=await Yc(p);if(m.exists()){const y=m.data(),v=Array.isArray(y.viewedNews)?y.viewedNews:[];n(Dg(v))}else n(Dg([]))}catch(p){console.error("Ошибка при загрузке viewedNews:",p),n(Dg([]))}})()},[t,n]),F.useEffect(()=>{const h=i.filter(p=>!a.includes(p.id));n(IU(h.length))},[i,a,n]),F.useEffect(()=>{if(!t||a.length===0)return;(async()=>{try{await Pv(Gi(Fn,"users",t),{viewedNews:a},{merge:!0})}catch(p){console.error("Ошибка при сохранении viewedNews:",p)}})()},[t,a]);const l=async h=>{if(window.confirm("Удалить эту новость?"))try{await VC(Gi(Fn,"news",h)),alert("Удалено")}catch(m){console.error("Ошибка при удалении:",m),alert("Ошибка при удалении")}},u=h=>h.charAt(0).toUpperCase()+h.slice(1);return A.jsx("div",{className:vl["news-feed"],children:i.map(h=>A.jsxs("div",{className:vl["news-item"],children:[A.jsx("h3",{className:vl["news-title"],children:u(h.title.length>30?h.title.slice(0,35)+"...":h.title)}),A.jsx("p",{className:vl["news-content"],children:u(h.content.length>150?h.content.slice(0,135)+"...":h.content)}),A.jsx("small",{className:vl["news-date"],children:h.createdAt?new Date(h.createdAt).toLocaleString():"Дата не указана"}),e&&A.jsx("button",{onClick:()=>l(h.id),className:vl["delete-button"],children:"Удалить"})]},h.id))})},x7=F.forwardRef(({isVisible:n},e)=>{const t=qn(),i=()=>{t(Bg(!1))};return A.jsx("div",{ref:e,className:`${sd["news-section"]} ${n?sd.visible:""}`,children:A.jsxs("div",{children:[A.jsx(Jn,{className:sd["news-section__custom-button-close"],onClick:i,children:"✖ закрыть"}),A.jsxs("div",{className:sd["news-section__wrap"],children:[A.jsx("strong",{children:"Новости"}),A.jsx(N7,{})]})]})})}),D7="_visible_1eeds_43",O7="_active_1eeds_95",El={"category-list__section":"_category-list__section_1eeds_1",visible:D7,"category-list__container":"_category-list__container_1eeds_51","category-button":"_category-button_1eeds_65",active:O7,"close-button":"_close-button_1eeds_107"},k7=ra.forwardRef(({isVisible:n},e)=>{const t=qn(),{categories:i,selectedCategory:a,status:l}=ft(m=>m.categories),u=[...new Set(i)];F.useEffect(()=>{t(bd())},[t]);const h=()=>{t(qg(!1))},p=m=>{t(QI(m))};return A.jsxs("div",{ref:e,className:`${El["category-list__section"]} ${n?El.visible:""}`,children:[A.jsx(Jn,{className:El["close-button"],onClick:h,children:"✖ закрыть"}),A.jsx("div",{className:El["category-list__container"],children:l==="loading"?A.jsx("p",{children:"Загрузка..."}):l==="failed"?A.jsx("p",{children:"Ошибка загрузки категорий"}):u.map(m=>A.jsx("button",{className:`${El["category-button"]} ${a===m?El.active:""}`,onClick:()=>p(m),children:m},m))})]})});function M7(n){return Lt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"},child:[]},{tag:"path",attr:{d:"M18 14h-8"},child:[]},{tag:"path",attr:{d:"M15 18h-5"},child:[]},{tag:"path",attr:{d:"M10 6h8v4h-8V6Z"},child:[]}]})(n)}const P7="_visible_twsjw_27",Wr={"order-history__section":"_order-history__section_twsjw_1",visible:P7,"order-history__custom-button-close":"_order-history__custom-button-close_twsjw_35","order-history__wrap":"_order-history__wrap_twsjw_55","order-history__animation-blok":"_order-history__animation-blok_twsjw_77","order-history__wrap-loading-smile-img":"_order-history__wrap-loading-smile-img_twsjw_87","order-history__loading-smile-img":"_order-history__loading-smile-img_twsjw_95","order-history__wrap-hourglass-img":"_order-history__wrap-hourglass-img_twsjw_105","order-history__hourglass-img":"_order-history__hourglass-img_twsjw_125"},L7=F.forwardRef(({isVisible:n},e)=>{const t=qn(),i=()=>{t(Gg(!1))};return A.jsx("div",{ref:e,className:`${Wr["order-history__section"]} ${n?Wr.visible:""}`,children:A.jsxs("div",{children:[A.jsx(Jn,{className:Wr["order-history__custom-button-close"],onClick:i,children:"✖ закрыть"}),A.jsxs("div",{className:Wr["order-history__wrap"],children:[A.jsx("h3",{children:"Мои заказы:"}),A.jsxs("div",{className:Wr["order-history__animation-blok"],children:[A.jsx("div",{className:Wr["order-history__wrap-loading-smile-img"],children:A.jsx("img",{className:Wr["order-history__loading-smile-img"],src:"/loading-smile.png",alt:"смайлик с часами"})}),A.jsx("div",{className:Wr["order-history__wrap-hourglass-img"],children:A.jsx("img",{className:Wr["order-history__hourglass-img"],src:"/hourglass.png",alt:"песочные часы"})})]}),A.jsx("p",{children:"Заказов нет ... "})]})]})})}),V7="_visible_xfth0_69",ad={"settings-panel__section":"_settings-panel__section_xfth0_1","settings-panel__wrap":"_settings-panel__wrap_xfth0_31","settings-panel__custom-button-close":"_settings-panel__custom-button-close_xfth0_41",visible:V7},U7=F.forwardRef(({isVisible:n},e)=>{const t=qn(),i=()=>{t(Hg(!1))};return A.jsxs("div",{ref:e,className:`${ad["settings-panel__section"]} ${n?ad.visible:""}`,children:[A.jsx(Jn,{className:ad["settings-panel__custom-button-close"],onClick:i,children:"✖ закрыть"}),A.jsxs("div",{className:ad["settings-panel__wrap"],children:[A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"})]})]})}),j7="_visible_kvgmw_27",z7="_favorite__delete_kvgmw_139",F7="_favorite__icon_kvgmw_163",B7="_favorite__things_kvgmw_191",Qn={"favorite-list":"_favorite-list_kvgmw_1",visible:j7,"favorite-list__custom-button-close":"_favorite-list__custom-button-close_kvgmw_35","favorite-list__wrap":"_favorite-list__wrap_kvgmw_55","favorite-list__card-wrap":"_favorite-list__card-wrap_kvgmw_79","favorite-item__cards":"_favorite-item__cards_kvgmw_87","favorite-item__card":"_favorite-item__card_kvgmw_87","favorite__quantity-controls":"_favorite__quantity-controls_kvgmw_107","favorite__quantity-box":"_favorite__quantity-box_kvgmw_127",favorite__delete:z7,favorite__icon:F7,favorite__things:B7,"favorite-list__total":"_favorite-list__total_kvgmw_203"},q7=F.forwardRef(({isVisible:n},e)=>{const t=qn(),i=Wl(),a=ft(b=>b.auth.user),l=ft(b=>b.products.items),u=ft(b=>b.favorite.items);F.useEffect(()=>{a&&t(Rh())},[a,t]);const h=F.useMemo(()=>u.map(b=>{const I=l.find(x=>x.id===b.productId);return I?{...I,quantity:b.quantity}:null}).filter(Boolean),[l,u]),p=(b,I,x)=>{x.stopPropagation();const V=h.find(H=>H.id===b);if(!V)return;const M=(V.quantity||1)+I;M<=0||t(TU({productId:b,quantity:M}))},m=(b,I)=>{I.stopPropagation(),t(dp(b))},y=b=>{i(`/product/${b}`)},v=h.reduce((b,I)=>b+(I.price||0)*(I.quantity||1),0);return A.jsxs("div",{ref:e,className:`${Qn["favorite-list"]} ${n?Qn.visible:""}`,children:[A.jsx(Jn,{className:Qn["favorite-list__custom-button-close"],onClick:()=>t(Dd(!1)),children:"✖ закрыть"}),A.jsxs("div",{className:Qn["favorite-list__wrap"],children:[A.jsx("strong",{children:"Избранное"}),h.length===0?A.jsx("p",{children:"Список избранного пуст"}):A.jsx("ul",{className:Qn["favorite-list__card-wrap"],children:h.map(b=>{var I,x;return A.jsxs("li",{className:Qn["favorite-item__cards"],onClick:()=>y(b.id),children:[A.jsxs("div",{className:Qn["favorite-item__card"],children:[A.jsx("img",{src:((I=b.imageUrl)==null?void 0:I.split(",")[0])||"/logo.png",alt:b.name,width:50}),A.jsxs("div",{children:[A.jsx("p",{children:b.name.length>50?`${b.name.slice(0,50)}...`:b.name}),A.jsxs("strong",{children:[(x=b.price)==null?void 0:x.toLocaleString("uk-UA")," ₴"]})]})]}),A.jsxs("div",{className:Qn["favorite__quantity-controls"],children:[A.jsxs("div",{className:Qn["favorite__quantity-box"],children:[A.jsx(BU,{className:Qn.favorite__icon,onClick:V=>p(b.id,-1,V)}),A.jsx("div",{className:Qn.favorite__things,children:b.quantity||1}),A.jsx($U,{className:Qn.favorite__icon,onClick:V=>p(b.id,1,V)})]}),A.jsx(WU,{className:Qn.favorite__delete,onClick:V=>m(b.id,V)})]})]},b.id)})}),A.jsxs("div",{className:Qn["favorite-list__total"],children:[A.jsx("strong",{children:"К оплате без доставки:"}),A.jsxs("strong",{children:[v.toLocaleString("uk-UA")," ₴"]})]})]})]})}),H7="_menu_1h3qc_1",G7="_menu__collection_1h3qc_33",$7="_visible_1h3qc_51",K7="_overlay_1h3qc_61",Q7="_active_1h3qc_87",W7="_customButtonMenu_1h3qc_97",Me={menu:H7,menu__collection:G7,visible:$7,overlay:K7,active:Q7,customButtonMenu:W7,"menu__custom-button-close":"_menu__custom-button-close_1h3qc_111","menu-language":"_menu-language_1h3qc_145","shop-soon":"_shop-soon_1h3qc_155","category-panel":"_category-panel_1h3qc_171","news-panel":"_news-panel_1h3qc_173","settings-panel":"_settings-panel_1h3qc_175","orders-panel":"_orders-panel_1h3qc_177","shop-panel":"_shop-panel_1h3qc_179","telegram-panel":"_telegram-panel_1h3qc_181","favorites-panel":"_favorites-panel_1h3qc_183","admin-panel":"_admin-panel_1h3qc_187","category-icon":"_category-icon_1h3qc_223","news-icon":"_news-icon_1h3qc_225","settings-icon":"_settings-icon_1h3qc_227","orders-icon":"_orders-icon_1h3qc_229","shop-icon":"_shop-icon_1h3qc_231","telegram-icon":"_telegram-icon_1h3qc_233","favorites-icon":"_favorites-icon_1h3qc_235","admin-icon":"_admin-icon_1h3qc_237","globe-icon":"_globe-icon_1h3qc_239","category-text":"_category-text_1h3qc_247","news-text":"_news-text_1h3qc_249","settings-text":"_settings-text_1h3qc_251","orders-text":"_orders-text_1h3qc_253","shop-text":"_shop-text_1h3qc_255","telegram-text":"_telegram-text_1h3qc_257","favorites-text":"_favorites-text_1h3qc_259","admin-text":"_admin-text_1h3qc_261","language-text":"_language-text_1h3qc_263","favorites-panel__box":"_favorites-panel__box_1h3qc_281","news-text-wrapper":"_news-text-wrapper_1h3qc_283","favorites-count":"_favorites-count_1h3qc_295","news-count":"_news-count_1h3qc_297"},Y7=()=>{const n=ft(ne=>ne.favorite.items.length),e=ft(ne=>ne.news.newNewsCount),t=ft(ne=>ne.auth.user),i=ft(ne=>ne.auth.isAdmin),{isMenuVisible:a,isRegistrationVisible:l,isNewsSectionVisible:u,isCategoryListVisible:h,isSettingsVisible:p,isOrderHistoryVisible:m,isFavoritesVisible:y}=ft(ne=>ne.menu),v=qn(),b=Wl(),I=F.useRef(null),x=F.useRef(null),V=F.useRef(null),M=F.useRef(null),H=F.useRef(null),Q=F.useRef(null),z=F.useRef(null);y7(a);const te=ne=>{var P,S,T,R,O,L,D;(P=x.current)!=null&&P.contains(ne.target)||(S=V.current)!=null&&S.contains(ne.target)||(T=M.current)!=null&&T.contains(ne.target)||(R=H.current)!=null&&R.contains(ne.target)||(O=Q.current)!=null&&O.contains(ne.target)||(L=z.current)!=null&&L.contains(ne.target)||(D=I.current)!=null&&D.contains(ne.target)||(y?v(Dd(!1)):m?v(Gg(!1)):p?v(Hg(!1)):h?v(qg(!1)):u?v(Bg(!1)):l?v(zc(!1)):a&&v(Yw()))};F.useEffect(()=>(document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}),[a,l,u,h,p,m,y]);const le=()=>{window.open("https://t.me/Student_JS","_blank")};return A.jsxs("div",{className:Me.menu__wrap,children:[A.jsxs("div",{ref:x,className:`${Me.menu} ${a?Me.visible:""}`,children:[A.jsx(Jn,{className:Me["menu__custom-button-close"],accordion:!0,onClick:()=>v(Yw()),children:"✖ закрыть"}),A.jsxs("div",{className:Me.menu__collection,children:[t?A.jsxs("p",{children:["Привет, ",t.name||"как ты","! 🎉🎉🎉"]}):A.jsx("p",{children:"Вы не авторизированы"}),A.jsx(Jn,{className:Me.customButtonMenu,onClick:()=>v(zc()),children:t?"Личные данные":"Войти или зарегистрироваться"}),A.jsxs("div",{className:Me["menu-language"],children:[A.jsx(HU,{className:Me["globe-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["language-text"],children:"Русский"})})]}),i&&A.jsxs("div",{className:Me["admin-panel"],onClick:()=>b("/product-form"),children:[A.jsx(QU,{className:Me["admin-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["admin-text"],children:"Панель администратора"})})]}),A.jsxs("div",{className:Me["category-panel"],onClick:()=>v(qg()),children:[A.jsx(ZU,{className:Me["category-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["category-text"],children:"Категории"})})]}),A.jsxs("div",{className:Me["telegram-panel"],onClick:le,children:[A.jsx(r2,{className:Me["telegram-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["telegram-text"],children:"Telegram"})})]}),A.jsxs("div",{className:Me["favorites-panel"],onClick:()=>v(Dd()),children:[A.jsx(t2,{className:Me["favorites-icon"]}),A.jsxs("div",{className:Me["favorites-panel__box"],children:[A.jsx("p",{className:Me["favorites-text"],children:"избранное"}),n>0&&A.jsx("span",{className:Me["favorites-count"],children:n})]})]}),A.jsxs("div",{className:Me["shop-panel"],children:[A.jsx(KU,{className:Me["shop-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["shop-text"],children:"Создать свой магазин"})}),A.jsx("p",{className:Me["shop-soon"],children:"soon"})]}),A.jsxs("div",{className:Me["orders-panel"],onClick:()=>v(Gg()),children:[A.jsx(zU,{className:Me["orders-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["orders-text"],children:"Мои заказы"})})]}),A.jsxs("div",{className:Me["settings-panel"],onClick:()=>v(Hg()),children:[A.jsx(qU,{className:Me["settings-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Me["settings-text"],children:"Настройки"})})]}),A.jsxs("div",{className:Me["news-panel"],onClick:()=>{v(Bg()),v(NU())},children:[A.jsx(M7,{className:Me["news-icon"]}),A.jsxs("div",{className:Me["news-text-wrapper"],children:[A.jsx("p",{className:Me["news-text"],children:"Новости"}),e>0&&A.jsx("span",{className:Me["news-count"],children:e})]})]})]})]}),A.jsx(R7,{isVisible:l,ref:V}),A.jsx(q7,{isVisible:y,ref:I}),A.jsx(k7,{isVisible:h,ref:M}),A.jsx(x7,{isVisible:u,ref:H}),A.jsx(L7,{isVisible:m,ref:z}),A.jsx(U7,{isVisible:p,ref:Q}),A.jsx("div",{className:`${Me.overlay} ${a||l||u||p||m?Me.active:""}`})]})},X7="_visible_rpnw4_33",Z7="_overlay_rpnw4_41",Vi={"side-panel__wrap":"_side-panel__wrap_rpnw4_1",visible:X7,overlay:Z7,"side-panel__close-button":"_side-panel__close-button_rpnw4_77","side-panel__container":"_side-panel__container_rpnw4_97","side-panel__wrap-small":"_side-panel__wrap-small_rpnw4_125","side-panel__small-img":"_side-panel__small-img_rpnw4_133","side-panel__custom-button-enter":"_side-panel__custom-button-enter_rpnw4_143","side-panel__custom-button-registration":"_side-panel__custom-button-registration_rpnw4_159"},J7=()=>{const n=ft(t=>t.sidePanel.isOpen),e=qn();return A.jsxs("div",{className:Vi["side-panel"],children:[A.jsx("div",{className:`${Vi.overlay} ${n?Vi.visible:""}`,onClick:()=>e(Il())}),A.jsxs("div",{className:`${Vi["side-panel__wrap"]} ${n?Vi.visible:""}`,onClick:t=>t.stopPropagation(),children:[A.jsx(Jn,{className:Vi["side-panel__close-button"],onClick:()=>e(Il()),children:"✖ закрыть"}),A.jsxs("div",{className:Vi["side-panel__container"],children:[A.jsx("div",{className:Vi["side-panel__wrap-small"],children:A.jsx("img",{className:Vi["side-panel__small-img"],src:"/happySmile.png",alt:"смайлик"})}),A.jsx("h3",{children:"Хороший выбор! Сохраняем?"}),A.jsx("p",{children:"Войди или зарегистрируйся, чтобы сохранять товары в Избранное"}),A.jsx(Jn,{onClick:()=>{e(zc()),e(Il())},className:Vi["side-panel__custom-button-enter"],children:"Войти"}),A.jsx(Jn,{onClick:()=>{e(zc()),e(Il())},className:Vi["side-panel__custom-button-registration"],children:"Зарегестрироваться"})]})]})]})},e8="_container_1fyev_1",t8="_footer_1fyev_15",n8="_stickyBottomMobile_1fyev_61",wl={container:e8,"header-wrapper":"_header-wrapper_1fyev_13","footer-wrapper":"_footer-wrapper_1fyev_15",footer:t8,"main-content":"_main-content_1fyev_41",stickyBottomMobile:n8},i8=()=>{const[n,e]=F.useState(!0);return F.useEffect(()=>{const t=()=>{const i=window.scrollY+window.innerHeight;document.documentElement.scrollHeight-i<=20?e(!1):e(!0)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),A.jsxs("div",{className:wl.container,children:[A.jsx("div",{className:wl["header-wrapper"],children:A.jsx(m7,{})}),A.jsx(Y7,{}),A.jsx(J7,{}),A.jsx("main",{className:wl["main-content"],children:A.jsx(Dx,{})}),n&&A.jsx("div",{className:wl.stickyBottomMobile,children:A.jsx(i2,{})}),A.jsx("div",{className:wl["footer-wrapper"],children:A.jsx(g7,{className:wl.footer})})]})},r8=async n=>{const e=new FormData;e.append("image",n);try{const i=await(await fetch(`https://api.imgbb.com/1/upload?key=${_U}`,{method:"POST",body:e})).json();if(i.success)return i.data.url;throw new Error("Ошибка загрузки изображения")}catch(t){throw console.error(t),t}};function s8(n){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(n)}var Sd={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var a8=Sd.exports,mS;function o8(){return mS||(mS=1,function(n,e){((t,i)=>{n.exports=i()})(a8,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},a,l=!i.document&&!!i.postMessage,u=i.IS_PAPA_WORKER||!1,h={},p=0,m={};function y(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var R=le(T);R.chunkSize=parseInt(R.chunkSize),T.step||T.chunk||(R.chunkSize=null),this._handle=new V(R),(this._handle.streamer=this)._config=R}).call(this,S),this.parseChunk=function(T,R){var O=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<O){let D=this._config.newline;D||(L=this._config.quoteChar||'"',D=this._handle.guessLineEndings(T,L)),T=[...T.split(D).slice(O)].join(D)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(T))!==void 0&&(T=L),this.isFirstChunk=!1,this._halted=!1;var O=this._partialLine+T,L=(this._partialLine="",this._handle.parse(O,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=L.meta.cursor,O=(this._finished||(this._partialLine=O.substring(T-this._baseIndex),this._baseIndex=T),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)i.postMessage({results:L,workerId:m.WORKER_ID,finished:O});else if(P(this._config.chunk)&&!R){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!O||!P(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),O||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(T){P(this._config.error)?this._config.error(T):u&&this._config.error&&i.postMessage({workerId:m.WORKER_ID,error:T,finished:!1})}}function v(S){var T;(S=S||{}).chunkSize||(S.chunkSize=m.RemoteChunkSize),y.call(this,S),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(R){this._input=R,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),l||(T.onload=ne(this._chunkLoaded,this),T.onerror=ne(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var R,O=this._config.downloadRequestHeaders;for(R in O)T.setRequestHeader(R,O[R])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+L));try{T.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}l&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(R=>(R=R.getResponseHeader("Content-Range"))!==null?parseInt(R.substring(R.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(R){R=T.statusText||R,this._sendError(new Error(R))}}function b(S){(S=S||{}).chunkSize||(S.chunkSize=m.LocalChunkSize),y.call(this,S);var T,R,O=typeof FileReader<"u";this.stream=function(L){this._input=L,R=L.slice||L.webkitSlice||L.mozSlice,O?((T=new FileReader).onload=ne(this._chunkLoaded,this),T.onerror=ne(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),L=R.call(L,this._start,D)),T.readAsText(L,this._config.encoding));O||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(T.error)}}function I(S){var T;y.call(this,S=S||{}),this.stream=function(R){return T=R,this._nextChunk()},this._nextChunk=function(){var R,O;if(!this._finished)return R=this._config.chunkSize,T=R?(O=T.substring(0,R),T.substring(R)):(O=T,""),this._finished=!T,this.parseChunk(O)}}function x(S){y.call(this,S=S||{});var T=[],R=!0,O=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):R=!0},this._streamData=ne(function(L){try{T.push(typeof L=="string"?L:L.toString(this._config.encoding)),R&&(R=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(D){this._streamError(D)}},this),this._streamError=ne(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=ne(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=ne(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function V(S){var T,R,O,L,D=Math.pow(2,53),ze=-D,gt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ae=this,ue=0,ce=0,ke=!1,be=!1,ve=[],oe={data:[],errors:[],meta:{}};function ge(Ce){return S.skipEmptyLines==="greedy"?Ce.join("").trim()==="":Ce.length===1&&Ce[0].length===0}function Pe(){if(oe&&O&&(bt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),O=!1),S.skipEmptyLines&&(oe.data=oe.data.filter(function(pe){return!ge(pe)})),At()){let pe=function(tt,nt){P(S.transformHeader)&&(tt=S.transformHeader(tt,nt)),ve.push(tt)};if(oe)if(Array.isArray(oe.data[0])){for(var Ce=0;At()&&Ce<oe.data.length;Ce++)oe.data[Ce].forEach(pe);oe.data.splice(0,1)}else oe.data.forEach(pe)}function Ee(pe,tt){for(var nt=S.header?{}:[],He=0;He<pe.length;He++){var Ke=He,Ne=pe[He],Ne=((yn,Ie)=>(lt=>(S.dynamicTypingFunction&&S.dynamicTyping[lt]===void 0&&(S.dynamicTyping[lt]=S.dynamicTypingFunction(lt)),(S.dynamicTyping[lt]||S.dynamicTyping)===!0))(yn)?Ie==="true"||Ie==="TRUE"||Ie!=="false"&&Ie!=="FALSE"&&((lt=>{if(gt.test(lt)&&(lt=parseFloat(lt),ze<lt&&lt<D))return 1})(Ie)?parseFloat(Ie):se.test(Ie)?new Date(Ie):Ie===""?null:Ie):Ie)(Ke=S.header?He>=ve.length?"__parsed_extra":ve[He]:Ke,Ne=S.transform?S.transform(Ne,Ke):Ne);Ke==="__parsed_extra"?(nt[Ke]=nt[Ke]||[],nt[Ke].push(Ne)):nt[Ke]=Ne}return S.header&&(He>ve.length?bt("FieldMismatch","TooManyFields","Too many fields: expected "+ve.length+" fields but parsed "+He,ce+tt):He<ve.length&&bt("FieldMismatch","TooFewFields","Too few fields: expected "+ve.length+" fields but parsed "+He,ce+tt)),nt}var we;oe&&(S.header||S.dynamicTyping||S.transform)&&(we=1,!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(Ee),we=oe.data.length):oe.data=Ee(oe.data,0),S.header&&oe.meta&&(oe.meta.fields=ve),ce+=we)}function At(){return S.header&&ve.length===0}function bt(Ce,Ee,we,pe){Ce={type:Ce,code:Ee,message:we},pe!==void 0&&(Ce.row=pe),oe.errors.push(Ce)}P(S.step)&&(L=S.step,S.step=function(Ce){oe=Ce,At()?Pe():(Pe(),oe.data.length!==0&&(ue+=Ce.data.length,S.preview&&ue>S.preview?R.abort():(oe.data=oe.data[0],L(oe,ae))))}),this.parse=function(Ce,Ee,we){var pe=S.quoteChar||'"',pe=(S.newline||(S.newline=this.guessLineEndings(Ce,pe)),O=!1,S.delimiter?P(S.delimiter)&&(S.delimiter=S.delimiter(Ce),oe.meta.delimiter=S.delimiter):((pe=((tt,nt,He,Ke,Ne)=>{var yn,Ie,lt,Cn;Ne=Ne||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var ti=0;ti<Ne.length;ti++){for(var Hn,xi=Ne[ti],ot=0,kn=0,Ve=0,et=(lt=void 0,new H({comments:Ke,delimiter:xi,newline:nt,preview:10}).parse(tt)),Qt=0;Qt<et.data.length;Qt++)He&&ge(et.data[Qt])?Ve++:(Hn=et.data[Qt].length,kn+=Hn,lt===void 0?lt=Hn:0<Hn&&(ot+=Math.abs(Hn-lt),lt=Hn));0<et.data.length&&(kn/=et.data.length-Ve),(Ie===void 0||ot<=Ie)&&(Cn===void 0||Cn<kn)&&1.99<kn&&(Ie=ot,yn=xi,Cn=kn)}return{successful:!!(S.delimiter=yn),bestDelimiter:yn}})(Ce,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=pe.bestDelimiter:(O=!0,S.delimiter=m.DefaultDelimiter),oe.meta.delimiter=S.delimiter),le(S));return S.preview&&S.header&&pe.preview++,T=Ce,R=new H(pe),oe=R.parse(T,Ee,we),Pe(),ke?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return ke},this.pause=function(){ke=!0,R.abort(),T=P(S.chunk)?"":T.substring(R.getCharIndex())},this.resume=function(){ae.streamer._halted?(ke=!1,ae.streamer.parseChunk(T,!0)):setTimeout(ae.resume,3)},this.aborted=function(){return be},this.abort=function(){be=!0,R.abort(),oe.meta.aborted=!0,P(S.complete)&&S.complete(oe),T=""},this.guessLineEndings=function(tt,pe){tt=tt.substring(0,1048576);var pe=new RegExp(M(pe)+"([^]*?)"+M(pe),"gm"),we=(tt=tt.replace(pe,"")).split("\r"),pe=tt.split(`
`),tt=1<pe.length&&pe[0].length<we[0].length;if(we.length===1||tt)return`
`;for(var nt=0,He=0;He<we.length;He++)we[He][0]===`
`&&nt++;return nt>=we.length/2?`\r
`:"\r"}}function M(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(S){var T=(S=S||{}).delimiter,R=S.newline,O=S.comments,L=S.step,D=S.preview,ze=S.fastMode,gt=null,se=!1,ae=S.quoteChar==null?'"':S.quoteChar,ue=ae;if(S.escapeChar!==void 0&&(ue=S.escapeChar),(typeof T!="string"||-1<m.BAD_DELIMITERS.indexOf(T))&&(T=","),O===T)throw new Error("Comment character same as delimiter");O===!0?O="#":(typeof O!="string"||-1<m.BAD_DELIMITERS.indexOf(O))&&(O=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var ce=0,ke=!1;this.parse=function(be,ve,oe){if(typeof be!="string")throw new Error("Input must be a string");var ge=be.length,Pe=T.length,At=R.length,bt=O.length,Ce=P(L),Ee=[],we=[],pe=[],tt=ce=0;if(!be)return ot();if(ze||ze!==!1&&be.indexOf(ae)===-1){for(var nt=be.split(R),He=0;He<nt.length;He++){if(pe=nt[He],ce+=pe.length,He!==nt.length-1)ce+=R.length;else if(oe)return ot();if(!O||pe.substring(0,bt)!==O){if(Ce){if(Ee=[],Cn(pe.split(T)),kn(),ke)return ot()}else Cn(pe.split(T));if(D&&D<=He)return Ee=Ee.slice(0,D),ot(!0)}}return ot()}for(var Ke=be.indexOf(T,ce),Ne=be.indexOf(R,ce),yn=new RegExp(M(ue)+M(ae),"g"),Ie=be.indexOf(ae,ce);;)if(be[ce]===ae)for(Ie=ce,ce++;;){if((Ie=be.indexOf(ae,Ie+1))===-1)return oe||we.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ee.length,index:ce}),Hn();if(Ie===ge-1)return Hn(be.substring(ce,Ie).replace(yn,ae));if(ae===ue&&be[Ie+1]===ue)Ie++;else if(ae===ue||Ie===0||be[Ie-1]!==ue){Ke!==-1&&Ke<Ie+1&&(Ke=be.indexOf(T,Ie+1));var lt=ti((Ne=Ne!==-1&&Ne<Ie+1?be.indexOf(R,Ie+1):Ne)===-1?Ke:Math.min(Ke,Ne));if(be.substr(Ie+1+lt,Pe)===T){pe.push(be.substring(ce,Ie).replace(yn,ae)),be[ce=Ie+1+lt+Pe]!==ae&&(Ie=be.indexOf(ae,ce)),Ke=be.indexOf(T,ce),Ne=be.indexOf(R,ce);break}if(lt=ti(Ne),be.substring(Ie+1+lt,Ie+1+lt+At)===R){if(pe.push(be.substring(ce,Ie).replace(yn,ae)),xi(Ie+1+lt+At),Ke=be.indexOf(T,ce),Ie=be.indexOf(ae,ce),Ce&&(kn(),ke))return ot();if(D&&Ee.length>=D)return ot(!0);break}we.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ee.length,index:ce}),Ie++}}else if(O&&pe.length===0&&be.substring(ce,ce+bt)===O){if(Ne===-1)return ot();ce=Ne+At,Ne=be.indexOf(R,ce),Ke=be.indexOf(T,ce)}else if(Ke!==-1&&(Ke<Ne||Ne===-1))pe.push(be.substring(ce,Ke)),ce=Ke+Pe,Ke=be.indexOf(T,ce);else{if(Ne===-1)break;if(pe.push(be.substring(ce,Ne)),xi(Ne+At),Ce&&(kn(),ke))return ot();if(D&&Ee.length>=D)return ot(!0)}return Hn();function Cn(Ve){Ee.push(Ve),tt=ce}function ti(Ve){var et=0;return et=Ve!==-1&&(Ve=be.substring(Ie+1,Ve))&&Ve.trim()===""?Ve.length:et}function Hn(Ve){return oe||(Ve===void 0&&(Ve=be.substring(ce)),pe.push(Ve),ce=ge,Cn(pe),Ce&&kn()),ot()}function xi(Ve){ce=Ve,Cn(pe),pe=[],Ne=be.indexOf(R,ce)}function ot(Ve){if(S.header&&!ve&&Ee.length&&!se){var et=Ee[0],Qt={},_s=new Set(et);let gs=!1;for(let Yi=0;Yi<et.length;Yi++){let an=et[Yi];if(Qt[an=P(S.transformHeader)?S.transformHeader(an,Yi):an]){let Gn,Wt=Qt[an];for(;Gn=an+"_"+Wt,Wt++,_s.has(Gn););_s.add(Gn),et[Yi]=Gn,Qt[an]++,gs=!0,(gt=gt===null?{}:gt)[Gn]=an}else Qt[an]=1,et[Yi]=an;_s.add(an)}gs&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:Ee,errors:we,meta:{delimiter:T,linebreak:R,aborted:ke,truncated:!!Ve,cursor:tt+(ve||0),renamedHeaders:gt}}}function kn(){L(ot()),Ee=[],we=[]}},this.abort=function(){ke=!0},this.getCharIndex=function(){return ce}}function Q(S){var T=S.data,R=h[T.workerId],O=!1;if(T.error)R.userError(T.error,T.file);else if(T.results&&T.results.data){var L={abort:function(){O=!0,z(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:te,resume:te};if(P(R.userStep)){for(var D=0;D<T.results.data.length&&(R.userStep({data:T.results.data[D],errors:T.results.errors,meta:T.results.meta},L),!O);D++);delete T.results}else P(R.userChunk)&&(R.userChunk(T.results,L,T.file),delete T.results)}T.finished&&!O&&z(T.workerId,T.results)}function z(S,T){var R=h[S];P(R.userComplete)&&R.userComplete(T),R.terminate(),delete h[S]}function te(){throw new Error("Not implemented.")}function le(S){if(typeof S!="object"||S===null)return S;var T,R=Array.isArray(S)?[]:{};for(T in S)R[T]=le(S[T]);return R}function ne(S,T){return function(){S.apply(T,arguments)}}function P(S){return typeof S=="function"}return m.parse=function(S,T){var R=(T=T||{}).dynamicTyping||!1;if(P(R)&&(T.dynamicTypingFunction=R,R={}),T.dynamicTyping=R,T.transform=!!P(T.transform)&&T.transform,!T.worker||!m.WORKERS_SUPPORTED)return R=null,m.NODE_STREAM_INPUT,typeof S=="string"?(S=(O=>O.charCodeAt(0)!==65279?O:O.slice(1))(S),R=new(T.download?v:I)(T)):S.readable===!0&&P(S.read)&&P(S.on)?R=new x(T):(i.File&&S instanceof File||S instanceof Object)&&(R=new b(T)),R.stream(S);(R=(()=>{var O;return!!m.WORKERS_SUPPORTED&&(O=(()=>{var L=i.URL||i.webkitURL||null,D=t.toString();return m.BLOB_URL||(m.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(O=new i.Worker(O)).onmessage=Q,O.id=p++,h[O.id]=O)})()).userStep=T.step,R.userChunk=T.chunk,R.userComplete=T.complete,R.userError=T.error,T.step=P(T.step),T.chunk=P(T.chunk),T.complete=P(T.complete),T.error=P(T.error),delete T.worker,R.postMessage({input:S,config:T,workerId:R.id})},m.unparse=function(S,T){var R=!1,O=!0,L=",",D=`\r
`,ze='"',gt=ze+ze,se=!1,ae=null,ue=!1,ce=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||m.BAD_DELIMITERS.filter(function(ve){return T.delimiter.indexOf(ve)!==-1}).length||(L=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(R=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(se=T.skipEmptyLines),typeof T.newline=="string"&&(D=T.newline),typeof T.quoteChar=="string"&&(ze=T.quoteChar),typeof T.header=="boolean"&&(O=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");ae=T.columns}T.escapeChar!==void 0&&(gt=T.escapeChar+ze),T.escapeFormulae instanceof RegExp?ue=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(ue=/^[=+\-@\t\r].*$/)}})(),new RegExp(M(ze),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return ke(null,S,se);if(typeof S[0]=="object")return ke(ae||Object.keys(S[0]),S,se)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||ae),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),ke(S.fields||[],S.data||[],se);throw new Error("Unable to serialize unrecognized input");function ke(ve,oe,ge){var Pe="",At=(typeof ve=="string"&&(ve=JSON.parse(ve)),typeof oe=="string"&&(oe=JSON.parse(oe)),Array.isArray(ve)&&0<ve.length),bt=!Array.isArray(oe[0]);if(At&&O){for(var Ce=0;Ce<ve.length;Ce++)0<Ce&&(Pe+=L),Pe+=be(ve[Ce],Ce);0<oe.length&&(Pe+=D)}for(var Ee=0;Ee<oe.length;Ee++){var we=(At?ve:oe[Ee]).length,pe=!1,tt=At?Object.keys(oe[Ee]).length===0:oe[Ee].length===0;if(ge&&!At&&(pe=ge==="greedy"?oe[Ee].join("").trim()==="":oe[Ee].length===1&&oe[Ee][0].length===0),ge==="greedy"&&At){for(var nt=[],He=0;He<we;He++){var Ke=bt?ve[He]:He;nt.push(oe[Ee][Ke])}pe=nt.join("").trim()===""}if(!pe){for(var Ne=0;Ne<we;Ne++){0<Ne&&!tt&&(Pe+=L);var yn=At&&bt?ve[Ne]:Ne;Pe+=be(oe[Ee][yn],Ne)}Ee<oe.length-1&&(!ge||0<we&&!tt)&&(Pe+=D)}}return Pe}function be(ve,oe){var ge,Pe;return ve==null?"":ve.constructor===Date?JSON.stringify(ve).slice(1,25):(Pe=!1,ue&&typeof ve=="string"&&ue.test(ve)&&(ve="'"+ve,Pe=!0),ge=ve.toString().replace(ce,gt),(Pe=Pe||R===!0||typeof R=="function"&&R(ve,oe)||Array.isArray(R)&&R[oe]||((At,bt)=>{for(var Ce=0;Ce<bt.length;Ce++)if(-1<At.indexOf(bt[Ce]))return!0;return!1})(ge,m.BAD_DELIMITERS)||-1<ge.indexOf(L)||ge.charAt(0)===" "||ge.charAt(ge.length-1)===" ")?ze+ge+ze:ge)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!l&&!!i.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=H,m.ParserHandle=V,m.NetworkStreamer=v,m.FileStreamer=b,m.StringStreamer=I,m.ReadableStreamStreamer=x,i.jQuery&&((a=i.jQuery).fn.parse=function(S){var T=S.config||{},R=[];return this.each(function(D){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var ze=0;ze<this.files.length;ze++)R.push({file:this.files[ze],inputElem:this,instanceConfig:a.extend({},T)})}),O(),this;function O(){if(R.length===0)P(S.complete)&&S.complete();else{var D,ze,gt,se,ae=R[0];if(P(S.before)){var ue=S.before(ae.file,ae.inputElem);if(typeof ue=="object"){if(ue.action==="abort")return D="AbortError",ze=ae.file,gt=ae.inputElem,se=ue.reason,void(P(S.error)&&S.error({name:D},ze,gt,se));if(ue.action==="skip")return void L();typeof ue.config=="object"&&(ae.instanceConfig=a.extend(ae.instanceConfig,ue.config))}else if(ue==="skip")return void L()}var ce=ae.instanceConfig.complete;ae.instanceConfig.complete=function(ke){P(ce)&&ce(ke,ae.file,ae.inputElem),L()},m.parse(ae.file,ae.instanceConfig)}}function L(){R.splice(0,1),O()}}),u&&(i.onmessage=function(S){S=S.data,m.WORKER_ID===void 0&&S&&(m.WORKER_ID=S.workerId),typeof S.input=="string"?i.postMessage({workerId:m.WORKER_ID,results:m.parse(S.input,S.config),finished:!0}):(i.File&&S.input instanceof File||S.input instanceof Object)&&(S=m.parse(S.input,S.config))&&i.postMessage({workerId:m.WORKER_ID,results:S,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(b.prototype=Object.create(y.prototype)).constructor=b,(I.prototype=Object.create(I.prototype)).constructor=I,(x.prototype=Object.create(y.prototype)).constructor=x,m})}(Sd)),Sd.exports}var l8=o8();const u8=Oy(l8),c8=()=>{const[n,e]=F.useState(""),t=i=>{const a=i.target.files[0];a&&u8.parse(a,{header:!0,skipEmptyLines:!0,complete:async l=>{const u=l.data;e("Загрузка...");for(const h of u)try{await Pv(Gi(Fn,"products",h.Артикул),{name:h["Название товара"],sku:h.Артикул,price:Number(h["Рекомендовання розничная цена"]),purchase:Number(h["Дроп цена для партнера"]),stock:h.Наличие==="instock",imageUrl:h.Изображения,description:h["Описание товара"],category:h["Категории товара"],subcategory:h.Подкатегории})}catch(p){console.error("Ошибка загрузки:",h,p)}e("✅ Загрузка завершена")}})};return A.jsxs("div",{children:[A.jsx("input",{type:"file",accept:".csv",onChange:t}),A.jsx("p",{children:n})]})},h8="_form_1rx3x_27",f8="_form__field_1rx3x_69",d8="_form__label_1rx3x_81",p8="_form__input_1rx3x_91",m8="_form__fileInput_1rx3x_105",_8="_form__image_1rx3x_135",g8="_form__error_1rx3x_145",y8="_form__success_1rx3x_155",ht={"product-form":"_product-form_1rx3x_1","product-form__title":"_product-form__title_1rx3x_13","form__up-load":"_form__up-load_1rx3x_27","form__up-load--component":"_form__up-load--component_1rx3x_41",form:h8,form__field:f8,form__label:d8,form__input:p8,form__fileInput:m8,"form-wrap__add-img":"_form-wrap__add-img_1rx3x_115",form__image:_8,form__error:g8,form__success:y8,"form__input--error":"_form__input--error_1rx3x_197","form__fileInput--error":"_form__fileInput--error_1rx3x_205"},gc={"editor-container":"_editor-container_1upn8_1","editor-title":"_editor-title_1upn8_19","editor-input":"_editor-input_1upn8_31","editor-textarea":"_editor-textarea_1upn8_33","editor-button":"_editor-button_1upn8_63"},v8=()=>{const[n,e]=F.useState(""),[t,i]=F.useState(""),a=async()=>{if(!n||!t)return alert("Заполни все поля");try{await UC(_h(Fn,"news"),{title:n,content:t,createdAt:$t.now()}),e(""),i(""),alert("Новость опубликована")}catch(l){console.error("Ошибка публикации:",l),alert("Ошибка при публикации")}};return A.jsxs("div",{className:gc["editor-container"],children:[A.jsx("h2",{className:gc["editor-title"],children:"Создать новость"}),A.jsx("input",{type:"text",placeholder:"Заголовок",value:n,onChange:l=>e(l.target.value),className:gc["editor-input"]}),A.jsx("textarea",{placeholder:"Текст новости",value:t,onChange:l=>i(l.target.value),className:gc["editor-textarea"]}),A.jsx("button",{onClick:a,className:gc["editor-button"],children:"Опубликовать"})]})},E8=()=>{const n=qn(),[e,t]=F.useState({category:"Все товары",imageUrl:"",name:"",description:"",price:""}),[i,a]=F.useState(!1),[l,u]=F.useState(null),[h,p]=F.useState({category:!1,name:!1,description:!1,price:!1,imageUrl:!1}),m=F.useRef(null),y=I=>{const{name:x,value:V}=I.target;t({...e,[x]:V})},v=async I=>{const x=I.target.files[0];if(x)try{const V=await r8(x);t({...e,imageUrl:V})}catch{u("Ошибка загрузки изображения")}},b=async I=>{I.preventDefault();let x={category:!e.category,name:!e.name,description:!e.description,price:isNaN(e.price)||e.price<=0,imageUrl:!e.imageUrl};if(p(x),Object.values(x).includes(!0)){u("Пожалуйста, заполните все поля корректно.");return}u(null);try{await n(HI({...e,price:Number(e.price)})),a(!0),alert("Товар добавлен!"),t({name:"",description:"",price:"",imageUrl:"",category:""}),m.current&&(m.current.value="")}catch(V){console.error("Ошибка при добавлении товара:",V),u("Ошибка при добавлении товара в базу.")}};return A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:ht["product-form__title"],children:"Admin room"}),A.jsxs("div",{className:ht["product-form"],children:[A.jsxs("form",{className:ht.form,onSubmit:b,children:[A.jsx("h4",{children:A.jsx("u",{children:"Загрузка индивидуального товара"})}),A.jsxs("div",{className:ht.form__field,children:[A.jsx("label",{className:ht.form__label,children:"Категория:"}),A.jsxs("select",{className:`${ht.form__input} ${h.category?ht["form__input--error"]:""}`,name:"category",value:e.category,onChange:y,children:[A.jsx("option",{value:"Все товары",children:"Все товары"}),A.jsx("option",{value:"Машины",children:"Машины"}),A.jsx("option",{value:"Аксессуары",children:"Аксессуары"}),A.jsx("option",{value:"Смартфоны",children:"Смартфоны"}),A.jsx("option",{value:"Ноутбуки",children:"Ноутбуки"}),A.jsx("option",{value:"Носки",children:"Носки"})]})]}),A.jsxs("div",{className:ht.form__field,children:[A.jsx("label",{className:ht.form__label,children:"Название товара:"}),A.jsx("input",{className:`${ht.form__input} ${h.name?ht["form__input--error"]:""}`,type:"text",name:"name",placeholder:"Название товара",value:e.name,onChange:y})]}),A.jsxs("div",{className:ht.form__field,children:[A.jsx("label",{className:ht.form__label,children:"Описание товара:"}),A.jsx("input",{className:`${ht.form__input} ${h.description?ht["form__input--error"]:""}`,type:"text",name:"description",placeholder:"Описание товара",value:e.description,onChange:y})]}),A.jsxs("div",{className:ht.form__field,children:[A.jsx("label",{className:ht.form__label,children:"Цена:"}),A.jsx("input",{className:`${ht.form__input} ${h.price?ht["form__input--error"]:""}`,type:"number",name:"price",placeholder:"Цена",value:e.price,onChange:y})]}),A.jsxs("div",{className:ht.form__field,children:[A.jsx("label",{className:ht.form__label,children:"Изображение товара:"}),A.jsx("input",{ref:m,className:`${ht.form__fileInput} ${h.imageUrl?ht["form__fileInput--error"]:""}`,type:"file",accept:"image/*",onChange:v}),A.jsx("div",{className:ht["form-wrap__add-img"],children:e.imageUrl?A.jsx("img",{className:ht.form__image,src:e.imageUrl,alt:"Uploaded"}):A.jsx(s8,{})})]}),l&&A.jsx("p",{className:ht.form__error,children:l}),i&&A.jsx("p",{className:ht.form__success,children:"Товар успешно добавлен!"}),A.jsx(Jn,{onClick:b,children:"Добавить товар"})]}),A.jsxs("div",{className:ht["form__up-load"],children:[A.jsx("h4",{children:A.jsx("u",{children:"Загрузка файлов типов .CSV"})}),A.jsx("div",{className:ht["form__up-load--component"],children:A.jsx(c8,{})})]}),A.jsx("div",{children:A.jsx("div",{children:A.jsx(v8,{})})})]})]})},w8="_spinner_1t56x_3",T8="_circle_1t56x_25",b8="_little_1t56x_47",S8="_small_1t56x_63",A8="_medium_1t56x_79",C8="_large_1t56x_95",Yr={spinner:w8,circle:T8,little:b8,small:S8,medium:A8,large:C8},s2=()=>A.jsxs("div",{className:Yr.spinner,children:[A.jsx("div",{className:`${Yr.circle} ${Yr.little}`}),A.jsx("div",{className:`${Yr.circle} ${Yr.small}`}),A.jsx("div",{className:`${Yr.circle} ${Yr.medium}`}),A.jsx("div",{className:`${Yr.circle} ${Yr.large}`})]}),od={"confirm-modal":"_confirm-modal_9tqup_1","confirm-modal__buttons-wrap":"_confirm-modal__buttons-wrap_9tqup_25","confirm-modal__button":"_confirm-modal__button_9tqup_25"},R8=({handleDelete:n,product:e,setIsModalOpen:t})=>A.jsxs("div",{className:od["confirm-modal"],children:[A.jsx("p",{children:"Вы уверены, что хотите удалить?"}),A.jsxs("div",{className:od["confirm-modal__buttons-wrap"],children:[A.jsx("div",{className:od["confirm-modal__button"],onClick:()=>{n(e.id,e.imageUrl),t(!1)},children:"Да"}),A.jsx("div",{className:od["confirm-modal__button"],onClick:()=>t(!1),children:"Нет"})]})]}),I8="_preloader_1as5n_121",jn={"product-list__box":"_product-list__box_1as5n_1","product-list__ul":"_product-list__ul_1as5n_11","product-list__card":"_product-list__card_1as5n_29","product-list__name":"_product-list__name_1as5n_55","product-list__description":"_product-list__description_1as5n_75","product-ist__custom-button":"_product-ist__custom-button_1as5n_87","product-list__img-wrap":"_product-list__img-wrap_1as5n_95","product-list__img":"_product-list__img_1as5n_95",preloader:I8,"product-ist__delete-button":"_product-ist__delete-button_1as5n_139","product-ist__custom-button--add-product":"_product-ist__custom-button--add-product_1as5n_149","product-list__favorite-icon":"_product-list__favorite-icon_1as5n_169","product-ist__wrap-button":"_product-ist__wrap-button_1as5n_195"},N8=()=>{const[n,e]=F.useState(null),[t,i]=F.useState(!1),[a,l]=F.useState(36);ft(z=>z.auth.user);const u=ft(z=>z.search.query),h=ft(z=>z.favorite.items),{isAdmin:p}=ft(z=>z.auth),m=ft(z=>!!z.auth.user),y=qn(),v=Wl(),{items:b,status:I,error:x}=ft(z=>z.products),V=ft(z=>z.categories.selectedCategory);F.useEffect(()=>{y(Td())},[y]);let M=[];u.trim()?M=b.filter(z=>z.name.toLowerCase().includes(u.toLowerCase())):M=V==="Все товары"?b:b.filter(z=>z.category===V);const H=async(z,te)=>{try{await y(qI(z)),console.log(`Изображение для удаления: ${te}`)}catch(le){console.error("Ошибка при удалении продукта: ",le)}},Q=()=>{l(z=>z+36)};return A.jsxs("div",{className:jn["product-list__box"],children:[t&&A.jsx(R8,{handleDelete:H,product:n,setIsModalOpen:i}),I==="loading"?A.jsx("div",{className:jn.preloader,children:A.jsx(s2,{})}):I==="failed"?A.jsxs("div",{children:["Error: ",x]}):M.length===0?A.jsx("div",{className:jn["product-list__box"],children:A.jsx("p",{children:"Товаров нет."})}):A.jsx("ul",{className:jn["product-list__ul"],children:M.slice(0,a).map(z=>{var P,S;const te=h.some(T=>T.productId===z.id),le=z.name,ne=le.charAt(0).toUpperCase()+le.slice(1);return A.jsxs("li",{className:jn["product-list__card"],onClick:()=>v(`/product/${z.id}`),children:[A.jsxs("div",{className:jn["product-list__img-wrap"],children:[A.jsx("img",{src:z.imageUrl?z.imageUrl.split(",")[0]:"/logo.png",alt:"логотип",className:jn["product-list__img"]}),A.jsx("div",{className:jn["product-list__favorite-icon"],onClick:T=>{T.preventDefault(),T.stopPropagation(),y(m?dp(z.id):Il())},children:te?A.jsx(n2,{style:{fill:"red",stroke:"black",strokeWidth:"1px"}}):A.jsx(t7,{})})]}),A.jsx("div",{children:A.jsxs("ul",{className:jn["product-list__wrap-title"],children:[A.jsx("li",{className:jn["product-list__name"],children:ne}),A.jsx("li",{className:jn["product-list__description"]}),A.jsx("li",{children:A.jsxs("strong",{children:["Цена  ",(P=z.price)==null?void 0:P.toLocaleString("uk-UA")," ₴"]})}),A.jsxs("li",{style:{color:"red"},children:["Дроп  ",(S=z.purchase)==null?void 0:S.toLocaleString("uk-UA")," ₴"]})]})}),A.jsxs("div",{className:jn["product-ist__wrap-button"],children:[p&&A.jsx("button",{className:jn["product-ist__delete-button"],onClick:T=>{T.stopPropagation(),i(!0),e(z)},children:"delete"}),A.jsx(Jn,{className:jn["product-ist__custom-button"],onClick:T=>{T.stopPropagation(),console.log("Купить")},children:"Купить"})]})]},z.id)})}),V==="Все товары"&&!u.trim()&&A.jsx(Jn,{onClick:Q,className:jn["product-ist__custom-button--add-product"],children:"Показать еще"})]})};function x8(){return A.jsx("div",{children:A.jsx(N8,{})})}const D8="_slide_1x74w_53",O8="_dot_1x74w_193",dn={"product-details":"_product-details_1x74w_1","product-content":"_product-content_1x74w_13","wrap-slider":"_wrap-slider_1x74w_25","product-image-box":"_product-image-box_1x74w_39","slider-container":"_slider-container_1x74w_53","image-slider":"_image-slider_1x74w_67",slide:D8,"main-image":"_main-image_1x74w_95","arrow-left":"_arrow-left_1x74w_109","arrow-right":"_arrow-right_1x74w_139","image-dots":"_image-dots_1x74w_179",dot:O8,"active-dot":"_active-dot_1x74w_219","product-info":"_product-info_1x74w_227","product-name":"_product-name_1x74w_245","product-description":"_product-description_1x74w_255","product-price":"_product-price_1x74w_267","error-message":"_error-message_1x74w_279"},k8=()=>{const{id:n}=gx(),[e,t]=F.useState(null),[i,a]=F.useState(!0),[l,u]=F.useState(null),[h,p]=F.useState([]),[m,y]=F.useState(0),[v,b]=F.useState(!0);F.useEffect(()=>{(async()=>{try{const M=Gi(Fn,"products",n),H=await Yc(M);if(H.exists()){const Q=H.data(),z=Q.imageUrl.split(",").slice(0,15);t(Q),p(z),y(0)}else u("Товар не найден")}catch{u("Ошибка загрузки данных")}finally{a(!1)}})()},[n]);const I=V=>{b(!0),y(V==="left"?M=>M===0?h.length-1:M-1:M=>M===h.length-1?0:M+1)},x=V=>{b(!0),y(V)};return i?A.jsx(s2,{}):l?A.jsx("p",{className:dn["error-message"],children:l}):A.jsx("div",{className:dn["product-details"],children:A.jsxs("div",{className:dn["product-content"],children:[A.jsxs("div",{className:dn["wrap-slider"],children:[A.jsxs("div",{className:dn["product-image-box"],children:[h.length>1&&A.jsx(JU,{className:dn["arrow-left"],onClick:()=>I("left")}),A.jsx("div",{className:dn["slider-container"],children:A.jsx("div",{className:dn["image-slider"],style:{transform:`translateX(-${m*100}%)`,transition:v?"transform 0.5s ease-in-out":"none"},children:h.map((V,M)=>A.jsx("div",{className:dn.slide,children:A.jsx("img",{src:V,alt:`${e.name} ${M+1}`,className:dn["main-image"]})},M))})}),h.length>1&&A.jsx(e7,{className:dn["arrow-right"],onClick:()=>I("right")})]}),h.length>1&&A.jsx("div",{className:dn["image-dots"],children:h.map((V,M)=>A.jsx("span",{className:`${dn.dot} ${M===m?dn["active-dot"]:""}`,onClick:()=>x(M)},M))})]}),A.jsxs("div",{className:dn["product-info"],children:[A.jsx("h2",{className:dn["product-name"],children:e.name}),A.jsx("p",{className:dn["product-description"],children:e.description}),A.jsxs("p",{className:dn["product-price"],children:["Цена: $",e.price]})]})]})})};function M8({children:n}){const e=ft(a=>a.auth.user),t=ft(a=>a.auth.isAdmin),i=Wl();return F.useEffect(()=>{(!e||!t)&&i("/")},[t,e]),e&&t?n:null}const P8=()=>A.jsx(kx,{children:A.jsxs(yc,{path:"/",element:A.jsx(i8,{}),children:[A.jsx(yc,{index:!0,element:A.jsx(x8,{})}),A.jsx(yc,{path:"product-form",element:A.jsx(M8,{children:A.jsx(E8,{})})}),A.jsx(yc,{path:"/product/:id",element:A.jsx(k8,{})})]})}),L8=({children:n})=>{const e=qn();return F.useEffect(()=>{const t=gU(async i=>{if(i)try{const a=Gi(Fn,"users",i.uid),l=await Yc(a),u=l.exists()?l.data():{};e(xy({user:{email:i.email,uid:i.uid},role:u.role||"user"}))}catch(a){console.error("Ошибка при получении роли из Firestore:",a)}else e($I())});return()=>t()},[e]),n},V8=()=>A.jsx(RD,{store:OU,children:A.jsx(iD,{children:A.jsx(L8,{children:A.jsx(P8,{})})})});jN.createRoot(document.getElementById("root")).render(A.jsx(F.StrictMode,{children:A.jsx(V8,{})}));
