var UN=Object.defineProperty;var jN=(n,e,t)=>e in n?UN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var eg=(n,e,t)=>jN(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Ly(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tg={exports:{}},hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function zN(){if(NT)return hc;NT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return hc.Fragment=e,hc.jsx=t,hc.jsxs=t,hc}var xT;function FN(){return xT||(xT=1,tg.exports=zN()),tg.exports}var A=FN(),ng={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function BN(){if(OT)return Pe;OT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,U={};function k(V,W,oe){this.props=V,this.context=W,this.refs=U,this.updater=oe||I}k.prototype.isReactComponent={},k.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function H(){}H.prototype=k.prototype;function Y(V,W,oe){this.props=V,this.context=W,this.refs=U,this.updater=oe||I}var F=Y.prototype=new H;F.constructor=Y,x(F,k.prototype),F.isPureReactComponent=!0;var ie=Array.isArray,re={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function P(V,W,oe,Z,ue,ve){return oe=ve.ref,{$$typeof:n,type:V,key:W,ref:oe!==void 0?oe:null,props:ve}}function b(V,W){return P(V.type,W,void 0,void 0,void 0,V.props)}function w(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function R(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return W[oe]})}var D=/\/+/g;function L(V,W){return typeof V=="object"&&V!==null&&V.key!=null?R(""+V.key):W.toString(36)}function O(){}function Ve(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(O,O):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function nt(V,W,oe,Z,ue){var ve=typeof V;(ve==="undefined"||ve==="boolean")&&(V=null);var Ee=!1;if(V===null)Ee=!0;else switch(ve){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(V.$$typeof){case n:case e:Ee=!0;break;case g:return Ee=V._init,nt(Ee(V._payload),W,oe,Z,ue)}}if(Ee)return ue=ue(V),Ee=Z===""?"."+L(V,0):Z,ie(ue)?(oe="",Ee!=null&&(oe=Ee.replace(D,"$&/")+"/"),nt(ue,W,oe,"",function(Se){return Se})):ue!=null&&(w(ue)&&(ue=b(ue,oe+(ue.key==null||V&&V.key===ue.key?"":(""+ue.key).replace(D,"$&/")+"/")+Ee)),W.push(ue)),1;Ee=0;var it=Z===""?".":Z+":";if(ie(V))for(var me=0;me<V.length;me++)Z=V[me],ve=it+L(Z,me),Ee+=nt(Z,W,oe,ve,ue);else if(me=S(V),typeof me=="function")for(V=me.call(V),me=0;!(Z=V.next()).done;)Z=Z.value,ve=it+L(Z,me++),Ee+=nt(Z,W,oe,ve,ue);else if(ve==="object"){if(typeof V.then=="function")return nt(Ve(V),W,oe,Z,ue);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function le(V,W,oe){if(V==null)return V;var Z=[],ue=0;return nt(V,Z,"","",function(ve){return W.call(oe,ve,ue++)}),Z}function ce(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var de=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function pe(){}return Pe.Children={map:le,forEach:function(V,W,oe){le(V,function(){W.apply(this,arguments)},oe)},count:function(V){var W=0;return le(V,function(){W++}),W},toArray:function(V){return le(V,function(W){return W})||[]},only:function(V){if(!w(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Pe.Component=k,Pe.Fragment=t,Pe.Profiler=a,Pe.PureComponent=Y,Pe.StrictMode=i,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Pe.act=function(){throw Error("act(...) is not supported in production builds of React.")},Pe.cache=function(V){return function(){return V.apply(null,arguments)}},Pe.cloneElement=function(V,W,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Z=x({},V.props),ue=V.key,ve=void 0;if(W!=null)for(Ee in W.ref!==void 0&&(ve=void 0),W.key!==void 0&&(ue=""+W.key),W)!ae.call(W,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&W.ref===void 0||(Z[Ee]=W[Ee]);var Ee=arguments.length-2;if(Ee===1)Z.children=oe;else if(1<Ee){for(var it=Array(Ee),me=0;me<Ee;me++)it[me]=arguments[me+2];Z.children=it}return P(V.type,ue,void 0,void 0,ve,Z)},Pe.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Pe.createElement=function(V,W,oe){var Z,ue={},ve=null;if(W!=null)for(Z in W.key!==void 0&&(ve=""+W.key),W)ae.call(W,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ue[Z]=W[Z]);var Ee=arguments.length-2;if(Ee===1)ue.children=oe;else if(1<Ee){for(var it=Array(Ee),me=0;me<Ee;me++)it[me]=arguments[me+2];ue.children=it}if(V&&V.defaultProps)for(Z in Ee=V.defaultProps,Ee)ue[Z]===void 0&&(ue[Z]=Ee[Z]);return P(V,ve,void 0,void 0,null,ue)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(V){return{$$typeof:h,render:V}},Pe.isValidElement=w,Pe.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:ce}},Pe.memo=function(V,W){return{$$typeof:m,type:V,compare:W===void 0?null:W}},Pe.startTransition=function(V){var W=re.T,oe={};re.T=oe;try{var Z=V(),ue=re.S;ue!==null&&ue(oe,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(pe,de)}catch(ve){de(ve)}finally{re.T=W}},Pe.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Pe.use=function(V){return re.H.use(V)},Pe.useActionState=function(V,W,oe){return re.H.useActionState(V,W,oe)},Pe.useCallback=function(V,W){return re.H.useCallback(V,W)},Pe.useContext=function(V){return re.H.useContext(V)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(V,W){return re.H.useDeferredValue(V,W)},Pe.useEffect=function(V,W){return re.H.useEffect(V,W)},Pe.useId=function(){return re.H.useId()},Pe.useImperativeHandle=function(V,W,oe){return re.H.useImperativeHandle(V,W,oe)},Pe.useInsertionEffect=function(V,W){return re.H.useInsertionEffect(V,W)},Pe.useLayoutEffect=function(V,W){return re.H.useLayoutEffect(V,W)},Pe.useMemo=function(V,W){return re.H.useMemo(V,W)},Pe.useOptimistic=function(V,W){return re.H.useOptimistic(V,W)},Pe.useReducer=function(V,W,oe){return re.H.useReducer(V,W,oe)},Pe.useRef=function(V){return re.H.useRef(V)},Pe.useState=function(V){return re.H.useState(V)},Pe.useSyncExternalStore=function(V,W,oe){return re.H.useSyncExternalStore(V,W,oe)},Pe.useTransition=function(){return re.H.useTransition()},Pe.version="19.0.0",Pe}var DT;function yp(){return DT||(DT=1,ng.exports=BN()),ng.exports}var B=yp();const aa=Ly(B);var ig={exports:{}},fc={},rg={exports:{}},sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function qN(){return kT||(kT=1,function(n){function e(le,ce){var de=le.length;le.push(ce);e:for(;0<de;){var pe=de-1>>>1,V=le[pe];if(0<a(V,ce))le[pe]=ce,le[de]=V,de=pe;else break e}}function t(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var ce=le[0],de=le.pop();if(de!==ce){le[0]=de;e:for(var pe=0,V=le.length,W=V>>>1;pe<W;){var oe=2*(pe+1)-1,Z=le[oe],ue=oe+1,ve=le[ue];if(0>a(Z,de))ue<V&&0>a(ve,Z)?(le[pe]=ve,le[ue]=de,pe=ue):(le[pe]=Z,le[oe]=de,pe=oe);else if(ue<V&&0>a(ve,de))le[pe]=ve,le[ue]=de,pe=ue;else break e}}return ce}function a(le,ce){var de=le.sortIndex-ce.sortIndex;return de!==0?de:le.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],g=1,v=null,S=3,I=!1,x=!1,U=!1,k=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function F(le){for(var ce=t(m);ce!==null;){if(ce.callback===null)i(m);else if(ce.startTime<=le)i(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(m)}}function ie(le){if(U=!1,F(le),!x)if(t(p)!==null)x=!0,Ve();else{var ce=t(m);ce!==null&&nt(ie,ce.startTime-le)}}var re=!1,ae=-1,P=5,b=-1;function w(){return!(n.unstable_now()-b<P)}function R(){if(re){var le=n.unstable_now();b=le;var ce=!0;try{e:{x=!1,U&&(U=!1,H(ae),ae=-1),I=!0;var de=S;try{t:{for(F(le),v=t(p);v!==null&&!(v.expirationTime>le&&w());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,S=v.priorityLevel;var V=pe(v.expirationTime<=le);if(le=n.unstable_now(),typeof V=="function"){v.callback=V,F(le),ce=!0;break t}v===t(p)&&i(p),F(le)}else i(p);v=t(p)}if(v!==null)ce=!0;else{var W=t(m);W!==null&&nt(ie,W.startTime-le),ce=!1}}break e}finally{v=null,S=de,I=!1}ce=void 0}}finally{ce?D():re=!1}}}var D;if(typeof Y=="function")D=function(){Y(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,O=L.port2;L.port1.onmessage=R,D=function(){O.postMessage(null)}}else D=function(){k(R,0)};function Ve(){re||(re=!0,D())}function nt(le,ce){ae=k(function(){le(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){x||I||(x=!0,Ve())},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(le){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var de=S;S=ce;try{return le()}finally{S=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,ce){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var de=S;S=le;try{return ce()}finally{S=de}},n.unstable_scheduleCallback=function(le,ce,de){var pe=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?pe+de:pe):de=pe,le){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=de+V,le={id:g++,callback:ce,priorityLevel:le,startTime:de,expirationTime:V,sortIndex:-1},de>pe?(le.sortIndex=de,e(m,le),t(p)===null&&le===t(m)&&(U?(H(ae),ae=-1):U=!0,nt(ie,de-pe))):(le.sortIndex=V,e(p,le),x||I||(x=!0,Ve())),le},n.unstable_shouldYield=w,n.unstable_wrapCallback=function(le){var ce=S;return function(){var de=S;S=ce;try{return le.apply(this,arguments)}finally{S=de}}}}(sg)),sg}var MT;function HN(){return MT||(MT=1,rg.exports=qN()),rg.exports}var ag={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT;function GN(){if(PT)return Nn;PT=1;var n=yp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(p,m,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:p,containerInfo:m,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(p,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,g)},Nn.flushSync=function(p){var m=u.T,g=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=g,i.d.f()}},Nn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},Nn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Nn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var g=m.as,v=h(g,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:I}):g==="script"&&i.d.X(p,{crossOrigin:v,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Nn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},Nn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,v=h(g,m.crossOrigin);i.d.L(p,g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Nn.preloadModule=function(p,m){if(typeof p=="string")if(m){var g=h(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},Nn.requestFormReset=function(p){i.d.r(p)},Nn.unstable_batchedUpdates=function(p,m){return p(m)},Nn.useFormState=function(p,m,g){return u.H.useFormState(p,m,g)},Nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Nn.version="19.0.0",Nn}var LT;function $N(){if(LT)return ag.exports;LT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ag.exports=GN(),ag.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function KN(){if(VT)return fc;VT=1;var n=HN(),e=yp(),t=$N();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),I=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),ie=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ae(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function b(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case p:return"Fragment";case h:return"Portal";case g:return"Profiler";case m:return"StrictMode";case U:return"Suspense";case k:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case I:return(r.displayName||"Context")+".Provider";case S:return(r._context.displayName||"Context")+".Consumer";case x:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return s=r.displayName||null,s!==null?s:b(r.type)||"Memo";case Y:s=r._payload,r=r._init;try{return b(r(s))}catch{}}return null}var w=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=Object.assign,D,L;function O(r){if(D===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||"",L=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+r+L}var Ve=!1;function nt(r,s){if(!r||Ve)return"";Ve=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var K=X}Reflect.construct(r,[],se)}else{try{se.call()}catch(X){K=X}r.call(se.prototype)}}else{try{throw Error()}catch(X){K=X}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),T=_[0],C=_[1];if(T&&C){var M=T.split(`
`),z=C.split(`
`);for(d=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;if(c===M.length||d===z.length)for(c=M.length-1,d=z.length-1;1<=c&&0<=d&&M[c]!==z[d];)d--;for(;1<=c&&0<=d;c--,d--)if(M[c]!==z[d]){if(c!==1||d!==1)do if(c--,d--,0>d||M[c]!==z[d]){var J=`
`+M[c].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=c&&0<=d);break}}}finally{Ve=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?O(l):""}function le(r){switch(r.tag){case 26:case 27:case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return r=nt(r.type,!1),r;case 11:return r=nt(r.type.render,!1),r;case 1:return r=nt(r.type,!0),r;default:return""}}function ce(r){try{var s="";do s+=le(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function de(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function pe(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function V(r){if(de(r)!==r)throw Error(i(188))}function W(r){var s=r.alternate;if(!s){if(s=de(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,c=s;;){var d=l.return;if(d===null)break;var _=d.alternate;if(_===null){if(c=d.return,c!==null){l=c;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===l)return V(d),r;if(_===c)return V(d),s;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=d,c=_;else{for(var T=!1,C=d.child;C;){if(C===l){T=!0,l=d,c=_;break}if(C===c){T=!0,c=d,l=_;break}C=C.sibling}if(!T){for(C=_.child;C;){if(C===l){T=!0,l=_,c=d;break}if(C===c){T=!0,c=_,l=d;break}C=C.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function oe(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=oe(r),s!==null)return s;r=r.sibling}return null}var Z=Array.isArray,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ee=[],it=-1;function me(r){return{current:r}}function Se(r){0>it||(r.current=Ee[it],Ee[it]=null,it--)}function Ce(r,s){it++,Ee[it]=r.current,r.current=s}var Ae=me(null),Xe=me(null),ct=me(null),rt=me(null);function Be(r,s){switch(Ce(ct,s),Ce(Xe,r),Ce(Ae,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?rT(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=rT(r),s=sT(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Se(Ae),Ce(Ae,s)}function Oe(){Se(Ae),Se(Xe),Se(ct)}function kt(r){r.memoizedState!==null&&Ce(rt,r);var s=Ae.current,l=sT(s,r.type);s!==l&&(Ce(Xe,r),Ce(Ae,l))}function qe(r){Xe.current===r&&(Se(Ae),Se(Xe)),rt.current===r&&(Se(rt),ac._currentValue=ve)}var ht=Object.prototype.hasOwnProperty,vt=n.unstable_scheduleCallback,ii=n.unstable_cancelCallback,$n=n.unstable_shouldYield,Di=n.unstable_requestPaint,ft=n.unstable_now,Pn=n.unstable_getCurrentPriorityLevel,je=n.unstable_ImmediatePriority,st=n.unstable_UserBlockingPriority,Xt=n.unstable_NormalPriority,ys=n.unstable_LowPriority,vs=n.unstable_IdlePriority,Zi=n.log,un=n.unstable_setDisableYieldValue,Kn=null,Zt=null;function uu(r){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Kn,r,void 0,(r.current.flags&128)===128)}catch{}}function Ji(r){if(typeof Zi=="function"&&un(r),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(Kn,r)}catch{}}var Ln=Math.clz32?Math.clz32:Oh,cu=Math.log,xh=Math.LN2;function Oh(r){return r>>>=0,r===0?32:31-(cu(r)/xh|0)|0}var er=128,Es=4194304;function ki(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function di(r,s){var l=r.pendingLanes;if(l===0)return 0;var c=0,d=r.suspendedLanes,_=r.pingedLanes,T=r.warmLanes;r=r.finishedLanes!==0;var C=l&134217727;return C!==0?(l=C&~d,l!==0?c=ki(l):(_&=C,_!==0?c=ki(_):r||(T=C&~T,T!==0&&(c=ki(T))))):(C=l&~d,C!==0?c=ki(C):_!==0?c=ki(_):r||(T=l&~T,T!==0&&(c=ki(T)))),c===0?0:s!==0&&s!==c&&(s&d)===0&&(d=c&-c,T=s&-s,d>=T||d===32&&(T&4194176)!==0)?s:c}function Ts(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ko(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hu(){var r=er;return er<<=1,(er&4194176)===0&&(er=128),r}function ws(){var r=Es;return Es<<=1,(Es&62914560)===0&&(Es=4194304),r}function Mo(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function zt(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Dh(r,s,l,c,d,_){var T=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,M=r.expirationTimes,z=r.hiddenUpdates;for(l=T&~l;0<l;){var J=31-Ln(l),se=1<<J;C[J]=0,M[J]=-1;var K=z[J];if(K!==null)for(z[J]=null,J=0;J<K.length;J++){var X=K[J];X!==null&&(X.lane&=-536870913)}l&=~se}c!==0&&Ss(r,c,0),_!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=_&~(T&~s))}function Ss(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Ln(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|l&4194218}function bs(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var c=31-Ln(l),d=1<<c;d&s|r[c]&s&&(r[c]|=s),l&=~d}}function kh(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Mh(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:ST(r.type))}function As(r,s){var l=ue.p;try{return ue.p=r,s()}finally{ue.p=l}}var tr=Math.random().toString(36).slice(2),cn="__reactFiber$"+tr,Jt="__reactProps$"+tr,Rr="__reactContainer$"+tr,ka="__reactEvents$"+tr,Po="__reactListeners$"+tr,nr="__reactHandles$"+tr,fu="__reactResources$"+tr,Cs="__reactMarker$"+tr;function Ma(r){delete r[cn],delete r[Jt],delete r[ka],delete r[Po],delete r[nr]}function Mi(r){var s=r[cn];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Rr]||l[cn]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=lT(r);r!==null;){if(l=r[cn])return l;r=lT(r)}return s}r=l,l=r.parentNode}return null}function Ir(r){if(r=r[cn]||r[Rr]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Rs(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Is(r){var s=r[fu];return s||(s=r[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function It(r){r[Cs]=!0}var du=new Set,Lo={};function ri(r,s){Qn(r,s),Qn(r+"Capture",s)}function Qn(r,s){for(Lo[r]=s,r=0;r<s.length;r++)du.add(s[r])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pu={},mu={};function Ph(r){return ht.call(mu,r)?!0:ht.call(pu,r)?!1:rm.test(r)?mu[r]=!0:(pu[r]=!0,!1)}function Ns(r,s,l){if(Ph(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function xs(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function pi(r,s,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+c)}}function Vn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Lh(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function sm(r){var s=Lh(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,_=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(T){c=""+T,_.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Pa(r){r._valueTracker||(r._valueTracker=sm(r))}function _u(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return r&&(c=Lh(r)?r.checked?"true":"false":r.value),r=c,r!==l?(s.setValue(r),!0):!1}function Vo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Nr=/[\n"\\]/g;function Mt(r){return r.replace(Nr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Os(r,s,l,c,d,_,T,C){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Vn(s)):r.value!==""+Vn(s)&&(r.value=""+Vn(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?Uo(r,T,Vn(s)):l!=null?Uo(r,T,Vn(l)):c!=null&&r.removeAttribute("value"),d==null&&_!=null&&(r.defaultChecked=!!_),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Vn(C):r.removeAttribute("name")}function La(r,s,l,c,d,_,T,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+Vn(l):"",s=s!=null?""+Vn(s):l,C||s===r.value||(r.value=s),r.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=C?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function Uo(r,s,l){s==="number"&&Vo(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function at(r,s,l,c){if(r=r.options,s){s={};for(var d=0;d<l.length;d++)s["$"+l[d]]=!0;for(l=0;l<r.length;l++)d=s.hasOwnProperty("$"+r[l].value),r[l].selected!==d&&(r[l].selected=d),d&&c&&(r[l].defaultSelected=!0)}else{for(l=""+Vn(l),s=null,d=0;d<r.length;d++){if(r[d].value===l){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Va(r,s,l){if(s!=null&&(s=""+Vn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+Vn(l):""}function Ds(r,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(Z(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Vn(s),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c)}function mi(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var am=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(r,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,l):typeof l!="number"||l===0||am.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function Vh(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&l[d]!==c&&gu(r,d,c)}else for(var _ in s)s.hasOwnProperty(_)&&gu(r,_,s[_])}function yu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ir(r){return lm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var _i=null;function jo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xr=null,Or=null;function Dr(r){var s=Ir(r);if(s&&(r=s.stateNode)){var l=r[Jt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Os(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Mt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==r&&c.form===r.form){var d=c[Jt]||null;if(!d)throw Error(i(90));Os(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===r.form&&_u(c)}break e;case"textarea":Va(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&at(r,!!l.multiple,s,!1)}}}var vu=!1;function Uh(r,s,l){if(vu)return r(s,l);vu=!0;try{var c=r(s);return c}finally{if(vu=!1,(xr!==null||Or!==null)&&(xf(),xr&&(s=xr,r=Or,Or=xr=null,Dr(s),r)))for(s=0;s<r.length;s++)Dr(r[s])}}function Ua(r,s){var l=r.stateNode;if(l===null)return null;var c=l[Jt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var gi=!1;if(si)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){gi=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{gi=!1}var rr=null,ks=null,kr=null;function Eu(){if(kr)return kr;var r,s=ks,l=s.length,c,d="value"in rr?rr.value:rr.textContent,_=d.length;for(r=0;r<l&&s[r]===d[r];r++);var T=l-r;for(c=1;c<=T&&s[l-c]===d[_-c];c++);return kr=d.slice(r,1<c?1-c:void 0)}function sr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ar(){return!0}function Tu(){return!1}function hn(r){function s(l,c,d,_,T){this._reactName=l,this._targetInst=d,this.type=c,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ar:Tu,this.isPropagationStopped=Tu,this}return R(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),s}var dt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=hn(dt),za=R({},dt,{view:0,detail:0}),jh=hn(za),Fo,Bo,or,Fa=R({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ha,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==or&&(or&&r.type==="mousemove"?(Fo=r.screenX-or.screenX,Bo=r.screenY-or.screenY):Bo=Fo=0,or=r),Fo)},movementY:function(r){return"movementY"in r?r.movementY:Bo}}),yi=hn(Fa),zh=R({},Fa,{dataTransfer:0}),um=hn(zh),Ba=R({},za,{relatedTarget:0}),qo=hn(Ba),wu=R({},dt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ho=hn(wu),Fh=R({},dt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Go=hn(Fh),cm=R({},dt,{data:0}),Su=hn(cm),qa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=qh[r])?!!s[r]:!1}function Ha(){return bu}var Hh=R({},za,{key:function(r){if(r.key){var s=qa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=sr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ha,charCode:function(r){return r.type==="keypress"?sr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?sr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$o=hn(Hh),Gh=R({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Au=hn(Gh),Mr=R({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ha}),$h=hn(Mr),Kh=R({},dt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qh=hn(Kh),Wh=R({},Fa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ko=hn(Wh),Un=R({},dt,{newState:0,oldState:0}),Yh=hn(Un),Xh=[9,13,27,32],lr=si&&"CompositionEvent"in window,f=null;si&&"documentMode"in document&&(f=document.documentMode);var y=si&&"TextEvent"in window&&!f,E=si&&(!lr||f&&8<f&&11>=f),N=" ",G=!1;function Q(r,s){switch(r){case"keyup":return Xh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ze=!1;function en(r,s){switch(r){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(G=!0,N);case"textInput":return r=s.data,r===N&&G?null:r;default:return null}}function Je(r,s){if(Ze)return r==="compositionend"||!lr&&Q(r,s)?(r=Eu(),kr=ks=rr=null,Ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!fn[r.type]:s==="textarea"}function Pr(r,s,l,c){xr?Or?Or.push(c):Or=[c]:xr=c,s=Pf(s,"onChange"),0<s.length&&(l=new zo("onChange","change",null,l,c),r.push({event:l,listeners:s}))}var Tn=null,ur=null;function Cu(r){J1(r,0)}function Zh(r){var s=Rs(r);if(_u(s))return r}function I0(r,s){if(r==="change")return s}var N0=!1;if(si){var hm;if(si){var fm="oninput"in document;if(!fm){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),fm=typeof x0.oninput=="function"}hm=fm}else hm=!1;N0=hm&&(!document.documentMode||9<document.documentMode)}function O0(){Tn&&(Tn.detachEvent("onpropertychange",D0),ur=Tn=null)}function D0(r){if(r.propertyName==="value"&&Zh(ur)){var s=[];Pr(s,ur,r,jo(r)),Uh(Cu,s)}}function p2(r,s,l){r==="focusin"?(O0(),Tn=s,ur=l,Tn.attachEvent("onpropertychange",D0)):r==="focusout"&&O0()}function m2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Zh(ur)}function _2(r,s){if(r==="click")return Zh(s)}function g2(r,s){if(r==="input"||r==="change")return Zh(s)}function y2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var ai=typeof Object.is=="function"?Object.is:y2;function Ru(r,s){if(ai(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var d=l[c];if(!ht.call(s,d)||!ai(r[d],s[d]))return!1}return!0}function k0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function M0(r,s){var l=k0(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=s&&c>=s)return{node:l,offset:s-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=k0(l)}}function P0(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?P0(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function L0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Vo(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Vo(r.document)}return s}function dm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function v2(r,s){var l=L0(s);s=r.focusedElem;var c=r.selectionRange;if(l!==s&&s&&s.ownerDocument&&P0(s.ownerDocument.documentElement,s)){if(c!==null&&dm(s)){if(r=c.start,l=c.end,l===void 0&&(l=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(l,s.value.length);else if(l=(r=s.ownerDocument||document)&&r.defaultView||window,l.getSelection){l=l.getSelection();var d=s.textContent.length,_=Math.min(c.start,d);c=c.end===void 0?_:Math.min(c.end,d),!l.extend&&_>c&&(d=c,c=_,_=d),d=M0(s,_);var T=M0(s,c);d&&T&&(l.rangeCount!==1||l.anchorNode!==d.node||l.anchorOffset!==d.offset||l.focusNode!==T.node||l.focusOffset!==T.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),l.removeAllRanges(),_>c?(l.addRange(r),l.extend(T.node,T.offset)):(r.setEnd(T.node,T.offset),l.addRange(r)))}}for(r=[],l=s;l=l.parentNode;)l.nodeType===1&&r.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)l=r[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var E2=si&&"documentMode"in document&&11>=document.documentMode,Qo=null,pm=null,Iu=null,mm=!1;function V0(r,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mm||Qo==null||Qo!==Vo(c)||(c=Qo,"selectionStart"in c&&dm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Iu&&Ru(Iu,c)||(Iu=c,c=Pf(pm,"onSelect"),0<c.length&&(s=new zo("onSelect","select",null,s,l),r.push({event:s,listeners:c}),s.target=Qo)))}function Ga(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Wo={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},_m={},U0={};si&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function $a(r){if(_m[r])return _m[r];if(!Wo[r])return r;var s=Wo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in U0)return _m[r]=s[l];return r}var j0=$a("animationend"),z0=$a("animationiteration"),F0=$a("animationstart"),T2=$a("transitionrun"),w2=$a("transitionstart"),S2=$a("transitioncancel"),B0=$a("transitionend"),q0=new Map,H0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Pi(r,s){q0.set(r,s),ri(s,[r])}var vi=[],Yo=0,gm=0;function Jh(){for(var r=Yo,s=gm=Yo=0;s<r;){var l=vi[s];vi[s++]=null;var c=vi[s];vi[s++]=null;var d=vi[s];vi[s++]=null;var _=vi[s];if(vi[s++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}_!==0&&G0(l,d,_)}}function ef(r,s,l,c){vi[Yo++]=r,vi[Yo++]=s,vi[Yo++]=l,vi[Yo++]=c,gm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function ym(r,s,l,c){return ef(r,s,l,c),tf(r)}function Ms(r,s){return ef(r,null,null,s),tf(r)}function G0(r,s,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var d=!1,_=r.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(d=!0)),r=_,_=_.return;d&&s!==null&&r.tag===3&&(_=r.stateNode,d=31-Ln(l),_=_.hiddenUpdates,r=_[d],r===null?_[d]=[s]:r.push(s),s.lane=l|536870912)}function tf(r){if(50<Ju)throw Ju=0,b_=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Xo={},$0=new WeakMap;function Ei(r,s){if(typeof r=="object"&&r!==null){var l=$0.get(r);return l!==void 0?l:(s={value:r,source:s,stack:ce(s)},$0.set(r,s),s)}return{value:r,source:s,stack:ce(s)}}var Zo=[],Jo=0,nf=null,rf=0,Ti=[],wi=0,Ka=null,Lr=1,Vr="";function Qa(r,s){Zo[Jo++]=rf,Zo[Jo++]=nf,nf=r,rf=s}function K0(r,s,l){Ti[wi++]=Lr,Ti[wi++]=Vr,Ti[wi++]=Ka,Ka=r;var c=Lr;r=Vr;var d=32-Ln(c)-1;c&=~(1<<d),l+=1;var _=32-Ln(s)+d;if(30<_){var T=d-d%5;_=(c&(1<<T)-1).toString(32),c>>=T,d-=T,Lr=1<<32-Ln(s)+d|l<<d|c,Vr=_+r}else Lr=1<<_|l<<d|c,Vr=r}function vm(r){r.return!==null&&(Qa(r,1),K0(r,1,0))}function Em(r){for(;r===nf;)nf=Zo[--Jo],Zo[Jo]=null,rf=Zo[--Jo],Zo[Jo]=null;for(;r===Ka;)Ka=Ti[--wi],Ti[wi]=null,Vr=Ti[--wi],Ti[wi]=null,Lr=Ti[--wi],Ti[wi]=null}var jn=null,wn=null,ot=!1,Li=null,cr=!1,Tm=Error(i(519));function Wa(r){var s=Error(i(418,""));throw Ou(Ei(s,r)),Tm}function Q0(r){var s=r.stateNode,l=r.type,c=r.memoizedProps;switch(s[cn]=r,s[Jt]=c,l){case"dialog":We("cancel",s),We("close",s);break;case"iframe":case"object":case"embed":We("load",s);break;case"video":case"audio":for(l=0;l<tc.length;l++)We(tc[l],s);break;case"source":We("error",s);break;case"img":case"image":case"link":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"input":We("invalid",s),La(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Pa(s);break;case"select":We("invalid",s);break;case"textarea":We("invalid",s),Ds(s,c.value,c.defaultValue,c.children),Pa(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||iT(s.textContent,l)?(c.popover!=null&&(We("beforetoggle",s),We("toggle",s)),c.onScroll!=null&&We("scroll",s),c.onScrollEnd!=null&&We("scrollend",s),c.onClick!=null&&(s.onclick=Lf),s=!0):s=!1,s||Wa(r)}function W0(r){for(jn=r.return;jn;)switch(jn.tag){case 3:case 27:cr=!0;return;case 5:case 13:cr=!1;return;default:jn=jn.return}}function Nu(r){if(r!==jn)return!1;if(!ot)return W0(r),ot=!0,!1;var s=!1,l;if((l=r.tag!==3&&r.tag!==27)&&((l=r.tag===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||F_(r.type,r.memoizedProps)),l=!l),l&&(s=!0),s&&wn&&Wa(r),W0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){wn=Ui(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}wn=null}}else wn=jn?Ui(r.stateNode.nextSibling):null;return!0}function xu(){wn=jn=null,ot=!1}function Ou(r){Li===null?Li=[r]:Li.push(r)}var Du=Error(i(460)),Y0=Error(i(474)),wm={then:function(){}};function X0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function sf(){}function Z0(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(sf,sf),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Du?Error(i(483)):r;default:if(typeof s.status=="string")s.then(sf,sf);else{if(r=wt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Du?Error(i(483)):r}throw ku=s,Du}}var ku=null;function J0(){if(ku===null)throw Error(i(459));var r=ku;return ku=null,r}var el=null,Mu=0;function af(r){var s=Mu;return Mu+=1,el===null&&(el=[]),Z0(el,r,s)}function Pu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function of(r,s){throw s.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function eE(r){var s=r._init;return s(r._payload)}function tE(r){function s(q,j){if(r){var $=q.deletions;$===null?(q.deletions=[j],q.flags|=16):$.push(j)}}function l(q,j){if(!r)return null;for(;j!==null;)s(q,j),j=j.sibling;return null}function c(q){for(var j=new Map;q!==null;)q.key!==null?j.set(q.key,q):j.set(q.index,q),q=q.sibling;return j}function d(q,j){return q=$s(q,j),q.index=0,q.sibling=null,q}function _(q,j,$){return q.index=$,r?($=q.alternate,$!==null?($=$.index,$<j?(q.flags|=33554434,j):$):(q.flags|=33554434,j)):(q.flags|=1048576,j)}function T(q){return r&&q.alternate===null&&(q.flags|=33554434),q}function C(q,j,$,ee){return j===null||j.tag!==6?(j=__($,q.mode,ee),j.return=q,j):(j=d(j,$),j.return=q,j)}function M(q,j,$,ee){var ye=$.type;return ye===p?J(q,j,$.props.children,ee,$.key):j!==null&&(j.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&eE(ye)===j.type)?(j=d(j,$.props),Pu(j,$),j.return=q,j):(j=Af($.type,$.key,$.props,null,q.mode,ee),Pu(j,$),j.return=q,j)}function z(q,j,$,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==$.containerInfo||j.stateNode.implementation!==$.implementation?(j=g_($,q.mode,ee),j.return=q,j):(j=d(j,$.children||[]),j.return=q,j)}function J(q,j,$,ee,ye){return j===null||j.tag!==7?(j=so($,q.mode,ee,ye),j.return=q,j):(j=d(j,$),j.return=q,j)}function se(q,j,$){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=__(""+j,q.mode,$),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case u:return $=Af(j.type,j.key,j.props,null,q.mode,$),Pu($,j),$.return=q,$;case h:return j=g_(j,q.mode,$),j.return=q,j;case Y:var ee=j._init;return j=ee(j._payload),se(q,j,$)}if(Z(j)||ae(j))return j=so(j,q.mode,$,null),j.return=q,j;if(typeof j.then=="function")return se(q,af(j),$);if(j.$$typeof===I)return se(q,wf(q,j),$);of(q,j)}return null}function K(q,j,$,ee){var ye=j!==null?j.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ye!==null?null:C(q,j,""+$,ee);if(typeof $=="object"&&$!==null){switch($.$$typeof){case u:return $.key===ye?M(q,j,$,ee):null;case h:return $.key===ye?z(q,j,$,ee):null;case Y:return ye=$._init,$=ye($._payload),K(q,j,$,ee)}if(Z($)||ae($))return ye!==null?null:J(q,j,$,ee,null);if(typeof $.then=="function")return K(q,j,af($),ee);if($.$$typeof===I)return K(q,j,wf(q,$),ee);of(q,$)}return null}function X(q,j,$,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return q=q.get($)||null,C(j,q,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case u:return q=q.get(ee.key===null?$:ee.key)||null,M(j,q,ee,ye);case h:return q=q.get(ee.key===null?$:ee.key)||null,z(j,q,ee,ye);case Y:var ze=ee._init;return ee=ze(ee._payload),X(q,j,$,ee,ye)}if(Z(ee)||ae(ee))return q=q.get($)||null,J(j,q,ee,ye,null);if(typeof ee.then=="function")return X(q,j,$,af(ee),ye);if(ee.$$typeof===I)return X(q,j,$,wf(j,ee),ye);of(j,ee)}return null}function Te(q,j,$,ee){for(var ye=null,ze=null,we=j,Re=j=0,mn=null;we!==null&&Re<$.length;Re++){we.index>Re?(mn=we,we=null):mn=we.sibling;var lt=K(q,we,$[Re],ee);if(lt===null){we===null&&(we=mn);break}r&&we&&lt.alternate===null&&s(q,we),j=_(lt,j,Re),ze===null?ye=lt:ze.sibling=lt,ze=lt,we=mn}if(Re===$.length)return l(q,we),ot&&Qa(q,Re),ye;if(we===null){for(;Re<$.length;Re++)we=se(q,$[Re],ee),we!==null&&(j=_(we,j,Re),ze===null?ye=we:ze.sibling=we,ze=we);return ot&&Qa(q,Re),ye}for(we=c(we);Re<$.length;Re++)mn=X(we,q,Re,$[Re],ee),mn!==null&&(r&&mn.alternate!==null&&we.delete(mn.key===null?Re:mn.key),j=_(mn,j,Re),ze===null?ye=mn:ze.sibling=mn,ze=mn);return r&&we.forEach(function(Js){return s(q,Js)}),ot&&Qa(q,Re),ye}function ke(q,j,$,ee){if($==null)throw Error(i(151));for(var ye=null,ze=null,we=j,Re=j=0,mn=null,lt=$.next();we!==null&&!lt.done;Re++,lt=$.next()){we.index>Re?(mn=we,we=null):mn=we.sibling;var Js=K(q,we,lt.value,ee);if(Js===null){we===null&&(we=mn);break}r&&we&&Js.alternate===null&&s(q,we),j=_(Js,j,Re),ze===null?ye=Js:ze.sibling=Js,ze=Js,we=mn}if(lt.done)return l(q,we),ot&&Qa(q,Re),ye;if(we===null){for(;!lt.done;Re++,lt=$.next())lt=se(q,lt.value,ee),lt!==null&&(j=_(lt,j,Re),ze===null?ye=lt:ze.sibling=lt,ze=lt);return ot&&Qa(q,Re),ye}for(we=c(we);!lt.done;Re++,lt=$.next())lt=X(we,q,Re,lt.value,ee),lt!==null&&(r&&lt.alternate!==null&&we.delete(lt.key===null?Re:lt.key),j=_(lt,j,Re),ze===null?ye=lt:ze.sibling=lt,ze=lt);return r&&we.forEach(function(VN){return s(q,VN)}),ot&&Qa(q,Re),ye}function Vt(q,j,$,ee){if(typeof $=="object"&&$!==null&&$.type===p&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case u:e:{for(var ye=$.key;j!==null;){if(j.key===ye){if(ye=$.type,ye===p){if(j.tag===7){l(q,j.sibling),ee=d(j,$.props.children),ee.return=q,q=ee;break e}}else if(j.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&eE(ye)===j.type){l(q,j.sibling),ee=d(j,$.props),Pu(ee,$),ee.return=q,q=ee;break e}l(q,j);break}else s(q,j);j=j.sibling}$.type===p?(ee=so($.props.children,q.mode,ee,$.key),ee.return=q,q=ee):(ee=Af($.type,$.key,$.props,null,q.mode,ee),Pu(ee,$),ee.return=q,q=ee)}return T(q);case h:e:{for(ye=$.key;j!==null;){if(j.key===ye)if(j.tag===4&&j.stateNode.containerInfo===$.containerInfo&&j.stateNode.implementation===$.implementation){l(q,j.sibling),ee=d(j,$.children||[]),ee.return=q,q=ee;break e}else{l(q,j);break}else s(q,j);j=j.sibling}ee=g_($,q.mode,ee),ee.return=q,q=ee}return T(q);case Y:return ye=$._init,$=ye($._payload),Vt(q,j,$,ee)}if(Z($))return Te(q,j,$,ee);if(ae($)){if(ye=ae($),typeof ye!="function")throw Error(i(150));return $=ye.call($),ke(q,j,$,ee)}if(typeof $.then=="function")return Vt(q,j,af($),ee);if($.$$typeof===I)return Vt(q,j,wf(q,$),ee);of(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,j!==null&&j.tag===6?(l(q,j.sibling),ee=d(j,$),ee.return=q,q=ee):(l(q,j),ee=__($,q.mode,ee),ee.return=q,q=ee),T(q)):l(q,j)}return function(q,j,$,ee){try{Mu=0;var ye=Vt(q,j,$,ee);return el=null,ye}catch(we){if(we===Du)throw we;var ze=Ci(29,we,null,q.mode);return ze.lanes=ee,ze.return=q,ze}finally{}}}var Ya=tE(!0),nE=tE(!1),tl=me(null),lf=me(0);function iE(r,s){r=Qr,Ce(lf,r),Ce(tl,s),Qr=r|s.baseLanes}function Sm(){Ce(lf,Qr),Ce(tl,tl.current)}function bm(){Qr=lf.current,Se(tl),Se(lf)}var Si=me(null),hr=null;function Ps(r){var s=r.alternate;Ce(nn,nn.current&1),Ce(Si,r),hr===null&&(s===null||tl.current!==null||s.memoizedState!==null)&&(hr=r)}function rE(r){if(r.tag===22){if(Ce(nn,nn.current),Ce(Si,r),hr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(hr=r)}}else Ls()}function Ls(){Ce(nn,nn.current),Ce(Si,Si.current)}function Ur(r){Se(Si),hr===r&&(hr=null),Se(nn)}var nn=me(0);function uf(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var b2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},A2=n.unstable_scheduleCallback,C2=n.unstable_NormalPriority,rn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Am(){return{controller:new b2,data:new Map,refCount:0}}function Lu(r){r.refCount--,r.refCount===0&&A2(C2,function(){r.controller.abort()})}var Vu=null,Cm=0,nl=0,il=null;function R2(r,s){if(Vu===null){var l=Vu=[];Cm=0,nl=D_(),il={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Cm++,s.then(sE,sE),s}function sE(){if(--Cm===0&&Vu!==null){il!==null&&(il.status="fulfilled");var r=Vu;Vu=null,nl=0,il=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function I2(r,s){var l=[],c={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<l.length;d++)(0,l[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),c}var aE=w.S;w.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&R2(r,s),aE!==null&&aE(r,s)};var Xa=me(null);function Rm(){var r=Xa.current;return r!==null?r:wt.pooledCache}function cf(r,s){s===null?Ce(Xa,Xa.current):Ce(Xa,s.pool)}function oE(){var r=Rm();return r===null?null:{parent:rn._currentValue,pool:r}}var Vs=0,Ue=null,gt=null,Ht=null,hf=!1,rl=!1,Za=!1,ff=0,Uu=0,sl=null,N2=0;function Ft(){throw Error(i(321))}function Im(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!ai(r[l],s[l]))return!1;return!0}function Nm(r,s,l,c,d,_){return Vs=_,Ue=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,w.H=r===null||r.memoizedState===null?Ja:Us,Za=!1,_=l(c,d),Za=!1,rl&&(_=uE(s,l,c,d)),lE(r),_}function lE(r){w.H=fr;var s=gt!==null&&gt.next!==null;if(Vs=0,Ht=gt=Ue=null,hf=!1,Uu=0,sl=null,s)throw Error(i(300));r===null||dn||(r=r.dependencies,r!==null&&Tf(r)&&(dn=!0))}function uE(r,s,l,c){Ue=r;var d=0;do{if(rl&&(sl=null),Uu=0,rl=!1,25<=d)throw Error(i(301));if(d+=1,Ht=gt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}w.H=eo,_=s(l,c)}while(rl);return _}function x2(){var r=w.H,s=r.useState()[0];return s=typeof s.then=="function"?ju(s):s,r=r.useState()[0],(gt!==null?gt.memoizedState:null)!==r&&(Ue.flags|=1024),s}function xm(){var r=ff!==0;return ff=0,r}function Om(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Dm(r){if(hf){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hf=!1}Vs=0,Ht=gt=Ue=null,rl=!1,Uu=ff=0,sl=null}function Wn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ue.memoizedState=Ht=r:Ht=Ht.next=r,Ht}function Gt(){if(gt===null){var r=Ue.alternate;r=r!==null?r.memoizedState:null}else r=gt.next;var s=Ht===null?Ue.memoizedState:Ht.next;if(s!==null)Ht=s,gt=r;else{if(r===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));gt=r,r={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Ht===null?Ue.memoizedState=Ht=r:Ht=Ht.next=r}return Ht}var df;df=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ju(r){var s=Uu;return Uu+=1,sl===null&&(sl=[]),r=Z0(sl,r,s),s=Ue,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,w.H=s===null||s.memoizedState===null?Ja:Us),r}function pf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ju(r);if(r.$$typeof===I)return In(r)}throw Error(i(438,String(r)))}function km(r){var s=null,l=Ue.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=df(),Ue.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),c=0;c<r;c++)l[c]=ie;return s.index++,l}function jr(r,s){return typeof s=="function"?s(r):s}function mf(r){var s=Gt();return Mm(s,gt,r)}function Mm(r,s,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var d=r.baseQueue,_=c.pending;if(_!==null){if(d!==null){var T=d.next;d.next=_.next,_.next=T}s.baseQueue=d=_,c.pending=null}if(_=r.baseState,d===null)r.memoizedState=_;else{s=d.next;var C=T=null,M=null,z=s,J=!1;do{var se=z.lane&-536870913;if(se!==z.lane?(et&se)===se:(Vs&se)===se){var K=z.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),se===nl&&(J=!0);else if((Vs&K)===K){z=z.next,K===nl&&(J=!0);continue}else se={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(C=M=se,T=_):M=M.next=se,Ue.lanes|=K,Ks|=K;se=z.action,Za&&l(_,se),_=z.hasEagerState?z.eagerState:l(_,se)}else K={lane:se,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(C=M=K,T=_):M=M.next=K,Ue.lanes|=se,Ks|=se;z=z.next}while(z!==null&&z!==s);if(M===null?T=_:M.next=C,!ai(_,r.memoizedState)&&(dn=!0,J&&(l=il,l!==null)))throw l;r.memoizedState=_,r.baseState=T,r.baseQueue=M,c.lastRenderedState=_}return d===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Pm(r){var s=Gt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,d=l.pending,_=s.memoizedState;if(d!==null){l.pending=null;var T=d=d.next;do _=r(_,T.action),T=T.next;while(T!==d);ai(_,s.memoizedState)||(dn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,c]}function cE(r,s,l){var c=Ue,d=Gt(),_=ot;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var T=!ai((gt||d).memoizedState,l);if(T&&(d.memoizedState=l,dn=!0),d=d.queue,Um(dE.bind(null,c,d,r),[r]),d.getSnapshot!==s||T||Ht!==null&&Ht.memoizedState.tag&1){if(c.flags|=2048,al(9,fE.bind(null,c,d,l,s),{destroy:void 0},null),wt===null)throw Error(i(349));_||(Vs&60)!==0||hE(c,s,l)}return l}function hE(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Ue.updateQueue,s===null?(s=df(),Ue.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function fE(r,s,l,c){s.value=l,s.getSnapshot=c,pE(s)&&mE(r)}function dE(r,s,l){return l(function(){pE(s)&&mE(r)})}function pE(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!ai(r,l)}catch{return!0}}function mE(r){var s=Ms(r,2);s!==null&&zn(s,r,2)}function Lm(r){var s=Wn();if(typeof r=="function"){var l=r;if(r=l(),Za){Ji(!0);try{l()}finally{Ji(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:r},s}function _E(r,s,l,c){return r.baseState=l,Mm(r,gt,typeof c=="function"?c:jr)}function O2(r,s,l,c,d){if(yf(r))throw Error(i(485));if(r=s.action,r!==null){var _={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};w.T!==null?l(!0):_.isTransition=!1,c(_),l=s.pending,l===null?(_.next=s.pending=_,gE(s,_)):(_.next=l.next,s.pending=l.next=_)}}function gE(r,s){var l=s.action,c=s.payload,d=r.state;if(s.isTransition){var _=w.T,T={};w.T=T;try{var C=l(d,c),M=w.S;M!==null&&M(T,C),yE(r,s,C)}catch(z){Vm(r,s,z)}finally{w.T=_}}else try{_=l(d,c),yE(r,s,_)}catch(z){Vm(r,s,z)}}function yE(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){vE(r,s,c)},function(c){return Vm(r,s,c)}):vE(r,s,l)}function vE(r,s,l){s.status="fulfilled",s.value=l,EE(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,gE(r,l)))}function Vm(r,s,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,EE(s),s=s.next;while(s!==c)}r.action=null}function EE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function TE(r,s){return s}function wE(r,s){if(ot){var l=wt.formState;if(l!==null){e:{var c=Ue;if(ot){if(wn){t:{for(var d=wn,_=cr;d.nodeType!==8;){if(!_){d=null;break t}if(d=Ui(d.nextSibling),d===null){d=null;break t}}_=d.data,d=_==="F!"||_==="F"?d:null}if(d){wn=Ui(d.nextSibling),c=d.data==="F!";break e}}Wa(c)}c=!1}c&&(s=l[0])}}return l=Wn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:TE,lastRenderedState:s},l.queue=c,l=zE.bind(null,Ue,c),c.dispatch=l,c=Lm(!1),_=qm.bind(null,Ue,!1,c.queue),c=Wn(),d={state:s,dispatch:null,action:r,pending:null},c.queue=d,l=O2.bind(null,Ue,d,_,l),d.dispatch=l,c.memoizedState=r,[s,l,!1]}function SE(r){var s=Gt();return bE(s,gt,r)}function bE(r,s,l){s=Mm(r,s,TE)[0],r=mf(jr)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?ju(s):s;var c=Gt(),d=c.queue,_=d.dispatch;return l!==c.memoizedState&&(Ue.flags|=2048,al(9,D2.bind(null,d,l),{destroy:void 0},null)),[s,_,r]}function D2(r,s){r.action=s}function AE(r){var s=Gt(),l=gt;if(l!==null)return bE(s,l,r);Gt(),s=s.memoizedState,l=Gt();var c=l.queue.dispatch;return l.memoizedState=r,[s,c,!1]}function al(r,s,l,c){return r={tag:r,create:s,inst:l,deps:c,next:null},s=Ue.updateQueue,s===null&&(s=df(),Ue.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,s.lastEffect=r),r}function CE(){return Gt().memoizedState}function _f(r,s,l,c){var d=Wn();Ue.flags|=r,d.memoizedState=al(1|s,l,{destroy:void 0},c===void 0?null:c)}function gf(r,s,l,c){var d=Gt();c=c===void 0?null:c;var _=d.memoizedState.inst;gt!==null&&c!==null&&Im(c,gt.memoizedState.deps)?d.memoizedState=al(s,l,_,c):(Ue.flags|=r,d.memoizedState=al(1|s,l,_,c))}function RE(r,s){_f(8390656,8,r,s)}function Um(r,s){gf(2048,8,r,s)}function IE(r,s){return gf(4,2,r,s)}function NE(r,s){return gf(4,4,r,s)}function xE(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function OE(r,s,l){l=l!=null?l.concat([r]):null,gf(4,4,xE.bind(null,s,r),l)}function jm(){}function DE(r,s){var l=Gt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Im(s,c[1])?c[0]:(l.memoizedState=[r,s],r)}function kE(r,s){var l=Gt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Im(s,c[1]))return c[0];if(c=r(),Za){Ji(!0);try{r()}finally{Ji(!1)}}return l.memoizedState=[c,s],c}function zm(r,s,l){return l===void 0||(Vs&1073741824)!==0?r.memoizedState=s:(r.memoizedState=l,r=P1(),Ue.lanes|=r,Ks|=r,l)}function ME(r,s,l,c){return ai(l,s)?l:tl.current!==null?(r=zm(r,l,c),ai(r,s)||(dn=!0),r):(Vs&42)===0?(dn=!0,r.memoizedState=l):(r=P1(),Ue.lanes|=r,Ks|=r,s)}function PE(r,s,l,c,d){var _=ue.p;ue.p=_!==0&&8>_?_:8;var T=w.T,C={};w.T=C,qm(r,!1,s,l);try{var M=d(),z=w.S;if(z!==null&&z(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var J=I2(M,c);zu(r,s,J,ci(r))}else zu(r,s,c,ci(r))}catch(se){zu(r,s,{then:function(){},status:"rejected",reason:se},ci())}finally{ue.p=_,w.T=T}}function k2(){}function Fm(r,s,l,c){if(r.tag!==5)throw Error(i(476));var d=LE(r).queue;PE(r,d,s,ve,l===null?k2:function(){return VE(r),l(c)})}function LE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:ve},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function VE(r){var s=LE(r).next.queue;zu(r,s,{},ci())}function Bm(){return In(ac)}function UE(){return Gt().memoizedState}function jE(){return Gt().memoizedState}function M2(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=ci();r=Fs(l);var c=Bs(s,r,l);c!==null&&(zn(c,s,l),qu(c,s,l)),s={cache:Am()},r.payload=s;return}s=s.return}}function P2(r,s,l){var c=ci();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},yf(r)?FE(s,l):(l=ym(r,s,l,c),l!==null&&(zn(l,r,c),BE(l,s,c)))}function zE(r,s,l){var c=ci();zu(r,s,l,c)}function zu(r,s,l,c){var d={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(yf(r))FE(s,d);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var T=s.lastRenderedState,C=_(T,l);if(d.hasEagerState=!0,d.eagerState=C,ai(C,T))return ef(r,s,d,0),wt===null&&Jh(),!1}catch{}finally{}if(l=ym(r,s,d,c),l!==null)return zn(l,r,c),BE(l,s,c),!0}return!1}function qm(r,s,l,c){if(c={lane:2,revertLane:D_(),action:c,hasEagerState:!1,eagerState:null,next:null},yf(r)){if(s)throw Error(i(479))}else s=ym(r,l,c,2),s!==null&&zn(s,r,2)}function yf(r){var s=r.alternate;return r===Ue||s!==null&&s===Ue}function FE(r,s){rl=hf=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function BE(r,s,l){if((l&4194176)!==0){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,bs(r,l)}}var fr={readContext:In,use:pf,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft};fr.useCacheRefresh=Ft,fr.useMemoCache=Ft,fr.useHostTransitionStatus=Ft,fr.useFormState=Ft,fr.useActionState=Ft,fr.useOptimistic=Ft;var Ja={readContext:In,use:pf,useCallback:function(r,s){return Wn().memoizedState=[r,s===void 0?null:s],r},useContext:In,useEffect:RE,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,_f(4194308,4,xE.bind(null,s,r),l)},useLayoutEffect:function(r,s){return _f(4194308,4,r,s)},useInsertionEffect:function(r,s){_f(4,2,r,s)},useMemo:function(r,s){var l=Wn();s=s===void 0?null:s;var c=r();if(Za){Ji(!0);try{r()}finally{Ji(!1)}}return l.memoizedState=[c,s],c},useReducer:function(r,s,l){var c=Wn();if(l!==void 0){var d=l(s);if(Za){Ji(!0);try{l(s)}finally{Ji(!1)}}}else d=s;return c.memoizedState=c.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},c.queue=r,r=r.dispatch=P2.bind(null,Ue,r),[c.memoizedState,r]},useRef:function(r){var s=Wn();return r={current:r},s.memoizedState=r},useState:function(r){r=Lm(r);var s=r.queue,l=zE.bind(null,Ue,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:jm,useDeferredValue:function(r,s){var l=Wn();return zm(l,r,s)},useTransition:function(){var r=Lm(!1);return r=PE.bind(null,Ue,r.queue,!0,!1),Wn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var c=Ue,d=Wn();if(ot){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),wt===null)throw Error(i(349));(et&60)!==0||hE(c,s,l)}d.memoizedState=l;var _={value:l,getSnapshot:s};return d.queue=_,RE(dE.bind(null,c,_,r),[r]),c.flags|=2048,al(9,fE.bind(null,c,_,l,s),{destroy:void 0},null),l},useId:function(){var r=Wn(),s=wt.identifierPrefix;if(ot){var l=Vr,c=Lr;l=(c&~(1<<32-Ln(c)-1)).toString(32)+l,s=":"+s+"R"+l,l=ff++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=N2++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return Wn().memoizedState=M2.bind(null,Ue)}};Ja.useMemoCache=km,Ja.useHostTransitionStatus=Bm,Ja.useFormState=wE,Ja.useActionState=wE,Ja.useOptimistic=function(r){var s=Wn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=qm.bind(null,Ue,!0,l),l.dispatch=s,[r,s]};var Us={readContext:In,use:pf,useCallback:DE,useContext:In,useEffect:Um,useImperativeHandle:OE,useInsertionEffect:IE,useLayoutEffect:NE,useMemo:kE,useReducer:mf,useRef:CE,useState:function(){return mf(jr)},useDebugValue:jm,useDeferredValue:function(r,s){var l=Gt();return ME(l,gt.memoizedState,r,s)},useTransition:function(){var r=mf(jr)[0],s=Gt().memoizedState;return[typeof r=="boolean"?r:ju(r),s]},useSyncExternalStore:cE,useId:UE};Us.useCacheRefresh=jE,Us.useMemoCache=km,Us.useHostTransitionStatus=Bm,Us.useFormState=SE,Us.useActionState=SE,Us.useOptimistic=function(r,s){var l=Gt();return _E(l,gt,r,s)};var eo={readContext:In,use:pf,useCallback:DE,useContext:In,useEffect:Um,useImperativeHandle:OE,useInsertionEffect:IE,useLayoutEffect:NE,useMemo:kE,useReducer:Pm,useRef:CE,useState:function(){return Pm(jr)},useDebugValue:jm,useDeferredValue:function(r,s){var l=Gt();return gt===null?zm(l,r,s):ME(l,gt.memoizedState,r,s)},useTransition:function(){var r=Pm(jr)[0],s=Gt().memoizedState;return[typeof r=="boolean"?r:ju(r),s]},useSyncExternalStore:cE,useId:UE};eo.useCacheRefresh=jE,eo.useMemoCache=km,eo.useHostTransitionStatus=Bm,eo.useFormState=AE,eo.useActionState=AE,eo.useOptimistic=function(r,s){var l=Gt();return gt!==null?_E(l,gt,r,s):(l.baseState=r,[r,l.queue.dispatch])};function Hm(r,s,l,c){s=r.memoizedState,l=l(c,s),l=l==null?s:R({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Gm={isMounted:function(r){return(r=r._reactInternals)?de(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var c=ci(),d=Fs(c);d.payload=s,l!=null&&(d.callback=l),s=Bs(r,d,c),s!==null&&(zn(s,r,c),qu(s,r,c))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var c=ci(),d=Fs(c);d.tag=1,d.payload=s,l!=null&&(d.callback=l),s=Bs(r,d,c),s!==null&&(zn(s,r,c),qu(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=ci(),c=Fs(l);c.tag=2,s!=null&&(c.callback=s),s=Bs(r,c,l),s!==null&&(zn(s,r,l),qu(s,r,l))}};function qE(r,s,l,c,d,_,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,T):s.prototype&&s.prototype.isPureReactComponent?!Ru(l,c)||!Ru(d,_):!0}function HE(r,s,l,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==r&&Gm.enqueueReplaceState(s,s.state,null)}function to(r,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(r=r.defaultProps){l===s&&(l=R({},l));for(var d in r)l[d]===void 0&&(l[d]=r[d])}return l}var vf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function GE(r){vf(r)}function $E(r){console.error(r)}function KE(r){vf(r)}function Ef(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function QE(r,s,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $m(r,s,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ef(r,s)},l}function WE(r){return r=Fs(r),r.tag=3,r}function YE(r,s,l,c){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var _=c.value;r.payload=function(){return d(_)},r.callback=function(){QE(s,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){QE(s,l,c),typeof d!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function L2(r,s,l,c,d){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Bu(s,l,d,!0),l=Si.current,l!==null){switch(l.tag){case 13:return hr===null?R_():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=d,c===wm?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),N_(r,c,d)),!1;case 22:return l.flags|=65536,c===wm?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),N_(r,c,d)),!1}throw Error(i(435,l.tag))}return N_(r,c,d),R_(),!1}if(ot)return s=Si.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==Tm&&(r=Error(i(422),{cause:c}),Ou(Ei(r,l)))):(c!==Tm&&(s=Error(i(423),{cause:c}),Ou(Ei(s,l))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,c=Ei(c,l),d=$m(r.stateNode,c,d),o_(r,d),Lt!==4&&(Lt=2)),!1;var _=Error(i(520),{cause:c});if(_=Ei(_,l),Xu===null?Xu=[_]:Xu.push(_),Lt!==4&&(Lt=2),s===null)return!0;c=Ei(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=d&-d,l.lanes|=r,r=$m(l.stateNode,c,r),o_(l,r),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))))return l.flags|=65536,d&=-d,l.lanes|=d,d=WE(d),YE(d,r,l,c),o_(l,d),!1}l=l.return}while(l!==null);return!1}var XE=Error(i(461)),dn=!1;function Sn(r,s,l,c){s.child=r===null?nE(s,null,l,c):Ya(s,r.child,l,c)}function ZE(r,s,l,c,d){l=l.render;var _=s.ref;if("ref"in c){var T={};for(var C in c)C!=="ref"&&(T[C]=c[C])}else T=c;return io(s),c=Nm(r,s,l,T,_,d),C=xm(),r!==null&&!dn?(Om(r,s,d),zr(r,s,d)):(ot&&C&&vm(s),s.flags|=1,Sn(r,s,c,d),s.child)}function JE(r,s,l,c,d){if(r===null){var _=l.type;return typeof _=="function"&&!m_(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,e1(r,s,_,c,d)):(r=Af(l.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(_=r.child,!t_(r,d)){var T=_.memoizedProps;if(l=l.compare,l=l!==null?l:Ru,l(T,c)&&r.ref===s.ref)return zr(r,s,d)}return s.flags|=1,r=$s(_,c),r.ref=s.ref,r.return=s,s.child=r}function e1(r,s,l,c,d){if(r!==null){var _=r.memoizedProps;if(Ru(_,c)&&r.ref===s.ref)if(dn=!1,s.pendingProps=c=_,t_(r,d))(r.flags&131072)!==0&&(dn=!0);else return s.lanes=r.lanes,zr(r,s,d)}return Km(r,s,l,c,d)}function t1(r,s,l){var c=s.pendingProps,d=c.children,_=(s.stateNode._pendingVisibility&2)!==0,T=r!==null?r.memoizedState:null;if(Fu(r,s),c.mode==="hidden"||_){if((s.flags&128)!==0){if(c=T!==null?T.baseLanes|l:l,r!==null){for(d=s.child=r.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;s.childLanes=_&~c}else s.childLanes=0,s.child=null;return n1(r,s,c,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&cf(s,T!==null?T.cachePool:null),T!==null?iE(s,T):Sm(),rE(s);else return s.lanes=s.childLanes=536870912,n1(r,s,T!==null?T.baseLanes|l:l,l)}else T!==null?(cf(s,T.cachePool),iE(s,T),Ls(),s.memoizedState=null):(r!==null&&cf(s,null),Sm(),Ls());return Sn(r,s,d,l),s.child}function n1(r,s,l,c){var d=Rm();return d=d===null?null:{parent:rn._currentValue,pool:d},s.memoizedState={baseLanes:l,cachePool:d},r!==null&&cf(s,null),Sm(),rE(s),r!==null&&Bu(r,s,c,!0),null}function Fu(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=2097664)}}function Km(r,s,l,c,d){return io(s),l=Nm(r,s,l,c,void 0,d),c=xm(),r!==null&&!dn?(Om(r,s,d),zr(r,s,d)):(ot&&c&&vm(s),s.flags|=1,Sn(r,s,l,d),s.child)}function i1(r,s,l,c,d,_){return io(s),s.updateQueue=null,l=uE(s,c,l,d),lE(r),c=xm(),r!==null&&!dn?(Om(r,s,_),zr(r,s,_)):(ot&&c&&vm(s),s.flags|=1,Sn(r,s,l,_),s.child)}function r1(r,s,l,c,d){if(io(s),s.stateNode===null){var _=Xo,T=l.contextType;typeof T=="object"&&T!==null&&(_=In(T)),_=new l(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Gm,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},s_(s),T=l.contextType,_.context=typeof T=="object"&&T!==null?In(T):Xo,_.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Hm(s,l,T,c),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&Gm.enqueueReplaceState(_,_.state,null),Gu(s,c,_,d),Hu(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){_=s.stateNode;var C=s.memoizedProps,M=to(l,C);_.props=M;var z=_.context,J=l.contextType;T=Xo,typeof J=="object"&&J!==null&&(T=In(J));var se=l.getDerivedStateFromProps;J=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||z!==T)&&HE(s,_,c,T),zs=!1;var K=s.memoizedState;_.state=K,Gu(s,c,_,d),Hu(),z=s.memoizedState,C||K!==z||zs?(typeof se=="function"&&(Hm(s,l,se,c),z=s.memoizedState),(M=zs||qE(s,l,M,c,K,z,T))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=z),_.props=c,_.state=z,_.context=T,c=M):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,a_(r,s),T=s.memoizedProps,J=to(l,T),_.props=J,se=s.pendingProps,K=_.context,z=l.contextType,M=Xo,typeof z=="object"&&z!==null&&(M=In(z)),C=l.getDerivedStateFromProps,(z=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==se||K!==M)&&HE(s,_,c,M),zs=!1,K=s.memoizedState,_.state=K,Gu(s,c,_,d),Hu();var X=s.memoizedState;T!==se||K!==X||zs||r!==null&&r.dependencies!==null&&Tf(r.dependencies)?(typeof C=="function"&&(Hm(s,l,C,c),X=s.memoizedState),(J=zs||qE(s,l,J,c,K,X,M)||r!==null&&r.dependencies!==null&&Tf(r.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,M),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,M)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),_.props=c,_.state=X,_.context=M,c=J):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),c=!1)}return _=c,Fu(r,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,r!==null&&c?(s.child=Ya(s,r.child,null,d),s.child=Ya(s,null,l,d)):Sn(r,s,l,d),s.memoizedState=_.state,r=s.child):r=zr(r,s,d),r}function s1(r,s,l,c){return xu(),s.flags|=256,Sn(r,s,l,c),s.child}var Qm={dehydrated:null,treeContext:null,retryLane:0};function Wm(r){return{baseLanes:r,cachePool:oE()}}function Ym(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Ri),r}function a1(r,s,l){var c=s.pendingProps,d=!1,_=(s.flags&128)!==0,T;if((T=_)||(T=r!==null&&r.memoizedState===null?!1:(nn.current&2)!==0),T&&(d=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(ot){if(d?Ps(s):Ls(),ot){var C=wn,M;if(M=C){e:{for(M=C,C=cr;M.nodeType!==8;){if(!C){C=null;break e}if(M=Ui(M.nextSibling),M===null){C=null;break e}}C=M}C!==null?(s.memoizedState={dehydrated:C,treeContext:Ka!==null?{id:Lr,overflow:Vr}:null,retryLane:536870912},M=Ci(18,null,null,0),M.stateNode=C,M.return=s,s.child=M,jn=s,wn=null,M=!0):M=!1}M||Wa(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return C.data==="$!"?s.lanes=16:s.lanes=536870912,null;Ur(s)}return C=c.children,c=c.fallback,d?(Ls(),d=s.mode,C=Zm({mode:"hidden",children:C},d),c=so(c,d,l,null),C.return=s,c.return=s,C.sibling=c,s.child=C,d=s.child,d.memoizedState=Wm(l),d.childLanes=Ym(r,T,l),s.memoizedState=Qm,c):(Ps(s),Xm(s,C))}if(M=r.memoizedState,M!==null&&(C=M.dehydrated,C!==null)){if(_)s.flags&256?(Ps(s),s.flags&=-257,s=Jm(r,s,l)):s.memoizedState!==null?(Ls(),s.child=r.child,s.flags|=128,s=null):(Ls(),d=c.fallback,C=s.mode,c=Zm({mode:"visible",children:c.children},C),d=so(d,C,l,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Ya(s,r.child,null,l),c=s.child,c.memoizedState=Wm(l),c.childLanes=Ym(r,T,l),s.memoizedState=Qm,s=d);else if(Ps(s),C.data==="$!"){if(T=C.nextSibling&&C.nextSibling.dataset,T)var z=T.dgst;T=z,c=Error(i(419)),c.stack="",c.digest=T,Ou({value:c,source:null,stack:null}),s=Jm(r,s,l)}else if(dn||Bu(r,s,l,!1),T=(l&r.childLanes)!==0,dn||T){if(T=wt,T!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(T.suspendedLanes|l))!==0?0:c,c!==0&&c!==M.retryLane)throw M.retryLane=c,Ms(r,c),zn(T,r,c),XE}C.data==="$?"||R_(),s=Jm(r,s,l)}else C.data==="$?"?(s.flags|=128,s.child=r.child,s=X2.bind(null,r),C._reactRetry=s,s=null):(r=M.treeContext,wn=Ui(C.nextSibling),jn=s,ot=!0,Li=null,cr=!1,r!==null&&(Ti[wi++]=Lr,Ti[wi++]=Vr,Ti[wi++]=Ka,Lr=r.id,Vr=r.overflow,Ka=s),s=Xm(s,c.children),s.flags|=4096);return s}return d?(Ls(),d=c.fallback,C=s.mode,M=r.child,z=M.sibling,c=$s(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&31457280,z!==null?d=$s(z,d):(d=so(d,C,l,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,C=r.child.memoizedState,C===null?C=Wm(l):(M=C.cachePool,M!==null?(z=rn._currentValue,M=M.parent!==z?{parent:z,pool:z}:M):M=oE(),C={baseLanes:C.baseLanes|l,cachePool:M}),d.memoizedState=C,d.childLanes=Ym(r,T,l),s.memoizedState=Qm,c):(Ps(s),l=r.child,r=l.sibling,l=$s(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=l,s.memoizedState=null,l)}function Xm(r,s){return s=Zm({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Zm(r,s){return D1(r,s,0,null)}function Jm(r,s,l){return Ya(s,r.child,null,l),r=Xm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function o1(r,s,l){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),i_(r.return,s,l)}function e_(r,s,l,c,d){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=d)}function l1(r,s,l){var c=s.pendingProps,d=c.revealOrder,_=c.tail;if(Sn(r,s,c.children,l),c=nn.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&o1(r,l,s);else if(r.tag===19)o1(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(Ce(nn,c),d){case"forwards":for(l=s.child,d=null;l!==null;)r=l.alternate,r!==null&&uf(r)===null&&(d=l),l=l.sibling;l=d,l===null?(d=s.child,s.child=null):(d=l.sibling,l.sibling=null),e_(s,!1,d,l,_);break;case"backwards":for(l=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&uf(r)===null){s.child=d;break}r=d.sibling,d.sibling=l,l=d,d=r}e_(s,!0,l,null,_);break;case"together":e_(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function zr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Ks|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(Bu(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=$s(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=$s(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function t_(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Tf(r)))}function V2(r,s,l){switch(s.tag){case 3:Be(s,s.stateNode.containerInfo),js(s,rn,r.memoizedState.cache),xu();break;case 27:case 5:kt(s);break;case 4:Be(s,s.stateNode.containerInfo);break;case 10:js(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ps(s),s.flags|=128,null):(l&s.child.childLanes)!==0?a1(r,s,l):(Ps(s),r=zr(r,s,l),r!==null?r.sibling:null);Ps(s);break;case 19:var d=(r.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Bu(r,s,l,!1),c=(l&s.childLanes)!==0),d){if(c)return l1(r,s,l);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(nn,nn.current),c)break;return null;case 22:case 23:return s.lanes=0,t1(r,s,l);case 24:js(s,rn,r.memoizedState.cache)}return zr(r,s,l)}function u1(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)dn=!0;else{if(!t_(r,l)&&(s.flags&128)===0)return dn=!1,V2(r,s,l);dn=(r.flags&131072)!==0}else dn=!1,ot&&(s.flags&1048576)!==0&&K0(s,rf,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")m_(c)?(r=to(c,r),s.tag=1,s=r1(null,s,c,r,l)):(s.tag=0,s=Km(null,s,c,r,l));else{if(c!=null){if(d=c.$$typeof,d===x){s.tag=11,s=ZE(null,s,c,r,l);break e}else if(d===H){s.tag=14,s=JE(null,s,c,r,l);break e}}throw s=b(c)||c,Error(i(306,s,""))}}return s;case 0:return Km(r,s,s.type,s.pendingProps,l);case 1:return c=s.type,d=to(c,s.pendingProps),r1(r,s,c,d,l);case 3:e:{if(Be(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var _=s.pendingProps;d=s.memoizedState,c=d.element,a_(r,s),Gu(s,_,null,l);var T=s.memoizedState;if(_=T.cache,js(s,rn,_),_!==d.cache&&r_(s,[rn],l,!0),Hu(),_=T.element,d.isDehydrated)if(d={element:_,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=s1(r,s,_,l);break e}else if(_!==c){c=Ei(Error(i(424)),s),Ou(c),s=s1(r,s,_,l);break e}else for(wn=Ui(s.stateNode.containerInfo.firstChild),jn=s,ot=!0,Li=null,cr=!0,l=nE(s,null,_,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(xu(),_===c){s=zr(r,s,l);break e}Sn(r,s,_,l)}s=s.child}return s;case 26:return Fu(r,s),r===null?(l=fT(s.type,null,s.pendingProps,null))?s.memoizedState=l:ot||(l=s.type,r=s.pendingProps,c=Vf(ct.current).createElement(l),c[cn]=s,c[Jt]=r,bn(c,l,r),It(c),s.stateNode=c):s.memoizedState=fT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return kt(s),r===null&&ot&&(c=s.stateNode=uT(s.type,s.pendingProps,ct.current),jn=s,cr=!0,wn=Ui(c.firstChild)),c=s.pendingProps.children,r!==null||ot?Sn(r,s,c,l):s.child=Ya(s,null,c,l),Fu(r,s),s.child;case 5:return r===null&&ot&&((d=c=wn)&&(c=dN(c,s.type,s.pendingProps,cr),c!==null?(s.stateNode=c,jn=s,wn=Ui(c.firstChild),cr=!1,d=!0):d=!1),d||Wa(s)),kt(s),d=s.type,_=s.pendingProps,T=r!==null?r.memoizedProps:null,c=_.children,F_(d,_)?c=null:T!==null&&F_(d,T)&&(s.flags|=32),s.memoizedState!==null&&(d=Nm(r,s,x2,null,null,l),ac._currentValue=d),Fu(r,s),Sn(r,s,c,l),s.child;case 6:return r===null&&ot&&((r=l=wn)&&(l=pN(l,s.pendingProps,cr),l!==null?(s.stateNode=l,jn=s,wn=null,r=!0):r=!1),r||Wa(s)),null;case 13:return a1(r,s,l);case 4:return Be(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Ya(s,null,c,l):Sn(r,s,c,l),s.child;case 11:return ZE(r,s,s.type,s.pendingProps,l);case 7:return Sn(r,s,s.pendingProps,l),s.child;case 8:return Sn(r,s,s.pendingProps.children,l),s.child;case 12:return Sn(r,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,js(s,s.type,c.value),Sn(r,s,c.children,l),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,io(s),d=In(d),c=c(d),s.flags|=1,Sn(r,s,c,l),s.child;case 14:return JE(r,s,s.type,s.pendingProps,l);case 15:return e1(r,s,s.type,s.pendingProps,l);case 19:return l1(r,s,l);case 22:return t1(r,s,l);case 24:return io(s),c=In(rn),r===null?(d=Rm(),d===null&&(d=wt,_=Am(),d.pooledCache=_,_.refCount++,_!==null&&(d.pooledCacheLanes|=l),d=_),s.memoizedState={parent:c,cache:d},s_(s),js(s,rn,d)):((r.lanes&l)!==0&&(a_(r,s),Gu(s,null,null,l),Hu()),d=r.memoizedState,_=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),js(s,rn,c)):(c=_.cache,js(s,rn,c),c!==d.cache&&r_(s,[rn],l,!0))),Sn(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var n_=me(null),no=null,Fr=null;function js(r,s,l){Ce(n_,s._currentValue),s._currentValue=l}function Br(r){r._currentValue=n_.current,Se(n_)}function i_(r,s,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===l)break;r=r.return}}function r_(r,s,l,c){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var _=d.dependencies;if(_!==null){var T=d.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=d;for(var M=0;M<s.length;M++)if(C.context===s[M]){_.lanes|=l,C=_.alternate,C!==null&&(C.lanes|=l),i_(_.return,l,r),c||(T=null);break e}_=C.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=l,_=T.alternate,_!==null&&(_.lanes|=l),i_(T,l,r),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===r){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Bu(r,s,l,c){r=null;for(var d=s,_=!1;d!==null;){if(!_){if((d.flags&524288)!==0)_=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var C=d.type;ai(d.pendingProps.value,T.value)||(r!==null?r.push(C):r=[C])}}else if(d===rt.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(ac):r=[ac])}d=d.return}r!==null&&r_(s,r,l,c),s.flags|=262144}function Tf(r){for(r=r.firstContext;r!==null;){if(!ai(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function io(r){no=r,Fr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function In(r){return c1(no,r)}function wf(r,s){return no===null&&io(r),c1(r,s)}function c1(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Fr===null){if(r===null)throw Error(i(308));Fr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Fr=Fr.next=s;return l}var zs=!1;function s_(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function a_(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Bs(r,s,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(xt&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=tf(r),G0(r,null,l),s}return ef(r,c,s,l),tf(r)}function qu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194176)!==0)){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,bs(r,l)}}function o_(r,s){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var d=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?d=_=T:_=_.next=T,l=l.next}while(l!==null);_===null?d=_=s:_=_.next=s}else d=_=s;l={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var l_=!1;function Hu(){if(l_){var r=il;if(r!==null)throw r}}function Gu(r,s,l,c){l_=!1;var d=r.updateQueue;zs=!1;var _=d.firstBaseUpdate,T=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var M=C,z=M.next;M.next=null,T===null?_=z:T.next=z,T=M;var J=r.alternate;J!==null&&(J=J.updateQueue,C=J.lastBaseUpdate,C!==T&&(C===null?J.firstBaseUpdate=z:C.next=z,J.lastBaseUpdate=M))}if(_!==null){var se=d.baseState;T=0,J=z=M=null,C=_;do{var K=C.lane&-536870913,X=K!==C.lane;if(X?(et&K)===K:(c&K)===K){K!==0&&K===nl&&(l_=!0),J!==null&&(J=J.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Te=r,ke=C;K=s;var Vt=l;switch(ke.tag){case 1:if(Te=ke.payload,typeof Te=="function"){se=Te.call(Vt,se,K);break e}se=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=ke.payload,K=typeof Te=="function"?Te.call(Vt,se,K):Te,K==null)break e;se=R({},se,K);break e;case 2:zs=!0}}K=C.callback,K!==null&&(r.flags|=64,X&&(r.flags|=8192),X=d.callbacks,X===null?d.callbacks=[K]:X.push(K))}else X={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},J===null?(z=J=X,M=se):J=J.next=X,T|=K;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;X=C,C=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);J===null&&(M=se),d.baseState=M,d.firstBaseUpdate=z,d.lastBaseUpdate=J,_===null&&(d.shared.lanes=0),Ks|=T,r.lanes=T,r.memoizedState=se}}function h1(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function f1(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)h1(l[r],s)}function $u(r,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&r)===r){c=void 0;var _=l.create,T=l.inst;c=_(),T.destroy=c}l=l.next}while(l!==d)}}catch(C){Et(s,s.return,C)}}function qs(r,s,l){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&r)===r){var T=c.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,d=s;var M=l;try{C()}catch(z){Et(d,M,z)}}}c=c.next}while(c!==_)}}catch(z){Et(s,s.return,z)}}function d1(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{f1(s,l)}catch(c){Et(r,r.return,c)}}}function p1(r,s,l){l.props=to(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){Et(r,s,c)}}function ro(r,s){try{var l=r.ref;if(l!==null){var c=r.stateNode;switch(r.tag){case 26:case 27:case 5:var d=c;break;default:d=c}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(_){Et(r,s,_)}}function oi(r,s){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(d){Et(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){Et(r,s,d)}else l.current=null}function m1(r){var s=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(d){Et(r,r.return,d)}}function _1(r,s,l){try{var c=r.stateNode;lN(c,r.type,l,s),c[Jt]=s}catch(d){Et(r,r.return,d)}}function g1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function u_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||g1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function c_(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Lf));else if(c!==4&&c!==27&&(r=r.child,r!==null))for(c_(r,s,l),r=r.sibling;r!==null;)c_(r,s,l),r=r.sibling}function Sf(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(c!==4&&c!==27&&(r=r.child,r!==null))for(Sf(r,s,l),r=r.sibling;r!==null;)Sf(r,s,l),r=r.sibling}var qr=!1,Pt=!1,h_=!1,y1=typeof WeakSet=="function"?WeakSet:Set,pn=null,v1=!1;function U2(r,s){if(r=r.containerInfo,j_=qf,r=L0(r),dm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var d=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var T=0,C=-1,M=-1,z=0,J=0,se=r,K=null;t:for(;;){for(var X;se!==l||d!==0&&se.nodeType!==3||(C=T+d),se!==_||c!==0&&se.nodeType!==3||(M=T+c),se.nodeType===3&&(T+=se.nodeValue.length),(X=se.firstChild)!==null;)K=se,se=X;for(;;){if(se===r)break t;if(K===l&&++z===d&&(C=T),K===_&&++J===c&&(M=T),(X=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=X}l=C===-1||M===-1?null:{start:C,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(z_={focusedElem:r,selectionRange:l},qf=!1,pn=s;pn!==null;)if(s=pn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,pn=r;else for(;pn!==null;){switch(s=pn,_=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,l=s,d=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var Te=to(l.type,d,l.elementType===l.type);r=c.getSnapshotBeforeUpdate(Te,_),c.__reactInternalSnapshotBeforeUpdate=r}catch(ke){Et(l,l.return,ke)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)H_(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":H_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,pn=r;break}pn=s.return}return Te=v1,v1=!1,Te}function E1(r,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Gr(r,l),c&4&&$u(5,l);break;case 1:if(Gr(r,l),c&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(C){Et(l,l.return,C)}else{var d=to(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(C){Et(l,l.return,C)}}c&64&&d1(l),c&512&&ro(l,l.return);break;case 3:if(Gr(r,l),c&64&&(c=l.updateQueue,c!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{f1(c,r)}catch(C){Et(l,l.return,C)}}break;case 26:Gr(r,l),c&512&&ro(l,l.return);break;case 27:case 5:Gr(r,l),s===null&&c&4&&m1(l),c&512&&ro(l,l.return);break;case 12:Gr(r,l);break;case 13:Gr(r,l),c&4&&S1(r,l);break;case 22:if(d=l.memoizedState!==null||qr,!d){s=s!==null&&s.memoizedState!==null||Pt;var _=qr,T=Pt;qr=d,(Pt=s)&&!T?Hs(r,l,(l.subtreeFlags&8772)!==0):Gr(r,l),qr=_,Pt=T}c&512&&(l.memoizedProps.mode==="manual"?ro(l,l.return):oi(l,l.return));break;default:Gr(r,l)}}function T1(r){var s=r.alternate;s!==null&&(r.alternate=null,T1(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ma(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var $t=null,li=!1;function Hr(r,s,l){for(l=l.child;l!==null;)w1(r,s,l),l=l.sibling}function w1(r,s,l){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Kn,l)}catch{}switch(l.tag){case 26:Pt||oi(l,s),Hr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Pt||oi(l,s);var c=$t,d=li;for($t=l.stateNode,Hr(r,s,l),l=l.stateNode,s=l.attributes;s.length;)l.removeAttributeNode(s[0]);Ma(l),$t=c,li=d;break;case 5:Pt||oi(l,s);case 6:d=$t;var _=li;if($t=null,Hr(r,s,l),$t=d,li=_,$t!==null)if(li)try{r=$t,c=l.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)}catch(T){Et(l,s,T)}else try{$t.removeChild(l.stateNode)}catch(T){Et(l,s,T)}break;case 18:$t!==null&&(li?(s=$t,l=l.stateNode,s.nodeType===8?q_(s.parentNode,l):s.nodeType===1&&q_(s,l),cc(s)):q_($t,l.stateNode));break;case 4:c=$t,d=li,$t=l.stateNode.containerInfo,li=!0,Hr(r,s,l),$t=c,li=d;break;case 0:case 11:case 14:case 15:Pt||qs(2,l,s),Pt||qs(4,l,s),Hr(r,s,l);break;case 1:Pt||(oi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&p1(l,s,c)),Hr(r,s,l);break;case 21:Hr(r,s,l);break;case 22:Pt||oi(l,s),Pt=(c=Pt)||l.memoizedState!==null,Hr(r,s,l),Pt=c;break;default:Hr(r,s,l)}}function S1(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cc(r)}catch(l){Et(s,s.return,l)}}function j2(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new y1),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new y1),s;default:throw Error(i(435,r.tag))}}function f_(r,s){var l=j2(r);s.forEach(function(c){var d=Z2.bind(null,r,c);l.has(c)||(l.add(c),c.then(d,d))})}function bi(r,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var d=l[c],_=r,T=s,C=T;e:for(;C!==null;){switch(C.tag){case 27:case 5:$t=C.stateNode,li=!1;break e;case 3:$t=C.stateNode.containerInfo,li=!0;break e;case 4:$t=C.stateNode.containerInfo,li=!0;break e}C=C.return}if($t===null)throw Error(i(160));w1(_,T,d),$t=null,li=!1,_=d.alternate,_!==null&&(_.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)b1(s,r),s=s.sibling}var Vi=null;function b1(r,s){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:bi(s,r),Ai(r),c&4&&(qs(3,r,r.return),$u(3,r),qs(5,r,r.return));break;case 1:bi(s,r),Ai(r),c&512&&(Pt||l===null||oi(l,l.return)),c&64&&qr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var d=Vi;if(bi(s,r),Ai(r),c&512&&(Pt||l===null||oi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":_=d.getElementsByTagName("title")[0],(!_||_[Cs]||_[cn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=d.createElement(c),d.head.insertBefore(_,d.querySelector("head > title"))),bn(_,c,l),_[cn]=r,It(_),c=_;break e;case"link":var T=mT("link","href",d).get(c+(l.href||""));if(T){for(var C=0;C<T.length;C++)if(_=T[C],_.getAttribute("href")===(l.href==null?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(C,1);break t}}_=d.createElement(c),bn(_,c,l),d.head.appendChild(_);break;case"meta":if(T=mT("meta","content",d).get(c+(l.content||""))){for(C=0;C<T.length;C++)if(_=T[C],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(C,1);break t}}_=d.createElement(c),bn(_,c,l),d.head.appendChild(_);break;default:throw Error(i(468,c))}_[cn]=r,It(_),c=_}r.stateNode=c}else _T(d,r.type,r.stateNode);else r.stateNode=pT(d,c,r.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?_T(d,r.type,r.stateNode):pT(d,c,r.memoizedProps)):c===null&&r.stateNode!==null&&_1(r,r.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&r.alternate===null){d=r.stateNode,_=r.memoizedProps;try{for(var M=d.firstChild;M;){var z=M.nextSibling,J=M.nodeName;M[Cs]||J==="HEAD"||J==="BODY"||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&M.rel.toLowerCase()==="stylesheet"||d.removeChild(M),M=z}for(var se=r.type,K=d.attributes;K.length;)d.removeAttributeNode(K[0]);bn(d,se,_),d[cn]=r,d[Jt]=_}catch(Te){Et(r,r.return,Te)}}case 5:if(bi(s,r),Ai(r),c&512&&(Pt||l===null||oi(l,l.return)),r.flags&32){d=r.stateNode;try{mi(d,"")}catch(Te){Et(r,r.return,Te)}}c&4&&r.stateNode!=null&&(d=r.memoizedProps,_1(r,d,l!==null?l.memoizedProps:d)),c&1024&&(h_=!0);break;case 6:if(bi(s,r),Ai(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(Te){Et(r,r.return,Te)}}break;case 3:if(zf=null,d=Vi,Vi=Uf(s.containerInfo),bi(s,r),Vi=d,Ai(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{cc(s.containerInfo)}catch(Te){Et(r,r.return,Te)}h_&&(h_=!1,A1(r));break;case 4:c=Vi,Vi=Uf(r.stateNode.containerInfo),bi(s,r),Ai(r),Vi=c;break;case 12:bi(s,r),Ai(r);break;case 13:bi(s,r),Ai(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(T_=ft()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,f_(r,c)));break;case 22:if(c&512&&(Pt||l===null||oi(l,l.return)),M=r.memoizedState!==null,z=l!==null&&l.memoizedState!==null,J=qr,se=Pt,qr=J||M,Pt=se||z,bi(s,r),Pt=se,qr=J,Ai(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=M?s._visibility&-2:s._visibility|1,M&&(s=qr||Pt,l===null||z||s||ol(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(l=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(l===null){z=l=s;try{if(d=z.stateNode,M)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=z.stateNode,C=z.memoizedProps.style;var X=C!=null&&C.hasOwnProperty("display")?C.display:null;T.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){Et(z,z.return,Te)}}}else if(s.tag===6){if(l===null){z=s;try{z.stateNode.nodeValue=M?"":z.memoizedProps}catch(Te){Et(z,z.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,f_(r,l))));break;case 19:bi(s,r),Ai(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,f_(r,c)));break;case 21:break;default:bi(s,r),Ai(r)}}function Ai(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var l=r.return;l!==null;){if(g1(l)){var c=l;break e}l=l.return}throw Error(i(160))}switch(c.tag){case 27:var d=c.stateNode,_=u_(r);Sf(r,_,d);break;case 5:var T=c.stateNode;c.flags&32&&(mi(T,""),c.flags&=-33);var C=u_(r);Sf(r,C,T);break;case 3:case 4:var M=c.stateNode.containerInfo,z=u_(r);c_(r,z,M);break;default:throw Error(i(161))}}}catch(J){Et(r,r.return,J)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function A1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;A1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Gr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)E1(r,s.alternate,s),s=s.sibling}function ol(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:qs(4,s,s.return),ol(s);break;case 1:oi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&p1(s,s.return,l),ol(s);break;case 26:case 27:case 5:oi(s,s.return),ol(s);break;case 22:oi(s,s.return),s.memoizedState===null&&ol(s);break;default:ol(s)}r=r.sibling}}function Hs(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=r,_=s,T=_.flags;switch(_.tag){case 0:case 11:case 15:Hs(d,_,l),$u(4,_);break;case 1:if(Hs(d,_,l),c=_,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(z){Et(c,c.return,z)}if(c=_,d=c.updateQueue,d!==null){var C=c.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)h1(M[d],C)}catch(z){Et(c,c.return,z)}}l&&T&64&&d1(_),ro(_,_.return);break;case 26:case 27:case 5:Hs(d,_,l),l&&c===null&&T&4&&m1(_),ro(_,_.return);break;case 12:Hs(d,_,l);break;case 13:Hs(d,_,l),l&&T&4&&S1(d,_);break;case 22:_.memoizedState===null&&Hs(d,_,l),ro(_,_.return);break;default:Hs(d,_,l)}s=s.sibling}}function d_(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Lu(l))}function p_(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Lu(r))}function Gs(r,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)C1(r,s,l,c),s=s.sibling}function C1(r,s,l,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Gs(r,s,l,c),d&2048&&$u(9,s);break;case 3:Gs(r,s,l,c),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Lu(r)));break;case 12:if(d&2048){Gs(r,s,l,c),r=s.stateNode;try{var _=s.memoizedProps,T=_.id,C=_.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){Et(s,s.return,M)}}else Gs(r,s,l,c);break;case 23:break;case 22:_=s.stateNode,s.memoizedState!==null?_._visibility&4?Gs(r,s,l,c):Ku(r,s):_._visibility&4?Gs(r,s,l,c):(_._visibility|=4,ll(r,s,l,c,(s.subtreeFlags&10256)!==0)),d&2048&&d_(s.alternate,s);break;case 24:Gs(r,s,l,c),d&2048&&p_(s.alternate,s);break;default:Gs(r,s,l,c)}}function ll(r,s,l,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=r,T=s,C=l,M=c,z=T.flags;switch(T.tag){case 0:case 11:case 15:ll(_,T,C,M,d),$u(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&4?ll(_,T,C,M,d):Ku(_,T):(J._visibility|=4,ll(_,T,C,M,d)),d&&z&2048&&d_(T.alternate,T);break;case 24:ll(_,T,C,M,d),d&&z&2048&&p_(T.alternate,T);break;default:ll(_,T,C,M,d)}s=s.sibling}}function Ku(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,c=s,d=c.flags;switch(c.tag){case 22:Ku(l,c),d&2048&&d_(c.alternate,c);break;case 24:Ku(l,c),d&2048&&p_(c.alternate,c);break;default:Ku(l,c)}s=s.sibling}}var Qu=8192;function ul(r){if(r.subtreeFlags&Qu)for(r=r.child;r!==null;)R1(r),r=r.sibling}function R1(r){switch(r.tag){case 26:ul(r),r.flags&Qu&&r.memoizedState!==null&&RN(Vi,r.memoizedState,r.memoizedProps);break;case 5:ul(r);break;case 3:case 4:var s=Vi;Vi=Uf(r.stateNode.containerInfo),ul(r),Vi=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Qu,Qu=16777216,ul(r),Qu=s):ul(r));break;default:ul(r)}}function I1(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Wu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];pn=c,x1(c,r)}I1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)N1(r),r=r.sibling}function N1(r){switch(r.tag){case 0:case 11:case 15:Wu(r),r.flags&2048&&qs(9,r,r.return);break;case 3:Wu(r);break;case 12:Wu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,bf(r)):Wu(r);break;default:Wu(r)}}function bf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];pn=c,x1(c,r)}I1(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:qs(8,s,s.return),bf(s);break;case 22:l=s.stateNode,l._visibility&4&&(l._visibility&=-5,bf(s));break;default:bf(s)}r=r.sibling}}function x1(r,s){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:qs(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Lu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,pn=c;else e:for(l=r;pn!==null;){c=pn;var d=c.sibling,_=c.return;if(T1(c),c===l){pn=null;break e}if(d!==null){d.return=_,pn=d;break e}pn=_}}}function z2(r,s,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(r,s,l,c){return new z2(r,s,l,c)}function m_(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $s(r,s){var l=r.alternate;return l===null?(l=Ci(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&31457280,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function O1(r,s){r.flags&=31457282;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Af(r,s,l,c,d,_){var T=0;if(c=r,typeof r=="function")m_(r)&&(T=1);else if(typeof r=="string")T=AN(r,l,Ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case p:return so(l.children,d,_,s);case m:T=8,d|=24;break;case g:return r=Ci(12,l,s,d|2),r.elementType=g,r.lanes=_,r;case U:return r=Ci(13,l,s,d),r.elementType=U,r.lanes=_,r;case k:return r=Ci(19,l,s,d),r.elementType=k,r.lanes=_,r;case F:return D1(l,d,_,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case v:case I:T=10;break e;case S:T=9;break e;case x:T=11;break e;case H:T=14;break e;case Y:T=16,c=null;break e}T=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Ci(T,l,s,d),s.elementType=r,s.type=c,s.lanes=_,s}function so(r,s,l,c){return r=Ci(7,r,c,s),r.lanes=l,r}function D1(r,s,l,c){r=Ci(22,r,c,s),r.elementType=F,r.lanes=l;var d={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=d._current;if(_===null)throw Error(i(456));if((d._pendingVisibility&2)===0){var T=Ms(_,2);T!==null&&(d._pendingVisibility|=2,zn(T,_,2))}},attach:function(){var _=d._current;if(_===null)throw Error(i(456));if((d._pendingVisibility&2)!==0){var T=Ms(_,2);T!==null&&(d._pendingVisibility&=-3,zn(T,_,2))}}};return r.stateNode=d,r}function __(r,s,l){return r=Ci(6,r,null,s),r.lanes=l,r}function g_(r,s,l){return s=Ci(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function $r(r){r.flags|=4}function k1(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!gT(s)){if(s=Si.current,s!==null&&((et&4194176)===et?hr!==null:(et&62914560)!==et&&(et&536870912)===0||s!==hr))throw ku=wm,Y0;r.flags|=8192}}function Cf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?ws():536870912,r.lanes|=s,hl|=s)}function Yu(r,s){if(!ot)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Nt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(s)for(var d=r.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags&31457280,c|=d.flags&31457280,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=l,s}function F2(r,s,l){var c=s.pendingProps;switch(Em(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return l=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Br(rn),Oe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Nu(s)?$r(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Li!==null&&(A_(Li),Li=null))),Nt(s),null;case 26:return l=s.memoizedState,r===null?($r(s),l!==null?(Nt(s),k1(s,l)):(Nt(s),s.flags&=-16777217)):l?l!==r.memoizedState?($r(s),Nt(s),k1(s,l)):(Nt(s),s.flags&=-16777217):(r.memoizedProps!==c&&$r(s),Nt(s),s.flags&=-16777217),null;case 27:qe(s),l=ct.current;var d=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&$r(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}r=Ae.current,Nu(s)?Q0(s):(r=uT(d,c,l),s.stateNode=r,$r(s))}return Nt(s),null;case 5:if(qe(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&$r(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}if(r=Ae.current,Nu(s))Q0(s);else{switch(d=Vf(ct.current),r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?d.createElement(l,{is:c.is}):d.createElement(l)}}r[cn]=s,r[Jt]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=r;e:switch(bn(r,l,c),l){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&$r(s)}}return Nt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&$r(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=ct.current,Nu(s)){if(r=s.stateNode,l=s.memoizedProps,c=null,d=jn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}r[cn]=s,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||iT(r.nodeValue,l)),r||Wa(s)}else r=Vf(r).createTextNode(c),r[cn]=s,s.stateNode=r}return Nt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=Nu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[cn]=s}else xu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),d=!1}else Li!==null&&(A_(Li),Li=null),d=!0;if(!d)return s.flags&256?(Ur(s),s):(Ur(s),null)}if(Ur(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=c!==null,r=r!==null&&r.memoizedState!==null,l){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==d&&(c.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),Cf(s,s.updateQueue),Nt(s),null;case 4:return Oe(),r===null&&L_(s.stateNode.containerInfo),Nt(s),null;case 10:return Br(s.type),Nt(s),null;case 19:if(Se(nn),d=s.memoizedState,d===null)return Nt(s),null;if(c=(s.flags&128)!==0,_=d.rendering,_===null)if(c)Yu(d,!1);else{if(Lt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=uf(r),_!==null){for(s.flags|=128,Yu(d,!1),r=_.updateQueue,s.updateQueue=r,Cf(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)O1(l,r),l=l.sibling;return Ce(nn,nn.current&1|2),s.child}r=r.sibling}d.tail!==null&&ft()>Rf&&(s.flags|=128,c=!0,Yu(d,!1),s.lanes=4194304)}else{if(!c)if(r=uf(_),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Cf(s,r),Yu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!ot)return Nt(s),null}else 2*ft()-d.renderingStartTime>Rf&&l!==536870912&&(s.flags|=128,c=!0,Yu(d,!1),s.lanes=4194304);d.isBackwards?(_.sibling=s.child,s.child=_):(r=d.last,r!==null?r.sibling=_:s.child=_,d.last=_)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=ft(),s.sibling=null,r=nn.current,Ce(nn,c?r&1|2:r&1),s):(Nt(s),null);case 22:case 23:return Ur(s),bm(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),l=s.updateQueue,l!==null&&Cf(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),r!==null&&Se(Xa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Br(rn),Nt(s),null;case 25:return null}throw Error(i(156,s.tag))}function B2(r,s){switch(Em(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Br(rn),Oe(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return qe(s),null;case 13:if(Ur(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));xu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Se(nn),null;case 4:return Oe(),null;case 10:return Br(s.type),null;case 22:case 23:return Ur(s),bm(),r!==null&&Se(Xa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Br(rn),null;case 25:return null;default:return null}}function M1(r,s){switch(Em(s),s.tag){case 3:Br(rn),Oe();break;case 26:case 27:case 5:qe(s);break;case 4:Oe();break;case 13:Ur(s);break;case 19:Se(nn);break;case 10:Br(s.type);break;case 22:case 23:Ur(s),bm(),r!==null&&Se(Xa);break;case 24:Br(rn)}}var q2={getCacheForType:function(r){var s=In(rn),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},H2=typeof WeakMap=="function"?WeakMap:Map,xt=0,wt=null,He=null,et=0,St=0,ui=null,Kr=!1,cl=!1,y_=!1,Qr=0,Lt=0,Ks=0,ao=0,v_=0,Ri=0,hl=0,Xu=null,dr=null,E_=!1,T_=0,Rf=1/0,If=null,Qs=null,Nf=!1,oo=null,Zu=0,w_=0,S_=null,Ju=0,b_=null;function ci(){if((xt&2)!==0&&et!==0)return et&-et;if(w.T!==null){var r=nl;return r!==0?r:D_()}return Mh()}function P1(){Ri===0&&(Ri=(et&536870912)===0||ot?hu():536870912);var r=Si.current;return r!==null&&(r.flags|=32),Ri}function zn(r,s,l){(r===wt&&St===2||r.cancelPendingCommit!==null)&&(fl(r,0),Wr(r,et,Ri,!1)),zt(r,l),((xt&2)===0||r!==wt)&&(r===wt&&((xt&2)===0&&(ao|=l),Lt===4&&Wr(r,et,Ri,!1)),pr(r))}function L1(r,s,l){if((xt&6)!==0)throw Error(i(327));var c=!l&&(s&60)===0&&(s&r.expiredLanes)===0||Ts(r,s),d=c?K2(r,s):I_(r,s,!0),_=c;do{if(d===0){cl&&!c&&Wr(r,s,0,!1);break}else if(d===6)Wr(r,s,0,!Kr);else{if(l=r.current.alternate,_&&!G2(l)){d=I_(r,s,!1),_=!1;continue}if(d===2){if(_=s,r.errorRecoveryDisabledLanes&_)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var C=r;d=Xu;var M=C.current.memoizedState.isDehydrated;if(M&&(fl(C,T).flags|=256),T=I_(C,T,!1),T!==2){if(y_&&!M){C.errorRecoveryDisabledLanes|=_,ao|=_,d=4;break e}_=dr,dr=d,_!==null&&A_(_)}d=T}if(_=!1,d!==2)continue}}if(d===1){fl(r,0),Wr(r,s,0,!0);break}e:{switch(c=r,d){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){Wr(c,s,Ri,!Kr);break e}break;case 2:dr=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=l,c.finishedLanes=s,(s&62914560)===s&&(_=T_+300-ft(),10<_)){if(Wr(c,s,Ri,!Kr),di(c,0)!==0)break e;c.timeoutHandle=aT(V1.bind(null,c,l,dr,If,E_,s,Ri,ao,hl,Kr,2,-0,0),_);break e}V1(c,l,dr,If,E_,s,Ri,ao,hl,Kr,0,-0,0)}}break}while(!0);pr(r)}function A_(r){dr===null?dr=r:dr.push.apply(dr,r)}function V1(r,s,l,c,d,_,T,C,M,z,J,se,K){var X=s.subtreeFlags;if((X&8192||(X&16785408)===16785408)&&(sc={stylesheets:null,count:0,unsuspend:CN},R1(s),s=IN(),s!==null)){r.cancelPendingCommit=s(H1.bind(null,r,l,c,d,T,C,M,1,se,K)),Wr(r,_,T,!z);return}H1(r,l,c,d,T,C,M,J,se,K)}function G2(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var d=l[c],_=d.getSnapshot;d=d.value;try{if(!ai(_(),d))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wr(r,s,l,c){s&=~v_,s&=~ao,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var d=s;0<d;){var _=31-Ln(d),T=1<<_;c[_]=-1,d&=~T}l!==0&&Ss(r,l,s)}function xf(){return(xt&6)===0?(ec(0),!1):!0}function C_(){if(He!==null){if(St===0)var r=He.return;else r=He,Fr=no=null,Dm(r),el=null,Mu=0,r=He;for(;r!==null;)M1(r.alternate,r),r=r.return;He=null}}function fl(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,cN(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),C_(),wt=r,He=l=$s(r.current,null),et=s,St=0,ui=null,Kr=!1,cl=Ts(r,s),y_=!1,hl=Ri=v_=ao=Ks=Lt=0,dr=Xu=null,E_=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var d=31-Ln(c),_=1<<d;s|=r[d],c&=~_}return Qr=s,Jh(),l}function U1(r,s){Ue=null,w.H=fr,s===Du?(s=J0(),St=3):s===Y0?(s=J0(),St=4):St=s===XE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ui=s,He===null&&(Lt=1,Ef(r,Ei(s,r.current)))}function j1(){var r=w.H;return w.H=fr,r===null?fr:r}function z1(){var r=w.A;return w.A=q2,r}function R_(){Lt=4,Kr||(et&4194176)!==et&&Si.current!==null||(cl=!0),(Ks&134217727)===0&&(ao&134217727)===0||wt===null||Wr(wt,et,Ri,!1)}function I_(r,s,l){var c=xt;xt|=2;var d=j1(),_=z1();(wt!==r||et!==s)&&(If=null,fl(r,s)),s=!1;var T=Lt;e:do try{if(St!==0&&He!==null){var C=He,M=ui;switch(St){case 8:C_(),T=6;break e;case 3:case 2:case 6:Si.current===null&&(s=!0);var z=St;if(St=0,ui=null,dl(r,C,M,z),l&&cl){T=0;break e}break;default:z=St,St=0,ui=null,dl(r,C,M,z)}}$2(),T=Lt;break}catch(J){U1(r,J)}while(!0);return s&&r.shellSuspendCounter++,Fr=no=null,xt=c,w.H=d,w.A=_,He===null&&(wt=null,et=0,Jh()),T}function $2(){for(;He!==null;)F1(He)}function K2(r,s){var l=xt;xt|=2;var c=j1(),d=z1();wt!==r||et!==s?(If=null,Rf=ft()+500,fl(r,s)):cl=Ts(r,s);e:do try{if(St!==0&&He!==null){s=He;var _=ui;t:switch(St){case 1:St=0,ui=null,dl(r,s,_,1);break;case 2:if(X0(_)){St=0,ui=null,B1(s);break}s=function(){St===2&&wt===r&&(St=7),pr(r)},_.then(s,s);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:X0(_)?(St=0,ui=null,B1(s)):(St=0,ui=null,dl(r,s,_,7));break;case 5:var T=null;switch(He.tag){case 26:T=He.memoizedState;case 5:case 27:var C=He;if(!T||gT(T)){St=0,ui=null;var M=C.sibling;if(M!==null)He=M;else{var z=C.return;z!==null?(He=z,Of(z)):He=null}break t}}St=0,ui=null,dl(r,s,_,5);break;case 6:St=0,ui=null,dl(r,s,_,6);break;case 8:C_(),Lt=6;break e;default:throw Error(i(462))}}Q2();break}catch(J){U1(r,J)}while(!0);return Fr=no=null,w.H=c,w.A=d,xt=l,He!==null?0:(wt=null,et=0,Jh(),Lt)}function Q2(){for(;He!==null&&!$n();)F1(He)}function F1(r){var s=u1(r.alternate,r,Qr);r.memoizedProps=r.pendingProps,s===null?Of(r):He=s}function B1(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=i1(l,s,s.pendingProps,s.type,void 0,et);break;case 11:s=i1(l,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:Dm(s);default:M1(l,s),s=He=O1(s,Qr),s=u1(l,s,Qr)}r.memoizedProps=r.pendingProps,s===null?Of(r):He=s}function dl(r,s,l,c){Fr=no=null,Dm(s),el=null,Mu=0;var d=s.return;try{if(L2(r,d,s,l,et)){Lt=1,Ef(r,Ei(l,r.current)),He=null;return}}catch(_){if(d!==null)throw He=d,_;Lt=1,Ef(r,Ei(l,r.current)),He=null;return}s.flags&32768?(ot||c===1?r=!0:cl||(et&536870912)!==0?r=!1:(Kr=r=!0,(c===2||c===3||c===6)&&(c=Si.current,c!==null&&c.tag===13&&(c.flags|=16384))),q1(s,r)):Of(s)}function Of(r){var s=r;do{if((s.flags&32768)!==0){q1(s,Kr);return}r=s.return;var l=F2(s.alternate,s,Qr);if(l!==null){He=l;return}if(s=s.sibling,s!==null){He=s;return}He=s=r}while(s!==null);Lt===0&&(Lt=5)}function q1(r,s){do{var l=B2(r.alternate,r);if(l!==null){l.flags&=32767,He=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){He=r;return}He=r=l}while(r!==null);Lt=6,He=null}function H1(r,s,l,c,d,_,T,C,M,z){var J=w.T,se=ue.p;try{ue.p=2,w.T=null,W2(r,s,l,c,se,d,_,T,C,M,z)}finally{w.T=J,ue.p=se}}function W2(r,s,l,c,d,_,T,C){do pl();while(oo!==null);if((xt&6)!==0)throw Error(i(327));var M=r.finishedWork;if(c=r.finishedLanes,M===null)return null;if(r.finishedWork=null,r.finishedLanes=0,M===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var z=M.lanes|M.childLanes;if(z|=gm,Dh(r,c,z,_,T,C),r===wt&&(He=wt=null,et=0),(M.subtreeFlags&10256)===0&&(M.flags&10256)===0||Nf||(Nf=!0,w_=z,S_=l,J2(Xt,function(){return pl(),null})),l=(M.flags&15990)!==0,(M.subtreeFlags&15990)!==0||l?(l=w.T,w.T=null,_=ue.p,ue.p=2,T=xt,xt|=4,U2(r,M),b1(M,r),v2(z_,r.containerInfo),qf=!!j_,z_=j_=null,r.current=M,E1(r,M.alternate,M),Di(),xt=T,ue.p=_,w.T=l):r.current=M,Nf?(Nf=!1,oo=r,Zu=c):G1(r,z),z=r.pendingLanes,z===0&&(Qs=null),uu(M.stateNode),pr(r),s!==null)for(d=r.onRecoverableError,M=0;M<s.length;M++)z=s[M],d(z.value,{componentStack:z.stack});return(Zu&3)!==0&&pl(),z=r.pendingLanes,(c&4194218)!==0&&(z&42)!==0?r===b_?Ju++:(Ju=0,b_=r):Ju=0,ec(0),null}function G1(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Lu(s)))}function pl(){if(oo!==null){var r=oo,s=w_;w_=0;var l=kh(Zu),c=w.T,d=ue.p;try{if(ue.p=32>l?32:l,w.T=null,oo===null)var _=!1;else{l=S_,S_=null;var T=oo,C=Zu;if(oo=null,Zu=0,(xt&6)!==0)throw Error(i(331));var M=xt;if(xt|=4,N1(T.current),C1(T,T.current,C,l),xt=M,ec(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Kn,T)}catch{}_=!0}return _}finally{ue.p=d,w.T=c,G1(r,s)}}return!1}function $1(r,s,l){s=Ei(l,s),s=$m(r.stateNode,s,2),r=Bs(r,s,2),r!==null&&(zt(r,2),pr(r))}function Et(r,s,l){if(r.tag===3)$1(r,r,l);else for(;s!==null;){if(s.tag===3){$1(s,r,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Qs===null||!Qs.has(c))){r=Ei(l,r),l=WE(2),c=Bs(s,l,2),c!==null&&(YE(l,c,s,r),zt(c,2),pr(c));break}}s=s.return}}function N_(r,s,l){var c=r.pingCache;if(c===null){c=r.pingCache=new H2;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(l)||(y_=!0,d.add(l),r=Y2.bind(null,r,s,l),s.then(r,r))}function Y2(r,s,l){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,wt===r&&(et&l)===l&&(Lt===4||Lt===3&&(et&62914560)===et&&300>ft()-T_?(xt&2)===0&&fl(r,0):v_|=l,hl===et&&(hl=0)),pr(r)}function K1(r,s){s===0&&(s=ws()),r=Ms(r,s),r!==null&&(zt(r,s),pr(r))}function X2(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),K1(r,l)}function Z2(r,s){var l=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(l=d.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),K1(r,l)}function J2(r,s){return vt(r,s)}var Df=null,ml=null,x_=!1,kf=!1,O_=!1,lo=0;function pr(r){r!==ml&&r.next===null&&(ml===null?Df=ml=r:ml=ml.next=r),kf=!0,x_||(x_=!0,tN(eN))}function ec(r,s){if(!O_&&kf){O_=!0;do for(var l=!1,c=Df;c!==null;){if(r!==0){var d=c.pendingLanes;if(d===0)var _=0;else{var T=c.suspendedLanes,C=c.pingedLanes;_=(1<<31-Ln(42|r)+1)-1,_&=d&~(T&~C),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(l=!0,Y1(c,_))}else _=et,_=di(c,c===wt?_:0),(_&3)===0||Ts(c,_)||(l=!0,Y1(c,_));c=c.next}while(l);O_=!1}}function eN(){kf=x_=!1;var r=0;lo!==0&&(uN()&&(r=lo),lo=0);for(var s=ft(),l=null,c=Df;c!==null;){var d=c.next,_=Q1(c,s);_===0?(c.next=null,l===null?Df=d:l.next=d,d===null&&(ml=l)):(l=c,(r!==0||(_&3)!==0)&&(kf=!0)),c=d}ec(r)}function Q1(r,s){for(var l=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var T=31-Ln(_),C=1<<T,M=d[T];M===-1?((C&l)===0||(C&c)!==0)&&(d[T]=ko(C,s)):M<=s&&(r.expiredLanes|=C),_&=~C}if(s=wt,l=et,l=di(r,r===s?l:0),c=r.callbackNode,l===0||r===s&&St===2||r.cancelPendingCommit!==null)return c!==null&&c!==null&&ii(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ts(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(c!==null&&ii(c),kh(l)){case 2:case 8:l=st;break;case 32:l=Xt;break;case 268435456:l=vs;break;default:l=Xt}return c=W1.bind(null,r),l=vt(l,c),r.callbackPriority=s,r.callbackNode=l,s}return c!==null&&c!==null&&ii(c),r.callbackPriority=2,r.callbackNode=null,2}function W1(r,s){var l=r.callbackNode;if(pl()&&r.callbackNode!==l)return null;var c=et;return c=di(r,r===wt?c:0),c===0?null:(L1(r,c,s),Q1(r,ft()),r.callbackNode!=null&&r.callbackNode===l?W1.bind(null,r):null)}function Y1(r,s){if(pl())return null;L1(r,s,!0)}function tN(r){hN(function(){(xt&6)!==0?vt(je,r):r()})}function D_(){return lo===0&&(lo=hu()),lo}function X1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ir(""+r)}function Z1(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function nN(r,s,l,c,d){if(s==="submit"&&l&&l.stateNode===d){var _=X1((d[Jt]||null).action),T=c.submitter;T&&(s=(s=T[Jt]||null)?X1(s.formAction):T.getAttribute("formAction"),s!==null&&(_=s,T=null));var C=new zo("action","action",null,c,d);r.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(lo!==0){var M=T?Z1(d,T):new FormData(d);Fm(l,{pending:!0,data:M,method:d.method,action:_},null,M)}}else typeof _=="function"&&(C.preventDefault(),M=T?Z1(d,T):new FormData(d),Fm(l,{pending:!0,data:M,method:d.method,action:_},_,M))},currentTarget:d}]})}}for(var k_=0;k_<H0.length;k_++){var M_=H0[k_],iN=M_.toLowerCase(),rN=M_[0].toUpperCase()+M_.slice(1);Pi(iN,"on"+rN)}Pi(j0,"onAnimationEnd"),Pi(z0,"onAnimationIteration"),Pi(F0,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(T2,"onTransitionRun"),Pi(w2,"onTransitionStart"),Pi(S2,"onTransitionCancel"),Pi(B0,"onTransitionEnd"),Qn("onMouseEnter",["mouseout","mouseover"]),Qn("onMouseLeave",["mouseout","mouseover"]),Qn("onPointerEnter",["pointerout","pointerover"]),Qn("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function J1(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],d=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var T=c.length-1;0<=T;T--){var C=c[T],M=C.instance,z=C.currentTarget;if(C=C.listener,M!==_&&d.isPropagationStopped())break e;_=C,d.currentTarget=z;try{_(d)}catch(J){vf(J)}d.currentTarget=null,_=M}else for(T=0;T<c.length;T++){if(C=c[T],M=C.instance,z=C.currentTarget,C=C.listener,M!==_&&d.isPropagationStopped())break e;_=C,d.currentTarget=z;try{_(d)}catch(J){vf(J)}d.currentTarget=null,_=M}}}}function We(r,s){var l=s[ka];l===void 0&&(l=s[ka]=new Set);var c=r+"__bubble";l.has(c)||(eT(s,r,2,!1),l.add(c))}function P_(r,s,l){var c=0;s&&(c|=4),eT(l,r,c,s)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function L_(r){if(!r[Mf]){r[Mf]=!0,du.forEach(function(l){l!=="selectionchange"&&(sN.has(l)||P_(l,!1,r),P_(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Mf]||(s[Mf]=!0,P_("selectionchange",!1,s))}}function eT(r,s,l,c){switch(ST(s)){case 2:var d=ON;break;case 8:d=DN;break;default:d=W_}l=d.bind(null,s,l,r),d=void 0,!gi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,l,{capture:!0,passive:d}):r.addEventListener(s,l,!0):d!==void 0?r.addEventListener(s,l,{passive:d}):r.addEventListener(s,l,!1)}function V_(r,s,l,c,d){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(T===4)for(T=c.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===d||M.nodeType===8&&M.parentNode===d))return;T=T.return}for(;C!==null;){if(T=Mi(C),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){c=_=T;continue e}C=C.parentNode}}c=c.return}Uh(function(){var z=_,J=jo(l),se=[];e:{var K=q0.get(r);if(K!==void 0){var X=zo,Te=r;switch(r){case"keypress":if(sr(l)===0)break e;case"keydown":case"keyup":X=$o;break;case"focusin":Te="focus",X=qo;break;case"focusout":Te="blur",X=qo;break;case"beforeblur":case"afterblur":X=qo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=$h;break;case j0:case z0:case F0:X=Ho;break;case B0:X=Qh;break;case"scroll":case"scrollend":X=jh;break;case"wheel":X=Ko;break;case"copy":case"cut":case"paste":X=Go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Au;break;case"toggle":case"beforetoggle":X=Yh}var ke=(s&4)!==0,Vt=!ke&&(r==="scroll"||r==="scrollend"),q=ke?K!==null?K+"Capture":null:K;ke=[];for(var j=z,$;j!==null;){var ee=j;if($=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||$===null||q===null||(ee=Ua(j,q),ee!=null&&ke.push(nc(j,ee,$))),Vt)break;j=j.return}0<ke.length&&(K=new X(K,Te,null,l,J),se.push({event:K,listeners:ke}))}}if((s&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",X=r==="mouseout"||r==="pointerout",K&&l!==_i&&(Te=l.relatedTarget||l.fromElement)&&(Mi(Te)||Te[Rr]))break e;if((X||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Te=l.relatedTarget||l.toElement,X=z,Te=Te?Mi(Te):null,Te!==null&&(Vt=de(Te),ke=Te.tag,Te!==Vt||ke!==5&&ke!==27&&ke!==6)&&(Te=null)):(X=null,Te=z),X!==Te)){if(ke=yi,ee="onMouseLeave",q="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Au,ee="onPointerLeave",q="onPointerEnter",j="pointer"),Vt=X==null?K:Rs(X),$=Te==null?K:Rs(Te),K=new ke(ee,j+"leave",X,l,J),K.target=Vt,K.relatedTarget=$,ee=null,Mi(J)===z&&(ke=new ke(q,j+"enter",Te,l,J),ke.target=$,ke.relatedTarget=Vt,ee=ke),Vt=ee,X&&Te)t:{for(ke=X,q=Te,j=0,$=ke;$;$=_l($))j++;for($=0,ee=q;ee;ee=_l(ee))$++;for(;0<j-$;)ke=_l(ke),j--;for(;0<$-j;)q=_l(q),$--;for(;j--;){if(ke===q||q!==null&&ke===q.alternate)break t;ke=_l(ke),q=_l(q)}ke=null}else ke=null;X!==null&&tT(se,K,X,ke,!1),Te!==null&&Vt!==null&&tT(se,Vt,Te,ke,!0)}}e:{if(K=z?Rs(z):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var ye=I0;else if(tn(K))if(N0)ye=g2;else{ye=m2;var ze=p2}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?z&&yu(z.elementType)&&(ye=I0):ye=_2;if(ye&&(ye=ye(r,z))){Pr(se,ye,l,J);break e}ze&&ze(r,K,z),r==="focusout"&&z&&K.type==="number"&&z.memoizedProps.value!=null&&Uo(K,"number",K.value)}switch(ze=z?Rs(z):window,r){case"focusin":(tn(ze)||ze.contentEditable==="true")&&(Qo=ze,pm=z,Iu=null);break;case"focusout":Iu=pm=Qo=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,V0(se,l,J);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":V0(se,l,J)}var we;if(lr)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ze?Q(r,l)&&(Re="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(E&&l.locale!=="ko"&&(Ze||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ze&&(we=Eu()):(rr=J,ks="value"in rr?rr.value:rr.textContent,Ze=!0)),ze=Pf(z,Re),0<ze.length&&(Re=new Su(Re,r,null,l,J),se.push({event:Re,listeners:ze}),we?Re.data=we:(we=he(l),we!==null&&(Re.data=we)))),(we=y?en(r,l):Je(r,l))&&(Re=Pf(z,"onBeforeInput"),0<Re.length&&(ze=new Su("onBeforeInput","beforeinput",null,l,J),se.push({event:ze,listeners:Re}),ze.data=we)),nN(se,r,z,l,J)}J1(se,s)})}function nc(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Pf(r,s){for(var l=s+"Capture",c=[];r!==null;){var d=r,_=d.stateNode;d=d.tag,d!==5&&d!==26&&d!==27||_===null||(d=Ua(r,l),d!=null&&c.unshift(nc(r,d,_)),d=Ua(r,s),d!=null&&c.push(nc(r,d,_))),r=r.return}return c}function _l(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function tT(r,s,l,c,d){for(var _=s._reactName,T=[];l!==null&&l!==c;){var C=l,M=C.alternate,z=C.stateNode;if(C=C.tag,M!==null&&M===c)break;C!==5&&C!==26&&C!==27||z===null||(M=z,d?(z=Ua(l,_),z!=null&&T.unshift(nc(l,z,M))):d||(z=Ua(l,_),z!=null&&T.push(nc(l,z,M)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var aN=/\r\n?/g,oN=/\u0000|\uFFFD/g;function nT(r){return(typeof r=="string"?r:""+r).replace(aN,`
`).replace(oN,"")}function iT(r,s){return s=nT(s),nT(r)===s}function Lf(){}function yt(r,s,l,c,d,_){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||mi(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&mi(r,""+c);break;case"className":xs(r,"class",c);break;case"tabIndex":xs(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(r,l,c);break;case"style":Vh(r,c,_);break;case"data":if(s!=="object"){xs(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=ir(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&yt(r,s,"name",d.name,d,null),yt(r,s,"formEncType",d.formEncType,d,null),yt(r,s,"formMethod",d.formMethod,d,null),yt(r,s,"formTarget",d.formTarget,d,null)):(yt(r,s,"encType",d.encType,d,null),yt(r,s,"method",d.method,d,null),yt(r,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=ir(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=Lf);break;case"onScroll":c!=null&&We("scroll",r);break;case"onScrollEnd":c!=null&&We("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=ir(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":We("beforetoggle",r),We("toggle",r),Ns(r,"popover",c);break;case"xlinkActuate":pi(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pi(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pi(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pi(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pi(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pi(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pi(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ns(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=om.get(l)||l,Ns(r,l,c))}}function U_(r,s,l,c,d,_){switch(l){case"style":Vh(r,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?mi(r,c):(typeof c=="number"||typeof c=="bigint")&&mi(r,""+c);break;case"onScroll":c!=null&&We("scroll",r);break;case"onScrollEnd":c!=null&&We("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Lf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),s=l.slice(2,d?l.length-7:void 0),_=r[Jt]||null,_=_!=null?_[l]:null,typeof _=="function"&&r.removeEventListener(s,_,d),typeof c=="function")){typeof _!="function"&&_!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,c,d);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Ns(r,l,c)}}}function bn(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",r),We("load",r);var c=!1,d=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var T=l[_];if(T!=null)switch(_){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:yt(r,s,_,T,l,null)}}d&&yt(r,s,"srcSet",l.srcSet,l,null),c&&yt(r,s,"src",l.src,l,null);return;case"input":We("invalid",r);var C=_=T=d=null,M=null,z=null;for(c in l)if(l.hasOwnProperty(c)){var J=l[c];if(J!=null)switch(c){case"name":d=J;break;case"type":T=J;break;case"checked":M=J;break;case"defaultChecked":z=J;break;case"value":_=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:yt(r,s,c,J,l,null)}}La(r,_,C,M,z,T,d,!1),Pa(r);return;case"select":We("invalid",r),c=T=_=null;for(d in l)if(l.hasOwnProperty(d)&&(C=l[d],C!=null))switch(d){case"value":_=C;break;case"defaultValue":T=C;break;case"multiple":c=C;default:yt(r,s,d,C,l,null)}s=_,l=T,r.multiple=!!c,s!=null?at(r,!!c,s,!1):l!=null&&at(r,!!c,l,!0);return;case"textarea":We("invalid",r),_=d=c=null;for(T in l)if(l.hasOwnProperty(T)&&(C=l[T],C!=null))switch(T){case"value":c=C;break;case"defaultValue":d=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:yt(r,s,T,C,l,null)}Ds(r,c,d,_),Pa(r);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(c=l[M],c!=null))switch(M){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:yt(r,s,M,c,l,null)}return;case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":We("load",r);break;case"video":case"audio":for(c=0;c<tc.length;c++)We(tc[c],r);break;case"image":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"embed":case"source":case"link":We("error",r),We("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(c=l[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:yt(r,s,z,c,l,null)}return;default:if(yu(s)){for(J in l)l.hasOwnProperty(J)&&(c=l[J],c!==void 0&&U_(r,s,J,c,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(c=l[C],c!=null&&yt(r,s,C,c,l,null))}function lN(r,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,_=null,T=null,C=null,M=null,z=null,J=null;for(X in l){var se=l[X];if(l.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=se;default:c.hasOwnProperty(X)||yt(r,s,X,null,c,se)}}for(var K in c){var X=c[K];if(se=l[K],c.hasOwnProperty(K)&&(X!=null||se!=null))switch(K){case"type":_=X;break;case"name":d=X;break;case"checked":z=X;break;case"defaultChecked":J=X;break;case"value":T=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==se&&yt(r,s,K,X,c,se)}}Os(r,T,C,M,z,J,_,d);return;case"select":X=T=C=K=null;for(_ in l)if(M=l[_],l.hasOwnProperty(_)&&M!=null)switch(_){case"value":break;case"multiple":X=M;default:c.hasOwnProperty(_)||yt(r,s,_,null,c,M)}for(d in c)if(_=c[d],M=l[d],c.hasOwnProperty(d)&&(_!=null||M!=null))switch(d){case"value":K=_;break;case"defaultValue":C=_;break;case"multiple":T=_;default:_!==M&&yt(r,s,d,_,c,M)}s=C,l=T,c=X,K!=null?at(r,!!l,K,!1):!!c!=!!l&&(s!=null?at(r,!!l,s,!0):at(r,!!l,l?[]:"",!1));return;case"textarea":X=K=null;for(C in l)if(d=l[C],l.hasOwnProperty(C)&&d!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:yt(r,s,C,null,c,d)}for(T in c)if(d=c[T],_=l[T],c.hasOwnProperty(T)&&(d!=null||_!=null))switch(T){case"value":K=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==_&&yt(r,s,T,d,c,_)}Va(r,K,X);return;case"option":for(var Te in l)if(K=l[Te],l.hasOwnProperty(Te)&&K!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":r.selected=!1;break;default:yt(r,s,Te,null,c,K)}for(M in c)if(K=c[M],X=l[M],c.hasOwnProperty(M)&&K!==X&&(K!=null||X!=null))switch(M){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:yt(r,s,M,K,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in l)K=l[ke],l.hasOwnProperty(ke)&&K!=null&&!c.hasOwnProperty(ke)&&yt(r,s,ke,null,c,K);for(z in c)if(K=c[z],X=l[z],c.hasOwnProperty(z)&&K!==X&&(K!=null||X!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:yt(r,s,z,K,c,X)}return;default:if(yu(s)){for(var Vt in l)K=l[Vt],l.hasOwnProperty(Vt)&&K!==void 0&&!c.hasOwnProperty(Vt)&&U_(r,s,Vt,void 0,c,K);for(J in c)K=c[J],X=l[J],!c.hasOwnProperty(J)||K===X||K===void 0&&X===void 0||U_(r,s,J,K,c,X);return}}for(var q in l)K=l[q],l.hasOwnProperty(q)&&K!=null&&!c.hasOwnProperty(q)&&yt(r,s,q,null,c,K);for(se in c)K=c[se],X=l[se],!c.hasOwnProperty(se)||K===X||K==null&&X==null||yt(r,s,se,K,c,X)}var j_=null,z_=null;function Vf(r){return r.nodeType===9?r:r.ownerDocument}function rT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function F_(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var B_=null;function uN(){var r=window.event;return r&&r.type==="popstate"?r===B_?!1:(B_=r,!0):(B_=null,!1)}var aT=typeof setTimeout=="function"?setTimeout:void 0,cN=typeof clearTimeout=="function"?clearTimeout:void 0,oT=typeof Promise=="function"?Promise:void 0,hN=typeof queueMicrotask=="function"?queueMicrotask:typeof oT<"u"?function(r){return oT.resolve(null).then(r).catch(fN)}:aT;function fN(r){setTimeout(function(){throw r})}function q_(r,s){var l=s,c=0;do{var d=l.nextSibling;if(r.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(c===0){r.removeChild(d),cc(s);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=d}while(l);cc(s)}function H_(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":H_(l),Ma(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function dN(r,s,l,c){for(;r.nodeType===1;){var d=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Cs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==d.rel||r.getAttribute("href")!==(d.href==null?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var _=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Ui(r.nextSibling),r===null)break}return null}function pN(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ui(r.nextSibling),r===null))return null;return r}function Ui(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function lT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function uT(r,s,l){switch(s=Vf(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var Ii=new Map,cT=new Set;function Uf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Yr=ue.d;ue.d={f:mN,r:_N,D:gN,C:yN,L:vN,m:EN,X:wN,S:TN,M:SN};function mN(){var r=Yr.f(),s=xf();return r||s}function _N(r){var s=Ir(r);s!==null&&s.tag===5&&s.type==="form"?VE(s):Yr.r(r)}var gl=typeof document>"u"?null:document;function hT(r,s,l){var c=gl;if(c&&typeof s=="string"&&s){var d=Mt(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),cT.has(d)||(cT.add(d),r={rel:r,crossOrigin:l,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),bn(s,"link",r),It(s),c.head.appendChild(s)))}}function gN(r){Yr.D(r),hT("dns-prefetch",r,null)}function yN(r,s){Yr.C(r,s),hT("preconnect",r,s)}function vN(r,s,l){Yr.L(r,s,l);var c=gl;if(c&&r&&s){var d='link[rel="preload"][as="'+Mt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+Mt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+Mt(l.imageSizes)+'"]')):d+='[href="'+Mt(r)+'"]';var _=d;switch(s){case"style":_=yl(r);break;case"script":_=vl(r)}Ii.has(_)||(r=R({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Ii.set(_,r),c.querySelector(d)!==null||s==="style"&&c.querySelector(ic(_))||s==="script"&&c.querySelector(rc(_))||(s=c.createElement("link"),bn(s,"link",r),It(s),c.head.appendChild(s)))}}function EN(r,s){Yr.m(r,s);var l=gl;if(l&&r){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Mt(c)+'"][href="'+Mt(r)+'"]',_=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=vl(r)}if(!Ii.has(_)&&(r=R({rel:"modulepreload",href:r},s),Ii.set(_,r),l.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(rc(_)))return}c=l.createElement("link"),bn(c,"link",r),It(c),l.head.appendChild(c)}}}function TN(r,s,l){Yr.S(r,s,l);var c=gl;if(c&&r){var d=Is(c).hoistableStyles,_=yl(r);s=s||"default";var T=d.get(_);if(!T){var C={loading:0,preload:null};if(T=c.querySelector(ic(_)))C.loading=5;else{r=R({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Ii.get(_))&&G_(r,l);var M=T=c.createElement("link");It(M),bn(M,"link",r),M._p=new Promise(function(z,J){M.onload=z,M.onerror=J}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,jf(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:C},d.set(_,T)}}}function wN(r,s){Yr.X(r,s);var l=gl;if(l&&r){var c=Is(l).hoistableScripts,d=vl(r),_=c.get(d);_||(_=l.querySelector(rc(d)),_||(r=R({src:r,async:!0},s),(s=Ii.get(d))&&$_(r,s),_=l.createElement("script"),It(_),bn(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(d,_))}}function SN(r,s){Yr.M(r,s);var l=gl;if(l&&r){var c=Is(l).hoistableScripts,d=vl(r),_=c.get(d);_||(_=l.querySelector(rc(d)),_||(r=R({src:r,async:!0,type:"module"},s),(s=Ii.get(d))&&$_(r,s),_=l.createElement("script"),It(_),bn(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(d,_))}}function fT(r,s,l,c){var d=(d=ct.current)?Uf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=yl(l.href),l=Is(d).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=yl(l.href);var _=Is(d).hoistableStyles,T=_.get(r);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,T),(_=d.querySelector(ic(r)))&&!_._p&&(T.instance=_,T.state.loading=5),Ii.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ii.set(r,l),_||bN(d,r,l,T.state))),s&&c===null)throw Error(i(528,""));return T}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=vl(l),l=Is(d).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function yl(r){return'href="'+Mt(r)+'"'}function ic(r){return'link[rel="stylesheet"]['+r+"]"}function dT(r){return R({},r,{"data-precedence":r.precedence,precedence:null})}function bN(r,s,l,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),bn(s,"link",l),It(s),r.head.appendChild(s))}function vl(r){return'[src="'+Mt(r)+'"]'}function rc(r){return"script[async]"+r}function pT(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+Mt(l.href)+'"]');if(c)return s.instance=c,It(c),c;var d=R({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),It(c),bn(c,"style",d),jf(c,l.precedence,r),s.instance=c;case"stylesheet":d=yl(l.href);var _=r.querySelector(ic(d));if(_)return s.state.loading|=4,s.instance=_,It(_),_;c=dT(l),(d=Ii.get(d))&&G_(c,d),_=(r.ownerDocument||r).createElement("link"),It(_);var T=_;return T._p=new Promise(function(C,M){T.onload=C,T.onerror=M}),bn(_,"link",c),s.state.loading|=4,jf(_,l.precedence,r),s.instance=_;case"script":return _=vl(l.src),(d=r.querySelector(rc(_)))?(s.instance=d,It(d),d):(c=l,(d=Ii.get(_))&&(c=R({},l),$_(c,d)),r=r.ownerDocument||r,d=r.createElement("script"),It(d),bn(d,"link",c),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,jf(c,l.precedence,r));return s.instance}function jf(r,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,_=d,T=0;T<c.length;T++){var C=c[T];if(C.dataset.precedence===s)_=C;else if(_!==d)break}_?_.parentNode.insertBefore(r,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function G_(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function $_(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var zf=null;function mT(r,s,l){if(zf===null){var c=new Map,d=zf=new Map;d.set(l,c)}else d=zf,c=d.get(l),c||(c=new Map,d.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),d=0;d<l.length;d++){var _=l[d];if(!(_[Cs]||_[cn]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(s)||"";T=r+T;var C=c.get(T);C?C.push(_):c.set(T,[_])}}return c}function _T(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function AN(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var sc=null;function CN(){}function RN(r,s,l){if(sc===null)throw Error(i(475));var c=sc;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=yl(l.href),_=r.querySelector(ic(d));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Ff.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=_,It(_);return}_=r.ownerDocument||r,l=dT(l),(d=Ii.get(d))&&G_(l,d),_=_.createElement("link"),It(_);var T=_;T._p=new Promise(function(C,M){T.onload=C,T.onerror=M}),bn(_,"link",l),s.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Ff.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function IN(){if(sc===null)throw Error(i(475));var r=sc;return r.stylesheets&&r.count===0&&K_(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&K_(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function Ff(){if(this.count--,this.count===0){if(this.stylesheets)K_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Bf=null;function K_(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Bf=new Map,s.forEach(NN,r),Bf=null,Ff.call(r))}function NN(r,s){if(!(s.state.loading&4)){var l=Bf.get(r);if(l)var c=l.get(null);else{l=new Map,Bf.set(r,l);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<d.length;_++){var T=d[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}d=s.instance,T=d.getAttribute("data-precedence"),_=l.get(T)||c,_===c&&l.set(null,d),l.set(T,d),this.count++,c=Ff.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),_?_.parentNode.insertBefore(d,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var ac={$$typeof:I,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function xN(r,s,l,c,d,_,T,C){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.hiddenUpdates=Mo(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function yT(r,s,l,c,d,_,T,C,M,z,J,se){return r=new xN(r,s,l,T,C,M,z,se),s=1,_===!0&&(s|=24),_=Ci(3,null,null,s),r.current=_,_.stateNode=r,s=Am(),s.refCount++,r.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:s},s_(_),r}function vT(r){return r?(r=Xo,r):Xo}function ET(r,s,l,c,d,_){d=vT(d),c.context===null?c.context=d:c.pendingContext=d,c=Fs(s),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Bs(r,c,s),l!==null&&(zn(l,r,s),qu(l,r,s))}function TT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Q_(r,s){TT(r,s),(r=r.alternate)&&TT(r,s)}function wT(r){if(r.tag===13){var s=Ms(r,67108864);s!==null&&zn(s,r,67108864),Q_(r,67108864)}}var qf=!0;function ON(r,s,l,c){var d=w.T;w.T=null;var _=ue.p;try{ue.p=2,W_(r,s,l,c)}finally{ue.p=_,w.T=d}}function DN(r,s,l,c){var d=w.T;w.T=null;var _=ue.p;try{ue.p=8,W_(r,s,l,c)}finally{ue.p=_,w.T=d}}function W_(r,s,l,c){if(qf){var d=Y_(c);if(d===null)V_(r,s,c,Hf,l),bT(r,c);else if(MN(d,r,s,l,c))c.stopPropagation();else if(bT(r,c),s&4&&-1<kN.indexOf(r)){for(;d!==null;){var _=Ir(d);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=ki(_.pendingLanes);if(T!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var M=1<<31-Ln(T);C.entanglements[1]|=M,T&=~M}pr(_),(xt&6)===0&&(Rf=ft()+500,ec(0))}}break;case 13:C=Ms(_,2),C!==null&&zn(C,_,2),xf(),Q_(_,2)}if(_=Y_(c),_===null&&V_(r,s,c,Hf,l),_===d)break;d=_}d!==null&&c.stopPropagation()}else V_(r,s,c,null,l)}}function Y_(r){return r=jo(r),X_(r)}var Hf=null;function X_(r){if(Hf=null,r=Mi(r),r!==null){var s=de(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=pe(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Hf=r,null}function ST(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pn()){case je:return 2;case st:return 8;case Xt:case ys:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Z_=!1,Ws=null,Ys=null,Xs=null,oc=new Map,lc=new Map,Zs=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bT(r,s){switch(r){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(s.pointerId)}}function uc(r,s,l,c,d,_){return r===null||r.nativeEvent!==_?(r={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[d]},s!==null&&(s=Ir(s),s!==null&&wT(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function MN(r,s,l,c,d){switch(s){case"focusin":return Ws=uc(Ws,r,s,l,c,d),!0;case"dragenter":return Ys=uc(Ys,r,s,l,c,d),!0;case"mouseover":return Xs=uc(Xs,r,s,l,c,d),!0;case"pointerover":var _=d.pointerId;return oc.set(_,uc(oc.get(_)||null,r,s,l,c,d)),!0;case"gotpointercapture":return _=d.pointerId,lc.set(_,uc(lc.get(_)||null,r,s,l,c,d)),!0}return!1}function AT(r){var s=Mi(r.target);if(s!==null){var l=de(s);if(l!==null){if(s=l.tag,s===13){if(s=pe(l),s!==null){r.blockedOn=s,As(r.priority,function(){if(l.tag===13){var c=ci(),d=Ms(l,c);d!==null&&zn(d,l,c),Q_(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Y_(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);_i=c,l.target.dispatchEvent(c),_i=null}else return s=Ir(l),s!==null&&wT(s),r.blockedOn=l,!1;s.shift()}return!0}function CT(r,s,l){Gf(r)&&l.delete(s)}function PN(){Z_=!1,Ws!==null&&Gf(Ws)&&(Ws=null),Ys!==null&&Gf(Ys)&&(Ys=null),Xs!==null&&Gf(Xs)&&(Xs=null),oc.forEach(CT),lc.forEach(CT)}function $f(r,s){r.blockedOn===s&&(r.blockedOn=null,Z_||(Z_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,PN)))}var Kf=null;function RT(r){Kf!==r&&(Kf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kf===r&&(Kf=null);for(var s=0;s<r.length;s+=3){var l=r[s],c=r[s+1],d=r[s+2];if(typeof c!="function"){if(X_(c||l)===null)continue;break}var _=Ir(l);_!==null&&(r.splice(s,3),s-=3,Fm(_,{pending:!0,data:d,method:l.method,action:c},c,d))}}))}function cc(r){function s(M){return $f(M,r)}Ws!==null&&$f(Ws,r),Ys!==null&&$f(Ys,r),Xs!==null&&$f(Xs,r),oc.forEach(s),lc.forEach(s);for(var l=0;l<Zs.length;l++){var c=Zs[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Zs.length&&(l=Zs[0],l.blockedOn===null);)AT(l),l.blockedOn===null&&Zs.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var d=l[c],_=l[c+1],T=d[Jt]||null;if(typeof _=="function")T||RT(l);else if(T){var C=null;if(_&&_.hasAttribute("formAction")){if(d=_,T=_[Jt]||null)C=T.formAction;else if(X_(d)!==null)continue}else C=T.action;typeof C=="function"?l[c+1]=C:(l.splice(c,3),c-=3),RT(l)}}}function J_(r){this._internalRoot=r}Qf.prototype.render=J_.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=ci();ET(l,c,r,s,null,null)},Qf.prototype.unmount=J_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&pl(),ET(r.current,2,null,r,null,null),xf(),s[Rr]=null}};function Qf(r){this._internalRoot=r}Qf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Mh();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Zs.length&&s!==0&&s<Zs[l].priority;l++);Zs.splice(l,0,r),l===0&&AT(r)}};var IT=e.version;if(IT!=="19.0.0")throw Error(i(527,IT,"19.0.0"));ue.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=W(s),r=r!==null?oe(r):null,r=r===null?null:r.stateNode,r};var LN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:Mi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{Kn=Wf.inject(LN),Zt=Wf}catch{}}return fc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,c="",d=GE,_=$E,T=KE,C=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=yT(r,1,!1,null,null,l,c,d,_,T,C,null),r[Rr]=s.current,L_(r.nodeType===8?r.parentNode:r),new J_(s)},fc.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var c=!1,d="",_=GE,T=$E,C=KE,M=null,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks),l.formState!==void 0&&(z=l.formState)),s=yT(r,1,!0,s,l??null,c,d,_,T,C,M,z),s.context=vT(null),l=s.current,c=ci(),d=Fs(c),d.callback=null,Bs(l,d,c),s.current.lanes=c,zt(s,c),pr(s),r[Rr]=s.current,L_(r),new Qf(s)},fc.version="19.0.0",fc}var UT;function QN(){if(UT)return ig.exports;UT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ig.exports=KN(),ig.exports}var WN=QN(),dc={},jT;function YN(){if(jT)return dc;jT=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.parse=u,dc.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function u(S,I){const x=new o,U=S.length;if(U<2)return x;const k=(I==null?void 0:I.decode)||g;let H=0;do{const Y=S.indexOf("=",H);if(Y===-1)break;const F=S.indexOf(";",H),ie=F===-1?U:F;if(Y>ie){H=S.lastIndexOf(";",Y-1)+1;continue}const re=h(S,H,Y),ae=p(S,Y,re),P=S.slice(re,ae);if(x[P]===void 0){let b=h(S,Y+1,ie),w=p(S,ie,b);const R=k(S.slice(b,w));x[P]=R}H=ie+1}while(H<U);return x}function h(S,I,x){do{const U=S.charCodeAt(I);if(U!==32&&U!==9)return I}while(++I<x);return x}function p(S,I,x){for(;I>x;){const U=S.charCodeAt(--I);if(U!==32&&U!==9)return I+1}return x}function m(S,I,x){const U=(x==null?void 0:x.encode)||encodeURIComponent;if(!n.test(S))throw new TypeError(`argument name is invalid: ${S}`);const k=U(I);if(!e.test(k))throw new TypeError(`argument val is invalid: ${I}`);let H=S+"="+k;if(!x)return H;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);H+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);H+="; Domain="+x.domain}if(x.path){if(!i.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);H+="; Path="+x.path}if(x.expires){if(!v(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);H+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(H+="; HttpOnly"),x.secure&&(H+="; Secure"),x.partitioned&&(H+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return H}function g(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function v(S){return a.call(S)==="[object Date]"}return dc}YN();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zT="popstate";function XN(n={}){function e(i,a){let{pathname:o,search:u,hash:h}=i.location;return jg("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:jc(a)}return JN(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Er(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZN(){return Math.random().toString(36).substring(2,10)}function FT(n,e){return{usr:n.state,key:n.key,idx:e}}function jg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Wl(e):e,state:t,key:e&&e.key||i||ZN()}}function jc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Wl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function JN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,u=a.history,h="POP",p=null,m=g();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function g(){return(u.state||{idx:null}).idx}function v(){h="POP";let k=g(),H=k==null?null:k-m;m=k,p&&p({action:h,location:U.location,delta:H})}function S(k,H){h="PUSH";let Y=jg(U.location,k,H);m=g()+1;let F=FT(Y,m),ie=U.createHref(Y);try{u.pushState(F,"",ie)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;a.location.assign(ie)}o&&p&&p({action:h,location:U.location,delta:1})}function I(k,H){h="REPLACE";let Y=jg(U.location,k,H);m=g();let F=FT(Y,m),ie=U.createHref(Y);u.replaceState(F,"",ie),o&&p&&p({action:h,location:U.location,delta:0})}function x(k){let H=a.location.origin!=="null"?a.location.origin:a.location.href,Y=typeof k=="string"?k:jc(k);return Y=Y.replace(/ $/,"%20"),Ot(H,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,H)}let U={get action(){return h},get location(){return n(a,u)},listen(k){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(zT,v),p=k,()=>{a.removeEventListener(zT,v),p=null}},createHref(k){return e(a,k)},createURL:x,encodeLocation(k){let H=x(k);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:I,go(k){return u.go(k)}};return U}function bb(n,e,t="/"){return ex(n,e,t,!1)}function ex(n,e,t,i){let a=typeof e=="string"?Wl(e):e,o=pa(a.pathname||"/",t);if(o==null)return null;let u=Ab(n);tx(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let m=fx(o);h=cx(u[p],m,i)}return h}function Ab(n,e=[],t=[],i=""){let a=(o,u,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};p.relativePath.startsWith("/")&&(Ot(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let m=rs([i,p.relativePath]),g=t.concat(p);o.children&&o.children.length>0&&(Ot(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ab(o.children,e,g,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:lx(m,o.index),routesMeta:g})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let p of Cb(o.path))a(o,u,p)}),e}function Cb(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let u=Cb(i.join("/")),h=[];return h.push(...u.map(p=>p===""?o:[o,p].join("/"))),a&&h.push(...u),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function tx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ux(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var nx=/^:[\w-]+$/,ix=3,rx=2,sx=1,ax=10,ox=-2,BT=n=>n==="*";function lx(n,e){let t=n.split("/"),i=t.length;return t.some(BT)&&(i+=ox),e&&(i+=rx),t.filter(a=>!BT(a)).reduce((a,o)=>a+(nx.test(o)?ix:o===""?sx:ax),i)}function ux(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function cx(n,e,t=!1){let{routesMeta:i}=n,a={},o="/",u=[];for(let h=0;h<i.length;++h){let p=i[h],m=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Rd({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),S=p.route;if(!v&&m&&t&&!i[i.length-1].route.index&&(v=Rd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:rs([o,v.pathname]),pathnameBase:_x(rs([o,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(o=rs([o,v.pathnameBase]))}return u}function Rd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=hx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((m,{paramName:g,isOptional:v},S)=>{if(g==="*"){let x=h[S]||"";u=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const I=h[S];return v&&!I?m[g]=void 0:m[g]=(I||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:n}}function hx(n,e=!1,t=!0){Er(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function fx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Er(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function pa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function dx(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Wl(n):n;return{pathname:t?t.startsWith("/")?t:px(t,e):e,search:gx(i),hash:yx(a)}}function px(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function og(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rb(n){let e=mx(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Ib(n,e,t,i=!1){let a;typeof n=="string"?a=Wl(n):(a={...n},Ot(!a.pathname||!a.pathname.includes("?"),og("?","pathname","search",a)),Ot(!a.pathname||!a.pathname.includes("#"),og("#","pathname","hash",a)),Ot(!a.search||!a.search.includes("#"),og("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),v-=1;a.pathname=S.join("/")}h=v>=0?e[v]:"/"}let p=dx(a,h),m=u&&u!=="/"&&u.endsWith("/"),g=(o||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}var rs=n=>n.join("/").replace(/\/\/+/g,"/"),_x=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,yx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Nb=["POST","PUT","PATCH","DELETE"];new Set(Nb);var Ex=["GET",...Nb];new Set(Ex);var Yl=B.createContext(null);Yl.displayName="DataRouter";var vp=B.createContext(null);vp.displayName="DataRouterState";var xb=B.createContext({isTransitioning:!1});xb.displayName="ViewTransition";var Tx=B.createContext(new Map);Tx.displayName="Fetchers";var wx=B.createContext(null);wx.displayName="Await";var br=B.createContext(null);br.displayName="Navigation";var uh=B.createContext(null);uh.displayName="Location";var Xi=B.createContext({outlet:null,matches:[],isDataRoute:!1});Xi.displayName="Route";var Vy=B.createContext(null);Vy.displayName="RouteError";function Sx(n,{relative:e}={}){Ot(ch(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=B.useContext(br),{hash:a,pathname:o,search:u}=hh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:rs([t,o])),i.createHref({pathname:h,search:u,hash:a})}function ch(){return B.useContext(uh)!=null}function Ao(){return Ot(ch(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(uh).location}var Ob="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Db(n){B.useContext(br).static||B.useLayoutEffect(n)}function Xl(){let{isDataRoute:n}=B.useContext(Xi);return n?jx():bx()}function bx(){Ot(ch(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(Yl),{basename:e,navigator:t}=B.useContext(br),{matches:i}=B.useContext(Xi),{pathname:a}=Ao(),o=JSON.stringify(Rb(i)),u=B.useRef(!1);return Db(()=>{u.current=!0}),B.useCallback((p,m={})=>{if(Er(u.current,Ob),!u.current)return;if(typeof p=="number"){t.go(p);return}let g=Ib(p,JSON.parse(o),a,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:rs([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,o,a,n])}var Ax=B.createContext(null);function Cx(n){let e=B.useContext(Xi).outlet;return e&&B.createElement(Ax.Provider,{value:n},e)}function Rx(){let{matches:n}=B.useContext(Xi),e=n[n.length-1];return e?e.params:{}}function hh(n,{relative:e}={}){let{matches:t}=B.useContext(Xi),{pathname:i}=Ao(),a=JSON.stringify(Rb(t));return B.useMemo(()=>Ib(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function Ix(n,e){return kb(n,e)}function kb(n,e,t,i){var Y;Ot(ch(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=B.useContext(br),{matches:u}=B.useContext(Xi),h=u[u.length-1],p=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let F=v&&v.path||"";Mb(m,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let S=Ao(),I;if(e){let F=typeof e=="string"?Wl(e):e;Ot(g==="/"||((Y=F.pathname)==null?void 0:Y.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${F.pathname}" was given in the \`location\` prop.`),I=F}else I=S;let x=I.pathname||"/",U=x;if(g!=="/"){let F=g.replace(/^\//,"").split("/");U="/"+x.replace(/^\//,"").split("/").slice(F.length).join("/")}let k=!o&&t&&t.matches&&t.matches.length>0?t.matches:bb(n,{pathname:U});Er(v||k!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Er(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=kx(k&&k.map(F=>Object.assign({},F,{params:Object.assign({},p,F.params),pathname:rs([g,a.encodeLocation?a.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:rs([g,a.encodeLocation?a.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),u,t,i);return e&&H?B.createElement(uh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},H):H}function Nx(){let n=Ux(),e=vx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:a},t):null,u)}var xx=B.createElement(Nx,null),Ox=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?B.createElement(Xi.Provider,{value:this.props.routeContext},B.createElement(Vy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Dx({routeContext:n,match:e,children:t}){let i=B.useContext(Yl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Xi.Provider,{value:n},t)}function kx(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t==null?void 0:t.errors;if(o!=null){let p=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Ot(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:g,errors:v}=t,S=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||S){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,m,g)=>{let v,S=!1,I=null,x=null;t&&(v=o&&m.route.id?o[m.route.id]:void 0,I=m.route.errorElement||xx,u&&(h<0&&g===0?(Mb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,x=null):h===g&&(S=!0,x=m.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,g+1)),k=()=>{let H;return v?H=I:S?H=x:m.route.Component?H=B.createElement(m.route.Component,null):m.route.element?H=m.route.element:H=p,B.createElement(Dx,{match:m,routeContext:{outlet:p,matches:U,isDataRoute:t!=null},children:H})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?B.createElement(Ox,{location:t.location,revalidation:t.revalidation,component:I,error:v,children:k(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):k()},null)}function Uy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mx(n){let e=B.useContext(Yl);return Ot(e,Uy(n)),e}function Px(n){let e=B.useContext(vp);return Ot(e,Uy(n)),e}function Lx(n){let e=B.useContext(Xi);return Ot(e,Uy(n)),e}function jy(n){let e=Lx(n),t=e.matches[e.matches.length-1];return Ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Vx(){return jy("useRouteId")}function Ux(){var i;let n=B.useContext(Vy),e=Px("useRouteError"),t=jy("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function jx(){let{router:n}=Mx("useNavigate"),e=jy("useNavigate"),t=B.useRef(!1);return Db(()=>{t.current=!0}),B.useCallback(async(a,o={})=>{Er(t.current,Ob),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var qT={};function Mb(n,e,t){!e&&!qT[n]&&(qT[n]=!0,Er(!1,t))}B.memo(zx);function zx({routes:n,future:e,state:t}){return kb(n,void 0,t,e)}function Fx(n){return Cx(n.context)}function Ec(n){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bx({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){Ot(!ch(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof t=="string"&&(t=Wl(t));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:S="default"}=t,I=B.useMemo(()=>{let x=pa(p,u);return x==null?null:{location:{pathname:x,search:m,hash:g,state:v,key:S},navigationType:i}},[u,p,m,g,v,S,i]);return Er(I!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:B.createElement(br.Provider,{value:h},B.createElement(uh.Provider,{children:e,value:I}))}function qx({children:n,location:e}){return Ix(zg(n),e)}function zg(n,e=[]){let t=[];return B.Children.forEach(n,(i,a)=>{if(!B.isValidElement(i))return;let o=[...e,a];if(i.type===B.Fragment){t.push.apply(t,zg(i.props.children,o));return}Ot(i.type===Ec,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=zg(i.props.children,o)),t.push(u)}),t}var cd="get",hd="application/x-www-form-urlencoded";function Ep(n){return n!=null&&typeof n.tagName=="string"}function Hx(n){return Ep(n)&&n.tagName.toLowerCase()==="button"}function Gx(n){return Ep(n)&&n.tagName.toLowerCase()==="form"}function $x(n){return Ep(n)&&n.tagName.toLowerCase()==="input"}function Kx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Qx(n,e){return n.button===0&&(!e||e==="_self")&&!Kx(n)}var Yf=null;function Wx(){if(Yf===null)try{new FormData(document.createElement("form"),0),Yf=!1}catch{Yf=!0}return Yf}var Yx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lg(n){return n!=null&&!Yx.has(n)?(Er(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):n}function Xx(n,e){let t,i,a,o,u;if(Gx(n)){let h=n.getAttribute("action");i=h?pa(h,e):null,t=n.getAttribute("method")||cd,a=lg(n.getAttribute("enctype"))||hd,o=new FormData(n)}else if(Hx(n)||$x(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(i=p?pa(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||cd,a=lg(n.getAttribute("formenctype"))||lg(h.getAttribute("enctype"))||hd,o=new FormData(h,n),!Wx()){let{name:m,type:g,value:v}=n;if(g==="image"){let S=m?`${m}.`:"";o.append(`${S}x`,"0"),o.append(`${S}y`,"0")}else m&&o.append(m,v)}}else{if(Ep(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cd,i=null,a=hd,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:u}}function zy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Zx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function eO(n,e,t){let i=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await Zx(o,t);return u.links?u.links():[]}return[]}));return rO(i.flat(1).filter(Jx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function HT(n,e,t,i,a,o){let u=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,h=(p,m)=>{var g;return t[m].pathname!==p.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return o==="assets"?e.filter((p,m)=>u(p,m)||h(p,m)):o==="data"?e.filter((p,m)=>{var v;let g=i.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(u(p,m)||h(p,m))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function tO(n,e,{includeHydrateFallback:t}={}){return nO(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function nO(n){return[...new Set(n)]}function iO(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function rO(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let o=JSON.stringify(iO(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function sO(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function aO(){let n=B.useContext(Yl);return zy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function oO(){let n=B.useContext(vp);return zy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Fy=B.createContext(void 0);Fy.displayName="FrameworkContext";function Pb(){let n=B.useContext(Fy);return zy(n,"You must render this element inside a <HydratedRouter> element"),n}function lO(n,e){let t=B.useContext(Fy),[i,a]=B.useState(!1),[o,u]=B.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,S=B.useRef(null);B.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let U=H=>{H.forEach(Y=>{u(Y.isIntersecting)})},k=new IntersectionObserver(U,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[n]),B.useEffect(()=>{if(i){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[i]);let I=()=>{a(!0)},x=()=>{a(!1),u(!1)};return t?n!=="intent"?[o,S,{}]:[o,S,{onFocus:pc(h,I),onBlur:pc(p,x),onMouseEnter:pc(m,I),onMouseLeave:pc(g,x),onTouchStart:pc(v,I)}]:[!1,S,{}]}function pc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function uO({page:n,...e}){let{router:t}=aO(),i=B.useMemo(()=>bb(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?B.createElement(hO,{page:n,matches:i,...e}):null}function cO(n){let{manifest:e,routeModules:t}=Pb(),[i,a]=B.useState([]);return B.useEffect(()=>{let o=!1;return eO(n,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[n,e,t]),i}function hO({page:n,matches:e,...t}){let i=Ao(),{manifest:a,routeModules:o}=Pb(),{loaderData:u,matches:h}=oO(),p=B.useMemo(()=>HT(n,e,h,a,i,"data"),[n,e,h,a,i]),m=B.useMemo(()=>HT(n,e,h,a,i,"assets"),[n,e,h,a,i]),g=B.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let I=new Set,x=!1;if(e.forEach(k=>{var Y;let H=a.routes[k.route.id];!H||!H.hasLoader||(!p.some(F=>F.route.id===k.route.id)&&k.route.id in u&&((Y=o[k.route.id])!=null&&Y.shouldRevalidate)||H.hasClientLoader?x=!0:I.add(k.route.id))}),I.size===0)return[];let U=sO(n);return x&&I.size>0&&U.searchParams.set("_routes",e.filter(k=>I.has(k.route.id)).map(k=>k.route.id).join(",")),[U.pathname+U.search]},[u,i,a,p,e,n,o]),v=B.useMemo(()=>tO(m,a),[m,a]),S=cO(m);return B.createElement(B.Fragment,null,g.map(I=>B.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),v.map(I=>B.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),S.map(({key:I,link:x})=>B.createElement("link",{key:I,...x})))}function fO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Lb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lb&&(window.__reactRouterVersion="7.2.0")}catch{}function dO({basename:n,children:e,window:t}){let i=B.useRef();i.current==null&&(i.current=XN({window:t,v5Compat:!0}));let a=i.current,[o,u]=B.useState({action:a.action,location:a.location}),h=B.useCallback(p=>{B.startTransition(()=>u(p))},[u]);return B.useLayoutEffect(()=>a.listen(h),[a,h]),B.createElement(Bx,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a})}var Vb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,By=B.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:u,state:h,target:p,to:m,preventScrollReset:g,viewTransition:v,...S},I){let{basename:x}=B.useContext(br),U=typeof m=="string"&&Vb.test(m),k,H=!1;if(typeof m=="string"&&U&&(k=m,Lb))try{let w=new URL(window.location.href),R=m.startsWith("//")?new URL(w.protocol+m):new URL(m),D=pa(R.pathname,x);R.origin===w.origin&&D!=null?m=D+R.search+R.hash:H=!0}catch{Er(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=Sx(m,{relative:a}),[F,ie,re]=lO(i,S),ae=gO(m,{replace:u,state:h,target:p,preventScrollReset:g,relative:a,viewTransition:v});function P(w){e&&e(w),w.defaultPrevented||ae(w)}let b=B.createElement("a",{...S,...re,href:k||Y,onClick:H||o?e:P,ref:fO(I,ie),target:p,"data-discover":!U&&t==="render"?"true":void 0});return F&&!U?B.createElement(B.Fragment,null,b,B.createElement(uO,{page:Y})):b});By.displayName="Link";var pO=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:h,children:p,...m},g){let v=hh(u,{relative:m.relative}),S=Ao(),I=B.useContext(vp),{navigator:x,basename:U}=B.useContext(br),k=I!=null&&wO(v)&&h===!0,H=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,Y=S.pathname,F=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),F=F?F.toLowerCase():null,H=H.toLowerCase()),F&&U&&(F=pa(F,U)||F);const ie=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let re=Y===H||!a&&Y.startsWith(H)&&Y.charAt(ie)==="/",ae=F!=null&&(F===H||!a&&F.startsWith(H)&&F.charAt(H.length)==="/"),P={isActive:re,isPending:ae,isTransitioning:k},b=re?e:void 0,w;typeof i=="function"?w=i(P):w=[i,re?"active":null,ae?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(P):o;return B.createElement(By,{...m,"aria-current":b,className:w,ref:g,style:R,to:u,viewTransition:h},typeof p=="function"?p(P):p)});pO.displayName="NavLink";var mO=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:u=cd,action:h,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:v,...S},I)=>{let x=EO(),U=TO(h,{relative:m}),k=u.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&Vb.test(h),Y=F=>{if(p&&p(F),F.defaultPrevented)return;F.preventDefault();let ie=F.nativeEvent.submitter,re=(ie==null?void 0:ie.getAttribute("formmethod"))||u;x(ie||F.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:a,state:o,relative:m,preventScrollReset:g,viewTransition:v})};return B.createElement("form",{ref:I,method:k,action:U,onSubmit:i?p:Y,...S,"data-discover":!H&&n==="render"?"true":void 0})});mO.displayName="Form";function _O(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ub(n){let e=B.useContext(Yl);return Ot(e,_O(n)),e}function gO(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=Xl(),p=Ao(),m=hh(n,{relative:o});return B.useCallback(g=>{if(Qx(g,e)){g.preventDefault();let v=t!==void 0?t:jc(p)===jc(m);h(n,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:u})}},[p,h,m,t,i,e,n,a,o,u])}var yO=0,vO=()=>`__${String(++yO)}__`;function EO(){let{router:n}=Ub("useSubmit"),{basename:e}=B.useContext(br),t=Vx();return B.useCallback(async(i,a={})=>{let{action:o,method:u,encType:h,formData:p,body:m}=Xx(i,e);if(a.navigate===!1){let g=a.fetcherKey||vO();await n.fetch(g,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function TO(n,{relative:e}={}){let{basename:t}=B.useContext(br),i=B.useContext(Xi);Ot(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...hh(n||".",{relative:e})},u=Ao();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),p=h.getAll("index");if(p.some(g=>g==="")){h.delete("index"),p.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:rs([t,o.pathname])),jc(o)}function wO(n,e={}){let t=B.useContext(xb);Ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ub("useViewTransitionState"),a=hh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=pa(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=pa(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Rd(a.pathname,u)!=null||Rd(a.pathname,o)!=null}new TextEncoder;var ug={exports:{}},cg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function SO(){if(GT)return cg;GT=1;var n=yp();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,o=n.useEffect,u=n.useMemo,h=n.useDebugValue;return cg.useSyncExternalStoreWithSelector=function(p,m,g,v,S){var I=a(null);if(I.current===null){var x={hasValue:!1,value:null};I.current=x}else x=I.current;I=u(function(){function k(re){if(!H){if(H=!0,Y=re,re=v(re),S!==void 0&&x.hasValue){var ae=x.value;if(S(ae,re))return F=ae}return F=re}if(ae=F,t(Y,re))return ae;var P=v(re);return S!==void 0&&S(ae,P)?(Y=re,ae):(Y=re,F=P)}var H=!1,Y,F,ie=g===void 0?null:g;return[function(){return k(m())},ie===null?void 0:function(){return k(ie())}]},[m,g,v,S]);var U=i(p,I[0],I[1]);return o(function(){x.hasValue=!0,x.value=U},[U]),h(U),U},cg}var $T;function bO(){return $T||($T=1,ug.exports=SO()),ug.exports}var AO=bO();function CO(n){n()}function RO(){let n=null,e=null;return{clear(){n=null,e=null},notify(){CO(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var KT={notify(){},get:()=>[]};function IO(n,e){let t,i=KT,a=0,o=!1;function u(U){g();const k=i.subscribe(U);let H=!1;return()=>{H||(H=!0,k(),v())}}function h(){i.notify()}function p(){x.onStateChange&&x.onStateChange()}function m(){return o}function g(){a++,t||(t=n.subscribe(p),i=RO())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=KT)}function S(){o||(o=!0,g())}function I(){o&&(o=!1,v())}const x={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:p,isSubscribed:m,trySubscribe:S,tryUnsubscribe:I,getListeners:()=>i};return x}var NO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xO=NO(),OO=()=>typeof navigator<"u"&&navigator.product==="ReactNative",DO=OO(),kO=()=>xO||DO?B.useLayoutEffect:B.useEffect,MO=kO(),hg=Symbol.for("react-redux-context"),fg=typeof globalThis<"u"?globalThis:{};function PO(){if(!B.createContext)return{};const n=fg[hg]??(fg[hg]=new Map);let e=n.get(B.createContext);return e||(e=B.createContext(null),n.set(B.createContext,e)),e}var ma=PO();function LO(n){const{children:e,context:t,serverState:i,store:a}=n,o=B.useMemo(()=>{const p=IO(a);return{store:a,subscription:p,getServerState:i?()=>i:void 0}},[a,i]),u=B.useMemo(()=>a.getState(),[a]);MO(()=>{const{subscription:p}=o;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),u!==a.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[o,u]);const h=t||ma;return B.createElement(h.Provider,{value:o},e)}var VO=LO;function qy(n=ma){return function(){return B.useContext(n)}}var jb=qy();function zb(n=ma){const e=n===ma?jb:qy(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var UO=zb();function jO(n=ma){const e=n===ma?UO:zb(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Gn=jO(),zO=(n,e)=>n===e;function FO(n=ma){const e=n===ma?jb:qy(n),t=(i,a={})=>{const{equalityFn:o=zO}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:h,subscription:p,getServerState:m}=u;B.useRef(!0);const g=B.useCallback({[i.name](S){return i(S)}}[i.name],[i]),v=AO.useSyncExternalStoreWithSelector(p.addNestedSub,h.getState,m||h.getState,g,o);return B.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var _t=FO();function An(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var BO=typeof Symbol=="function"&&Symbol.observable||"@@observable",QT=BO,dg=()=>Math.random().toString(36).substring(7).split("").join("."),qO={INIT:`@@redux/INIT${dg()}`,REPLACE:`@@redux/REPLACE${dg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dg()}`},Id=qO;function Hy(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Fb(n,e,t){if(typeof n!="function")throw new Error(An(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(An(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(An(1));return t(Fb)(n,e)}let i=n,a=e,o=new Map,u=o,h=0,p=!1;function m(){u===o&&(u=new Map,o.forEach((k,H)=>{u.set(H,k)}))}function g(){if(p)throw new Error(An(3));return a}function v(k){if(typeof k!="function")throw new Error(An(4));if(p)throw new Error(An(5));let H=!0;m();const Y=h++;return u.set(Y,k),function(){if(H){if(p)throw new Error(An(6));H=!1,m(),u.delete(Y),o=null}}}function S(k){if(!Hy(k))throw new Error(An(7));if(typeof k.type>"u")throw new Error(An(8));if(typeof k.type!="string")throw new Error(An(17));if(p)throw new Error(An(9));try{p=!0,a=i(a,k)}finally{p=!1}return(o=u).forEach(Y=>{Y()}),k}function I(k){if(typeof k!="function")throw new Error(An(10));i=k,S({type:Id.REPLACE})}function x(){const k=v;return{subscribe(H){if(typeof H!="object"||H===null)throw new Error(An(11));function Y(){const ie=H;ie.next&&ie.next(g())}return Y(),{unsubscribe:k(Y)}},[QT](){return this}}}return S({type:Id.INIT}),{dispatch:S,subscribe:v,getState:g,replaceReducer:I,[QT]:x}}function HO(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Id.INIT})>"u")throw new Error(An(12));if(typeof t(void 0,{type:Id.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(An(13))})}function GO(n){const e=Object.keys(n),t={};for(let o=0;o<e.length;o++){const u=e[o];typeof n[u]=="function"&&(t[u]=n[u])}const i=Object.keys(t);let a;try{HO(t)}catch(o){a=o}return function(u={},h){if(a)throw a;let p=!1;const m={};for(let g=0;g<i.length;g++){const v=i[g],S=t[v],I=u[v],x=S(I,h);if(typeof x>"u")throw h&&h.type,new Error(An(14));m[v]=x,p=p||x!==I}return p=p||i.length!==Object.keys(u).length,p?m:u}}function Nd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function $O(...n){return e=>(t,i)=>{const a=e(t,i);let o=()=>{throw new Error(An(15))};const u={getState:a.getState,dispatch:(p,...m)=>o(p,...m)},h=n.map(p=>p(u));return o=Nd(...h)(a.dispatch),{...a,dispatch:o}}}function KO(n){return Hy(n)&&"type"in n&&typeof n.type=="string"}var Bb=Symbol.for("immer-nothing"),WT=Symbol.for("immer-draftable"),hi=Symbol.for("immer-state");function zi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Vl=Object.getPrototypeOf;function _o(n){return!!n&&!!n[hi]}function us(n){var e;return n?qb(n)||Array.isArray(n)||!!n[WT]||!!((e=n.constructor)!=null&&e[WT])||wp(n)||Sp(n):!1}var QO=Object.prototype.constructor.toString();function qb(n){if(!n||typeof n!="object")return!1;const e=Vl(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===QO}function xd(n,e){Tp(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function Tp(n){const e=n[hi];return e?e.type_:Array.isArray(n)?1:wp(n)?2:Sp(n)?3:0}function Fg(n,e){return Tp(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Hb(n,e,t){const i=Tp(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function WO(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function wp(n){return n instanceof Map}function Sp(n){return n instanceof Set}function uo(n){return n.copy_||n.base_}function Bg(n,e){if(wp(n))return new Map(n);if(Sp(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=qb(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[hi];let a=Reflect.ownKeys(i);for(let o=0;o<a.length;o++){const u=a[o],h=i[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[u]})}return Object.create(Vl(n),i)}else{const i=Vl(n);if(i!==null&&t)return{...n};const a=Object.create(i);return Object.assign(a,n)}}function Gy(n,e=!1){return bp(n)||_o(n)||!us(n)||(Tp(n)>1&&(n.set=n.add=n.clear=n.delete=YO),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>Gy(i,!0))),n}function YO(){zi(2)}function bp(n){return Object.isFrozen(n)}var XO={};function go(n){const e=XO[n];return e||zi(0,n),e}var zc;function Gb(){return zc}function ZO(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function YT(n,e){e&&(go("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function qg(n){Hg(n),n.drafts_.forEach(JO),n.drafts_=null}function Hg(n){n===zc&&(zc=n.parent_)}function XT(n){return zc=ZO(zc,n)}function JO(n){const e=n[hi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ZT(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[hi].modified_&&(qg(e),zi(4)),us(n)&&(n=Od(e,n),e.parent_||Dd(e,n)),e.patches_&&go("Patches").generateReplacementPatches_(t[hi].base_,n,e.patches_,e.inversePatches_)):n=Od(e,t,[]),qg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Bb?n:void 0}function Od(n,e,t){if(bp(e))return e;const i=e[hi];if(!i)return xd(e,(a,o)=>JT(n,i,e,a,o,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return Dd(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,u=!1;i.type_===3&&(o=new Set(a),a.clear(),u=!0),xd(o,(h,p)=>JT(n,i,a,h,p,t,u)),Dd(n,a,!1),t&&n.patches_&&go("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function JT(n,e,t,i,a,o,u){if(_o(a)){const h=o&&e&&e.type_!==3&&!Fg(e.assigned_,i)?o.concat(i):void 0,p=Od(n,a,h);if(Hb(t,i,p),_o(p))n.canAutoFreeze_=!1;else return}else u&&t.add(a);if(us(a)&&!bp(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Od(n,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&Dd(n,a)}}function Dd(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Gy(e,t)}function eD(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:Gb(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,o=$y;t&&(a=[i],o=Fc);const{revoke:u,proxy:h}=Proxy.revocable(a,o);return i.draft_=h,i.revoke_=u,h}var $y={get(n,e){if(e===hi)return n;const t=uo(n);if(!Fg(t,e))return tD(n,t,e);const i=t[e];return n.finalized_||!us(i)?i:i===pg(n.base_,e)?(mg(n),n.copy_[e]=$g(i,n)):i},has(n,e){return e in uo(n)},ownKeys(n){return Reflect.ownKeys(uo(n))},set(n,e,t){const i=$b(uo(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=pg(uo(n),e),o=a==null?void 0:a[hi];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(WO(t,a)&&(t!==void 0||Fg(n.base_,e)))return!0;mg(n),Gg(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return pg(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,mg(n),Gg(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=uo(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){zi(11)},getPrototypeOf(n){return Vl(n.base_)},setPrototypeOf(){zi(12)}},Fc={};xd($y,(n,e)=>{Fc[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Fc.deleteProperty=function(n,e){return Fc.set.call(this,n,e,void 0)};Fc.set=function(n,e,t){return $y.set.call(this,n[0],e,t,n[0])};function pg(n,e){const t=n[hi];return(t?uo(t):n)[e]}function tD(n,e,t){var a;const i=$b(e,t);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function $b(n,e){if(!(e in n))return;let t=Vl(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Vl(t)}}function Gg(n){n.modified_||(n.modified_=!0,n.parent_&&Gg(n.parent_))}function mg(n){n.copy_||(n.copy_=Bg(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var nD=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const u=this;return function(p=o,...m){return u.produce(p,g=>t.call(this,g,...m))}}typeof t!="function"&&zi(6),i!==void 0&&typeof i!="function"&&zi(7);let a;if(us(e)){const o=XT(this),u=$g(e,void 0);let h=!0;try{a=t(u),h=!1}finally{h?qg(o):Hg(o)}return YT(o,i),ZT(a,o)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===Bb&&(a=void 0),this.autoFreeze_&&Gy(a,!0),i){const o=[],u=[];go("Patches").generateReplacementPatches_(e,a,o,u),i(o,u)}return a}else zi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,p=>e(p,...h));let i,a;return[this.produce(e,t,(u,h)=>{i=u,a=h}),i,a]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){us(n)||zi(8),_o(n)&&(n=iD(n));const e=XT(this),t=$g(n,void 0);return t[hi].isManual_=!0,Hg(e),t}finishDraft(n,e){const t=n&&n[hi];(!t||!t.isManual_)&&zi(9);const{scope_:i}=t;return YT(i,e),ZT(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=go("Patches").applyPatches_;return _o(n)?i(n,e):this.produce(n,a=>i(a,e))}};function $g(n,e){const t=wp(n)?go("MapSet").proxyMap_(n,e):Sp(n)?go("MapSet").proxySet_(n,e):eD(n,e);return(e?e.scope_:Gb()).drafts_.push(t),t}function iD(n){return _o(n)||zi(10,n),Kb(n)}function Kb(n){if(!us(n)||bp(n))return n;const e=n[hi];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Bg(n,e.scope_.immer_.useStrictShallowCopy_)}else t=Bg(n,!0);return xd(t,(i,a)=>{Hb(t,i,Kb(a))}),e&&(e.finalized_=!1),t}var fi=new nD,Qb=fi.produce;fi.produceWithPatches.bind(fi);fi.setAutoFreeze.bind(fi);fi.setUseStrictShallowCopy.bind(fi);fi.applyPatches.bind(fi);fi.createDraft.bind(fi);fi.finishDraft.bind(fi);function Wb(n){return({dispatch:t,getState:i})=>a=>o=>typeof o=="function"?o(t,i,n):a(o)}var rD=Wb(),sD=Wb,aD=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Nd:Nd.apply(null,arguments)},oD=n=>n&&typeof n.match=="function";function Ic(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(ss(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>KO(i)&&i.type===n,t}var Yb=class Tc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Tc.prototype)}static get[Symbol.species](){return Tc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Tc(...e[0].concat(this)):new Tc(...e.concat(this))}};function ew(n){return us(n)?Qb(n,()=>{}):n}function tw(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function lD(n){return typeof n=="boolean"}var uD=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=e??{};let u=new Yb;return t&&(lD(t)?u.push(rD):u.push(sD(t.extraArgument))),u},cD="RTK_autoBatch",nw=n=>e=>{setTimeout(e,n)},hD=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,o=!1,u=!1;const h=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:nw(10):n.type==="callback"?n.queueNotification:nw(n.timeout),m=()=>{u=!1,o&&(o=!1,h.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const v=()=>a&&g(),S=i.subscribe(v);return h.add(g),()=>{S(),h.delete(g)}},dispatch(g){var v;try{return a=!((v=g==null?void 0:g.meta)!=null&&v[cD]),o=!a,o&&(u||(u=!0,p(m))),i.dispatch(g)}finally{a=!0}}})},fD=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new Yb(n);return i&&a.push(hD(typeof i=="object"?i:void 0)),a};function dD(n){const e=uD(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:o=void 0,enhancers:u=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(Hy(t))h=GO(t);else throw new Error(ss(1));let p;typeof i=="function"?p=i(e):p=e();let m=Nd;a&&(m=aD({trace:!1,...typeof a=="object"&&a}));const g=$O(...p),v=fD(g);let S=typeof u=="function"?u(v):v();const I=m(...S);return Fb(h,o,I)}function Xb(n){const e={},t=[];let i;const a={addCase(o,u){const h=typeof o=="string"?o:o.type;if(!h)throw new Error(ss(28));if(h in e)throw new Error(ss(29));return e[h]=u,a},addMatcher(o,u){return t.push({matcher:o,reducer:u}),a},addDefaultCase(o){return i=o,a}};return n(a),[e,t,i]}function pD(n){return typeof n=="function"}function mD(n,e){let[t,i,a]=Xb(e),o;if(pD(n))o=()=>ew(n());else{const h=ew(n);o=()=>h}function u(h=o(),p){let m=[t[p.type],...i.filter(({matcher:g})=>g(p)).map(({reducer:g})=>g)];return m.filter(g=>!!g).length===0&&(m=[a]),m.reduce((g,v)=>{if(v)if(_o(g)){const I=v(g,p);return I===void 0?g:I}else{if(us(g))return Qb(g,S=>v(S,p));{const S=v(g,p);if(S===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return g},h)}return u.getInitialState=o,u}var _D=(n,e)=>oD(n)?n.match(e):n(e);function gD(...n){return e=>n.some(t=>_D(t,e))}var yD="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vD=(n=21)=>{let e="",t=n;for(;t--;)e+=yD[Math.random()*64|0];return e},ED=["name","message","stack","code"],_g=class{constructor(n,e){eg(this,"_type");this.payload=n,this.meta=e}},iw=class{constructor(n,e){eg(this,"_type");this.payload=n,this.meta=e}},TD=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of ED)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},Co=(()=>{function n(e,t,i){const a=Ic(e+"/fulfilled",(p,m,g,v)=>({payload:p,meta:{...v||{},arg:g,requestId:m,requestStatus:"fulfilled"}})),o=Ic(e+"/pending",(p,m,g)=>({payload:void 0,meta:{...g||{},arg:m,requestId:p,requestStatus:"pending"}})),u=Ic(e+"/rejected",(p,m,g,v,S)=>({payload:v,error:(i&&i.serializeError||TD)(p||"Rejected"),meta:{...S||{},arg:g,requestId:m,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function h(p){return(m,g,v)=>{const S=i!=null&&i.idGenerator?i.idGenerator(p):vD(),I=new AbortController;let x,U;function k(Y){U=Y,I.abort()}const H=async function(){var ie,re;let Y;try{let ae=(ie=i==null?void 0:i.condition)==null?void 0:ie.call(i,p,{getState:g,extra:v});if(SD(ae)&&(ae=await ae),ae===!1||I.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const P=new Promise((b,w)=>{x=()=>{w({name:"AbortError",message:U||"Aborted"})},I.signal.addEventListener("abort",x)});m(o(S,p,(re=i==null?void 0:i.getPendingMeta)==null?void 0:re.call(i,{requestId:S,arg:p},{getState:g,extra:v}))),Y=await Promise.race([P,Promise.resolve(t(p,{dispatch:m,getState:g,extra:v,requestId:S,signal:I.signal,abort:k,rejectWithValue:(b,w)=>new _g(b,w),fulfillWithValue:(b,w)=>new iw(b,w)})).then(b=>{if(b instanceof _g)throw b;return b instanceof iw?a(b.payload,S,p,b.meta):a(b,S,p)})])}catch(ae){Y=ae instanceof _g?u(null,S,p,ae.payload,ae.meta):u(ae,S,p)}finally{x&&I.signal.removeEventListener("abort",x)}return i&&!i.dispatchConditionRejection&&u.match(Y)&&Y.meta.condition||m(Y),Y}();return Object.assign(H,{abort:k,requestId:S,arg:p,unwrap(){return H.then(wD)}})}}return Object.assign(h,{pending:o,rejected:u,fulfilled:a,settled:gD(u,a),typePrefix:e})}return n.withTypes=()=>n,n})();function wD(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function SD(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var bD=Symbol.for("rtk-slice-createasyncthunk");function AD(n,e){return`${n}/${e}`}function CD({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[bD];return function(a){const{name:o,reducerPath:u=o}=a;if(!o)throw new Error(ss(11));const h=(typeof a.reducers=="function"?a.reducers(ID()):a.reducers)||{},p=Object.keys(h),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(F,ie){const re=typeof F=="string"?F:F.type;if(!re)throw new Error(ss(12));if(re in m.sliceCaseReducersByType)throw new Error(ss(13));return m.sliceCaseReducersByType[re]=ie,g},addMatcher(F,ie){return m.sliceMatchers.push({matcher:F,reducer:ie}),g},exposeAction(F,ie){return m.actionCreators[F]=ie,g},exposeCaseReducer(F,ie){return m.sliceCaseReducersByName[F]=ie,g}};p.forEach(F=>{const ie=h[F],re={reducerName:F,type:AD(o,F),createNotation:typeof a.reducers=="function"};xD(ie)?DD(re,ie,g,e):ND(re,ie,g)});function v(){const[F={},ie=[],re=void 0]=typeof a.extraReducers=="function"?Xb(a.extraReducers):[a.extraReducers],ae={...F,...m.sliceCaseReducersByType};return mD(a.initialState,P=>{for(let b in ae)P.addCase(b,ae[b]);for(let b of m.sliceMatchers)P.addMatcher(b.matcher,b.reducer);for(let b of ie)P.addMatcher(b.matcher,b.reducer);re&&P.addDefaultCase(re)})}const S=F=>F,I=new Map;let x;function U(F,ie){return x||(x=v()),x(F,ie)}function k(){return x||(x=v()),x.getInitialState()}function H(F,ie=!1){function re(P){let b=P[F];return typeof b>"u"&&ie&&(b=k()),b}function ae(P=S){const b=tw(I,ie,()=>new WeakMap);return tw(b,P,()=>{const w={};for(const[R,D]of Object.entries(a.selectors??{}))w[R]=RD(D,P,k,ie);return w})}return{reducerPath:F,getSelectors:ae,get selectors(){return ae(re)},selectSlice:re}}const Y={name:o,reducer:U,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:k,...H(u),injectInto(F,{reducerPath:ie,...re}={}){const ae=ie??u;return F.inject({reducerPath:ae,reducer:U},re),{...Y,...H(ae,!0)}}};return Y}}function RD(n,e,t,i){function a(o,...u){let h=e(o);return typeof h>"u"&&i&&(h=t()),n(h,...u)}return a.unwrapped=n,a}var Ia=CD();function ID(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function ND({type:n,reducerName:e,createNotation:t},i,a){let o,u;if("reducer"in i){if(t&&!OD(i))throw new Error(ss(17));o=i.reducer,u=i.prepare}else o=i;a.addCase(n,o).exposeCaseReducer(e,o).exposeAction(e,u?Ic(n,u):Ic(n))}function xD(n){return n._reducerDefinitionType==="asyncThunk"}function OD(n){return n._reducerDefinitionType==="reducerWithPrepare"}function DD({type:n,reducerName:e},t,i,a){if(!a)throw new Error(ss(18));const{payloadCreator:o,fulfilled:u,pending:h,rejected:p,settled:m,options:g}=t,v=a(n,o,g);i.exposeAction(e,v),u&&i.addCase(v.fulfilled,u),h&&i.addCase(v.pending,h),p&&i.addCase(v.rejected,p),m&&i.addMatcher(v.settled,m),i.exposeCaseReducer(e,{fulfilled:u||Xf,pending:h||Xf,rejected:p||Xf,settled:m||Xf})}function Xf(){}function ss(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const Zb=Ia({name:"menu",initialState:{isMenuVisible:!1,isRegistrationVisible:!1,isNewsSectionVisible:!1,isCategoryListVisible:!1,isSettingsVisible:!1,isOrderHistoryVisible:!1,isFavoritesVisible:!1,selectedCategory:null},reducers:{toggleMenu:n=>{n.isMenuVisible=!n.isMenuVisible},closeMenu:n=>{n.isMenuVisible=!1},toggleRegistration:(n,e)=>{n.isRegistrationVisible=e.payload??!n.isRegistrationVisible},toggleNewsSection:(n,e)=>{n.isNewsSectionVisible=e.payload??!n.isNewsSectionVisible},toggleCategoryList:(n,e)=>{n.isCategoryListVisible=e.payload??!n.isCategoryListVisible},toggleSettingsPanel:(n,e)=>{n.isSettingsVisible=e.payload??!n.isSettingsVisible},toggleOrderHistory:(n,e)=>{n.isOrderHistoryVisible=e.payload??!n.isOrderHistoryVisible},toggleFavorites:(n,e)=>{n.isFavoritesVisible=e.payload??!n.isFavoritesVisible}}}),{toggleMenu:kD,closeMenu:rw,toggleFavorites:kd,toggleRegistration:Bc,toggleNewsSection:Kg,toggleCategoryList:Qg,toggleSettingsPanel:Wg,toggleOrderHistory:Yg}=Zb.actions,MD=Zb.reducer,PD=()=>{};var sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe=function(n,e){if(!n)throw Zl(e)},Zl=function(n){return new Error("Firebase Database ("+Jb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},LD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const o=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},Ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let S=(h&15)<<2|m>>6,I=m&63;p||(I=64,u||(S=64)),i.push(t[g],t[v],t[S],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||m==null||v==null)throw new VD;const S=o<<2|h>>4;if(i.push(S),m!==64){const I=h<<4&240|m>>2;if(i.push(I),v!==64){const x=m<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tA=function(n){const e=eA(n);return Ky.encodeByteArray(e,!0)},Md=function(n){return tA(n).replace(/\./g,"")},Pd=function(n){try{return Ky.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n){return nA(void 0,n)}function nA(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!jD(t)||(n[t]=nA(n[t],e[t]));return n}function jD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=()=>zD().__FIREBASE_DEFAULTS__,BD=()=>{if(typeof process>"u"||typeof sw>"u")return;const n=sw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Pd(n[1]);return e&&JSON.parse(e)},Ap=()=>{try{return PD()||FD()||BD()||qD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iA=n=>{var e,t;return(t=(e=Ap())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Qy=n=>{const e=iA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},rA=()=>{var n;return(n=Ap())===null||n===void 0?void 0:n.config},sA=n=>{var e;return(e=Ap())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Md(JSON.stringify(t)),Md(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function HD(){var n;const e=(n=Ap())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $D(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KD(){const n=Mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QD(){return Jb.NODE_ADMIN===!0}function WD(){return!HD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YD(){try{return typeof indexedDB=="object"}catch{return!1}}function XD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="FirebaseError";class Ar extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ZD,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fh.prototype.create)}}class fh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?JD(o,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Ar(a,h,i)}}function JD(n,e){return n.replace(ek,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const ek=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){return JSON.parse(n)}function an(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=function(n){let e={},t={},i={},a="";try{const o=n.split(".");e=qc(Pd(o[0])||""),t=qc(Pd(o[1])||""),a=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},tk=function(n){const e=oA(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},nk=function(n){const e=oA(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ul(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Xg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ld(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function _a(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=n[a],u=e[a];if(aw(o)&&aw(u)){if(!_a(o,u))return!1}else if(o!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function aw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function wc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Sc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const S=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(S<<1|S>>>31)&4294967295}let a=this.chain_[0],o=this.chain_[1],u=this.chain_[2],h=this.chain_[3],p=this.chain_[4],m,g;for(let v=0;v<80;v++){v<40?v<20?(m=h^o&(u^h),g=1518500249):(m=o^u^h,g=1859775393):v<60?(m=o&u|h&(o|u),g=2400959708):(m=o^u^h,g=3395469782);const S=(a<<5|a>>>27)+m+p+g+i[v]&4294967295;p=h,h=u,u=(o<<30|o>>>2)&4294967295,o=a,a=S}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const o=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(o[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}else for(;a<t;)if(o[u]=e[a],++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[a]>>o&255,++i;return e}}function rk(n,e){const t=new sk(n,e);return t.subscribe.bind(t)}class sk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ak(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=gg),a.error===void 0&&(a.error=gg),a.complete===void 0&&(a.complete=gg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ak(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gg(){}function Xy(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const o=a-55296;i++,fe(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(o<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Rp=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n){return n&&n._delegate?n._delegate:n}class cs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Cp;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ck(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uk(n){return n===co?void 0:n}function ck(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const fk={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},dk=Ge.INFO,pk={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},mk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=pk[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ip{constructor(e){this.name=e,this._logLevel=dk,this._logHandler=mk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const _k=(n,e)=>e.some(t=>n instanceof t);let ow,lw;function gk(){return ow||(ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yk(){return lw||(lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,Zg=new WeakMap,uA=new WeakMap,yg=new WeakMap,Zy=new WeakMap;function vk(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(oa(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&lA.set(t,n)}).catch(()=>{}),Zy.set(e,n),e}function Ek(n){if(Zg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});Zg.set(n,e)}let Jg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Tk(n){Jg=n(Jg)}function wk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(vg(this),e,...t);return uA.set(i,e.sort?e.sort():[e]),oa(i)}:yk().includes(n)?function(...e){return n.apply(vg(this),e),oa(lA.get(this))}:function(...e){return oa(n.apply(vg(this),e))}}function Sk(n){return typeof n=="function"?wk(n):(n instanceof IDBTransaction&&Ek(n),_k(n,gk())?new Proxy(n,Jg):n)}function oa(n){if(n instanceof IDBRequest)return vk(n);if(yg.has(n))return yg.get(n);const e=Sk(n);return e!==n&&(yg.set(n,e),Zy.set(e,n)),e}const vg=n=>Zy.get(n);function bk(n,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const u=indexedDB.open(n,e),h=oa(u);return i&&u.addEventListener("upgradeneeded",p=>{i(oa(u.result),p.oldVersion,p.newVersion,oa(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{o&&p.addEventListener("close",()=>o()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Ak=["get","getKey","getAll","getAllKeys","count"],Ck=["put","add","delete","clear"],Eg=new Map;function uw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=Ck.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||Ak.includes(t)))return;const o=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&p.done]))[0]};return Eg.set(e,o),o}Tk(n=>({...n,get:(e,t,i)=>uw(e,t)||n.get(e,t,i),has:(e,t)=>!!uw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ik(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ik(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ey="@firebase/app",cw="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Ip("@firebase/app"),Nk="@firebase/app-compat",xk="@firebase/analytics-compat",Ok="@firebase/analytics",Dk="@firebase/app-check-compat",kk="@firebase/app-check",Mk="@firebase/auth",Pk="@firebase/auth-compat",Lk="@firebase/database",Vk="@firebase/data-connect",Uk="@firebase/database-compat",jk="@firebase/functions",zk="@firebase/functions-compat",Fk="@firebase/installations",Bk="@firebase/installations-compat",qk="@firebase/messaging",Hk="@firebase/messaging-compat",Gk="@firebase/performance",$k="@firebase/performance-compat",Kk="@firebase/remote-config",Qk="@firebase/remote-config-compat",Wk="@firebase/storage",Yk="@firebase/storage-compat",Xk="@firebase/firestore",Zk="@firebase/vertexai",Jk="@firebase/firestore-compat",e4="firebase",t4="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="[DEFAULT]",n4={[ey]:"fire-core",[Nk]:"fire-core-compat",[Ok]:"fire-analytics",[xk]:"fire-analytics-compat",[kk]:"fire-app-check",[Dk]:"fire-app-check-compat",[Mk]:"fire-auth",[Pk]:"fire-auth-compat",[Lk]:"fire-rtdb",[Vk]:"fire-data-connect",[Uk]:"fire-rtdb-compat",[jk]:"fire-fn",[zk]:"fire-fn-compat",[Fk]:"fire-iid",[Bk]:"fire-iid-compat",[qk]:"fire-fcm",[Hk]:"fire-fcm-compat",[Gk]:"fire-perf",[$k]:"fire-perf-compat",[Kk]:"fire-rc",[Qk]:"fire-rc-compat",[Wk]:"fire-gcs",[Yk]:"fire-gcs-compat",[Xk]:"fire-fst",[Jk]:"fire-fst-compat",[Zk]:"fire-vertex","fire-js":"fire-js",[e4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Map,i4=new Map,ny=new Map;function hw(n,e){try{n.container.addComponent(e)}catch(t){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ga(n){const e=n.name;if(ny.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;ny.set(e,n);for(const t of Vd.values())hw(t,n);for(const t of i4.values())hw(t,n);return!0}function dh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new fh("app","Firebase",r4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=t4;function cA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ty,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw la.create("bad-app-name",{appName:String(a)});if(t||(t=rA()),!t)throw la.create("no-options");const o=Vd.get(a);if(o){if(_a(t,o.options)&&_a(i,o.config))return o;throw la.create("duplicate-app",{appName:a})}const u=new hk(a);for(const p of ny.values())u.addComponent(p);const h=new s4(t,i,u);return Vd.set(a,h),h}function Np(n=ty){const e=Vd.get(n);if(!e&&n===ty&&rA())return cA();if(!e)throw la.create("no-app",{appName:n});return e}function xi(n,e,t){var i;let a=(i=n4[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(h.join(" "));return}ga(new cs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="firebase-heartbeat-database",o4=1,Hc="firebase-heartbeat-store";let Tg=null;function hA(){return Tg||(Tg=bk(a4,o4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hc)}catch(t){console.warn(t)}}}}).catch(n=>{throw la.create("idb-open",{originalErrorMessage:n.message})})),Tg}async function l4(n){try{const t=(await hA()).transaction(Hc),i=await t.objectStore(Hc).get(fA(n));return await t.done,i}catch(e){if(e instanceof Ar)hs.warn(e.message);else{const t=la.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(t.message)}}}async function fw(n,e){try{const i=(await hA()).transaction(Hc,"readwrite");await i.objectStore(Hc).put(e,fA(n)),await i.done}catch(t){if(t instanceof Ar)hs.warn(t.message);else{const i=la.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hs.warn(i.message)}}}function fA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=1024,c4=30;class h4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new d4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=dw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>c4){const u=p4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=dw(),{heartbeatsToSend:i,unsentEntries:a}=f4(this._heartbeatsCache.heartbeats),o=Md(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return hs.warn(t),""}}}function dw(){return new Date().toISOString().substring(0,10)}function f4(n,e=u4){const t=[];let i=n.slice();for(const a of n){const o=t.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),pw(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),pw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class d4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YD()?XD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return fw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return fw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function pw(n){return Md(JSON.stringify({version:2,heartbeats:n})).length}function p4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n){ga(new cs("platform-logger",e=>new Rk(e),"PRIVATE")),ga(new cs("heartbeat",e=>new h4(e),"PRIVATE")),xi(ey,cw,n),xi(ey,cw,"esm2017"),xi("fire-js","")}m4("");var _4="firebase",g4="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(_4,g4,"app");var mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,dA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,b){function w(){}w.prototype=b.prototype,P.D=b.prototype,P.prototype=new w,P.prototype.constructor=P,P.C=function(R,D,L){for(var O=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)O[Ve-2]=arguments[Ve];return b.prototype[D].apply(R,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,b,w){w||(w=0);var R=Array(16);if(typeof b=="string")for(var D=0;16>D;++D)R[D]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(D=0;16>D;++D)R[D]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=P.g[0],w=P.g[1],D=P.g[2];var L=P.g[3],O=b+(L^w&(D^L))+R[0]+3614090360&4294967295;b=w+(O<<7&4294967295|O>>>25),O=L+(D^b&(w^D))+R[1]+3905402710&4294967295,L=b+(O<<12&4294967295|O>>>20),O=D+(w^L&(b^w))+R[2]+606105819&4294967295,D=L+(O<<17&4294967295|O>>>15),O=w+(b^D&(L^b))+R[3]+3250441966&4294967295,w=D+(O<<22&4294967295|O>>>10),O=b+(L^w&(D^L))+R[4]+4118548399&4294967295,b=w+(O<<7&4294967295|O>>>25),O=L+(D^b&(w^D))+R[5]+1200080426&4294967295,L=b+(O<<12&4294967295|O>>>20),O=D+(w^L&(b^w))+R[6]+2821735955&4294967295,D=L+(O<<17&4294967295|O>>>15),O=w+(b^D&(L^b))+R[7]+4249261313&4294967295,w=D+(O<<22&4294967295|O>>>10),O=b+(L^w&(D^L))+R[8]+1770035416&4294967295,b=w+(O<<7&4294967295|O>>>25),O=L+(D^b&(w^D))+R[9]+2336552879&4294967295,L=b+(O<<12&4294967295|O>>>20),O=D+(w^L&(b^w))+R[10]+4294925233&4294967295,D=L+(O<<17&4294967295|O>>>15),O=w+(b^D&(L^b))+R[11]+2304563134&4294967295,w=D+(O<<22&4294967295|O>>>10),O=b+(L^w&(D^L))+R[12]+1804603682&4294967295,b=w+(O<<7&4294967295|O>>>25),O=L+(D^b&(w^D))+R[13]+4254626195&4294967295,L=b+(O<<12&4294967295|O>>>20),O=D+(w^L&(b^w))+R[14]+2792965006&4294967295,D=L+(O<<17&4294967295|O>>>15),O=w+(b^D&(L^b))+R[15]+1236535329&4294967295,w=D+(O<<22&4294967295|O>>>10),O=b+(D^L&(w^D))+R[1]+4129170786&4294967295,b=w+(O<<5&4294967295|O>>>27),O=L+(w^D&(b^w))+R[6]+3225465664&4294967295,L=b+(O<<9&4294967295|O>>>23),O=D+(b^w&(L^b))+R[11]+643717713&4294967295,D=L+(O<<14&4294967295|O>>>18),O=w+(L^b&(D^L))+R[0]+3921069994&4294967295,w=D+(O<<20&4294967295|O>>>12),O=b+(D^L&(w^D))+R[5]+3593408605&4294967295,b=w+(O<<5&4294967295|O>>>27),O=L+(w^D&(b^w))+R[10]+38016083&4294967295,L=b+(O<<9&4294967295|O>>>23),O=D+(b^w&(L^b))+R[15]+3634488961&4294967295,D=L+(O<<14&4294967295|O>>>18),O=w+(L^b&(D^L))+R[4]+3889429448&4294967295,w=D+(O<<20&4294967295|O>>>12),O=b+(D^L&(w^D))+R[9]+568446438&4294967295,b=w+(O<<5&4294967295|O>>>27),O=L+(w^D&(b^w))+R[14]+3275163606&4294967295,L=b+(O<<9&4294967295|O>>>23),O=D+(b^w&(L^b))+R[3]+4107603335&4294967295,D=L+(O<<14&4294967295|O>>>18),O=w+(L^b&(D^L))+R[8]+1163531501&4294967295,w=D+(O<<20&4294967295|O>>>12),O=b+(D^L&(w^D))+R[13]+2850285829&4294967295,b=w+(O<<5&4294967295|O>>>27),O=L+(w^D&(b^w))+R[2]+4243563512&4294967295,L=b+(O<<9&4294967295|O>>>23),O=D+(b^w&(L^b))+R[7]+1735328473&4294967295,D=L+(O<<14&4294967295|O>>>18),O=w+(L^b&(D^L))+R[12]+2368359562&4294967295,w=D+(O<<20&4294967295|O>>>12),O=b+(w^D^L)+R[5]+4294588738&4294967295,b=w+(O<<4&4294967295|O>>>28),O=L+(b^w^D)+R[8]+2272392833&4294967295,L=b+(O<<11&4294967295|O>>>21),O=D+(L^b^w)+R[11]+1839030562&4294967295,D=L+(O<<16&4294967295|O>>>16),O=w+(D^L^b)+R[14]+4259657740&4294967295,w=D+(O<<23&4294967295|O>>>9),O=b+(w^D^L)+R[1]+2763975236&4294967295,b=w+(O<<4&4294967295|O>>>28),O=L+(b^w^D)+R[4]+1272893353&4294967295,L=b+(O<<11&4294967295|O>>>21),O=D+(L^b^w)+R[7]+4139469664&4294967295,D=L+(O<<16&4294967295|O>>>16),O=w+(D^L^b)+R[10]+3200236656&4294967295,w=D+(O<<23&4294967295|O>>>9),O=b+(w^D^L)+R[13]+681279174&4294967295,b=w+(O<<4&4294967295|O>>>28),O=L+(b^w^D)+R[0]+3936430074&4294967295,L=b+(O<<11&4294967295|O>>>21),O=D+(L^b^w)+R[3]+3572445317&4294967295,D=L+(O<<16&4294967295|O>>>16),O=w+(D^L^b)+R[6]+76029189&4294967295,w=D+(O<<23&4294967295|O>>>9),O=b+(w^D^L)+R[9]+3654602809&4294967295,b=w+(O<<4&4294967295|O>>>28),O=L+(b^w^D)+R[12]+3873151461&4294967295,L=b+(O<<11&4294967295|O>>>21),O=D+(L^b^w)+R[15]+530742520&4294967295,D=L+(O<<16&4294967295|O>>>16),O=w+(D^L^b)+R[2]+3299628645&4294967295,w=D+(O<<23&4294967295|O>>>9),O=b+(D^(w|~L))+R[0]+4096336452&4294967295,b=w+(O<<6&4294967295|O>>>26),O=L+(w^(b|~D))+R[7]+1126891415&4294967295,L=b+(O<<10&4294967295|O>>>22),O=D+(b^(L|~w))+R[14]+2878612391&4294967295,D=L+(O<<15&4294967295|O>>>17),O=w+(L^(D|~b))+R[5]+4237533241&4294967295,w=D+(O<<21&4294967295|O>>>11),O=b+(D^(w|~L))+R[12]+1700485571&4294967295,b=w+(O<<6&4294967295|O>>>26),O=L+(w^(b|~D))+R[3]+2399980690&4294967295,L=b+(O<<10&4294967295|O>>>22),O=D+(b^(L|~w))+R[10]+4293915773&4294967295,D=L+(O<<15&4294967295|O>>>17),O=w+(L^(D|~b))+R[1]+2240044497&4294967295,w=D+(O<<21&4294967295|O>>>11),O=b+(D^(w|~L))+R[8]+1873313359&4294967295,b=w+(O<<6&4294967295|O>>>26),O=L+(w^(b|~D))+R[15]+4264355552&4294967295,L=b+(O<<10&4294967295|O>>>22),O=D+(b^(L|~w))+R[6]+2734768916&4294967295,D=L+(O<<15&4294967295|O>>>17),O=w+(L^(D|~b))+R[13]+1309151649&4294967295,w=D+(O<<21&4294967295|O>>>11),O=b+(D^(w|~L))+R[4]+4149444226&4294967295,b=w+(O<<6&4294967295|O>>>26),O=L+(w^(b|~D))+R[11]+3174756917&4294967295,L=b+(O<<10&4294967295|O>>>22),O=D+(b^(L|~w))+R[2]+718787259&4294967295,D=L+(O<<15&4294967295|O>>>17),O=w+(L^(D|~b))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+b&4294967295,P.g[1]=P.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+L&4294967295}i.prototype.u=function(P,b){b===void 0&&(b=P.length);for(var w=b-this.blockSize,R=this.B,D=this.h,L=0;L<b;){if(D==0)for(;L<=w;)a(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<b;)if(R[D++]=P.charCodeAt(L++),D==this.blockSize){a(this,R),D=0;break}}else for(;L<b;)if(R[D++]=P[L++],D==this.blockSize){a(this,R),D=0;break}}this.h=D,this.o+=b},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var b=1;b<P.length-8;++b)P[b]=0;var w=8*this.o;for(b=P.length-8;b<P.length;++b)P[b]=w&255,w/=256;for(this.u(P),P=Array(16),b=w=0;4>b;++b)for(var R=0;32>R;R+=8)P[w++]=this.g[b]>>>R&255;return P};function o(P,b){var w=h;return Object.prototype.hasOwnProperty.call(w,P)?w[P]:w[P]=b(P)}function u(P,b){this.h=b;for(var w=[],R=!0,D=P.length-1;0<=D;D--){var L=P[D]|0;R&&L==b||(w[D]=L,R=!1)}this.g=w}var h={};function p(P){return-128<=P&&128>P?o(P,function(b){return new u([b|0],0>b?-1:0)}):new u([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return k(m(-P));for(var b=[],w=1,R=0;P>=w;R++)b[R]=P/w|0,w*=4294967296;return new u(b,0)}function g(P,b){if(P.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(P.charAt(0)=="-")return k(g(P.substring(1),b));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=m(Math.pow(b,8)),R=v,D=0;D<P.length;D+=8){var L=Math.min(8,P.length-D),O=parseInt(P.substring(D,D+L),b);8>L?(L=m(Math.pow(b,L)),R=R.j(L).add(m(O))):(R=R.j(w),R=R.add(m(O)))}return R}var v=p(0),S=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(U(this))return-k(this).m();for(var P=0,b=1,w=0;w<this.g.length;w++){var R=this.i(w);P+=(0<=R?R:4294967296+R)*b,b*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(U(this))return"-"+k(this).toString(P);for(var b=m(Math.pow(P,6)),w=this,R="";;){var D=ie(w,b).g;w=H(w,D.j(b));var L=((0<w.g.length?w.g[0]:w.h)>>>0).toString(P);if(w=D,x(w))return L+R;for(;6>L.length;)L="0"+L;R=L+R}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var b=0;b<P.g.length;b++)if(P.g[b]!=0)return!1;return!0}function U(P){return P.h==-1}n.l=function(P){return P=H(this,P),U(P)?-1:x(P)?0:1};function k(P){for(var b=P.g.length,w=[],R=0;R<b;R++)w[R]=~P.g[R];return new u(w,~P.h).add(S)}n.abs=function(){return U(this)?k(this):this},n.add=function(P){for(var b=Math.max(this.g.length,P.g.length),w=[],R=0,D=0;D<=b;D++){var L=R+(this.i(D)&65535)+(P.i(D)&65535),O=(L>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);R=O>>>16,L&=65535,O&=65535,w[D]=O<<16|L}return new u(w,w[w.length-1]&-2147483648?-1:0)};function H(P,b){return P.add(k(b))}n.j=function(P){if(x(this)||x(P))return v;if(U(this))return U(P)?k(this).j(k(P)):k(k(this).j(P));if(U(P))return k(this.j(k(P)));if(0>this.l(I)&&0>P.l(I))return m(this.m()*P.m());for(var b=this.g.length+P.g.length,w=[],R=0;R<2*b;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<P.g.length;D++){var L=this.i(R)>>>16,O=this.i(R)&65535,Ve=P.i(D)>>>16,nt=P.i(D)&65535;w[2*R+2*D]+=O*nt,Y(w,2*R+2*D),w[2*R+2*D+1]+=L*nt,Y(w,2*R+2*D+1),w[2*R+2*D+1]+=O*Ve,Y(w,2*R+2*D+1),w[2*R+2*D+2]+=L*Ve,Y(w,2*R+2*D+2)}for(R=0;R<b;R++)w[R]=w[2*R+1]<<16|w[2*R];for(R=b;R<2*b;R++)w[R]=0;return new u(w,0)};function Y(P,b){for(;(P[b]&65535)!=P[b];)P[b+1]+=P[b]>>>16,P[b]&=65535,b++}function F(P,b){this.g=P,this.h=b}function ie(P,b){if(x(b))throw Error("division by zero");if(x(P))return new F(v,v);if(U(P))return b=ie(k(P),b),new F(k(b.g),k(b.h));if(U(b))return b=ie(P,k(b)),new F(k(b.g),b.h);if(30<P.g.length){if(U(P)||U(b))throw Error("slowDivide_ only works with positive integers.");for(var w=S,R=b;0>=R.l(P);)w=re(w),R=re(R);var D=ae(w,1),L=ae(R,1);for(R=ae(R,2),w=ae(w,2);!x(R);){var O=L.add(R);0>=O.l(P)&&(D=D.add(w),L=O),R=ae(R,1),w=ae(w,1)}return b=H(P,D.j(b)),new F(D,b)}for(D=v;0<=P.l(b);){for(w=Math.max(1,Math.floor(P.m()/b.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),L=m(w),O=L.j(b);U(O)||0<O.l(P);)w-=R,L=m(w),O=L.j(b);x(L)&&(L=S),D=D.add(L),P=H(P,O)}return new F(D,P)}n.A=function(P){return ie(this,P).h},n.and=function(P){for(var b=Math.max(this.g.length,P.g.length),w=[],R=0;R<b;R++)w[R]=this.i(R)&P.i(R);return new u(w,this.h&P.h)},n.or=function(P){for(var b=Math.max(this.g.length,P.g.length),w=[],R=0;R<b;R++)w[R]=this.i(R)|P.i(R);return new u(w,this.h|P.h)},n.xor=function(P){for(var b=Math.max(this.g.length,P.g.length),w=[],R=0;R<b;R++)w[R]=this.i(R)^P.i(R);return new u(w,this.h^P.h)};function re(P){for(var b=P.g.length+1,w=[],R=0;R<b;R++)w[R]=P.i(R)<<1|P.i(R-1)>>>31;return new u(w,P.h)}function ae(P,b){var w=b>>5;b%=32;for(var R=P.g.length-w,D=[],L=0;L<R;L++)D[L]=0<b?P.i(L+w)>>>b|P.i(L+w+1)<<32-b:P.i(L+w);return new u(D,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,dA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=g,ua=u}).apply(typeof mw<"u"?mw:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pA,bc,mA,fd,iy,_A,gA,yA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,E){return f==Array.prototype||f==Object.prototype||(f[y]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var y=0;y<f.length;++y){var E=f[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(f,y){if(y)e:{var E=i;f=f.split(".");for(var N=0;N<f.length-1;N++){var G=f[N];if(!(G in E))break e;E=E[G]}f=f[f.length-1],N=E[f],y=y(N),y!=N&&y!=null&&e(E,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var E=0,N=!1,G={next:function(){if(!N&&E<f.length){var Q=E++;return{value:y(Q,f[Q]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(f){return f||function(){return o(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function p(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function g(f,y,E){return f.call.apply(f.bind,arguments)}function v(f,y,E){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),f.apply(y,G)}}return function(){return f.apply(y,arguments)}}function S(f,y,E){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,S.apply(null,arguments)}function I(f,y){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function x(f,y){function E(){}E.prototype=y.prototype,f.aa=y.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(N,G,Q){for(var he=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)he[Ze-2]=arguments[Ze];return y.prototype[G].apply(N,he)}}function U(f){const y=f.length;if(0<y){const E=Array(y);for(let N=0;N<y;N++)E[N]=f[N];return E}return[]}function k(f,y){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(p(N)){const G=f.length||0,Q=N.length||0;f.length=G+Q;for(let he=0;he<Q;he++)f[G+he]=N[he]}else f.push(N)}}class H{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(f){return/^[\s\xa0]*$/.test(f)}function F(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function ie(f){return ie[" "](f),f}ie[" "]=function(){};var re=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function ae(f,y,E){for(const N in f)y.call(E,f[N],N,f)}function P(f,y){for(const E in f)y.call(void 0,f[E],E,f)}function b(f){const y={};for(const E in f)y[E]=f[E];return y}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,y){let E,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(E in N)f[E]=N[E];for(let Q=0;Q<w.length;Q++)E=w[Q],Object.prototype.hasOwnProperty.call(N,E)&&(f[E]=N[E])}}function D(f){var y=1;f=f.split(":");const E=[];for(;0<y&&f.length;)E.push(f.shift()),y--;return f.length&&E.push(f.join(":")),E}function L(f){h.setTimeout(()=>{throw f},0)}function O(){var f=pe;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Ve{constructor(){this.h=this.g=null}add(y,E){const N=nt.get();N.set(y,E),this.h?this.h.next=N:this.g=N,this.h=N}}var nt=new H(()=>new le,f=>f.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,de=!1,pe=new Ve,V=()=>{const f=h.Promise.resolve(void 0);ce=()=>{f.then(W)}};var W=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(E){L(E)}var y=nt;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}de=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return f}();function ve(f,y){if(Z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(re){e:{try{ie(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else E=="mouseover"?y=f.fromElement:E=="mouseout"&&(y=f.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ee[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ve.aa.h.call(this)}}x(ve,Z);var Ee={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),me=0;function Se(f,y,E,N,G){this.listener=f,this.proxy=null,this.src=y,this.type=E,this.capture=!!N,this.ha=G,this.key=++me,this.da=this.fa=!1}function Ce(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ae(f){this.src=f,this.g={},this.h=0}Ae.prototype.add=function(f,y,E,N,G){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var he=ct(f,y,N,G);return-1<he?(y=f[he],E||(y.fa=!1)):(y=new Se(y,this.src,Q,!!N,G),y.fa=E,f.push(y)),y};function Xe(f,y){var E=y.type;if(E in f.g){var N=f.g[E],G=Array.prototype.indexOf.call(N,y,void 0),Q;(Q=0<=G)&&Array.prototype.splice.call(N,G,1),Q&&(Ce(y),f.g[E].length==0&&(delete f.g[E],f.h--))}}function ct(f,y,E,N){for(var G=0;G<f.length;++G){var Q=f[G];if(!Q.da&&Q.listener==y&&Q.capture==!!E&&Q.ha==N)return G}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),Be={};function Oe(f,y,E,N,G){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)Oe(f,y[Q],E,N,G);return null}return E=Pn(E),f&&f[it]?f.K(y,E,m(N)?!!N.capture:!1,G):kt(f,y,E,!1,N,G)}function kt(f,y,E,N,G,Q){if(!y)throw Error("Invalid event type");var he=m(G)?!!G.capture:!!G,Ze=Di(f);if(Ze||(f[rt]=Ze=new Ae(f)),E=Ze.add(y,E,N,he,Q),E.proxy)return E;if(N=qe(),E.proxy=N,N.src=f,N.listener=E,f.addEventListener)ue||(G=he),G===void 0&&(G=!1),f.addEventListener(y.toString(),N,G);else if(f.attachEvent)f.attachEvent(ii(y.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function qe(){function f(E){return y.call(f.src,f.listener,E)}const y=$n;return f}function ht(f,y,E,N,G){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)ht(f,y[Q],E,N,G);else N=m(N)?!!N.capture:!!N,E=Pn(E),f&&f[it]?(f=f.i,y=String(y).toString(),y in f.g&&(Q=f.g[y],E=ct(Q,E,N,G),-1<E&&(Ce(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete f.g[y],f.h--)))):f&&(f=Di(f))&&(y=f.g[y.toString()],f=-1,y&&(f=ct(y,E,N,G)),(E=-1<f?y[f]:null)&&vt(E))}function vt(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[it])Xe(y.i,f);else{var E=f.type,N=f.proxy;y.removeEventListener?y.removeEventListener(E,N,f.capture):y.detachEvent?y.detachEvent(ii(E),N):y.addListener&&y.removeListener&&y.removeListener(N),(E=Di(y))?(Xe(E,f),E.h==0&&(E.src=null,y[rt]=null)):Ce(f)}}}function ii(f){return f in Be?Be[f]:Be[f]="on"+f}function $n(f,y){if(f.da)f=!0;else{y=new ve(y,this);var E=f.listener,N=f.ha||f.src;f.fa&&vt(f),f=E.call(N,y)}return f}function Di(f){return f=f[rt],f instanceof Ae?f:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(f){return typeof f=="function"?f:(f[ft]||(f[ft]=function(y){return f.handleEvent(y)}),f[ft])}function je(){oe.call(this),this.i=new Ae(this),this.M=this,this.F=null}x(je,oe),je.prototype[it]=!0,je.prototype.removeEventListener=function(f,y,E,N){ht(this,f,y,E,N)};function st(f,y){var E,N=f.F;if(N)for(E=[];N;N=N.F)E.push(N);if(f=f.M,N=y.type||y,typeof y=="string")y=new Z(y,f);else if(y instanceof Z)y.target=y.target||f;else{var G=y;y=new Z(N,f),R(y,G)}if(G=!0,E)for(var Q=E.length-1;0<=Q;Q--){var he=y.g=E[Q];G=Xt(he,N,!0,y)&&G}if(he=y.g=f,G=Xt(he,N,!0,y)&&G,G=Xt(he,N,!1,y)&&G,E)for(Q=0;Q<E.length;Q++)he=y.g=E[Q],G=Xt(he,N,!1,y)&&G}je.prototype.N=function(){if(je.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var E=f.g[y],N=0;N<E.length;N++)Ce(E[N]);delete f.g[y],f.h--}}this.F=null},je.prototype.K=function(f,y,E,N){return this.i.add(String(f),y,!1,E,N)},je.prototype.L=function(f,y,E,N){return this.i.add(String(f),y,!0,E,N)};function Xt(f,y,E,N){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,Q=0;Q<y.length;++Q){var he=y[Q];if(he&&!he.da&&he.capture==E){var Ze=he.listener,en=he.ha||he.src;he.fa&&Xe(f.i,he),G=Ze.call(en,N)!==!1&&G}}return G&&!N.defaultPrevented}function ys(f,y,E){if(typeof f=="function")E&&(f=S(f,E));else if(f&&typeof f.handleEvent=="function")f=S(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function vs(f){f.g=ys(()=>{f.g=null,f.i&&(f.i=!1,vs(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class Zi extends oe{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:vs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function un(f){oe.call(this),this.h=f,this.g={}}x(un,oe);var Kn=[];function Zt(f){ae(f.g,function(y,E){this.g.hasOwnProperty(E)&&vt(y)},f),f.g={}}un.prototype.N=function(){un.aa.N.call(this),Zt(this)},un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uu=h.JSON.stringify,Ji=h.JSON.parse,Ln=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function cu(){}cu.prototype.h=null;function xh(f){return f.h||(f.h=f.i())}function Oh(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Es(){Z.call(this,"d")}x(Es,Z);function ki(){Z.call(this,"c")}x(ki,Z);var di={},Ts=null;function ko(){return Ts=Ts||new je}di.La="serverreachability";function hu(f){Z.call(this,di.La,f)}x(hu,Z);function ws(f){const y=ko();st(y,new hu(y))}di.STAT_EVENT="statevent";function Mo(f,y){Z.call(this,di.STAT_EVENT,f),this.stat=y}x(Mo,Z);function zt(f){const y=ko();st(y,new Mo(y,f))}di.Ma="timingevent";function Dh(f,y){Z.call(this,di.Ma,f),this.size=y}x(Dh,Z);function Ss(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function kh(f,y,E,N,G,Q){f.info(function(){if(f.g)if(Q)for(var he="",Ze=Q.split("&"),en=0;en<Ze.length;en++){var Je=Ze[en].split("=");if(1<Je.length){var fn=Je[0];Je=Je[1];var tn=fn.split("_");he=2<=tn.length&&tn[1]=="type"?he+(fn+"="+Je+"&"):he+(fn+"=redacted&")}}else he=null;else he=Q;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+y+`
`+E+`
`+he})}function Mh(f,y,E,N,G,Q,he){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+y+`
`+E+`
`+Q+" "+he})}function As(f,y,E,N){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+cn(f,E)+(N?" "+N:"")})}function tr(f,y){f.info(function(){return"TIMEOUT: "+y})}bs.prototype.info=function(){};function cn(f,y){if(!f.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var N=E[f];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var Q=G[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var he=1;he<G.length;he++)G[he]=""}}}}return uu(E)}catch{return y}}var Jt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ka;function Po(){}x(Po,cu),Po.prototype.g=function(){return new XMLHttpRequest},Po.prototype.i=function(){return{}},ka=new Po;function nr(f,y,E,N){this.j=f,this.i=y,this.l=E,this.R=N||1,this.U=new un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fu}function fu(){this.i=null,this.g="",this.h=!1}var Cs={},Ma={};function Mi(f,y,E){f.L=1,f.v=Va(Mt(y)),f.m=E,f.P=!0,Ir(f,null)}function Ir(f,y){f.F=Date.now(),It(f),f.A=Mt(f.v);var E=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Or(E.i,"t",N),f.C=0,E=f.j.J,f.h=new fu,f.g=Qh(f.j,E?y:null,!f.m),0<f.O&&(f.M=new Zi(S(f.Y,f,f.g),f.O)),y=f.U,E=f.g,N=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(Kn[0]=G.toString()),G=Kn);for(var Q=0;Q<G.length;Q++){var he=Oe(E,G[Q],N||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=f.H?b(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),ws(),kh(f.i,f.u,f.A,f.l,f.R,f.m)}nr.prototype.ca=function(f){f=f.target;const y=this.M;y&&yi(f)==3?y.j():this.Y(f)},nr.prototype.Y=function(f){try{if(f==this.g)e:{const tn=yi(this.g);var y=this.g.Ba();const Pr=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||zh(this.g)))){this.J||tn!=4||y==7||(y==8||0>=Pr?ws(3):ws(2)),Lo(this);var E=this.g.Z();this.X=E;t:if(Rs(this)){var N=zh(this.g);f="";var G=N.length,Q=yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),ri(this);var he="";break t}this.h.i=new h.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,f+=this.h.i.decode(N[y],{stream:!(Q&&y==G-1)});N.length=0,this.h.g+=f,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=E==200,Mh(this.i,this.u,this.A,this.l,this.R,tn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,en=this.g;if((Ze=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ze)){var Je=Ze;break t}}Je=null}if(E=Je)As(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,si(this,E);else{this.o=!1,this.s=3,zt(12),Qn(this),ri(this);break e}}if(this.P){E=!0;let Tn;for(;!this.J&&this.C<he.length;)if(Tn=Is(this,he),Tn==Ma){tn==4&&(this.s=4,zt(14),E=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==Cs){this.s=4,zt(15),As(this.i,this.l,he,"[Invalid Chunk]"),E=!1;break}else As(this.i,this.l,Tn,null),si(this,Tn);if(Rs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||he.length!=0||this.h.h||(this.s=1,zt(16),E=!1),this.o=this.o&&E,!E)As(this.i,this.l,he,"[Invalid Chunked Response]"),Qn(this),ri(this);else if(0<he.length&&!this.W){this.W=!0;var fn=this.j;fn.g==this&&fn.ba&&!fn.M&&(fn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Ha(fn),fn.M=!0,zt(11))}}else As(this.i,this.l,he,null),si(this,he);tn==4&&Qn(this),this.o&&!this.J&&(tn==4?Gh(this.j,this):(this.o=!1,It(this)))}else um(this.g),E==400&&0<he.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),Qn(this),ri(this)}}}catch{}finally{}};function Rs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Is(f,y){var E=f.C,N=y.indexOf(`
`,E);return N==-1?Ma:(E=Number(y.substring(E,N)),isNaN(E)?Cs:(N+=1,N+E>y.length?Ma:(y=y.slice(N,N+E),f.C=N+E,y)))}nr.prototype.cancel=function(){this.J=!0,Qn(this)};function It(f){f.S=Date.now()+f.I,du(f,f.I)}function du(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ss(S(f.ba,f),y)}function Lo(f){f.B&&(h.clearTimeout(f.B),f.B=null)}nr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(tr(this.i,this.A),this.L!=2&&(ws(),zt(17)),Qn(this),this.s=2,ri(this)):du(this,this.S-f)};function ri(f){f.j.G==0||f.J||Gh(f.j,f)}function Qn(f){Lo(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Zt(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function si(f,y){try{var E=f.j;if(E.G!=0&&(E.g==f||Ns(E.h,f))){if(!f.K&&Ns(E.h,f)&&E.G==3){try{var N=E.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)$o(E),Ho(E);else break e;bu(E),zt(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ss(S(E.Za,E),6e3));if(1>=Ph(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Mr(E,11)}else if((f.K||E.g==f)&&$o(E),!Y(y))for(G=E.Da.g.parse(y),y=0;y<G.length;y++){let Je=G[y];if(E.T=Je[0],Je=Je[1],E.G==2)if(Je[0]=="c"){E.K=Je[1],E.ia=Je[2];const fn=Je[3];fn!=null&&(E.la=fn,E.j.info("VER="+E.la));const tn=Je[4];tn!=null&&(E.Aa=tn,E.j.info("SVER="+E.Aa));const Pr=Je[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(N=1.5*Pr,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const Tn=f.g;if(Tn){const ur=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ur){var Q=N.h;Q.g||ur.indexOf("spdy")==-1&&ur.indexOf("quic")==-1&&ur.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(xs(Q,Q.h),Q.h=null))}if(N.D){const Cu=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cu&&(N.ya=Cu,at(N.I,N.D,Cu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var he=f;if(N.qa=Kh(N,N.J?N.ia:null,N.W),he.K){pi(N.h,he);var Ze=he,en=N.L;en&&(Ze.I=en),Ze.B&&(Lo(Ze),It(Ze)),N.g=he}else qh(N);0<E.i.length&&Go(E)}else Je[0]!="stop"&&Je[0]!="close"||Mr(E,7);else E.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Mr(E,7):wu(E):Je[0]!="noop"&&E.l&&E.l.ta(Je),E.v=0)}}ws(4)}catch{}}var rm=class{constructor(f,y){this.g=f,this.map=y}};function pu(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mu(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ph(f){return f.h?1:f.g?f.g.size:0}function Ns(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function xs(f,y){f.g?f.g.add(y):f.h=y}function pi(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}pu.prototype.cancel=function(){if(this.i=Vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Vn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const E of f.g.values())y=y.concat(E.D);return y}return U(f.i)}function Lh(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(p(f)){for(var y=[],E=f.length,N=0;N<E;N++)y.push(f[N]);return y}y=[],E=0;for(N in f)y[E++]=f[N];return y}function sm(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(p(f)||typeof f=="string"){var y=[];f=f.length;for(var E=0;E<f;E++)y.push(E);return y}y=[],E=0;for(const N in f)y[E++]=N;return y}}}function Pa(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(p(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var E=sm(f),N=Lh(f),G=N.length,Q=0;Q<G;Q++)y.call(void 0,N[Q],E&&E[Q],f)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(f,y){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var N=f[E].indexOf("="),G=null;if(0<=N){var Q=f[E].substring(0,N);G=f[E].substring(N+1)}else Q=f[E];y(Q,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Nr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Nr){this.h=f.h,Os(this,f.j),this.o=f.o,this.g=f.g,La(this,f.s),this.l=f.l;var y=f.i,E=new ir;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Uo(this,E),this.m=f.m}else f&&(y=String(f).match(_u))?(this.h=!1,Os(this,y[1]||"",!0),this.o=Ds(y[2]||""),this.g=Ds(y[3]||"",!0),La(this,y[4]),this.l=Ds(y[5]||"",!0),Uo(this,y[6]||"",!0),this.m=Ds(y[7]||"")):(this.h=!1,this.i=new ir(null,this.h))}Nr.prototype.toString=function(){var f=[],y=this.j;y&&f.push(mi(y,gu,!0),":");var E=this.g;return(E||y=="file")&&(f.push("//"),(y=this.o)&&f.push(mi(y,gu,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(mi(E,E.charAt(0)=="/"?yu:Vh,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",mi(E,lm)),f.join("")};function Mt(f){return new Nr(f)}function Os(f,y,E){f.j=E?Ds(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function La(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Uo(f,y,E){y instanceof ir?(f.i=y,vu(f.i,f.h)):(E||(y=mi(y,om)),f.i=new ir(y,f.h))}function at(f,y,E){f.i.set(y,E)}function Va(f){return at(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ds(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function mi(f,y,E){return typeof f=="string"?(f=encodeURI(f).replace(y,am),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function am(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var gu=/[#\/\?@]/g,Vh=/[#\?:]/g,yu=/[#\?]/g,om=/[#\?@]/g,lm=/#/g;function ir(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function _i(f){f.g||(f.g=new Map,f.h=0,f.i&&Vo(f.i,function(y,E){f.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=ir.prototype,n.add=function(f,y){_i(this),this.i=null,f=Dr(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(y),this.h+=1,this};function jo(f,y){_i(f),y=Dr(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function xr(f,y){return _i(f),y=Dr(f,y),f.g.has(y)}n.forEach=function(f,y){_i(this),this.g.forEach(function(E,N){E.forEach(function(G){f.call(y,G,N,this)},this)},this)},n.na=function(){_i(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let N=0;N<y.length;N++){const G=f[N];for(let Q=0;Q<G.length;Q++)E.push(y[N])}return E},n.V=function(f){_i(this);let y=[];if(typeof f=="string")xr(this,f)&&(y=y.concat(this.g.get(Dr(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)y=y.concat(f[E])}return y},n.set=function(f,y){return _i(this),this.i=null,f=Dr(this,f),xr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function Or(f,y,E){jo(f,y),0<E.length&&(f.i=null,f.g.set(Dr(f,y),U(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var N=y[E];const Q=encodeURIComponent(String(N)),he=this.V(N);for(N=0;N<he.length;N++){var G=Q;he[N]!==""&&(G+="="+encodeURIComponent(String(he[N]))),f.push(G)}}return this.i=f.join("&")};function Dr(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function vu(f,y){y&&!f.j&&(_i(f),f.i=null,f.g.forEach(function(E,N){var G=N.toLowerCase();N!=G&&(jo(this,N),Or(this,G,E))},f)),f.j=y}function Uh(f,y){const E=new bs;if(h.Image){const N=new Image;N.onload=I(gi,E,"TestLoadImage: loaded",!0,y,N),N.onerror=I(gi,E,"TestLoadImage: error",!1,y,N),N.onabort=I(gi,E,"TestLoadImage: abort",!1,y,N),N.ontimeout=I(gi,E,"TestLoadImage: timeout",!1,y,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else y(!1)}function Ua(f,y){const E=new bs,N=new AbortController,G=setTimeout(()=>{N.abort(),gi(E,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:N.signal}).then(Q=>{clearTimeout(G),Q.ok?gi(E,"TestPingServer: ok",!0,y):gi(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),gi(E,"TestPingServer: error",!1,y)})}function gi(f,y,E,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(E)}catch{}}function ja(){this.g=new Ln}function rr(f,y,E){const N=E||"";try{Pa(f,function(G,Q){let he=G;m(G)&&(he=uu(G)),y.push(N+Q+"="+encodeURIComponent(he))})}catch(G){throw y.push(N+"type="+encodeURIComponent("_badmap")),G}}function ks(f){this.l=f.Ub||null,this.j=f.eb||!1}x(ks,cu),ks.prototype.g=function(){return new kr(this.l,this.j)},ks.prototype.i=function(f){return function(){return f}}({});function kr(f,y){je.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(kr,je),n=kr.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,ar(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?sr(this):ar(this),this.readyState==3&&Eu(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,sr(this))},n.Qa=function(f){this.g&&(this.response=f,sr(this))},n.ga=function(){this.g&&sr(this)};function sr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ar(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=y.next();return f.join(`\r
`)};function ar(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Tu(f){let y="";return ae(f,function(E,N){y+=N,y+=":",y+=E,y+=`\r
`}),y}function hn(f,y,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=Tu(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):at(f,y,E))}function dt(f){je.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(dt,je);var zo=/^https?$/i,za=["POST","PUT"];n=dt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ka.g(),this.v=this.o?xh(this.o):xh(ka),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Q){jh(this,Q);return}if(f=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)E.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())E.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(za,y,void 0))||N||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of E)this.g.setRequestHeader(Q,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fa(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){jh(this,Q)}};function jh(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Fo(f),or(f)}function Fo(f){f.A||(f.A=!0,st(f,"complete"),st(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,st(this,"complete"),st(this,"abort"),or(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Bo(this):this.bb())},n.bb=function(){Bo(this)};function Bo(f){if(f.h&&typeof u<"u"&&(!f.v[1]||yi(f)!=4||f.Z()!=2)){if(f.u&&yi(f)==4)ys(f.Ea,0,f);else if(st(f,"readystatechange"),yi(f)==4){f.h=!1;try{const he=f.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var N;if(N=he===0){var G=String(f.D).match(_u)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),N=!zo.test(G?G.toLowerCase():"")}E=N}if(E)st(f,"complete"),st(f,"success");else{f.m=6;try{var Q=2<yi(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",Fo(f)}}finally{or(f)}}}}function or(f,y){if(f.g){Fa(f);const E=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||st(f,"ready");try{E.onreadystatechange=N}catch{}}}function Fa(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function yi(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<yi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Ji(y)}};function zh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function um(f){const y={};f=(f.g&&2<=yi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(Y(f[N]))continue;var E=D(f[N]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=y[G]||[];y[G]=Q,Q.push(E)}P(y,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(f,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||y}function qo(f){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,f),this.cb=Ba("retryDelaySeedMs",1e4,f),this.Wa=Ba("forwardChannelMaxRetries",2,f),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new pu(f&&f.concurrentRequestLimit),this.Da=new ja,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qo.prototype,n.la=8,n.G=1,n.connect=function(f,y,E,N){zt(0),this.W=f,this.H=y||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=Kh(this,null,this.W),Go(this)};function wu(f){if(Fh(f),f.G==3){var y=f.U++,E=Mt(f.I);if(at(E,"SID",f.K),at(E,"RID",y),at(E,"TYPE","terminate"),qa(f,E),y=new nr(f,f.j,y),y.L=2,y.v=Va(Mt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.v,E=!0),E||(y.g=Qh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),It(y)}$h(f)}function Ho(f){f.g&&(Ha(f),f.g.cancel(),f.g=null)}function Fh(f){Ho(f),f.u&&(h.clearTimeout(f.u),f.u=null),$o(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Go(f){if(!mu(f.h)&&!f.s){f.s=!0;var y=f.Ga;ce||V(),de||(ce(),de=!0),pe.add(y,f),f.B=0}}function cm(f,y){return Ph(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ss(S(f.Ga,f,y),Au(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new nr(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=b(Q),R(Q,this.S)):Q=this.S),this.m!==null||this.O||(G.H=Q,Q=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Bh(this,G,y),E=Mt(this.I),at(E,"RID",f),at(E,"CVER",22),this.D&&at(E,"X-HTTP-Session-Id",this.D),qa(this,E),Q&&(this.O?y="headers="+encodeURIComponent(String(Tu(Q)))+"&"+y:this.m&&hn(E,this.m,Q)),xs(this.h,G),this.Ua&&at(E,"TYPE","init"),this.P?(at(E,"$req",y),at(E,"SID","null"),G.T=!0,Mi(G,E,null)):Mi(G,E,y),this.G=2}}else this.G==3&&(f?Su(this,f):this.i.length==0||mu(this.h)||Su(this))};function Su(f,y){var E;y?E=y.l:E=f.U++;const N=Mt(f.I);at(N,"SID",f.K),at(N,"RID",E),at(N,"AID",f.T),qa(f,N),f.m&&f.o&&hn(N,f.m,f.o),E=new nr(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),y&&(f.i=y.D.concat(f.i)),y=Bh(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),xs(f.h,E),Mi(E,N,y)}function qa(f,y){f.H&&ae(f.H,function(E,N){at(y,N,E)}),f.l&&Pa({},function(E,N){at(y,N,E)})}function Bh(f,y,E){E=Math.min(f.i.length,E);var N=f.l?S(f.l.Na,f.l,f):null;e:{var G=f.i;let Q=-1;for(;;){const he=["count="+E];Q==-1?0<E?(Q=G[0].g,he.push("ofs="+Q)):Q=0:he.push("ofs="+Q);let Ze=!0;for(let en=0;en<E;en++){let Je=G[en].g;const fn=G[en].map;if(Je-=Q,0>Je)Q=Math.max(0,G[en].g-100),Ze=!1;else try{rr(fn,he,"req"+Je+"_")}catch{N&&N(fn)}}if(Ze){N=he.join("&");break e}}}return f=f.i.splice(0,E),y.D=f,N}function qh(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;ce||V(),de||(ce(),de=!0),pe.add(y,f),f.v=0}}function bu(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ss(S(f.Fa,f),Au(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Hh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ss(S(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Ho(this),Hh(this))};function Ha(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Hh(f){f.g=new nr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=Mt(f.qa);at(y,"RID","rpc"),at(y,"SID",f.K),at(y,"AID",f.T),at(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&at(y,"TO",f.ja),at(y,"TYPE","xmlhttp"),qa(f,y),f.m&&f.o&&hn(y,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Va(Mt(y)),E.m=null,E.P=!0,Ir(E,f)}n.Za=function(){this.C!=null&&(this.C=null,Ho(this),bu(this),zt(19))};function $o(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Gh(f,y){var E=null;if(f.g==y){$o(f),Ha(f),f.g=null;var N=2}else if(Ns(f.h,y))E=y.D,pi(f.h,y),N=1;else return;if(f.G!=0){if(y.o)if(N==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var G=f.B;N=ko(),st(N,new Dh(N,E)),Go(f)}else qh(f);else if(G=y.s,G==3||G==0&&0<y.X||!(N==1&&cm(f,y)||N==2&&bu(f)))switch(E&&0<E.length&&(y=f.h,y.i=y.i.concat(E)),G){case 1:Mr(f,5);break;case 4:Mr(f,10);break;case 3:Mr(f,6);break;default:Mr(f,2)}}}function Au(f,y){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*y}function Mr(f,y){if(f.j.info("Error code "+y),y==2){var E=S(f.fb,f),N=f.Xa;const G=!N;N=new Nr(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Os(N,"https"),Va(N),G?Uh(N.toString(),E):Ua(N.toString(),E)}else zt(2);f.G=0,f.l&&f.l.sa(y),$h(f),Fh(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function $h(f){if(f.G=0,f.ka=[],f.l){const y=Vn(f.h);(y.length!=0||f.i.length!=0)&&(k(f.ka,y),k(f.ka,f.i),f.h.i.length=0,U(f.i),f.i.length=0),f.l.ra()}}function Kh(f,y,E){var N=E instanceof Nr?Mt(E):new Nr(E);if(N.g!="")y&&(N.g=y+"."+N.g),La(N,N.s);else{var G=h.location;N=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var Q=new Nr(null);N&&Os(Q,N),y&&(Q.g=y),G&&La(Q,G),E&&(Q.l=E),N=Q}return E=f.D,y=f.ya,E&&y&&at(N,E,y),at(N,"VER",f.la),qa(f,N),N}function Qh(f,y,E){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new dt(new ks({eb:E})):new dt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wh(){}n=Wh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ko(){}Ko.prototype.g=function(f,y){return new Un(f,y)};function Un(f,y){je.call(this),this.g=new qo(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!Y(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new lr(this)}x(Un,je),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){wu(this.g)},Un.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=uu(f),f=E);y.i.push(new rm(y.Ya++,f)),y.G==3&&Go(y)},Un.prototype.N=function(){this.g.l=null,delete this.j,wu(this.g),delete this.g,Un.aa.N.call(this)};function Yh(f){Es.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const E in y){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}x(Yh,Es);function Xh(){ki.call(this),this.status=1}x(Xh,ki);function lr(f){this.g=f}x(lr,Wh),lr.prototype.ua=function(){st(this.g,"a")},lr.prototype.ta=function(f){st(this.g,new Yh(f))},lr.prototype.sa=function(f){st(this.g,new Xh)},lr.prototype.ra=function(){st(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,yA=function(){return new Ko},gA=function(){return ko()},_A=di,iy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jt.NO_ERROR=0,Jt.TIMEOUT=8,Jt.HTTP_ERROR=6,fd=Jt,Rr.COMPLETE="complete",mA=Rr,Oh.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",je.prototype.listen=je.prototype.K,bc=Oh,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,pA=dt}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});const _w="@firebase/firestore",gw="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new Ip("@firebase/firestore");function bl(){return yo.logLevel}function _e(n,...e){if(yo.logLevel<=Ge.DEBUG){const t=e.map(Jy);yo.debug(`Firestore (${eu}): ${n}`,...t)}}function fs(n,...e){if(yo.logLevel<=Ge.ERROR){const t=e.map(Jy);yo.error(`Firestore (${eu}): ${n}`,...t)}}function jl(n,...e){if(yo.logLevel<=Ge.WARN){const t=e.map(Jy);yo.warn(`Firestore (${eu}): ${n}`,...t)}}function Jy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n="Unexpected state"){const e=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: `+n;throw fs(e),new Error(e)}function pt(n,e){n||xe()}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(On.UNAUTHENTICATED))}shutdown(){}}class v4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class E4{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let o=new as;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new as,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const p=o;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},h=p=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new as)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string"),new vA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new On(e)}}class T4{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=On.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class w4{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new T4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S4{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Zn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0);const i=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const a=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?a(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new yw(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt(typeof t.token=="string"),this.R=t.token,new yw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=b4(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<t&&(i+=e.charAt(a[o]%62))}return i}}function Ye(n,e){return n<e?-1:n>e?1:0}function zl(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=-62135596800,Ew=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ew);return new Wt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vw)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ew}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-vw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Wt(0,0))}static max(){return new De(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="__name__";class mr{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(),i===void 0?i=e.length-t:i>e.length-t&&xe(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const o=mr.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=mr.isNumericId(e),a=mr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?mr.extractNumericId(e).compare(mr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ua.fromString(e.substring(4,e.length-2))}}class Ct extends mr{construct(e,t,i){return new Ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Ct(t)}static emptyPath(){return new Ct([])}}const A4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends mr{construct(e,t,i){return new Cn(e,t,i)}static isValidIdentifier(e){return A4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tw}static keyField(){return new Cn([Tw])}static fromServerFormat(e){const t=[];let i="",a=0;const o=()=>{if(i.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ge(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(o(),a++)}if(o(),u)throw new ge(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(t)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Ct.fromString(e))}static fromName(e){return new be(Ct.fromString(e).popFirst(5))}static empty(){return new be(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function C4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=De.fromTimestamp(i===1e9?new Wt(t+1,0):new Wt(t,i));return new ya(a,be.empty(),e)}function R4(n){return new ya(n.readTime,n.key,Gc)}class ya{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ya(De.min(),be.empty(),Gc)}static max(){return new ya(De.max(),be.empty(),Gc)}}function I4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==N4)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,i)=>{t(e)})}static reject(e){return new ne((t,i)=>{i(e)})}static waitFor(e){return new ne((t,i)=>{let a=0,o=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++o,u&&o===a&&t()},p=>i(p))}),u=!0,o===a&&t()})}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next(a=>a?ne.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,o)=>{i.push(t.call(this,a,o))}),this.waitFor(i)}static mapArray(e,t){return new ne((i,a)=>{const o=e.length,u=new Array(o);let h=0;for(let p=0;p<o;p++){const m=p;t(e[m]).next(g=>{u[m]=g,++h,h===o&&i(u)},g=>a(g))}})}static doWhile(e,t){return new ne((i,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):i()};o()})}}function O4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=-1;function Op(n){return n==null}function Ud(n){return n===0&&1/n==-1/0}function D4(n){return typeof n=="number"&&Number.isInteger(n)&&!Ud(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="";function k4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ww(e)),e=M4(n.get(t),e);return ww(e)}function M4(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case TA:t+="";break;default:t+=o}}return t}function ww(n){return n+TA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yt=class ry{constructor(e,t){this.comparator=e,this.root=t||ca.EMPTY}insert(e,t){return new ry(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ca.BLACK,null,null))}remove(e){return new ry(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ca.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jf(this.root,e,this.comparator,!0)}},Jf=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ca=class Jr{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??Jr.RED,this.left=a??Jr.EMPTY,this.right=o??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,o){return new Jr(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Jr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}};ca.EMPTY=null,ca.RED=!0,ca.BLACK=!1;ca.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,t,i,a,o){return this}insert(e,t,i){return new ca(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bw(this.data.getIterator())}getIteratorFrom(e){return new bw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class bw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new ln(Cn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SA("Invalid base64 string: "+o):o}}(e);return new Rn(t)}static fromUint8Array(e){const t=function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o}(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const P4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(n){if(pt(!!n),typeof n=="string"){let e=0;const t=P4.exec(n);if(pt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(n.seconds),nanos:qt(n.nanos)}}function qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ea(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="server_timestamp",AA="__type__",CA="__previous_value__",RA="__local_write_time__";function tv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[AA])===null||t===void 0?void 0:t.stringValue)===bA}function Dp(n){const e=n.mapValue.fields[CA];return tv(e)?Dp(e):e}function $c(n){const e=va(n.mapValue.fields[RA].timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,t,i,a,o,u,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}}const jd="(default)";class Kc{constructor(e,t){this.projectId=e,this.database=t||jd}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===jd}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__type__",V4="__max__",ed={mapValue:{}},NA="__vector__",zd="value";function Ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tv(n)?4:j4(n)?9007199254740991:U4(n)?10:11:xe()}function Tr(n,e){if(n===e)return!0;const t=Ta(n);if(t!==Ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $c(n).isEqual($c(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=va(a.timestampValue),h=va(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return Ea(a.bytesValue).isEqual(Ea(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return qt(a.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(a.geoPointValue.longitude)===qt(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return qt(a.integerValue)===qt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=qt(a.doubleValue),h=qt(o.doubleValue);return u===h?Ud(u)===Ud(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return zl(n.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(a,o){const u=a.mapValue.fields||{},h=o.mapValue.fields||{};if(Sw(u)!==Sw(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Tr(u[p],h[p])))return!1;return!0}(n,e);default:return xe()}}function Qc(n,e){return(n.values||[]).find(t=>Tr(t,e))!==void 0}function Fl(n,e){if(n===e)return 0;const t=Ta(n),i=Ta(e);if(t!==i)return Ye(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=qt(o.integerValue||o.doubleValue),p=qt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Aw(n.timestampValue,e.timestampValue);case 4:return Aw($c(n),$c(e));case 5:return Ye(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Ea(o),p=Ea(u);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),p=u.split("/");for(let m=0;m<h.length&&m<p.length;m++){const g=Ye(h[m],p[m]);if(g!==0)return g}return Ye(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Ye(qt(o.latitude),qt(u.latitude));return h!==0?h:Ye(qt(o.longitude),qt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Cw(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,p,m,g;const v=o.fields||{},S=u.fields||{},I=(h=v[zd])===null||h===void 0?void 0:h.arrayValue,x=(p=S[zd])===null||p===void 0?void 0:p.arrayValue,U=Ye(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((g=x==null?void 0:x.values)===null||g===void 0?void 0:g.length)||0);return U!==0?U:Cw(I,x)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===ed.mapValue&&u===ed.mapValue)return 0;if(o===ed.mapValue)return 1;if(u===ed.mapValue)return-1;const h=o.fields||{},p=Object.keys(h),m=u.fields||{},g=Object.keys(m);p.sort(),g.sort();for(let v=0;v<p.length&&v<g.length;++v){const S=Ye(p[v],g[v]);if(S!==0)return S;const I=Fl(h[p[v]],m[g[v]]);if(I!==0)return I}return Ye(p.length,g.length)}(n.mapValue,e.mapValue);default:throw xe()}}function Aw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=va(n),i=va(e),a=Ye(t.seconds,i.seconds);return a!==0?a:Ye(t.nanos,i.nanos)}function Cw(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const o=Fl(t[a],i[a]);if(o)return o}return Ye(t.length,i.length)}function Bl(n){return sy(n)}function sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=va(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ea(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const o of t.values||[])a?a=!1:i+=",",i+=sy(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const u of i)o?o=!1:a+=",",a+=`${u}:${sy(t.fields[u])}`;return a+"}"}(n.mapValue):xe()}function dd(n){switch(Ta(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dp(n);return e?16+dd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ea(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+dd(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ro(i.fields,(o,u)=>{a+=o.length+dd(u)}),a}(n.mapValue);default:throw xe()}}function Rw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ay(n){return!!n&&"integerValue"in n}function nv(n){return!!n&&"arrayValue"in n}function Iw(n){return!!n&&"nullValue"in n}function Nw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pd(n){return!!n&&"mapValue"in n}function U4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[IA])===null||t===void 0?void 0:t.stringValue)===NA}function Nc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ro(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Nc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function j4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.value=e}static empty(){return new Ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=Cn.emptyPath(),i={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=h.popLast()}u?i[h.lastSegment()]=Nc(u):a.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,a)}delete(e){const t=this.field(e.popLast());pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];pd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ro(t,(a,o)=>e[a]=o);for(const a of i)delete e[a]}clone(){return new Ni(Nc(this.value))}}function xA(n){const e=[];return Ro(n.fields,(t,i)=>{const a=new Cn([t]);if(pd(i)){const o=xA(i.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)}),new Bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,t,i,a,o,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Dn(e,0,De.min(),De.min(),De.min(),Ni.empty(),0)}static newFoundDocument(e,t,i,a){return new Dn(e,1,t,De.min(),i,a,0)}static newNoDocument(e,t){return new Dn(e,2,t,De.min(),De.min(),Ni.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,De.min(),De.min(),Ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.position=e,this.inclusive=t}}function xw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const o=e[a],u=n.position[a];if(o.field.isKeyField()?i=be.comparator(be.fromName(u.referenceValue),t.key):i=Fl(u,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ow(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function z4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{}class Qt extends OA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new B4(e,t,i):t==="array-contains"?new G4(e,i):t==="in"?new $4(e,i):t==="not-in"?new K4(e,i):t==="array-contains-any"?new Q4(e,i):new Qt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new q4(e,i):new H4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fl(t,this.value)):t!==null&&Ta(this.value)===Ta(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends OA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Wi(e,t)}matches(e){return DA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function DA(n){return n.op==="and"}function kA(n){return F4(n)&&DA(n)}function F4(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function oy(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Bl(n.value);if(kA(n))return n.filters.map(e=>oy(e)).join(",");{const e=n.filters.map(t=>oy(t)).join(",");return`${n.op}(${e})`}}function MA(n,e){return n instanceof Qt?function(i,a){return a instanceof Qt&&i.op===a.op&&i.field.isEqual(a.field)&&Tr(i.value,a.value)}(n,e):n instanceof Wi?function(i,a){return a instanceof Wi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,u,h)=>o&&MA(u,a.filters[h]),!0):!1}(n,e):void xe()}function PA(n){return n instanceof Qt?function(t){return`${t.field.canonicalString()} ${t.op} ${Bl(t.value)}`}(n):n instanceof Wi?function(t){return t.op.toString()+" {"+t.getFilters().map(PA).join(" ,")+"}"}(n):"Filter"}class B4 extends Qt{constructor(e,t,i){super(e,t,i),this.key=be.fromName(i.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class q4 extends Qt{constructor(e,t){super(e,"in",t),this.keys=LA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class H4 extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=LA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>be.fromName(i.referenceValue))}class G4 extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nv(t)&&Qc(t.arrayValue,this.value)}}class $4 extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Qc(this.value.arrayValue,t)}}class K4 extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Qc(this.value.arrayValue,t)}}class Q4 extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Qc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t=null,i=[],a=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function Dw(n,e=null,t=[],i=[],a=null,o=null,u=null){return new W4(n,e,t,i,a,o,u)}function iv(n){const e=Me(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>oy(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Op(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Bl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Bl(i)).join(",")),e.le=t}return e.le}function rv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ow(n.startAt,e.startAt)&&Ow(n.endAt,e.endAt)}function ly(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t=null,i=[],a=[],o=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Y4(n,e,t,i,a,o,u,h){return new iu(n,e,t,i,a,o,u,h)}function kp(n){return new iu(n)}function kw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VA(n){return n.collectionGroup!==null}function xc(n){const e=Me(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ln(Cn.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Wc(o,i))}),t.has(Cn.keyField().canonicalString())||e.he.push(new Wc(Cn.keyField(),i))}return e.he}function _r(n){const e=Me(n);return e.Pe||(e.Pe=X4(e,xc(n))),e.Pe}function X4(n,e){if(n.limitType==="F")return Dw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Wc(a.field,o)});const t=n.endAt?new Fd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Fd(n.startAt.position,n.startAt.inclusive):null;return Dw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function uy(n,e){const t=n.filters.concat([e]);return new iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cy(n,e,t){return new iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mp(n,e){return rv(_r(n),_r(e))&&n.limitType===e.limitType}function UA(n){return`${iv(_r(n))}|lt:${n.limitType}`}function Al(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>PA(a)).join(", ")}]`),Op(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Bl(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Bl(a)).join(",")),`Target(${i})`}(_r(n))}; limitType=${n.limitType})`}function Pp(n,e){return e.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):be.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,a){for(const o of xc(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,h,p){const m=xw(u,h,p);return u.inclusive?m<=0:m<0}(i.startAt,xc(i),a)||i.endAt&&!function(u,h,p){const m=xw(u,h,p);return u.inclusive?m>=0:m>0}(i.endAt,xc(i),a))}(n,e)}function Z4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jA(n){return(e,t)=>{let i=!1;for(const a of xc(n)){const o=J4(a,e,t);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function J4(n,e,t){const i=n.field.isKeyField()?be.comparator(e.key,t.key):function(o,u,h){const p=u.data.field(o),m=h.data.field(o);return p!==null&&m!==null?Fl(p,m):xe()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,(t,i)=>{for(const[a,o]of i)e(a,o)})}isEmpty(){return wA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new Yt(be.comparator);function ds(){return eM}const zA=new Yt(be.comparator);function Ac(...n){let e=zA;for(const t of n)e=e.insert(t.key,t);return e}function FA(n){let e=zA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function fo(){return Oc()}function BA(){return Oc()}function Oc(){return new Io(n=>n.toString(),(n,e)=>n.isEqual(e))}const tM=new Yt(be.comparator),nM=new ln(be.comparator);function Qe(...n){let e=nM;for(const t of n)e=e.add(t);return e}const iM=new ln(Ye);function rM(){return iM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function qA(n){return{integerValue:""+n}}function sM(n,e){return D4(e)?qA(e):sv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this._=void 0}}function aM(n,e,t){return n instanceof Bd?function(a,o){const u={fields:{[AA]:{stringValue:bA},[RA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&tv(o)&&(o=Dp(o)),o&&(u.fields[CA]=o),{mapValue:u}}(t,e):n instanceof Yc?GA(n,e):n instanceof Xc?$A(n,e):function(a,o){const u=HA(a,o),h=Mw(u)+Mw(a.Ie);return ay(u)&&ay(a.Ie)?qA(h):sv(a.serializer,h)}(n,e)}function oM(n,e,t){return n instanceof Yc?GA(n,e):n instanceof Xc?$A(n,e):t}function HA(n,e){return n instanceof qd?function(i){return ay(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Bd extends Lp{}class Yc extends Lp{constructor(e){super(),this.elements=e}}function GA(n,e){const t=KA(e);for(const i of n.elements)t.some(a=>Tr(a,i))||t.push(i);return{arrayValue:{values:t}}}class Xc extends Lp{constructor(e){super(),this.elements=e}}function $A(n,e){let t=KA(e);for(const i of n.elements)t=t.filter(a=>!Tr(a,i));return{arrayValue:{values:t}}}class qd extends Lp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Mw(n){return qt(n.integerValue||n.doubleValue)}function KA(n){return nv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function lM(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Yc&&a instanceof Yc||i instanceof Xc&&a instanceof Xc?zl(i.elements,a.elements,Tr):i instanceof qd&&a instanceof qd?Tr(i.Ie,a.Ie):i instanceof Bd&&a instanceof Bd}(n.transform,e.transform)}class uM{constructor(e,t){this.version=e,this.transformResults=t}}class $i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Vp{}function QA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new av(n.key,$i.none()):new ph(n.key,n.data,$i.none());{const t=n.data,i=Ni.empty();let a=new ln(Cn.comparator);for(let o of e.fields)if(!a.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?i.delete(o):i.set(o,u),a=a.add(o)}return new No(n.key,i,new Bi(a.toArray()),$i.none())}}function cM(n,e,t){n instanceof ph?function(a,o,u){const h=a.value.clone(),p=Lw(a.fieldTransforms,o,u.transformResults);h.setAll(p),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof No?function(a,o,u){if(!md(a.precondition,o))return void o.convertToUnknownDocument(u.version);const h=Lw(a.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(WA(a)),p.setAll(h),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Dc(n,e,t,i){return n instanceof ph?function(o,u,h,p){if(!md(o.precondition,u))return h;const m=o.value.clone(),g=Vw(o.fieldTransforms,p,u);return m.setAll(g),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof No?function(o,u,h,p){if(!md(o.precondition,u))return h;const m=Vw(o.fieldTransforms,p,u),g=u.data;return g.setAll(WA(o)),g.setAll(m),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(o,u,h){return md(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function hM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),o=HA(i.transform,a||null);o!=null&&(t===null&&(t=Ni.empty()),t.set(i.field,o))}return t||null}function Pw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&zl(i,a,(o,u)=>lM(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ph extends Vp{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class No extends Vp{constructor(e,t,i,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function WA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Lw(n,e,t){const i=new Map;pt(n.length===t.length);for(let a=0;a<t.length;a++){const o=n[a],u=o.transform,h=e.data.field(o.field);i.set(o.field,oM(u,h,t[a]))}return i}function Vw(n,e,t){const i=new Map;for(const a of n){const o=a.transform,u=t.data.field(a.field);i.set(a.field,aM(o,u,e))}return i}class av extends Vp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fM extends Vp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&cM(o,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Dc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Dc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=BA();return this.mutations.forEach(a=>{const o=e.get(a.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(a.key)?null:h;const p=QA(u,h);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,(t,i)=>Pw(t,i))&&zl(this.baseMutations,e.baseMutations,(t,i)=>Pw(t,i))}}class ov{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){pt(e.mutations.length===i.length);let a=function(){return tM}();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,i[u].version);return new ov(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,tt;function _M(n){switch(n){case te.OK:return xe();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return xe()}}function YA(n){if(n===void 0)return fs("GRPC error has no .code"),te.UNKNOWN;switch(n){case Kt.OK:return te.OK;case Kt.CANCELLED:return te.CANCELLED;case Kt.UNKNOWN:return te.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return te.INTERNAL;case Kt.UNAVAILABLE:return te.UNAVAILABLE;case Kt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Kt.NOT_FOUND:return te.NOT_FOUND;case Kt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Kt.ABORTED:return te.ABORTED;case Kt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Kt.DATA_LOSS:return te.DATA_LOSS;default:return xe()}}(tt=Kt||(Kt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new ua([4294967295,4294967295],0);function Uw(n){const e=gM().encode(n),t=new dA;return t.update(e),new Uint8Array(t.digest())}function jw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ua([t,i],0),new ua([a,o],0)]}class lv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Cc(`Invalid padding: ${t}`);if(i<0)throw new Cc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ua.fromNumber(this.Ee)}Ae(e,t,i){let a=e.add(t.multiply(ua.fromNumber(i)));return a.compare(yM)===1&&(a=new ua([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Uw(e),[i,a]=jw(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);if(!this.Re(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new lv(o,a,t);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=Uw(e),[i,a]=jw(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t,i,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Up(De.min(),a,new Yt(Ye),ds(),Qe())}}class mh{constructor(e,t,i,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new mh(i,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,i,a){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=a}}class XA{constructor(e,t){this.targetId=e,this.ge=t}}class ZA{constructor(e,t,i=Rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zw{constructor(){this.pe=0,this.ye=Fw(),this.we=Rn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Qe(),t=Qe(),i=Qe();return this.ye.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:xe()}}),new mh(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=Fw()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,pt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class vM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ds(),this.$e=td(),this.Ke=td(),this.Ue=new Yt(Ye)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,i=e.ge.count,a=this.Xe(t);if(a){const o=a.target;if(ly(o))if(i===0){const u=new be(o.path);this.ze(t,u,Dn.newNoDocument(u,De.min()))}else pt(i===1);else{const u=this.et(t);if(u!==i){const h=this.tt(e),p=h?this.nt(h,e,u):1;if(p!==0){this.Ye(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=t;let u,h;try{u=Ea(i).toUint8Array()}catch(p){if(p instanceof SA)return jl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new lv(u,a,o)}catch(p){return jl(p instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let a=0;return i.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&ly(h.target)){const p=new be(h.target.path);this._t(p).has(u)||this.ut(u,p)||this.ze(u,p,Dn.newNoDocument(p,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let i=Qe();this.Ke.forEach((o,u)=>{let h=!0;u.forEachWhile(p=>{const m=this.Xe(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const a=new Up(e,t,this.Ue,this.Qe,i);return this.Qe=ds(),this.$e=td(),this.Ke=td(),this.Ue=new Yt(Ye),a}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new zw,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new ln(Ye),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new ln(Ye),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new zw),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function td(){return new Yt(be.comparator)}function Fw(){return new Yt(be.comparator)}const EM={asc:"ASCENDING",desc:"DESCENDING"},TM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wM={and:"AND",or:"OR"};class SM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hy(n,e){return n.useProto3Json||Op(e)?e:{value:e}}function Hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bM(n,e){return Hd(n,e.toTimestamp())}function gr(n){return pt(!!n),De.fromTimestamp(function(t){const i=va(t);return new Wt(i.seconds,i.nanos)}(n))}function uv(n,e){return fy(n,e).canonicalString()}function fy(n,e){const t=function(a){return new Ct(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function eC(n){const e=Ct.fromString(n);return pt(sC(e)),e}function dy(n,e){return uv(n.databaseId,e.path)}function wg(n,e){const t=eC(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(nC(t))}function tC(n,e){return uv(n.databaseId,e)}function AM(n){const e=eC(n);return e.length===4?Ct.emptyPath():nC(e)}function py(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nC(n){return pt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Bw(n,e,t){return{name:dy(n,e),fields:t.value.mapValue.fields}}function CM(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(m,g){return m.useProto3Json?(pt(g===void 0||typeof g=="string"),Rn.fromBase64String(g||"")):(pt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Rn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const g=m.code===void 0?te.UNKNOWN:YA(m.code);return new ge(g,m.message||"")}(u);t=new ZA(i,a,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=wg(n,i.document.name),o=gr(i.document.updateTime),u=i.document.createTime?gr(i.document.createTime):De.min(),h=new Ni({mapValue:{fields:i.document.fields}}),p=Dn.newFoundDocument(a,o,u,h),m=i.targetIds||[],g=i.removedTargetIds||[];t=new _d(m,g,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=wg(n,i.document),o=i.readTime?gr(i.readTime):De.min(),u=Dn.newNoDocument(a,o),h=i.removedTargetIds||[];t=new _d([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=wg(n,i.document),o=i.removedTargetIds||[];t=new _d([],o,a,null)}else{if(!("filter"in e))return xe();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,u=new mM(a,o),h=i.targetId;t=new XA(h,u)}}return t}function RM(n,e){let t;if(e instanceof ph)t={update:Bw(n,e.key,e.value)};else if(e instanceof av)t={delete:dy(n,e.key)};else if(e instanceof No)t={update:Bw(n,e.key,e.data),updateMask:LM(e.fieldMask)};else{if(!(e instanceof fM))return xe();t={verify:dy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,u){const h=u.transform;if(h instanceof Bd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Yc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof qd)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw xe()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:bM(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xe()}(n,e.precondition)),t}function IM(n,e){return n&&n.length>0?(pt(e!==void 0),n.map(t=>function(a,o){let u=a.updateTime?gr(a.updateTime):gr(o);return u.isEqual(De.min())&&(u=gr(o)),new uM(u,a.transformResults||[])}(t,e))):[]}function NM(n,e){return{documents:[tC(n,e.path)]}}function xM(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=tC(n,a);const o=function(m){if(m.length!==0)return rC(Wi.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(m){if(m.length!==0)return m.map(g=>function(S){return{field:Cl(S.field),direction:kM(S.dir)}}(g))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=hy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:a}}function OM(n){let e=AM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){pt(i===1);const g=t.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(v){const S=iC(v);return S instanceof Wi&&kA(S)?S.getFilters():[S]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(S=>function(x){return new Wc(Rl(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(t.orderBy));let h=null;t.limit&&(h=function(v){let S;return S=typeof v=="object"?v.value:v,Op(S)?null:S}(t.limit));let p=null;t.startAt&&(p=function(v){const S=!!v.before,I=v.values||[];return new Fd(I,S)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const S=!v.before,I=v.values||[];return new Fd(I,S)}(t.endAt)),Y4(e,a,u,o,h,"F",p,m)}function DM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Rl(t.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Rl(t.unaryFilter.field);return Qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Rl(t.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Rl(t.unaryFilter.field);return Qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(n):n.fieldFilter!==void 0?function(t){return Qt.create(Rl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wi.create(t.compositeFilter.filters.map(i=>iC(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe()}}(t.compositeFilter.op))}(n):xe()}function kM(n){return EM[n]}function MM(n){return TM[n]}function PM(n){return wM[n]}function Cl(n){return{fieldPath:n.canonicalString()}}function Rl(n){return Cn.fromServerFormat(n.fieldPath)}function rC(n){return n instanceof Qt?function(t){if(t.op==="=="){if(Nw(t.value))return{unaryFilter:{field:Cl(t.field),op:"IS_NAN"}};if(Iw(t.value))return{unaryFilter:{field:Cl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nw(t.value))return{unaryFilter:{field:Cl(t.field),op:"IS_NOT_NAN"}};if(Iw(t.value))return{unaryFilter:{field:Cl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cl(t.field),op:MM(t.op),value:t.value}}}(n):n instanceof Wi?function(t){const i=t.getFilters().map(a=>rC(a));return i.length===1?i[0]:{compositeFilter:{op:PM(t.op),filters:i}}}(n):xe()}function LM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,i,a,o=De.min(),u=De.min(),h=Rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.Tt=e}}function UM(n){const e=OM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.Tn=new zM}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ya.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class zM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new ln(Ct.comparator),o=!a.has(i);return this.index[t]=a.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new ln(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aC=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(aC,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new ql(0)}static Un(){return new ql(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="LruGarbageCollector",FM=1048576;function Gw([n,e],[t,i]){const a=Ye(n,t);return a===0?Ye(e,i):a}class BM{constructor(e){this.Hn=e,this.buffer=new ln(Gw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){_e(Hw,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nu(t)?_e(Hw,"Ignoring IndexedDB error during garbage collection: ",t):await tu(t)}await this.er(3e5)})}}class HM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(xp.ae);const i=new BM(t);return this.tr.forEachTarget(e,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(qw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qw):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,a,o,u,h,p,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,t))).next(v=>(o=v,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(m=Date.now(),bl()<=Ge.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${o} targets in `+(p-h)+`ms
	Removed ${v} documents in `+(m-p)+`ms
Total Duration: ${m-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function GM(n,e){return new HM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.changes=new Io(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Dc(i.mutation,a,Bi.empty(),Wt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qe()){const a=fo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(o=>{let u=Ac();return o.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qe()))}populateOverlays(e,t,i){const a=[];return i.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,i,a){let o=ds();const u=Oc(),h=function(){return Oc()}();return t.forEach((p,m)=>{const g=i.get(m.key);a.has(m.key)&&(g===void 0||g.mutation instanceof No)?o=o.insert(m.key,m):g!==void 0?(u.set(m.key,g.mutation.getFieldMask()),Dc(g.mutation,m,g.mutation.getFieldMask(),Wt.now())):u.set(m.key,Bi.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((m,g)=>u.set(m,g)),t.forEach((m,g)=>{var v;return h.set(m,new KM(g,(v=u.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const i=Oc();let a=new Yt((u,h)=>u-h),o=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let g=i.get(p)||Bi.empty();g=h.applyToLocalView(m,g),i.set(p,g);const v=(a.get(h.batchId)||Qe()).add(p);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,g=p.value,v=BA();g.forEach(S=>{if(!o.has(S)){const I=QA(t.get(S),i.get(S));I!==null&&v.set(S,I),o=o.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ne.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return be.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-o.size):ne.resolve(fo());let h=Gc,p=o;return u.next(m=>ne.forEach(m,(g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next(S=>{p=p.insert(g,S)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,p,m,Qe())).next(g=>({batchId:h,changes:FA(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next(i=>{let a=Ac();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const o=t.collectionGroup;let u=Ac();return this.indexManager.getCollectionParents(e,o).next(h=>ne.forEach(h,p=>{const m=function(v,S){return new iu(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next(g=>{g.forEach((v,S)=>{u=u.insert(v,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,a))).next(u=>{o.forEach((p,m)=>{const g=m.getKey();u.get(g)===null&&(u=u.insert(g,Dn.newInvalidDocument(g)))});let h=Ac();return u.forEach((p,m)=>{const g=o.get(p);g!==void 0&&Dc(g.mutation,m,Bi.empty(),Wt.now()),Pp(t,m)&&(h=h.insert(p,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:gr(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:UM(a.bundledQuery),readTime:gr(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.overlays=new Yt(be.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return ne.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const a=fo(),o=t.length+1,u=new be(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>i&&a.set(p.getKey(),p)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let o=new Yt((m,g)=>m-g);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let g=o.get(m.largestBatchId);g===null&&(g=fo(),o=o.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=fo(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,g)=>h.set(m,g)),!(h.size()>=a)););return ne.resolve(h)}Et(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new pM(t,i));let o=this.Rr.get(t);o===void 0&&(o=Qe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.Vr=new ln(yn.mr),this.gr=new ln(yn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new yn(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new yn(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new be(new Ct([])),i=new yn(t,e),a=new yn(t,e+1),o=[];return this.gr.forEachInRange([i,a],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new be(new Ct([])),i=new yn(t,e),a=new yn(t,e+1);let o=Qe();return this.gr.forEachInRange([i,a],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new yn(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class yn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return be.comparator(e.key,t.key)||Ye(e.Cr,t.Cr)}static pr(e,t){return Ye(e.Cr,t.Cr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new ln(yn.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new dM(o,t,i,a);this.mutationQueue.push(u);for(const h of a)this.Mr=this.Mr.add(new yn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Nr(i),o=a<0?0:a;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?ev:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new yn(t,0),a=new yn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,a],u=>{const h=this.Or(u.Cr);o.push(h)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ln(Ye);return t.forEach(a=>{const o=new yn(a,0),u=new yn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{i=i.add(h.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let o=i;be.isDocumentKey(o)||(o=o.child(""));const u=new yn(new be(o),0);let h=new ln(Ye);return this.Mr.forEachWhile(p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(p.Cr)),!0)},u),ne.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const a=this.Or(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){pt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(t.mutations,a=>{const o=new yn(a.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new yn(t,0),a=this.Mr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.kr=e,this.docs=function(){return new Yt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),o=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let i=ds();return t.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():Dn.newInvalidDocument(a))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let o=ds();const u=t.path,h=new be(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:g}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||I4(R4(g),i)<=0||(a.has(g.key)||Pp(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,i,a){xe()}qr(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new eP(this)}getSize(e){return ne.resolve(this.size)}}class eP extends $M{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.persistence=e,this.Qr=new Io(t=>iv(t),rv),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new cv,this.targetCount=0,this.Ur=ql.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new ql(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let a=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),ne.waitFor(o).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(u=>{o.push(a.markPotentiallyOrphaned(e,u))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new xp(0),this.zr=!1,this.zr=!0,this.jr=new XM,this.referenceDelegate=e(this),this.Hr=new tP(this),this.indexManager=new jM,this.remoteDocumentCache=function(a){return new JM(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new VM(t),this.Yr=new WM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new ZM(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){_e("MemoryPersistence","Starting transaction:",e);const a=new nP(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(o=>this.referenceDelegate.Xr(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class nP extends x4{constructor(e){super(),this.currentSequenceNumber=e}}class hv{constructor(e){this.persistence=e,this.ti=new cv,this.ni=null}static ri(e){return new hv(e)}get ii(){if(this.ni)return this.ni;throw xe()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const a=be.fromPath(i);return this.si(e,a).next(o=>{o||t.removeEntry(a,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Gd{constructor(e,t){this.persistence=e,this.oi=new Io(i=>k4(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=GM(this,t)}static ri(e,t){return new Gd(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(i,a)=>this.ar(e,i,a).next(o=>o?ne.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(h=>{h||(i++,o.removeEntry(u,De.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dd(e.data.value)),t}ar(e,t,i){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return ne.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=a}static Yi(e,t){let i=Qe(),a=Qe();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new fv(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return WD()?8:O4(Mn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,a){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,a,i).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new iP;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,i,a){return i.documentReadCount<this.es?(bl()<=Ge.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(bl()<=Ge.DEBUG&&_e("QueryEngine","Query:",Al(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(bl()<=Ge.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):ne.resolve())}rs(e,t){if(kw(t))return ne.resolve(null);let i=_r(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=cy(t,null,"F"),i=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const u=Qe(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const m=this.cs(t,h);return this.ls(t,m,u,p.readTime)?this.rs(e,cy(t,null,"F")):this.hs(e,m,t,p)}))})))}ss(e,t,i,a){return kw(t)||a.isEqual(De.min())?ne.resolve(null):this.ns.getDocuments(e,i).next(o=>{const u=this.cs(t,o);return this.ls(t,u,i,a)?ne.resolve(null):(bl()<=Ge.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Al(t)),this.hs(e,u,t,C4(a,Gc)).next(h=>h))})}cs(e,t){let i=new ln(jA(e));return t.forEach((a,o)=>{Pp(e,o)&&(i=i.add(o))}),i}ls(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}_s(e,t,i){return bl()<=Ge.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Al(t)),this.ns.getDocumentsMatchingQuery(e,t,ya.min(),i)}hs(e,t,i,a){return this.ns.getDocumentsMatchingQuery(e,i,a).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="LocalStore",sP=3e8;class aP{constructor(e,t,i,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new Yt(Ye),this.Is=new Io(o=>iv(o),rv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QM(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function oP(n,e,t,i){return new aP(n,e,t,i)}async function lC(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],h=[];let p=Qe();for(const m of a){u.push(m.batchId);for(const g of m.mutations)p=p.add(g.key)}for(const m of o){h.push(m.batchId);for(const g of m.mutations)p=p.add(g.key)}return t.localDocuments.getDocuments(i,p).next(m=>({Rs:m,removedBatchIds:u,addedBatchIds:h}))})})}function lP(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,m,g){const v=m.batch,S=v.keys();let I=ne.resolve();return S.forEach(x=>{I=I.next(()=>g.getEntry(p,x)).next(U=>{const k=m.docVersions.get(x);pt(k!==null),U.version.compareTo(k)<0&&(v.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),g.addEntry(U)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(p,v))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=Qe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function uC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function uP(n,e){const t=Me(n),i=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const h=[];e.targetChanges.forEach((g,v)=>{const S=a.get(v);if(!S)return;h.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,v)));let I=S.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(Rn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,i)),a=a.insert(v,I),function(U,k,H){return U.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=sP?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(S,I,g)&&h.push(t.Hr.updateTargetData(o,I))});let p=ds(),m=Qe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),h.push(cP(o,u,e.documentUpdates).next(g=>{p=g.Vs,m=g.fs})),!i.isEqual(De.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(g)}return ne.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,m)).next(()=>p)}).then(o=>(t.Ts=a,o))}function cP(n,e,t){let i=Qe(),a=Qe();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let u=ds();return t.forEach((h,p)=>{const m=o.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):_e(dv,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Vs:u,fs:a}})}function hP(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ev),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function fP(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Hr.getTargetData(i,e).next(o=>o?(a=o,ne.resolve(a)):t.Hr.allocateTargetId(i).next(u=>(a=new sa(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function my(n,e,t){const i=Me(n),a=i.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!nu(u))throw u;_e(dv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(a.target)}function $w(n,e,t){const i=Me(n);let a=De.min(),o=Qe();return i.persistence.runTransaction("Execute query","readwrite",u=>function(p,m,g){const v=Me(p),S=v.Is.get(g);return S!==void 0?ne.resolve(v.Ts.get(S)):v.Hr.getTargetData(m,g)}(i,u,_r(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,h.targetId).next(p=>{o=p})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,t?a:De.min(),t?o:Qe())).next(h=>(dP(i,Z4(e),h),{documents:h,gs:o})))}function dP(n,e,t){let i=n.Es.get(e)||De.min();t.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(e,i)}class Kw{constructor(){this.activeTargetIds=rM()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pP{constructor(){this.ho=new Kw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Kw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="ConnectivityMonitor";class Ww{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_e(Qw,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){_e(Qw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function _y(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="RestConnection",_P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gP{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===jd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}bo(e,t,i,a,o){const u=_y(),h=this.So(e,t.toUriEncodedString());_e(Sg,`Sending RPC '${e}' ${u}:`,h,i);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,a,o),this.vo(e,h,p,i).then(m=>(_e(Sg,`Received RPC '${e}' ${u}: `,m),m),m=>{throw jl(Sg,`RPC '${e}' ${u} failed with error: `,m,"url: ",h,"request:",i),m})}Co(e,t,i,a,o,u){return this.bo(e,t,i,a,o)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),i&&i.headers.forEach((a,o)=>e[o]=a)}So(e,t){const i=_P[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="WebChannelConnection";class vP extends gP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,a){const o=_y();return new Promise((u,h)=>{const p=new pA;p.setWithCredentials(!0),p.listenOnce(mA.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case fd.NO_ERROR:const g=p.getResponseJson();_e(xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),u(g);break;case fd.TIMEOUT:_e(xn,`RPC '${e}' ${o} timed out`),h(new ge(te.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const v=p.getStatus();if(_e(xn,`RPC '${e}' ${o} failed with status:`,v,"response text:",p.getResponseText()),v>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const x=function(k){const H=k.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(H)>=0?H:te.UNKNOWN}(I.status);h(new ge(x,I.message))}else h(new ge(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ge(te.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{_e(xn,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(a);_e(xn,`RPC '${e}' ${o} sending request:`,a),p.send(t,"POST",m,i,15)})}Wo(e,t,i){const a=_y(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=yA(),h=gA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const g=o.join("");_e(xn,`Creating RPC '${e}' stream ${a}: ${g}`,p);const v=u.createWebChannel(g,p);let S=!1,I=!1;const x=new yP({Fo:k=>{I?_e(xn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(S||(_e(xn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),S=!0),_e(xn,`RPC '${e}' stream ${a} sending:`,k),v.send(k))},Mo:()=>v.close()}),U=(k,H,Y)=>{k.listen(H,F=>{try{Y(F)}catch(ie){setTimeout(()=>{throw ie},0)}})};return U(v,bc.EventType.OPEN,()=>{I||(_e(xn,`RPC '${e}' stream ${a} transport opened.`),x.Qo())}),U(v,bc.EventType.CLOSE,()=>{I||(I=!0,_e(xn,`RPC '${e}' stream ${a} transport closed`),x.Ko())}),U(v,bc.EventType.ERROR,k=>{I||(I=!0,jl(xn,`RPC '${e}' stream ${a} transport errored:`,k),x.Ko(new ge(te.UNAVAILABLE,"The operation could not be completed")))}),U(v,bc.EventType.MESSAGE,k=>{var H;if(!I){const Y=k.data[0];pt(!!Y);const F=Y,ie=(F==null?void 0:F.error)||((H=F[0])===null||H===void 0?void 0:H.error);if(ie){_e(xn,`RPC '${e}' stream ${a} received error:`,ie);const re=ie.status;let ae=function(w){const R=Kt[w];if(R!==void 0)return YA(R)}(re),P=ie.message;ae===void 0&&(ae=te.INTERNAL,P="Unknown error status: "+re+" with message "+ie.message),I=!0,x.Ko(new ge(ae,P)),v.close()}else _e(xn,`RPC '${e}' stream ${a} received:`,Y),x.Uo(Y)}}),U(h,_A.STAT_EVENT,k=>{k.stat===iy.PROXY?_e(xn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===iy.NOPROXY&&_e(xn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function bg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n){return new SM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t,i=1e3,a=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=a,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-i);a>0&&_e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="PersistentStream";class hC{constructor(e,t,i,a,o,u,h,p){this.Ti=e,this.n_=i,this.r_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new cC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===t&&this.V_(i,a)},i=>{e(()=>{const a=new ge(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return _e(Yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(_e(Yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EP extends hC{constructor(e,t,i,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=CM(this.serializer,e),i=function(o){if(!("targetChange"in o))return De.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?gr(u.readTime):De.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=py(this.serializer),t.addTarget=function(o,u){let h;const p=u.target;if(h=ly(p)?{documents:NM(o,p)}:{query:xM(o,p).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=JA(o,u.resumeToken);const m=hy(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(De.min())>0){h.readTime=Hd(o,u.snapshotVersion.toTimestamp());const m=hy(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=DM(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=py(this.serializer),t.removeTarget=e,this.I_(t)}}class TP extends hC{constructor(e,t,i,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=IM(e.writeResults,e.commitTime),i=gr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=py(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>RM(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{}class SP extends wP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.bo(e,fy(t,i),a,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(te.UNKNOWN,o.toString())})}Co(e,t,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,fy(t,i),a,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(te.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class bP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fs(t),this.N_=!1):_e("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class AP{constructor(e,t,i,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{i.enqueueAndForget(async()=>{xo(this)&&(_e(vo,"Restarting streams for network reachability change."),await async function(p){const m=Me(p);m.W_.add(4),await _h(m),m.j_.set("Unknown"),m.W_.delete(4),await zp(m)}(this))})}),this.j_=new bP(i,a)}}async function zp(n){if(xo(n))for(const e of n.G_)await e(!0)}async function _h(n){for(const e of n.G_)await e(!1)}function fC(n,e){const t=Me(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),gv(t)?_v(t):ru(t).c_()&&mv(t,e))}function pv(n,e){const t=Me(n),i=ru(t);t.U_.delete(e),i.c_()&&dC(t,e),t.U_.size===0&&(i.c_()?i.P_():xo(t)&&t.j_.set("Unknown"))}function mv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ru(n).y_(e)}function dC(n,e){n.H_.Ne(e),ru(n).w_(e)}function _v(n){n.H_=new vM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ru(n).start(),n.j_.B_()}function gv(n){return xo(n)&&!ru(n).u_()&&n.U_.size>0}function xo(n){return Me(n).W_.size===0}function pC(n){n.H_=void 0}async function CP(n){n.j_.set("Online")}async function RP(n){n.U_.forEach((e,t)=>{mv(n,e)})}async function IP(n,e){pC(n),gv(n)?(n.j_.q_(e),_v(n)):n.j_.set("Unknown")}async function NP(n,e,t){if(n.j_.set("Online"),e instanceof ZA&&e.state===2&&e.cause)try{await async function(a,o){const u=o.cause;for(const h of o.targetIds)a.U_.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.U_.delete(h),a.H_.removeTarget(h))}(n,e)}catch(i){_e(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $d(n,i)}else if(e instanceof _d?n.H_.We(e):e instanceof XA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const i=await uC(n.localStore);t.compareTo(i)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const g=o.U_.get(m);g&&o.U_.set(m,g.withResumeToken(p.resumeToken,u))}}),h.targetMismatches.forEach((p,m)=>{const g=o.U_.get(p);if(!g)return;o.U_.set(p,g.withResumeToken(Rn.EMPTY_BYTE_STRING,g.snapshotVersion)),dC(o,p);const v=new sa(g.target,p,m,g.sequenceNumber);mv(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){_e(vo,"Failed to raise snapshot:",i),await $d(n,i)}}async function $d(n,e,t){if(!nu(e))throw e;n.W_.add(1),await _h(n),n.j_.set("Offline"),t||(t=()=>uC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_e(vo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await zp(n)})}function mC(n,e){return e().catch(t=>$d(n,t,e))}async function Fp(n){const e=Me(n),t=wa(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:ev;for(;xP(e);)try{const a=await hP(e.localStore,i);if(a===null){e.K_.length===0&&t.P_();break}i=a.batchId,OP(e,a)}catch(a){await $d(e,a)}_C(e)&&gC(e)}function xP(n){return xo(n)&&n.K_.length<10}function OP(n,e){n.K_.push(e);const t=wa(n);t.c_()&&t.b_&&t.S_(e.mutations)}function _C(n){return xo(n)&&!wa(n).u_()&&n.K_.length>0}function gC(n){wa(n).start()}async function DP(n){wa(n).C_()}async function kP(n){const e=wa(n);for(const t of n.K_)e.S_(t.mutations)}async function MP(n,e,t){const i=n.K_.shift(),a=ov.from(i,e,t);await mC(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Fp(n)}async function PP(n,e){e&&wa(n).b_&&await async function(i,a){if(function(u){return _M(u)&&u!==te.ABORTED}(a.code)){const o=i.K_.shift();wa(i).h_(),await mC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Fp(i)}}(n,e),_C(n)&&gC(n)}async function Xw(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),_e(vo,"RemoteStore received new credentials");const i=xo(t);t.W_.add(3),await _h(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await zp(t)}async function LP(n,e){const t=Me(n);e?(t.W_.delete(2),await zp(t)):e||(t.W_.add(2),await _h(t),t.j_.set("Unknown"))}function ru(n){return n.J_||(n.J_=function(t,i,a){const o=Me(t);return o.M_(),new EP(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:CP.bind(null,n),No:RP.bind(null,n),Lo:IP.bind(null,n),p_:NP.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),gv(n)?_v(n):n.j_.set("Unknown")):(await n.J_.stop(),pC(n))})),n.J_}function wa(n){return n.Y_||(n.Y_=function(t,i,a){const o=Me(t);return o.M_(),new TP(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:DP.bind(null,n),Lo:PP.bind(null,n),D_:kP.bind(null,n),v_:MP.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Fp(n)):(await n.Y_.stop(),n.K_.length>0&&(_e(vo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,i,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,o){const u=Date.now()+i,h=new yv(e,t,u,a,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vv(n,e){if(fs("AsyncQueue",`${e}: ${n}`),nu(n))return new ge(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static emptySet(e){return new Ol(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||be.comparator(t.key,i.key):(t,i)=>be.comparator(t.key,i.key),this.keyedMap=Ac(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ol;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.Z_=new Yt(be.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):xe():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Hl{constructor(e,t,i,a,o,u,h,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,a,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Hl(e,t,Ol.emptySet(t),u,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class UP{constructor(){this.queries=Jw(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const a=Me(t),o=a.queries;a.queries=Jw(),o.forEach((u,h)=>{for(const p of h.ta)p.onError(i)})})(this,new ge(te.ABORTED,"Firestore shutting down"))}}function Jw(){return new Io(n=>UA(n),Mp)}async function Ev(n,e){const t=Me(n);let i=3;const a=e.query;let o=t.queries.get(a);o?!o.na()&&e.ra()&&(i=2):(o=new VP,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await t.onListen(a,!0);break;case 1:o.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=vv(u,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&wv(t)}async function Tv(n,e){const t=Me(n),i=e.query;let a=3;const o=t.queries.get(i);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?a=e.ra()?0:1:!o.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function jP(n,e){const t=Me(n);let i=!1;for(const a of e){const o=a.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(a)&&(i=!0);u.ea=a}}i&&wv(t)}function zP(n,e,t){const i=Me(n),a=i.queries.get(e);if(a)for(const o of a.ta)o.onError(t);i.queries.delete(e)}function wv(n){n.ia.forEach(e=>{e.next()})}var gy,eS;(eS=gy||(gy={}))._a="default",eS.Cache="cache";class Sv{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.key=e}}class vC{constructor(e){this.key=e}}class FP{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Qe(),this.mutatedKeys=Qe(),this.ya=jA(e),this.wa=new Ol(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new Zw,a=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((g,v)=>{const S=a.get(g),I=Pp(this.query,v)?v:null,x=!!S&&this.mutatedKeys.has(S.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let k=!1;S&&I?S.data.isEqual(I.data)?x!==U&&(i.track({type:3,doc:I}),k=!0):this.va(S,I)||(i.track({type:2,doc:I}),k=!0,(p&&this.ya(I,p)>0||m&&this.ya(I,m)<0)&&(h=!0)):!S&&I?(i.track({type:0,doc:I}),k=!0):S&&!I&&(i.track({type:1,doc:S}),k=!0,(p||m)&&(h=!0)),k&&(I?(u=u.add(I),o=U?o.add(g):o.delete(g)):(u=u.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{wa:u,Da:i,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((g,v)=>function(I,x){const U=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return U(I)-U(x)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(i),a=a!=null&&a;const h=t&&!a?this.Fa():[],p=this.pa.size===0&&this.current&&!a?1:0,m=p!==this.ga;return this.ga=p,u.length!==0||m?{snapshot:new Hl(this.query,e.wa,o,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Zw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Qe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new vC(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new yC(i))}),t}Oa(e){this.fa=e.gs,this.pa=Qe();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Hl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const bv="SyncEngine";class BP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class qP{constructor(e){this.key=e,this.Ba=!1}}class HP{constructor(e,t,i,a,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Io(h=>UA(h),Mp),this.qa=new Map,this.Qa=new Set,this.$a=new Yt(be.comparator),this.Ka=new Map,this.Ua=new cv,this.Wa={},this.Ga=new Map,this.za=ql.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function GP(n,e,t=!0){const i=AC(n);let a;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na()):a=await EC(i,e,t,!0),a}async function $P(n,e){const t=AC(n);await EC(t,e,!0,!1)}async function EC(n,e,t,i){const a=await fP(n.localStore,_r(e)),o=a.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await KP(n,e,o,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&fC(n.remoteStore,a),h}async function KP(n,e,t,i,a){n.Ha=(v,S,I)=>async function(U,k,H,Y){let F=k.view.Sa(H);F.ls&&(F=await $w(U.localStore,k.query,!1).then(({documents:P})=>k.view.Sa(P,F)));const ie=Y&&Y.targetChanges.get(k.targetId),re=Y&&Y.targetMismatches.get(k.targetId)!=null,ae=k.view.applyChanges(F,U.isPrimaryClient,ie,re);return nS(U,k.targetId,ae.Ma),ae.snapshot}(n,v,S,I);const o=await $w(n.localStore,e,!0),u=new FP(e,o.gs),h=u.Sa(o.documents),p=mh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,p);nS(n,t,m.Ma);const g=new BP(e,t,u);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function QP(n,e,t){const i=Me(n),a=i.ka.get(e),o=i.qa.get(a.targetId);if(o.length>1)return i.qa.set(a.targetId,o.filter(u=>!Mp(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await my(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&pv(i.remoteStore,a.targetId),yy(i,a.targetId)}).catch(tu)):(yy(i,a.targetId),await my(i.localStore,a.targetId,!0))}async function WP(n,e){const t=Me(n),i=t.ka.get(e),a=t.qa.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),pv(t.remoteStore,i.targetId))}async function YP(n,e,t){const i=i3(n);try{const a=await function(u,h){const p=Me(u),m=Wt.now(),g=h.reduce((I,x)=>I.add(x.key),Qe());let v,S;return p.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=ds(),U=Qe();return p.ds.getEntries(I,g).next(k=>{x=k,x.forEach((H,Y)=>{Y.isValidDocument()||(U=U.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(I,x)).next(k=>{v=k;const H=[];for(const Y of h){const F=hM(Y,v.get(Y.key).overlayedDocument);F!=null&&H.push(new No(Y.key,F,xA(F.value.mapValue),$i.exists(!0)))}return p.mutationQueue.addMutationBatch(I,m,H,h)}).next(k=>{S=k;const H=k.applyToLocalDocumentSet(v,U);return p.documentOverlayCache.saveOverlays(I,k.batchId,H)})}).then(()=>({batchId:S.batchId,changes:FA(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,h,p){let m=u.Wa[u.currentUser.toKey()];m||(m=new Yt(Ye)),m=m.insert(h,p),u.Wa[u.currentUser.toKey()]=m}(i,a.batchId,t),await gh(i,a.changes),await Fp(i.remoteStore)}catch(a){const o=vv(a,"Failed to persist write");t.reject(o)}}async function TC(n,e){const t=Me(n);try{const i=await uP(t.localStore,e);e.targetChanges.forEach((a,o)=>{const u=t.Ka.get(o);u&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?pt(u.Ba):a.removedDocuments.size>0&&(pt(u.Ba),u.Ba=!1))}),await gh(t,i,e)}catch(i){await tu(i)}}function tS(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const p=Me(u);p.onlineState=h;let m=!1;p.queries.forEach((g,v)=>{for(const S of v.ta)S.sa(h)&&(m=!0)}),m&&wv(p)}(i.eventManager,e),a.length&&i.La.p_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function XP(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Ka.get(e),o=a&&a.key;if(o){let u=new Yt(be.comparator);u=u.insert(o,Dn.newNoDocument(o,De.min()));const h=Qe().add(o),p=new Up(De.min(),new Map,new Yt(Ye),u,h);await TC(i,p),i.$a=i.$a.remove(o),i.Ka.delete(e),Av(i)}else await my(i.localStore,e,!1).then(()=>yy(i,e,t)).catch(tu)}async function ZP(n,e){const t=Me(n),i=e.batch.batchId;try{const a=await lP(t.localStore,e);SC(t,i,null),wC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await gh(t,a)}catch(a){await tu(a)}}async function JP(n,e,t){const i=Me(n);try{const a=await function(u,h){const p=Me(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return p.mutationQueue.lookupMutationBatch(m,h).next(v=>(pt(v!==null),g=v.keys(),p.mutationQueue.removeMutationBatch(m,v))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,g,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>p.localDocuments.getDocuments(m,g))})}(i.localStore,e);SC(i,e,t),wC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await gh(i,a)}catch(a){await tu(a)}}function wC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function SC(n,e,t){const i=Me(n);let a=i.Wa[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),i.Wa[i.currentUser.toKey()]=a}}function yy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||bC(n,i)})}function bC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(pv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Av(n))}function nS(n,e,t){for(const i of t)i instanceof yC?(n.Ua.addReference(i.key,e),e3(n,i)):i instanceof vC?(_e(bv,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||bC(n,i.key)):xe()}function e3(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(_e(bv,"New document in limbo: "+t),n.Qa.add(i),Av(n))}function Av(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new be(Ct.fromString(e)),i=n.za.next();n.Ka.set(i,new qP(t)),n.$a=n.$a.insert(t,i),fC(n.remoteStore,new sa(_r(kp(t.path)),i,"TargetPurposeLimboResolution",xp.ae))}}async function gh(n,e,t){const i=Me(n),a=[],o=[],u=[];i.ka.isEmpty()||(i.ka.forEach((h,p)=>{u.push(i.Ha(p,e,t).then(m=>{var g;if((m||t)&&i.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(p.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(m){a.push(m);const v=fv.Yi(p.targetId,m);o.push(v)}}))}),await Promise.all(u),i.La.p_(a),await async function(p,m){const g=Me(p);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ne.forEach(m,S=>ne.forEach(S.Hi,I=>g.persistence.referenceDelegate.addReference(v,S.targetId,I)).next(()=>ne.forEach(S.Ji,I=>g.persistence.referenceDelegate.removeReference(v,S.targetId,I)))))}catch(v){if(!nu(v))throw v;_e(dv,"Failed to update sequence numbers: "+v)}for(const v of m){const S=v.targetId;if(!v.fromCache){const I=g.Ts.get(S),x=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(x);g.Ts=g.Ts.insert(S,U)}}}(i.localStore,o))}async function t3(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){_e(bv,"User change. New user:",e.toKey());const i=await lC(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(p=>{p.reject(new ge(te.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gh(t,i.Rs)}}function n3(n,e){const t=Me(n),i=t.Ka.get(e);if(i&&i.Ba)return Qe().add(i.key);{let a=Qe();const o=t.qa.get(e);if(!o)return a;for(const u of o){const h=t.ka.get(u);a=a.unionWith(h.view.ba)}return a}}function AC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XP.bind(null,e),e.La.p_=jP.bind(null,e.eventManager),e.La.Ja=zP.bind(null,e.eventManager),e}function i3(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JP.bind(null,e),e}class Kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jp(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return oP(this.persistence,new rP,e.initialUser,this.serializer)}Xa(e){return new oC(hv.ri,this.serializer)}Za(e){return new pP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kd.provider={build:()=>new Kd};class r3 extends Kd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){pt(this.persistence.referenceDelegate instanceof Gd);const i=this.persistence.referenceDelegate.garbageCollector;return new qM(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new oC(i=>Gd.ri(i,t),this.serializer)}}class vy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=t3.bind(null,this.syncEngine),await LP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UP}()}createDatastore(e){const t=jp(e.databaseInfo.databaseId),i=function(o){return new vP(o)}(e.databaseInfo);return function(o,u,h,p){return new SP(o,u,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,o,u,h){return new AP(i,a,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>tS(this.syncEngine,t,0),function(){return Ww.D()?new Ww:new mP}())}createSyncEngine(e,t){return function(a,o,u,h,p,m,g){const v=new HP(a,o,u,h,p,m);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=Me(a);_e(vo,"RemoteStore shutting down."),o.W_.add(5),await _h(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vy.provider={build:()=>new vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="FirestoreClient";class s3{constructor(e,t,i,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=On.UNAUTHENTICATED,this.clientId=EA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async u=>{_e(Sa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(_e(Sa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=vv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ag(n,e){n.asyncQueue.verifyOperationInProgress(),_e(Sa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await lC(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function iS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await a3(n);_e(Sa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Xw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Xw(e.remoteStore,a)),n._onlineComponents=e}async function a3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Sa,"Using user provided OfflineComponentProvider");try{await Ag(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;jl("Error using user provided cache. Falling back to memory cache: "+t),await Ag(n,new Kd)}}else _e(Sa,"Using default OfflineComponentProvider"),await Ag(n,new r3(void 0));return n._offlineComponents}async function CC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Sa,"Using user provided OnlineComponentProvider"),await iS(n,n._uninitializedComponentsProvider._online)):(_e(Sa,"Using default OnlineComponentProvider"),await iS(n,new vy))),n._onlineComponents}function o3(n){return CC(n).then(e=>e.syncEngine)}async function Qd(n){const e=await CC(n),t=e.eventManager;return t.onListen=GP.bind(null,e.syncEngine),t.onUnlisten=QP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$P.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WP.bind(null,e.syncEngine),t}function l3(n,e,t={}){const i=new as;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,p,m){const g=new Cv({next:S=>{g.su(),u.enqueueAndForget(()=>Tv(o,v));const I=S.docs.has(h);!I&&S.fromCache?m.reject(new ge(te.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&p&&p.source==="server"?m.reject(new ge(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),v=new Sv(kp(h.path),g,{includeMetadataChanges:!0,Ta:!0});return Ev(o,v)}(await Qd(n),n.asyncQueue,e,t,i)),i.promise}function u3(n,e,t={}){const i=new as;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,p,m){const g=new Cv({next:S=>{g.su(),u.enqueueAndForget(()=>Tv(o,v)),S.fromCache&&p.source==="server"?m.reject(new ge(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),v=new Sv(h,g,{includeMetadataChanges:!0,Ta:!0});return Ev(o,v)}(await Qd(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(n,e,t){if(!t)throw new ge(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c3(n,e,t,i){if(e===!0&&i===!0)throw new ge(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sS(n){if(!be.isDocumentKey(n))throw new ge(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(be.isDocumentKey(n))throw new ge(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe()}function Oi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bp(n);throw new ge(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firestore.googleapis.com",oS=!0;class lS{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NC,this.ssl=oS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:oS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FM)throw new ge(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qp{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new y4;switch(i.type){case"firstParty":return new w4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=rS.get(t);i&&(_e("ComponentProvider","Removing Datastore"),rS.delete(t),i.terminate())}(this),Promise.resolve()}}function h3(n,e,t,i={}){var a;const o=(n=Oi(n,qp))._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o.host!==NC&&o.host!==h&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:i});if(!_a(p,u)&&(n._setSettings(p),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=On.MOCK_USER;else{m=Wy(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ge(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new On(v)}n._authCredentials=new v4(new vA(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xa(this.firestore,e,this._query)}}class Hn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class ha extends xa{constructor(e,t,i){super(e,t,kp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new be(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function yh(n,e,...t){if(n=Dt(n),IC("collection","path",e),n instanceof qp){const i=Ct.fromString(e,...t);return aS(i),new ha(n,null,i)}{if(!(n instanceof Hn||n instanceof ha))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ct.fromString(e,...t));return aS(i),new ha(n.firestore,null,i)}}function Ki(n,e,...t){if(n=Dt(n),arguments.length===1&&(e=EA.newId()),IC("doc","path",e),n instanceof qp){const i=Ct.fromString(e,...t);return sS(i),new Hn(n,null,new be(i))}{if(!(n instanceof Hn||n instanceof ha))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ct.fromString(e,...t));return sS(i),new Hn(n.firestore,n instanceof ha?n.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="AsyncQueue";class cS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new cC(this,"async_queue_retry"),this.bu=()=>{const i=bg();i&&_e(uS,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=bg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=bg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new as;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!nu(e))throw e;_e(uS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const a=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw fs("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=yv.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(a),a}Du(){this.gu&&xe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function hS(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class ba extends qp{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new cS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cS(e),this._firestoreClient=void 0,await e}}}function f3(n,e){const t=typeof n=="object"?n:Np(),i=typeof n=="string"?n:jd,a=dh(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=Qy("firestore");o&&h3(a,...o)}return a}function Hp(n){if(n._terminated)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d3(n),n._firestoreClient}function d3(n){var e,t,i;const a=n._freezeSettings(),o=function(h,p,m,g){return new L4(h,p,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,RC(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new s3(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gl(Rn.fromBase64String(e))}catch(t){throw new ge(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gl(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=/^__.*__$/;class m3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new ph(e,this.data,t,this.fieldTransforms)}}function OC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class xv{constructor(e,t,i,a,o,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new xv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.$u(e),a}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Wd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(OC(this.Lu)&&p3.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class _3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||jp(e)}ju(e,t,i,a=!1){return new xv({Lu:e,methodName:t,zu:i,path:Cn.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ov(n){const e=n._freezeSettings(),t=jp(n._databaseId);return new _3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DC(n,e,t,i,a,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,a);PC("Data must be an object, but it was:",u,i);const h=kC(i,u);let p,m;if(o.merge)p=new Bi(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const S=y3(e,v,t);if(!u.contains(S))throw new ge(te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);E3(g,S)||g.push(S)}p=new Bi(g),m=u.fieldTransforms.filter(v=>p.covers(v.field))}else p=null,m=u.fieldTransforms;return new m3(new Ni(h),p,m)}function g3(n,e,t,i=!1){return Dv(t,n.ju(i?4:3,e))}function Dv(n,e){if(MC(n=Dt(n)))return PC("Unsupported field value:",e,n),kC(n,e);if(n instanceof xC)return function(i,a){if(!OC(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,a){const o=[];let u=0;for(const h of i){let p=Dv(h,a.Uu(u));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(i,a){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Wt.fromDate(i);return{timestampValue:Hd(a.serializer,o)}}if(i instanceof Wt){const o=new Wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hd(a.serializer,o)}}if(i instanceof Iv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gl)return{bytesValue:JA(a.serializer,i._byteString)};if(i instanceof Hn){const o=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Nv)return function(u,h){return{mapValue:{fields:{[IA]:{stringValue:NA},[zd]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return sv(h.serializer,m)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${Bp(i)}`)}(n,e)}function kC(n,e){const t={};return wA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(n,(i,a)=>{const o=Dv(a,e.qu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function MC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Wt||n instanceof Iv||n instanceof Gl||n instanceof Hn||n instanceof xC||n instanceof Nv)}function PC(n,e,t){if(!MC(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Bp(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function y3(n,e,t){if((e=Dt(e))instanceof Rv)return e._internalPath;if(typeof e=="string")return LC(n,e);throw Wd("Field path arguments must be of type string or ",n,!1,void 0,t)}const v3=new RegExp("[~\\*/\\[\\]]");function LC(n,e,t){if(e.search(v3)>=0)throw Wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rv(...e.split("."))._internalPath}catch{throw Wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wd(n,e,t,i,a){const o=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||u)&&(p+=" (found",o&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new ge(te.INVALID_ARGUMENT,h+n+p)}function E3(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,i,a,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T3 extends VC{data(){return super.data()}}function kv(n,e){return typeof e=="string"?LC(n,e):e instanceof Rv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mv{}class jC extends Mv{}function w3(n,e,...t){let i=[];e instanceof Mv&&i.push(e),i=i.concat(t),function(o){const u=o.filter(p=>p instanceof Lv).length,h=o.filter(p=>p instanceof Pv).length;if(u>1||u>0&&h>0)throw new ge(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Pv extends jC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Pv(e,t,i)}_apply(e){const t=this._parse(e);return zC(e._query,t),new xa(e.firestore,e.converter,uy(e._query,t))}_parse(e){const t=Ov(e.firestore);return function(o,u,h,p,m,g,v){let S;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ge(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){dS(v,g);const x=[];for(const U of v)x.push(fS(p,o,U));S={arrayValue:{values:x}}}else S=fS(p,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||dS(v,g),S=g3(h,u,v,g==="in"||g==="not-in");return Qt.create(m,g,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lv extends Mv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,o){let u=a;const h=o.getFlattenedFilters();for(const p of h)zC(u,p),u=uy(u,p)}(e._query,t),new xa(e.firestore,e.converter,uy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vv extends jC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vv(e,t)}_apply(e){const t=function(a,o,u){if(a.startAt!==null)throw new ge(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ge(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wc(o,u)}(e._query,this._field,this._direction);return new xa(e.firestore,e.converter,function(a,o){const u=a.explicitOrderBy.concat([o]);return new iu(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function S3(n,e="asc"){const t=e,i=kv("orderBy",n);return Vv._create(i,t)}function fS(n,e,t){if(typeof(t=Dt(t))=="string"){if(t==="")throw new ge(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VA(e)&&t.indexOf("/")!==-1)throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ct.fromString(t));if(!be.isDocumentKey(i))throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Rw(n,new be(i))}if(t instanceof Hn)return Rw(n,t._key);throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bp(t)}.`)}function dS(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zC(n,e){const t=function(a,o){for(const u of a)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class b3{convertValue(e,t="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ro(e,(a,o)=>{i[a]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,a;const o=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[zd].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>qt(u.doubleValue));return new Nv(o)}convertGeoPoint(e){return new Iv(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const t=va(e);return new Wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ct.fromString(e);pt(sC(i));const a=new Kc(i.get(1),i.get(3)),o=new be(i.popFirst(5));return a.isEqual(t)||fs(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BC extends VC{constructor(e,t,i,a,o,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(kv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class gd extends BC{data(e={}){return super.data(e)}}class qC{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Rc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new gd(this._firestore,this._userDataWriter,i.key,i,new Rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const p=new gd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Rc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const p=new gd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Rc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,g=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),g=u.indexOf(h.doc.key)),{type:A3(h.type),doc:p,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function A3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n){n=Oi(n,Hn);const e=Oi(n.firestore,ba);return l3(Hp(e),n._key).then(t=>KC(e,n,t))}class Uv extends b3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function HC(n){n=Oi(n,xa);const e=Oi(n.firestore,ba),t=Hp(e),i=new Uv(e);return UC(n._query),u3(t,n._query).then(a=>new qC(e,i,n,a))}function jv(n,e,t){n=Oi(n,Hn);const i=Oi(n.firestore,ba),a=FC(n.converter,e,t);return zv(i,[DC(Ov(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,$i.none())])}function GC(n){return zv(Oi(n.firestore,ba),[new av(n._key,$i.none())])}function $C(n,e){const t=Oi(n.firestore,ba),i=Ki(n),a=FC(n.converter,e);return zv(t,[DC(Ov(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,$i.exists(!1))]).then(()=>i)}function C3(n,...e){var t,i,a;n=Dt(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||hS(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(hS(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let p,m,g;if(n instanceof Hn)m=Oi(n.firestore,ba),g=kp(n._key.path),p={next:v=>{e[u]&&e[u](KC(m,n,v))},error:e[u+1],complete:e[u+2]};else{const v=Oi(n,xa);m=Oi(v.firestore,ba),g=v._query;const S=new Uv(m);p={next:I=>{e[u]&&e[u](new qC(m,S,v,I))},error:e[u+1],complete:e[u+2]},UC(n._query)}return function(S,I,x,U){const k=new Cv(U),H=new Sv(I,k,x);return S.asyncQueue.enqueueAndForget(async()=>Ev(await Qd(S),H)),()=>{k.su(),S.asyncQueue.enqueueAndForget(async()=>Tv(await Qd(S),H))}}(Hp(m),g,h,p)}function zv(n,e){return function(i,a){const o=new as;return i.asyncQueue.enqueueAndForget(async()=>YP(await o3(i),a,o)),o.promise}(Hp(n),e)}function KC(n,e,t){const i=t.docs.get(e._key),a=new Uv(n);return new BC(n,a,e._key,i,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){eu=a})(Na),ga(new cs("firestore",(i,{instanceIdentifier:a,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new ba(new E4(i.getProvider("auth-internal")),new S4(u,i.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(m.options.projectId,g)}(u,a),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),xi(_w,gw,e),xi(_w,gw,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="firebasestorage.googleapis.com",R3="storageBucket",I3=2*60*1e3,N3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ar{constructor(e,t,i=0){super(Cg(e),`Firebase Storage: ${t} (${Cg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wr||(wr={}));function Cg(n){return"storage/"+n}function x3(){const n="An unknown error occurred, please check the error payload for server response.";return new Cr(wr.UNKNOWN,n)}function O3(){return new Cr(wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D3(){return new Cr(wr.CANCELED,"User canceled the upload/download.")}function k3(n){return new Cr(wr.INVALID_URL,"Invalid URL '"+n+"'.")}function M3(n){return new Cr(wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function pS(n){return new Cr(wr.INVALID_ARGUMENT,n)}function WC(){return new Cr(wr.APP_DELETED,"The Firebase app was deleted.")}function P3(n){return new Cr(wr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=qi.makeFromUrl(e,t)}catch{return new qi(e,"")}if(i.path==="")return i;throw M3(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function o(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),p={bucket:1,path:3};function m(ie){ie.path_=decodeURIComponent(ie.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${g}/b/${a}/o${S}`,"i"),x={bucket:1,path:3},U=t===QC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",H=new RegExp(`^https?://${U}/${a}/${k}`,"i"),F=[{regex:h,indices:p,postModify:o},{regex:I,indices:x,postModify:m},{regex:H,indices:{bucket:1,path:2},postModify:m}];for(let ie=0;ie<F.length;ie++){const re=F[ie],ae=re.regex.exec(e);if(ae){const P=ae[re.indices.bucket];let b=ae[re.indices.path];b||(b=""),i=new qi(P,b),re.postModify(i);break}}if(i==null)throw k3(e);return i}}class L3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(n,e,t){let i=1,a=null,o=null,u=!1,h=0;function p(){return h===2}let m=!1;function g(...k){m||(m=!0,e.apply(null,k))}function v(k){a=setTimeout(()=>{a=null,n(I,p())},k)}function S(){o&&clearTimeout(o)}function I(k,...H){if(m){S();return}if(k){S(),g.call(null,k,...H);return}if(p()||u){S(),g.call(null,k,...H);return}i<64&&(i*=2);let F;h===1?(h=2,F=0):F=(i+Math.random())*1e3,v(F)}let x=!1;function U(k){x||(x=!0,S(),!m&&(a!==null?(k||(h=2),clearTimeout(a),v(0)):k||(h=1)))}return v(0),o=setTimeout(()=>{u=!0,U(!0)},t),U}function U3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(n){return n!==void 0}function mS(n,e,t,i){if(i<e)throw pS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw pS(`Invalid value for '${n}'. Expected ${t} or less.`)}function z3(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Yd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yd||(Yd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,t,i,a,o,u,h,p,m,g,v,S=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=v,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,x)=>{this.resolve_=I,this.reject_=x,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new id(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const p=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===Yd.NO_ERROR,p=o.getStatus();if(!h||F3(p,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Yd.ABORT;i(!1,new id(!1,null,g));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new id(m,o))})},t=(i,a)=>{const o=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());j3(p)?o(p):o()}catch(p){u(p)}else if(h!==null){const p=x3();p.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,p)):u(p)}else if(a.canceled){const p=this.appDelete_?WC():D3();u(p)}else{const p=O3();u(p)}};this.canceled_?t(!1,new id(!1,null,!0)):this.backoffId_=V3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&U3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class id{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function q3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function H3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function G3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function $3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function K3(n,e,t,i,a,o,u=!0){const h=z3(n.urlParams),p=n.url+h,m=Object.assign({},n.headers);return G3(m,e),q3(m,t),H3(m,o),$3(m,i),new B3(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function W3(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this._service=e,t instanceof qi?this._location=t:this._location=qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xd(e,t)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W3(this._location.path)}get storage(){return this._service}get parent(){const e=Q3(this._location.path);if(e===null)return null;const t=new qi(this._location.bucket,e);return new Xd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw P3(e)}}function _S(n,e){const t=e==null?void 0:e[R3];return t==null?null:qi.makeFromBucketSpec(t,n)}function Y3(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:Wy(a,n.app.options.projectId))}class X3{constructor(e,t,i,a,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=QC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I3,this._maxUploadRetryTime=N3,this._requests=new Set,a!=null?this._bucket=qi.makeFromBucketSpec(a,this._host):this._bucket=_S(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qi.makeFromBucketSpec(this._url,e):this._bucket=_S(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xd(this,e)}_makeRequest(e,t,i,a,o=!0){if(this._deleted)return new L3(WC());{const u=K3(e,this._appId,i,a,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const gS="@firebase/storage",yS="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="storage";function Z3(n=Np(),e){n=Dt(n);const i=dh(n,YC).getImmediate({identifier:e}),a=Qy("storage");return a&&J3(i,...a),i}function J3(n,e,t,i={}){Y3(n,e,t,i)}function e5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new X3(t,i,a,e,Na)}function t5(){ga(new cs(YC,e5,"PUBLIC").setMultipleInstances(!0)),xi(gS,yS,""),xi(gS,yS,"esm2017")}t5();function Fv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function XC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n5=XC,ZC=new fh("auth","Firebase",XC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Ip("@firebase/auth");function i5(n,...e){Zd.logLevel<=Ge.WARN&&Zd.warn(`Auth (${Na}): ${n}`,...e)}function yd(n,...e){Zd.logLevel<=Ge.ERROR&&Zd.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,...e){throw Bv(n,...e)}function yr(n,...e){return Bv(n,...e)}function JC(n,e,t){const i=Object.assign(Object.assign({},n5()),{[e]:t});return new fh("auth","Firebase",i).create(e,{appName:n.name})}function os(n){return JC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ZC.create(n,...e)}function Ie(n,e,...t){if(!n)throw Bv(e,...t)}function es(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yd(e),new Error(e)}function ps(n,e){n||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function r5(){return vS()==="http:"||vS()==="https:"}function vS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r5()||$D()||"connection"in navigator)?navigator.onLine:!0}function a5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ps(t>e,"Short delay should be less than long delay!"),this.isMobile=Yy()||aA()}get(){return s5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e){ps(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=new vh(3e4,6e4);function Oa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Da(n,e,t,i,a={}){return tR(n,a,async()=>{let o={},u={};i&&(e==="GET"?u=i:o={body:JSON.stringify(i)});const h=Jl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},o);return GD()||(m.referrerPolicy="no-referrer"),eR.fetch()(nR(n,n.config.apiHost,t,h),m)})}async function tR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},o5),e);try{const a=new c5(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw rd(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw rd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw rd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw rd(n,"user-disabled",u);const g=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw JC(n,g,m);Yi(n,g)}}catch(a){if(a instanceof Ar)throw a;Yi(n,"network-request-failed",{message:String(a)})}}async function Eh(n,e,t,i,a={}){const o=await Da(n,e,t,i,a);return"mfaPendingCredential"in o&&Yi(n,"multi-factor-auth-required",{_serverResponse:o}),o}function nR(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?qv(n.config,a):`${n.config.apiScheme}://${a}`}function u5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),l5.get())})}}function rd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=yr(n,e,i);return a.customData._tokenResponse=t,a}function ES(n){return n!==void 0&&n.enterprise!==void 0}class h5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return u5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function f5(n,e){return Da(n,"GET","/v2/recaptchaConfig",Oa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(n,e){return Da(n,"POST","/v1/accounts:delete",e)}async function iR(n,e){return Da(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p5(n,e=!1){const t=Dt(n),i=await t.getIdToken(e),a=Hv(i);Ie(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:a,token:i,authTime:kc(Rg(a.auth_time)),issuedAtTime:kc(Rg(a.iat)),expirationTime:kc(Rg(a.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Rg(n){return Number(n)*1e3}function Hv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return yd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Pd(t);return a?JSON.parse(a):(yd("Failed to decode base64 JWT payload"),null)}catch(a){return yd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function TS(n){const e=Hv(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ar&&m5(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function m5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Jc(n,iR(t,{idToken:i}));Ie(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?rR(o.providerUserInfo):[],h=y5(n.providerData,u),p=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),g=p?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ty(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function g5(n){const e=Dt(n);await Jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y5(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function rR(n){return n.map(e=>{var{providerId:t}=e,i=Fv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(n,e){const t=await tR(n,{},async()=>{const i=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,u=nR(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",eR.fetch()(u,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function E5(n,e){return Da(n,"POST","/v2/accounts:revokeToken",Oa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=TS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await v5(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,u=new Dl;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ie(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(Ie(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ts{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,o=Fv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ty(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Jc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return p5(this,e)}reload(){return g5(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ts(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Jd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Jc(this,d5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,o,u,h,p,m,g;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(a=t.email)!==null&&a!==void 0?a:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,U=(h=t.tenantId)!==null&&h!==void 0?h:void 0,k=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:F,emailVerified:ie,isAnonymous:re,providerData:ae,stsTokenManager:P}=t;Ie(F&&P,e,"internal-error");const b=Dl.fromJSON(this.name,P);Ie(typeof F=="string",e,"internal-error"),ea(v,e.name),ea(S,e.name),Ie(typeof ie=="boolean",e,"internal-error"),Ie(typeof re=="boolean",e,"internal-error"),ea(I,e.name),ea(x,e.name),ea(U,e.name),ea(k,e.name),ea(H,e.name),ea(Y,e.name);const w=new ts({uid:F,auth:e,email:S,emailVerified:ie,displayName:v,isAnonymous:re,photoURL:x,phoneNumber:I,tenantId:U,stsTokenManager:b,createdAt:H,lastLoginAt:Y});return ae&&Array.isArray(ae)&&(w.providerData=ae.map(R=>Object.assign({},R))),k&&(w._redirectEventId=k),w}static async _fromIdTokenResponse(e,t,i=!1){const a=new Dl;a.updateFromServerResponse(t);const o=new ts({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Jd(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ie(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?rR(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new Dl;h.updateFromIdToken(i);const p=new ts({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Ty(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new Map;function ns(n){ps(n instanceof Function,"Expected a class definition");let e=wS.get(n);return e?(ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sR.type="NONE";const SS=sR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n,e,t){return`firebase:${n}:${e}:${t}`}class kl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=vd(this.userKey,a.apiKey,o),this.fullPersistenceKey=vd("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ts._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new kl(ns(SS),e,i);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||ns(SS);const u=vd(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(u);if(g){const v=ts._fromJSON(e,g);m!==o&&(h=v),o=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new kl(o,e,i):(o=p[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new kl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hR(e))return"Blackberry";if(fR(e))return"Webos";if(oR(e))return"Safari";if((e.includes("chrome/")||lR(e))&&!e.includes("edge/"))return"Chrome";if(cR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function aR(n=Mn()){return/firefox\//i.test(n)}function oR(n=Mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lR(n=Mn()){return/crios\//i.test(n)}function uR(n=Mn()){return/iemobile/i.test(n)}function cR(n=Mn()){return/android/i.test(n)}function hR(n=Mn()){return/blackberry/i.test(n)}function fR(n=Mn()){return/webos/i.test(n)}function Gv(n=Mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function T5(n=Mn()){var e;return Gv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function w5(){return KD()&&document.documentMode===10}function dR(n=Mn()){return Gv(n)||cR(n)||fR(n)||hR(n)||/windows phone/i.test(n)||uR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n,e=[]){let t;switch(n){case"Browser":t=bS(Mn());break;case"Worker":t=`${bS(Mn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((u,h)=>{try{const p=e(o);u(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(n,e={}){return Da(n,"GET","/v2/passwordPolicy",Oa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=6;class C5{constructor(e){var t,i,a,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:A5,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,o,u,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(o=p.containsUppercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AS(this),this.idTokenSubscription=new AS(this),this.beforeStateQueue=new S5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ns(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await kl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await iR(this,{idToken:e}),i=await ts._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=a5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(os(this));const t=e?Dt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b5(this),t=new C5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await E5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ns(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await kl.create(this,[ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&i5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oo(n){return Dt(n)}class AS{constructor(e){this.auth=e,this.observer=null,this.addObserver=rk(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I5(n){Gp=n}function mR(n){return Gp.loadJS(n)}function N5(){return Gp.recaptchaEnterpriseScript}function x5(){return Gp.gapiScript}function O5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class D5{constructor(){this.enterprise=new k5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class k5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const M5="recaptcha-enterprise",_R="NO_RECAPTCHA";class P5{constructor(e){this.type=M5,this.auth=Oo(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{f5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new h5(p);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(p=>{h(p)})})}function a(o,u,h){const p=window.grecaptcha;ES(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(m=>{u(m)}).catch(()=>{u(_R)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D5().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{i(this.auth).then(h=>{if(!t&&ES(window.grecaptcha))a(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=N5();p.length!==0&&(p+=h),mR(p).then(()=>{a(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function CS(n,e,t,i=!1,a=!1){const o=new P5(n);let u;if(a)u=_R;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function wy(n,e,t,i,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await CS(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await CS(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(n,e){const t=dh(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(_a(o,e??{}))return a;Yi(a,"already-initialized")}return t.initialize({options:e})}function V5(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ns);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function U5(n,e,t){const i=Oo(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=gR(e),{host:u,port:h}=j5(e),p=h===null?"":`:${h}`,m={url:`${o}//${u}${p}/`},g=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(_a(m,i.config.emulator)&&_a(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,z5()}function gR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j5(n){const e=gR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:RS(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:RS(u)}}}function RS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,t){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function F5(n,e){return Da(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(n,e){return Eh(n,"POST","/v1/accounts:signInWithPassword",Oa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",Oa(n,e))}async function H5(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",Oa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends $v{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new eh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new eh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wy(e,t,"signInWithPassword",B5);case"emailLink":return q5(e,{email:this._email,oobCode:this._password});default:Yi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wy(e,i,"signUpPassword",F5);case"emailLink":return H5(e,{idToken:t,email:this._email,oobCode:this._password});default:Yi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n,e){return Eh(n,"POST","/v1/accounts:signInWithIdp",Oa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5="http://localhost";class Eo extends $v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,o=Fv(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new Eo(i,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ml(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ml(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ml(e,t)}buildRequest(){const e={requestUri:G5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K5(n){const e=wc(Sc(n)).link,t=e?wc(Sc(e)).deep_link_id:null,i=wc(Sc(n)).deep_link_id;return(i?wc(Sc(i)).link:null)||i||t||e||n}class Kv{constructor(e){var t,i,a,o,u,h;const p=wc(Sc(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,g=(i=p.oobCode)!==null&&i!==void 0?i:null,v=$5((a=p.mode)!==null&&a!==void 0?a:null);Ie(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(o=p.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=K5(e);try{return new Kv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.providerId=su.PROVIDER_ID}static credential(e,t){return eh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Kv.parseLink(t);return Ie(i,"argument-error"),eh._fromEmailAndCode(e,i.code,i.tenantId)}}su.PROVIDER_ID="password";su.EMAIL_PASSWORD_SIGN_IN_METHOD="password";su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends yR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Th{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return na.credential(t,i)}catch{return null}}}na.GOOGLE_SIGN_IN_METHOD="google.com";na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Th{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.GITHUB_SIGN_IN_METHOD="github.com";ia.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Th{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ra.credential(t,i)}catch{return null}}}ra.TWITTER_SIGN_IN_METHOD="twitter.com";ra.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(n,e){return Eh(n,"POST","/v1/accounts:signUp",Oa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await ts._fromIdTokenResponse(e,i,a),u=IS(i);return new To({user:o,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=IS(i);return new To({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function IS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends Ar{constructor(e,t,i,a){var o;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ep.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ep(e,t,i,a)}}function vR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ep._fromErrorAndOperation(n,o,e,i):o})}async function W5(n,e,t=!1){const i=await Jc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(n,e,t=!1){const{auth:i}=n;if(Zn(i.app))return Promise.reject(os(i));const a="reauthenticate";try{const o=await Jc(n,vR(i,a,e,n),t);Ie(o.idToken,i,"internal-error");const u=Hv(o.idToken);Ie(u,i,"internal-error");const{sub:h}=u;return Ie(n.uid===h,i,"user-mismatch"),To._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Yi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(n,e,t=!1){if(Zn(n.app))return Promise.reject(os(n));const i="signIn",a=await vR(n,i,e),o=await To._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(o.user),o}async function X5(n,e){return ER(Oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n){const e=Oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z5(n,e,t){if(Zn(n.app))return Promise.reject(os(n));const i=Oo(n),u=await wy(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q5).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&TR(n),p}),h=await To._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function J5(n,e,t){return Zn(n.app)?Promise.reject(os(n)):X5(Dt(n),su.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&TR(n),i})}function e9(n,e,t,i){return Dt(n).onIdTokenChanged(e,t,i)}function t9(n,e,t){return Dt(n).beforeAuthStateChanged(e,t)}function n9(n,e,t,i){return Dt(n).onAuthStateChanged(e,t,i)}function i9(n){return Dt(n).signOut()}const tp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tp,"1"),this.storage.removeItem(tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=1e3,s9=10;class SR extends wR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);w5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,s9):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},r9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SR.type="LOCAL";const a9=SR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends wR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bR.type="SESSION";const AR=bR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new $p(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async m=>m(t.origin,o)),p=await o9(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((h,p)=>{const m=Qv("",20);a.port1.start();const g=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const S=v;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(S.data.response);break;default:clearTimeout(g),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function u9(n){vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function c9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h9(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function f9(){return CR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebaseLocalStorageDb",d9=1,np="firebaseLocalStorage",IR="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kp(n,e){return n.transaction([np],e?"readwrite":"readonly").objectStore(np)}function p9(){const n=indexedDB.deleteDatabase(RR);return new wh(n).toPromise()}function Sy(){const n=indexedDB.open(RR,d9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(np,{keyPath:IR})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(np)?e(i):(i.close(),await p9(),e(await Sy()))})})}async function NS(n,e,t){const i=Kp(n,!0).put({[IR]:e,value:t});return new wh(i).toPromise()}async function m9(n,e){const t=Kp(n,!1).get(e),i=await new wh(t).toPromise();return i===void 0?null:i.value}function xS(n,e){const t=Kp(n,!0).delete(e);return new wh(t).toPromise()}const _9=800,g9=3;class NR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>g9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$p._getInstance(f9()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await c9(),!this.activeServiceWorker)return;this.sender=new l9(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await NS(e,tp,"1"),await xS(e,tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>NS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>m9(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Kp(a,!1).getAll();return new wh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NR.type="LOCAL";const y9=NR;new vh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(n,e){return e?ns(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends $v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ml(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function E9(n){return ER(n.auth,new Wv(n),n.bypassAuthState)}function T9(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Y5(t,new Wv(n),n.bypassAuthState)}async function w9(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),W5(t,new Wv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E9;case"linkViaPopup":case"linkViaRedirect":return w9;case"reauthViaPopup":case"reauthViaRedirect":return T9;default:Yi(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=new vh(2e3,1e4);class Il extends xR{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=Qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S9.get())};e()}}Il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="pendingRedirect",Ed=new Map;class A9 extends xR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ed.get(this.auth._key());if(!e){try{const i=await C9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ed.set(this.auth._key(),e)}return this.bypassAuthState||Ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C9(n,e){const t=N9(e),i=I9(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function R9(n,e){Ed.set(n._key(),e)}function I9(n){return ns(n._redirectPersistence)}function N9(n){return vd(b9,n.config.apiKey,n.name)}async function x9(n,e,t=!1){if(Zn(n.app))return Promise.reject(os(n));const i=Oo(n),a=v9(i,e),u=await new A9(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=10*60*1e3;class D9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!OR(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O9&&this.cachedEventUids.clear(),this.cachedEventUids.has(OS(e))}saveEventToCache(e){this.cachedEventUids.add(OS(e)),this.lastProcessedEventTime=Date.now()}}function OS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function OR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(n,e={}){return Da(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L9=/^https?/;async function V9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await M9(n);for(const t of e)try{if(U9(t))return}catch{}Yi(n,"unauthorized-domain")}function U9(n){const e=Ey(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!L9.test(t))return!1;if(P9.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=new vh(3e4,6e4);function DS(){const n=vr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function z9(n){return new Promise((e,t)=>{var i,a,o;function u(){DS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DS(),t(yr(n,"network-request-failed"))},timeout:j9.get()})}if(!((a=(i=vr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=vr().gapi)===null||o===void 0)&&o.load)u();else{const h=O5("iframefcb");return vr()[h]=()=>{gapi.load?u():t(yr(n,"network-request-failed"))},mR(`${x5()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Td=null,e})}let Td=null;function F9(n){return Td=Td||z9(n),Td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=new vh(5e3,15e3),q9="__/auth/iframe",H9="emulator/auth/iframe",G9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K9(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qv(e,H9):`https://${n.config.authDomain}/${q9}`,i={apiKey:e.apiKey,appName:n.name,v:Na},a=$9.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Jl(i).slice(1)}`}async function Q9(n){const e=await F9(n),t=vr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:K9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G9,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const u=yr(n,"network-request-failed"),h=vr().setTimeout(()=>{o(u)},B9.get());function p(){vr().clearTimeout(h),a(i)}i.ping(p).then(p,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y9=500,X9=600,Z9="_blank",J9="http://localhost";class kS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eL(n,e,t,i=Y9,a=X9){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},W9),{width:i.toString(),height:a.toString(),top:o,left:u}),m=Mn().toLowerCase();t&&(h=lR(m)?Z9:t),aR(m)&&(e=e||J9,p.scrollbars="yes");const g=Object.entries(p).reduce((S,[I,x])=>`${S}${I}=${x},`,"");if(T5(m)&&h!=="_self")return tL(e||"",h),new kS(null);const v=window.open(e||"",h,g);Ie(v,n,"popup-blocked");try{v.focus()}catch{}return new kS(v)}function tL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="__/auth/handler",iL="emulator/auth/handler",rL=encodeURIComponent("fac");async function MS(n,e,t,i,a,o){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Na,eventId:a};if(e instanceof yR){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Xg(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))u[g]=v}if(e instanceof Th){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(u.scopes=g.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const p=await n._getAppCheckToken(),m=p?`#${rL}=${encodeURIComponent(p)}`:"";return`${sL(n)}?${Jl(h).slice(1)}${m}`}function sL({config:n}){return n.emulator?qv(n,iL):`https://${n.authDomain}/${nL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="webStorageSupport";class aL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AR,this._completeRedirectFn=x9,this._overrideRedirectResult=R9}async _openPopup(e,t,i,a){var o;ps((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await MS(e,t,i,Ey(),a);return eL(e,u,Qv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await MS(e,t,i,Ey(),a);return u9(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(ps(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Q9(e),i=new D9(e);return t.register("authEvent",a=>(Ie(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ig,{type:Ig},a=>{var o;const u=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Ig];u!==void 0&&t(!!u),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dR()||oR()||Gv()}}const oL=aL;var PS="@firebase/auth",LS="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cL(n){ga(new cs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pR(n)},m=new R5(i,a,o,p);return V5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ga(new cs("auth-internal",e=>{const t=Oo(e.getProvider("auth").getImmediate());return(i=>new lL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(PS,LS,uL(n)),xi(PS,LS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=5*60,fL=sA("authIdTokenMaxAge")||hL;let VS=null;const dL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>fL)return;const a=t==null?void 0:t.token;VS!==a&&(VS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function pL(n=Np()){const e=dh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=L5(n,{popupRedirectResolver:oL,persistence:[y9,a9,AR]}),i=sA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=dL(o.toString());t9(t,u,()=>u(t.currentUser)),e9(t,h=>u(h))}}const a=iA("auth");return a&&U5(t,`http://${a}`),t}function mL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}I5({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const o=yr("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",mL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cL("Browser");var US={};const jS="@firebase/database",zS="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DR="";function _L(n){DR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),an(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:qc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return _s(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gL(e)}}catch{}return new yL},po=kR("localStorage"),vL=kR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Ip("@firebase/database"),EL=function(){let n=1;return function(){return n++}}(),MR=function(n){const e=ok(n),t=new ik;t.update(e);const i=t.digest();return Ky.encodeByteArray(i)},Sh=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Sh.apply(null,i):typeof i=="object"?e+=an(i):e+=i,e+=" "}return e};let Mc=null,FS=!0;const TL=function(n,e){fe(!0,"Can't turn on custom loggers persistently."),Pl.logLevel=Ge.VERBOSE,Mc=Pl.log.bind(Pl)},kn=function(...n){if(FS===!0&&(FS=!1,Mc===null&&vL.get("logging_enabled")===!0&&TL()),Mc){const e=Sh.apply(null,n);Mc(e)}},bh=function(n){return function(...e){kn(n,...e)}},by=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sh(...n);Pl.error(e)},ms=function(...n){const e=`FIREBASE FATAL ERROR: ${Sh(...n)}`;throw Pl.error(e),new Error(e)},ei=function(...n){const e="FIREBASE WARNING: "+Sh(...n);Pl.warn(e)},wL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ei("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},PR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},SL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},$l="[MIN_NAME]",wo="[MAX_NAME]",au=function(n,e){if(n===e)return 0;if(n===$l||e===wo)return-1;if(e===$l||n===wo)return 1;{const t=BS(n),i=BS(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},bL=function(n,e){return n===e?0:n<e?-1:1},mc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+an(e))},Yv=function(n){if(typeof n!="object"||n===null)return an(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=an(e[i]),t+=":",t+=Yv(n[e[i]]);return t+="}",t},LR=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const VR=function(n){fe(!PR(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,o,u,h,p;n===0?(o=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,u=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,u=Math.round(n/Math.pow(2,1-i-t))));const m=[];for(p=t;p;p-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(p=e;p;p-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(a?1:0),m.reverse();const g=m.join("");let v="";for(p=0;p<64;p+=8){let S=parseInt(g.substr(p,8),2).toString(16);S.length===1&&(S="0"+S),v=v+S}return v.toLowerCase()},AL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function RL(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const IL=new RegExp("^-?(0*)\\d{1,10}$"),NL=-2147483648,xL=2147483647,BS=function(n){if(IL.test(n)){const e=Number(n);if(e>=NL&&e<=xL)return e}return null},ou=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ei("Exception was thrown by user callback.",t),e},Math.floor(0))}},OL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Zn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ei(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ei(e)}}class wd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}wd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="5",UR="v",jR="s",zR="r",FR="f",BR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qR="ls",HR="p",Ay="ac",GR="websocket",$R="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t,i,a,o=!1,u="",h=!1,p=!1,m=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=po.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&po.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ML(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function QR(n,e,t){fe(typeof e=="string","typeof type must == string"),fe(typeof t=="object","typeof params must == object");let i;if(e===GR)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===$R)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ML(n)&&(t.ns=n.namespace);const a=[];return ni(t,(o,u)=>{a.push(o+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.counters_={}}incrementCounter(e,t=1){_s(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return UD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng={},xg={};function Zv(n){const e=n.toString();return Ng[e]||(Ng[e]=new PL),Ng[e]}function LL(n,e){const t=n.toString();return xg[t]||(xg[t]=e()),xg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&ou(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="start",UL="close",jL="pLPCommand",zL="pRTLPCB",WR="id",YR="pw",XR="ser",FL="cb",BL="seg",qL="ts",HL="d",GL="dframe",ZR=1870,JR=30,$L=ZR-JR,KL=25e3,QL=3e4;class Nl{constructor(e,t,i,a,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bh(e),this.stats_=Zv(t),this.urlFn=p=>(this.appCheckToken&&(p[Ay]=this.appCheckToken),QR(t,$R,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new VL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(QL)),SL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jv((...o)=>{const[u,h,p,m,g]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===qS)this.id=h,this.password=p;else if(u===UL)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[qS]="t",i[XR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[FL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[UR]=Xv,this.transportSessionId&&(i[jR]=this.transportSessionId),this.lastSessionId&&(i[qR]=this.lastSessionId),this.applicationId&&(i[HR]=this.applicationId),this.appCheckToken&&(i[Ay]=this.appCheckToken),typeof location<"u"&&location.hostname&&BR.test(location.hostname)&&(i[zR]=FR);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nl.forceAllow_=!0}static forceDisallow(){Nl.forceDisallow_=!0}static isAvailable(){return Nl.forceAllow_?!0:!Nl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!AL()&&!CL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=an(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=tA(t),a=LR(i,$L);for(let o=0;o<a.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[GL]="t",i[WR]=e,i[YR]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=an(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Jv{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=EL(),window[jL+this.uniqueCallbackIdentifier]=e,window[zL+this.uniqueCallbackIdentifier]=t,this.myIFrame=Jv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){kn("frame writing exception"),h.stack&&kn(h.stack),kn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WR]=this.myID,e[YR]=this.myPW,e[XR]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+JR+i.length<=ZR;){const u=this.pendingSegs.shift();i=i+"&"+BL+a+"="+u.seg+"&"+qL+a+"="+u.ts+"&"+HL+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(KL)),o=()=>{clearTimeout(a),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{kn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=16384,YL=45e3;let ip=null;typeof MozWebSocket<"u"?ip=MozWebSocket:typeof WebSocket<"u"&&(ip=WebSocket);class Fi{constructor(e,t,i,a,o,u,h){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bh(this.connId),this.stats_=Zv(t),this.connURL=Fi.connectionURL_(t,u,h,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,o){const u={};return u[UR]=Xv,typeof location<"u"&&location.hostname&&BR.test(location.hostname)&&(u[zR]=FR),t&&(u[jR]=t),i&&(u[qR]=i),a&&(u[Ay]=a),o&&(u[HR]=o),QR(e,GR,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,po.set("previous_websocket_failure",!0);try{let i;QD(),this.mySock=new ip(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Fi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ip!==null&&!Fi.forceDisallow_}static previouslyFailed(){return po.isInMemoryStorage||po.get("previous_websocket_failure")===!0}markConnectionHealthy(){po.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=qc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(fe(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=an(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=LR(t,WL);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(YL))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Fi.responsesRequiredToBeHealthy=2;Fi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{static get ALL_TRANSPORTS(){return[Nl,Fi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Fi&&Fi.isAvailable();let i=t&&!Fi.previouslyFailed();if(e.webSocketOnly&&(t||ei("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fi];else{const a=this.transports_=[];for(const o of th.ALL_TRANSPORTS)o&&o.isAvailable()&&a.push(o);th.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}th.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=6e4,ZL=5e3,JL=10*1024,e6=100*1024,Og="t",HS="d",t6="s",GS="r",n6="e",$S="o",KS="a",QS="n",WS="p",i6="h";class r6{constructor(e,t,i,a,o,u,h,p,m,g){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bh("c:"+this.id+":"),this.transportManager_=new th(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Pc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>e6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Og in e){const t=e[Og];t===KS?this.upgradeIfSecondaryHealthy_():t===GS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===$S&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=mc("t",e),i=mc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:WS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=mc("t",e),i=mc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=mc(Og,e);if(HS in e){const i=e[HS];if(t===i6){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===QS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===t6?this.onConnectionShutdown_(i):t===GS?this.onReset_(i):t===n6?by("Server Error: "+i):t===$S?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):by("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xv!==i&&ei("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Pc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(XL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ZL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:WS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(po.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.allowedEvents_=e,this.listeners_={},fe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let o=0;o<a.length;o++)if(a[o].callback===t&&(!i||i===a[o].context)){a.splice(o,1);return}}validateEventType_(e){fe(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends tI{static getInstance(){return new rp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return fe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=32,XS=768;class Tt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new Tt("")}function Ke(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Aa(n){return n.pieces_.length-n.pieceNum_}function bt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Tt(n.pieces_,e)}function nI(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function s6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function iI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Tt(e,0)}function on(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Tt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new Tt(t,0)}function $e(n){return n.pieceNum_>=n.pieces_.length}function Bn(n,e){const t=Ke(n),i=Ke(e);if(t===null)return e;if(t===i)return Bn(bt(n),bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function sI(n,e){if(Aa(n)!==Aa(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Hi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Aa(n)>Aa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class a6{constructor(e,t){this.errorPrefix_=t,this.parts_=iI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Rp(this.parts_[i]);aI(this)}}function o6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Rp(e),aI(n)}function l6(n){const e=n.parts_.pop();n.byteLength_-=Rp(e),n.parts_.length>0&&(n.byteLength_-=1)}function aI(n){if(n.byteLength_>XS)throw new Error(n.errorPrefix_+"has a key path longer than "+XS+" bytes ("+n.byteLength_+").");if(n.parts_.length>YS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YS+") or object contains a cycle "+ho(n))}function ho(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends tI{static getInstance(){return new e0}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return fe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=1e3,u6=60*5*1e3,ZS=30*1e3,c6=1.3,h6=3e4,f6="server_kill",JS=3;class ls extends eI{constructor(e,t,i,a,o,u,h,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=ls.nextPersistentConnectionId_++,this.log_=bh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_c,this.maxReconnectDelay_=u6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");e0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&rp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,o={r:a,a:e,b:t};this.log_(an(o)),fe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new Cp,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,a){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),fe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),fe(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const o={p:i},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,h=>{const p=h.d,m=h.s;ls.warnOnListenWarnings_(p,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(m,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&_s(e,"w")){const i=Ul(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();ei(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||nk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=tk(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const o=a.s,u=a.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),fe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";a&&(o.q=i,o.t=a),this.sendRequest(u,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,o){this.initConnection_();const u={p:t,d:i};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+an(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):by("Unrecognized action received from server: "+an(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){fe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>h6&&(this.reconnectDelay_=_c),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*c6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+ls.nextConnectionId_++,o=this.lastSessionId;let u=!1,h=null;const p=function(){h?h.close():(u=!0,i())},m=function(v){fe(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:p,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,S]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);u?kn("getToken() completed but was canceled"):(kn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=S&&S.token,h=new r6(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,I=>{ei(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(f6)},o))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&ei(v),p())}}}interrupt(e){kn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){kn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xg(this.interruptReasons_)&&(this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>Yv(o)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new Tt(e).toString();let a;if(this.listens.has(i)){const o=this.listens.get(i);a=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){kn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=JS&&(this.reconnectDelay_=ZS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){kn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=JS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+DR.replace(/\./g,"-")]=1,Yy()?e["framework.cordova"]=1:aA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=rp.getInstance().currentlyOnline();return Xg(this.interruptReasons_)&&e}}ls.nextPersistentConnectionId_=0;ls.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Fe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Fe($l,e),a=new Fe($l,t);return this.compare(i,a)!==0}minPost(){return Fe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd;class oI extends Qp{static get __EMPTY_NODE(){return sd}static set __EMPTY_NODE(e){sd=e}compare(e,t){return au(e.name,t.name)}isDefinedOn(e){throw Zl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Fe.MIN}maxPost(){return new Fe(wo,sd)}makePost(e,t){return fe(typeof e=="string","KeyIndex indexValue must always be a string."),new Fe(e,sd)}toString(){return".key"}}const Ll=new oI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,i,a,o=null){this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class vn{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??vn.RED,this.left=a??Jn.EMPTY_NODE,this.right=o??Jn.EMPTY_NODE}copy(e,t,i,a,o){return new vn(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return o<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Jn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}vn.RED=!0;vn.BLACK=!1;class d6{copy(e,t,i,a,o){return this}insert(e,t,i){return new vn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Jn{constructor(e,t=Jn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Jn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vn.BLACK,null,null))}remove(e){return new Jn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ad(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ad(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ad(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ad(this.root_,null,this.comparator_,!0,e)}}Jn.EMPTY_NODE=new d6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n,e){return au(n.name,e.name)}function t0(n,e){return au(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy;function m6(n){Cy=n}const lI=function(n){return typeof n=="number"?"number:"+VR(n):"string:"+n},uI=function(n){if(n.isLeafNode()){const e=n.val();fe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&_s(e,".sv"),"Priority must be a string or number.")}else fe(n===Cy||n.isEmpty(),"priority of unexpected type.");fe(n===Cy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eb;class gn{static set __childrenNodeConstructor(e){eb=e}static get __childrenNodeConstructor(){return eb}constructor(e,t=gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,fe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),uI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:Ke(e)===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ke(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(fe(i!==".priority"||Aa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=VR(this.value_):e+=this.value_,this.lazyHash_=MR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gn.__childrenNodeConstructor?-1:(fe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=gn.VALUE_TYPE_ORDER.indexOf(t),o=gn.VALUE_TYPE_ORDER.indexOf(i);return fe(a>=0,"Unknown leaf type: "+t),fe(o>=0,"Unknown leaf type: "+i),a===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cI,hI;function _6(n){cI=n}function g6(n){hI=n}class y6 extends Qp{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),o=i.compareTo(a);return o===0?au(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Fe.MIN}maxPost(){return new Fe(wo,new gn("[PRIORITY-POST]",hI))}makePost(e,t){const i=cI(e);return new Fe(t,new gn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ut=new y6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=Math.log(2);class E6{constructor(e){const t=o=>parseInt(Math.log(o)/v6,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sp=function(n,e,t,i){n.sort(e);const a=function(p,m){const g=m-p;let v,S;if(g===0)return null;if(g===1)return v=n[p],S=t?t(v):v,new vn(S,v.node,vn.BLACK,null,null);{const I=parseInt(g/2,10)+p,x=a(p,I),U=a(I+1,m);return v=n[I],S=t?t(v):v,new vn(S,v.node,vn.BLACK,x,U)}},o=function(p){let m=null,g=null,v=n.length;const S=function(x,U){const k=v-x,H=v;v-=x;const Y=a(k+1,H),F=n[k],ie=t?t(F):F;I(new vn(ie,F.node,U,null,Y))},I=function(x){m?(m.left=x,m=x):(g=x,m=x)};for(let x=0;x<p.count;++x){const U=p.nextBitIsOne(),k=Math.pow(2,p.count-(x+1));U?S(k,vn.BLACK):(S(k,vn.BLACK),S(k,vn.RED))}return g},u=new E6(n.length),h=o(u);return new Jn(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg;const El={};class is{static get Default(){return fe(El&&Ut,"ChildrenNode.ts has not been loaded"),Dg=Dg||new is({".priority":El},{".priority":Ut}),Dg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ul(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Jn?t:null}hasIndex(e){return _s(this.indexSet_,e.toString())}addIndex(e,t){fe(e!==Ll,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const o=t.getIterator(Fe.Wrap);let u=o.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=o.getNext();let h;a?h=sp(i,e.getCompare()):h=El;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const g=Object.assign({},this.indexes_);return g[p]=h,new is(g,m)}addToIndexes(e,t){const i=Ld(this.indexes_,(a,o)=>{const u=Ul(this.indexSet_,o);if(fe(u,"Missing index implementation for "+o),a===El)if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(Fe.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&h.push(m),m=p.getNext();return h.push(e),sp(h,u.getCompare())}else return El;else{const h=t.get(e.name);let p=a;return h&&(p=p.remove(new Fe(e.name,h))),p.insert(e,e.node)}});return new is(i,this.indexSet_)}removeFromIndexes(e,t){const i=Ld(this.indexes_,a=>{if(a===El)return a;{const o=t.get(e.name);return o?a.remove(new Fe(e.name,o)):a}});return new is(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc;class Ne{static get EMPTY_NODE(){return gc||(gc=new Ne(new Jn(t0),null,is.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&uI(this.priorityNode_),this.children_.isEmpty()&&fe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gc}updatePriority(e){return this.children_.isEmpty()?this:new Ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?gc:t}}getChild(e){const t=Ke(e);return t===null?this:this.getImmediateChild(t).getChild(bt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(fe(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Fe(e,t);let a,o;t.isEmpty()?(a=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?gc:this.priorityNode_;return new Ne(a,u,o)}}updateChild(e,t){const i=Ke(e);if(i===null)return t;{fe(Ke(e)!==".priority"||Aa(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(bt(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,o=!0;if(this.forEachChild(Ut,(u,h)=>{t[u]=h.val(e),i++,o&&Ne.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):o=!1}),!e&&o&&a<2*i){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+lI(this.getPriority().val())+":"),this.forEachChild(Ut,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":MR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const o=a.getPredecessorKey(new Fe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Fe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Fe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Fe.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)<0;)a.getNext(),o=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Fe.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)>0;)a.getNext(),o=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ah?-1:0}withIndex(e){if(e===Ll||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ne(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ll||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Ut),a=t.getIterator(Ut);let o=i.getNext(),u=a.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=a.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Ll?null:this.indexMap_.get(e.toString())}}Ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class T6 extends Ne{constructor(){super(new Jn(t0),Ne.EMPTY_NODE,is.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ne.EMPTY_NODE}isEmpty(){return!1}}const Ah=new T6;Object.defineProperties(Fe,{MIN:{value:new Fe($l,Ne.EMPTY_NODE)},MAX:{value:new Fe(wo,Ah)}});oI.__EMPTY_NODE=Ne.EMPTY_NODE;gn.__childrenNodeConstructor=Ne;m6(Ah);g6(Ah);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=!0;function En(n,e=null){if(n===null)return Ne.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),fe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new gn(t,En(e))}if(!(n instanceof Array)&&w6){const t=[];let i=!1;if(ni(n,(u,h)=>{if(u.substring(0,1)!=="."){const p=En(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new Fe(u,p)))}}),t.length===0)return Ne.EMPTY_NODE;const o=sp(t,p6,u=>u.name,t0);if(i){const u=sp(t,Ut.getCompare());return new Ne(o,En(e),new is({".priority":u},{".priority":Ut}))}else return new Ne(o,En(e),is.Default)}else{let t=Ne.EMPTY_NODE;return ni(n,(i,a)=>{if(_s(n,i)&&i.substring(0,1)!=="."){const o=En(a);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(En(e))}}_6(En);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6 extends Qp{constructor(e){super(),this.indexPath_=e,fe(!$e(e)&&Ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),o=i.compareTo(a);return o===0?au(e.name,t.name):o}makePost(e,t){const i=En(e),a=Ne.EMPTY_NODE.updateChild(this.indexPath_,i);return new Fe(t,a)}maxPost(){const e=Ne.EMPTY_NODE.updateChild(this.indexPath_,Ah);return new Fe(wo,e)}toString(){return iI(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6 extends Qp{compare(e,t){const i=e.node.compareTo(t.node);return i===0?au(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Fe.MIN}maxPost(){return Fe.MAX}makePost(e,t){const i=En(e);return new Fe(t,i)}toString(){return".value"}}const A6=new b6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(n){return{type:"value",snapshotNode:n}}function Kl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function nh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ih(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function C6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.index_=e}updateChild(e,t,i,a,o,u){fe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(nh(t,h)):fe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Kl(t,i)):u.trackChildChange(ih(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ut,(a,o)=>{t.hasChild(a)||i.trackChildChange(nh(a,o))}),t.isLeafNode()||t.forEachChild(Ut,(a,o)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(o)||i.trackChildChange(ih(a,o,u))}else i.trackChildChange(Kl(a,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ne.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.indexedFilter_=new n0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rh.getStartPost_(e),this.endPost_=rh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,o,u){return this.matches(new Fe(t,i))||(i=Ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,o,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ne.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Ne.EMPTY_NODE);const o=this;return t.forEachChild(Ut,(u,h)=>{o.matches(new Fe(u,h))||(a=a.updateImmediateChild(u,Ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new rh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,o,u){return this.rangedFilter_.matches(new Fe(t,i))||(i=Ne.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,o,u):this.fullLimitUpdateChild_(e,t,i,o,u)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=Ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=Ne.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(Ne.EMPTY_NODE);let o;this.reverse_?o=a.getReverseIterator(this.index_):o=a.getIterator(this.index_);let u=0;for(;o.hasNext();){const h=o.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:a=a.updateImmediateChild(h.name,Ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,o){let u;if(this.reverse_){const v=this.index_.getCompare();u=(S,I)=>v(I,S)}else u=this.index_.getCompare();const h=e;fe(h.numChildren()===this.limit_,"");const p=new Fe(t,i),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),g=this.rangedFilter_.matches(p);if(h.hasChild(t)){const v=h.getImmediateChild(t);let S=a.getChildAfterChild(this.index_,m,this.reverse_);for(;S!=null&&(S.name===t||h.hasChild(S.name));)S=a.getChildAfterChild(this.index_,S,this.reverse_);const I=S==null?1:u(S,p);if(g&&!i.isEmpty()&&I>=0)return o!=null&&o.trackChildChange(ih(t,i,v)),h.updateImmediateChild(t,i);{o!=null&&o.trackChildChange(nh(t,v));const U=h.updateImmediateChild(t,Ne.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(o!=null&&o.trackChildChange(Kl(S.name,S.node)),U.updateImmediateChild(S.name,S.node)):U}}else return i.isEmpty()?e:g&&u(m,p)>=0?(o!=null&&(o.trackChildChange(nh(m.name,m.node)),o.trackChildChange(Kl(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(m.name,Ne.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return fe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return fe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$l}hasEnd(){return this.endSet_}getIndexEndValue(){return fe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return fe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return fe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ut}copy(){const e=new i0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function I6(n){return n.loadsAllData()?new n0(n.getIndex()):n.hasLimit()?new R6(n):new rh(n)}function tb(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ut?t="$priority":n.index_===A6?t="$value":n.index_===Ll?t="$key":(fe(n.index_ instanceof S6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=an(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=an(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+an(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=an(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+an(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function nb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ut&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends eI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(fe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=bh("p:rest:"),this.listens_={}}listen(e,t,i,a){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=ap.getListenId_(e,i),h={};this.listens_[u]=h;const p=tb(e._queryParams);this.restRequest_(o+".json",p,(m,g)=>{let v=g;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(o,v,!1,i),Ul(this.listens_,u)===h){let S;m?m===401?S="permission_denied":S="rest_error:"+m:S="ok",a(S,null)}})}unlisten(e,t){const i=ap.getListenId_(e,t);delete this.listens_[i]}get(e){const t=tb(e._queryParams),i=e._path.toString(),a=new Cp;return this.restRequest_(i+".json",t,(o,u)=>{let h=u;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,o])=>{a&&a.accessToken&&(t.auth=a.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jl(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=qc(h.responseText)}catch{ei("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,p)}else h.status!==401&&h.status!==404&&ei("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.rootNode_=Ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){return{value:null,children:new Map}}function dI(n,e,t){if($e(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ke(e);n.children.has(i)||n.children.set(i,op());const a=n.children.get(i);e=bt(e),dI(a,e,t)}}function Ry(n,e,t){n.value!==null?t(e,n.value):x6(n,(i,a)=>{const o=new Tt(e.toString()+"/"+i);Ry(a,o,t)})}function x6(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ni(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=10*1e3,D6=30*1e3,k6=5*60*1e3;class M6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new O6(e);const i=ib+(D6-ib)*Math.random();Pc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ni(e,(a,o)=>{o>0&&_s(this.statsToReport_,a)&&(t[a]=o,i=!0)}),i&&this.server_.reportStats(t),Pc(this.reportStats_.bind(this),Math.floor(Math.random()*2*k6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Gi||(Gi={}));function pI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function r0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function s0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Gi.ACK_USER_WRITE,this.source=pI()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return fe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Tt(e));return new lp(ut(),t,this.revert)}}else return fe(Ke(this.path)===e,"operationForChild called for unrelated child."),new lp(bt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.source=e,this.path=t,this.type=Gi.LISTEN_COMPLETE}operationForChild(e){return $e(this.path)?new sh(this.source,ut()):new sh(this.source,bt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Gi.OVERWRITE}operationForChild(e){return $e(this.path)?new So(this.source,ut(),this.snap.getImmediateChild(e)):new So(this.source,bt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Gi.MERGE}operationForChild(e){if($e(this.path)){const t=this.children.subtree(new Tt(e));return t.isEmpty()?null:t.value?new So(this.source,ut(),t.value):new ah(this.source,ut(),t)}else return fe(Ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ah(this.source,bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ke(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function L6(n,e,t,i){const a=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(C6(u.childName,u.snapshotNode))}),yc(n,a,"child_removed",e,i,t),yc(n,a,"child_added",e,i,t),yc(n,a,"child_moved",o,i,t),yc(n,a,"child_changed",e,i,t),yc(n,a,"value",e,i,t),a}function yc(n,e,t,i,a,o){const u=i.filter(h=>h.type===t);u.sort((h,p)=>U6(n,h,p)),u.forEach(h=>{const p=V6(n,h,o);a.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(p,n.query_))})})}function V6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function U6(n,e,t){if(e.childName==null||t.childName==null)throw Zl("Should only compare child_ events.");const i=new Fe(e.childName,e.snapshotNode),a=new Fe(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(n,e){return{eventCache:n,serverCache:e}}function Lc(n,e,t,i){return Wp(new Ca(e,t,i),n.serverCache)}function mI(n,e,t,i){return Wp(n.eventCache,new Ca(e,t,i))}function up(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kg;const j6=()=>(kg||(kg=new Jn(bL)),kg);class At{static fromObject(e){let t=new At(null);return ni(e,(i,a)=>{t=t.set(new Tt(i),a)}),t}constructor(e,t=j6()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ut(),value:this.value};if($e(e))return null;{const i=Ke(e),a=this.children.get(i);if(a!==null){const o=a.findRootMostMatchingPathAndValue(bt(e),t);return o!=null?{path:on(new Tt(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const t=Ke(e),i=this.children.get(t);return i!==null?i.subtree(bt(e)):new At(null)}}set(e,t){if($e(e))return new At(t,this.children);{const i=Ke(e),o=(this.children.get(i)||new At(null)).set(bt(e),t),u=this.children.insert(i,o);return new At(this.value,u)}}remove(e){if($e(e))return this.children.isEmpty()?new At(null):new At(null,this.children);{const t=Ke(e),i=this.children.get(t);if(i){const a=i.remove(bt(e));let o;return a.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,a),this.value===null&&o.isEmpty()?new At(null):new At(this.value,o)}else return this}}get(e){if($e(e))return this.value;{const t=Ke(e),i=this.children.get(t);return i?i.get(bt(e)):null}}setTree(e,t){if($e(e))return t;{const i=Ke(e),o=(this.children.get(i)||new At(null)).setTree(bt(e),t);let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),new At(this.value,u)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,o)=>{i[a]=o.fold_(on(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if($e(e))return null;{const o=Ke(e),u=this.children.get(o);return u?u.findOnPath_(bt(e),on(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,i){if($e(e))return this;{this.value&&i(t,this.value);const a=Ke(e),o=this.children.get(a);return o?o.foreachOnPath_(bt(e),on(t,a),i):new At(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(on(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.writeTree_=e}static empty(){return new Qi(new At(null))}}function Vc(n,e,t){if($e(e))return new Qi(new At(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let o=i.value;const u=Bn(a,e);return o=o.updateChild(u,t),new Qi(n.writeTree_.set(a,o))}else{const a=new At(t),o=n.writeTree_.setTree(e,a);return new Qi(o)}}}function rb(n,e,t){let i=n;return ni(t,(a,o)=>{i=Vc(i,on(e,a),o)}),i}function sb(n,e){if($e(e))return Qi.empty();{const t=n.writeTree_.setTree(e,new At(null));return new Qi(t)}}function Iy(n,e){return Do(n,e)!=null}function Do(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Bn(t.path,e)):null}function ab(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ut,(i,a)=>{e.push(new Fe(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Fe(i,a.value))}),e}function fa(n,e){if($e(e))return n;{const t=Do(n,e);return t!=null?new Qi(new At(t)):new Qi(n.writeTree_.subtree(e))}}function Ny(n){return n.writeTree_.isEmpty()}function Ql(n,e){return _I(ut(),n.writeTree_,e)}function _I(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,o)=>{a===".priority"?(fe(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=_I(on(n,a),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(on(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(n,e){return EI(e,n)}function z6(n,e,t,i,a){fe(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=Vc(n.visibleWrites,e,t)),n.lastWriteId=i}function F6(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function B6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);fe(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,o=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&q6(h,i.path)?a=!1:Hi(i.path,h.path)&&(o=!0)),u--}if(a){if(o)return H6(n),!0;if(i.snap)n.visibleWrites=sb(n.visibleWrites,i.path);else{const h=i.children;ni(h,p=>{n.visibleWrites=sb(n.visibleWrites,on(i.path,p))})}return!0}else return!1}function q6(n,e){if(n.snap)return Hi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Hi(on(n.path,t),e))return!0;return!1}function H6(n){n.visibleWrites=gI(n.allWrites,G6,ut()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function G6(n){return n.visible}function gI(n,e,t){let i=Qi.empty();for(let a=0;a<n.length;++a){const o=n[a];if(e(o)){const u=o.path;let h;if(o.snap)Hi(t,u)?(h=Bn(t,u),i=Vc(i,h,o.snap)):Hi(u,t)&&(h=Bn(u,t),i=Vc(i,ut(),o.snap.getChild(h)));else if(o.children){if(Hi(t,u))h=Bn(t,u),i=rb(i,h,o.children);else if(Hi(u,t))if(h=Bn(u,t),$e(h))i=rb(i,ut(),o.children);else{const p=Ul(o.children,Ke(h));if(p){const m=p.getChild(bt(h));i=Vc(i,ut(),m)}}}else throw Zl("WriteRecord should have .snap or .children")}}return i}function yI(n,e,t,i,a){if(!i&&!a){const o=Do(n.visibleWrites,e);if(o!=null)return o;{const u=fa(n.visibleWrites,e);if(Ny(u))return t;if(t==null&&!Iy(u,ut()))return null;{const h=t||Ne.EMPTY_NODE;return Ql(u,h)}}}else{const o=fa(n.visibleWrites,e);if(!a&&Ny(o))return t;if(!a&&t==null&&!Iy(o,ut()))return null;{const u=function(m){return(m.visible||a)&&(!i||!~i.indexOf(m.writeId))&&(Hi(m.path,e)||Hi(e,m.path))},h=gI(n.allWrites,u,e),p=t||Ne.EMPTY_NODE;return Ql(h,p)}}}function $6(n,e,t){let i=Ne.EMPTY_NODE;const a=Do(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Ut,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=fa(n.visibleWrites,e);return t.forEachChild(Ut,(u,h)=>{const p=Ql(fa(o,new Tt(u)),h);i=i.updateImmediateChild(u,p)}),ab(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const o=fa(n.visibleWrites,e);return ab(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function K6(n,e,t,i,a){fe(i||a,"Either existingEventSnap or existingServerSnap must exist");const o=on(e,t);if(Iy(n.visibleWrites,o))return null;{const u=fa(n.visibleWrites,o);return Ny(u)?a.getChild(t):Ql(u,a.getChild(t))}}function Q6(n,e,t,i){const a=on(e,t),o=Do(n.visibleWrites,a);if(o!=null)return o;if(i.isCompleteForChild(t)){const u=fa(n.visibleWrites,a);return Ql(u,i.getNode().getImmediateChild(t))}else return null}function W6(n,e){return Do(n.visibleWrites,e)}function Y6(n,e,t,i,a,o,u){let h;const p=fa(n.visibleWrites,e),m=Do(p,ut());if(m!=null)h=m;else if(t!=null)h=Ql(p,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const g=[],v=u.getCompare(),S=o?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let I=S.getNext();for(;I&&g.length<a;)v(I,i)!==0&&g.push(I),I=S.getNext();return g}else return[]}function X6(){return{visibleWrites:Qi.empty(),allWrites:[],lastWriteId:-1}}function cp(n,e,t,i){return yI(n.writeTree,n.treePath,e,t,i)}function a0(n,e){return $6(n.writeTree,n.treePath,e)}function ob(n,e,t,i){return K6(n.writeTree,n.treePath,e,t,i)}function hp(n,e){return W6(n.writeTree,on(n.treePath,e))}function Z6(n,e,t,i,a,o){return Y6(n.writeTree,n.treePath,e,t,i,a,o)}function o0(n,e,t){return Q6(n.writeTree,n.treePath,e,t)}function vI(n,e){return EI(on(n.treePath,e),n.writeTree)}function EI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;fe(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),fe(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const o=a.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,ih(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,nh(i,a.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,Kl(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,ih(i,e.snapshotNode,a.oldSnap));else throw Zl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const TI=new eV;class l0{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Ca(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return o0(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bo(this.viewCache_),o=Z6(this.writes_,a,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(n){return{filter:n}}function nV(n,e){fe(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),fe(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function iV(n,e,t,i,a){const o=new J6;let u,h;if(t.type===Gi.OVERWRITE){const m=t;m.source.fromUser?u=xy(n,e,m.path,m.snap,i,a,o):(fe(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!$e(m.path),u=fp(n,e,m.path,m.snap,i,a,h,o))}else if(t.type===Gi.MERGE){const m=t;m.source.fromUser?u=sV(n,e,m.path,m.children,i,a,o):(fe(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),u=Oy(n,e,m.path,m.children,i,a,h,o))}else if(t.type===Gi.ACK_USER_WRITE){const m=t;m.revert?u=lV(n,e,m.path,i,a,o):u=aV(n,e,m.path,m.affectedTree,i,a,o)}else if(t.type===Gi.LISTEN_COMPLETE)u=oV(n,e,t.path,i,o);else throw Zl("Unknown operation type: "+t.type);const p=o.getChanges();return rV(e,u,p),{viewCache:u,changes:p}}function rV(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=up(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(fI(up(e)))}}function wI(n,e,t,i,a,o){const u=e.eventCache;if(hp(i,t)!=null)return e;{let h,p;if($e(t))if(fe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=bo(e),g=m instanceof Ne?m:Ne.EMPTY_NODE,v=a0(i,g);h=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const m=cp(i,bo(e));h=n.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{const m=Ke(t);if(m===".priority"){fe(Aa(t)===1,"Can't have a priority with additional path components");const g=u.getNode();p=e.serverCache.getNode();const v=ob(i,t,g,p);v!=null?h=n.filter.updatePriority(g,v):h=u.getNode()}else{const g=bt(t);let v;if(u.isCompleteForChild(m)){p=e.serverCache.getNode();const S=ob(i,t,u.getNode(),p);S!=null?v=u.getNode().getImmediateChild(m).updateChild(g,S):v=u.getNode().getImmediateChild(m)}else v=o0(i,m,e.serverCache);v!=null?h=n.filter.updateChild(u.getNode(),m,v,g,a,o):h=u.getNode()}}return Lc(e,h,u.isFullyInitialized()||$e(t),n.filter.filtersNodes())}}function fp(n,e,t,i,a,o,u,h){const p=e.serverCache;let m;const g=u?n.filter:n.filter.getIndexedFilter();if($e(t))m=g.updateFullNode(p.getNode(),i,null);else if(g.filtersNodes()&&!p.isFiltered()){const I=p.getNode().updateChild(t,i);m=g.updateFullNode(p.getNode(),I,null)}else{const I=Ke(t);if(!p.isCompleteForPath(t)&&Aa(t)>1)return e;const x=bt(t),k=p.getNode().getImmediateChild(I).updateChild(x,i);I===".priority"?m=g.updatePriority(p.getNode(),k):m=g.updateChild(p.getNode(),I,k,x,TI,null)}const v=mI(e,m,p.isFullyInitialized()||$e(t),g.filtersNodes()),S=new l0(a,v,o);return wI(n,v,t,a,S,h)}function xy(n,e,t,i,a,o,u){const h=e.eventCache;let p,m;const g=new l0(a,e,o);if($e(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,u),p=Lc(e,m,!0,n.filter.filtersNodes());else{const v=Ke(t);if(v===".priority")m=n.filter.updatePriority(e.eventCache.getNode(),i),p=Lc(e,m,h.isFullyInitialized(),h.isFiltered());else{const S=bt(t),I=h.getNode().getImmediateChild(v);let x;if($e(S))x=i;else{const U=g.getCompleteChild(v);U!=null?nI(S)===".priority"&&U.getChild(rI(S)).isEmpty()?x=U:x=U.updateChild(S,i):x=Ne.EMPTY_NODE}if(I.equals(x))p=e;else{const U=n.filter.updateChild(h.getNode(),v,x,S,g,u);p=Lc(e,U,h.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function lb(n,e){return n.eventCache.isCompleteForChild(e)}function sV(n,e,t,i,a,o,u){let h=e;return i.foreach((p,m)=>{const g=on(t,p);lb(e,Ke(g))&&(h=xy(n,h,g,m,a,o,u))}),i.foreach((p,m)=>{const g=on(t,p);lb(e,Ke(g))||(h=xy(n,h,g,m,a,o,u))}),h}function ub(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Oy(n,e,t,i,a,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,m;$e(t)?m=i:m=new At(null).setTree(t,i);const g=e.serverCache.getNode();return m.children.inorderTraversal((v,S)=>{if(g.hasChild(v)){const I=e.serverCache.getNode().getImmediateChild(v),x=ub(n,I,S);p=fp(n,p,new Tt(v),x,a,o,u,h)}}),m.children.inorderTraversal((v,S)=>{const I=!e.serverCache.isCompleteForChild(v)&&S.value===null;if(!g.hasChild(v)&&!I){const x=e.serverCache.getNode().getImmediateChild(v),U=ub(n,x,S);p=fp(n,p,new Tt(v),U,a,o,u,h)}}),p}function aV(n,e,t,i,a,o,u){if(hp(a,t)!=null)return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if($e(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return fp(n,e,t,p.getNode().getChild(t),a,o,h,u);if($e(t)){let m=new At(null);return p.getNode().forEachChild(Ll,(g,v)=>{m=m.set(new Tt(g),v)}),Oy(n,e,t,m,a,o,h,u)}else return e}else{let m=new At(null);return i.foreach((g,v)=>{const S=on(t,g);p.isCompleteForPath(S)&&(m=m.set(g,p.getNode().getChild(S)))}),Oy(n,e,t,m,a,o,h,u)}}function oV(n,e,t,i,a){const o=e.serverCache,u=mI(e,o.getNode(),o.isFullyInitialized()||$e(t),o.isFiltered());return wI(n,u,t,i,TI,a)}function lV(n,e,t,i,a,o){let u;if(hp(i,t)!=null)return e;{const h=new l0(i,e,a),p=e.eventCache.getNode();let m;if($e(t)||Ke(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=cp(i,bo(e));else{const v=e.serverCache.getNode();fe(v instanceof Ne,"serverChildren would be complete if leaf node"),g=a0(i,v)}g=g,m=n.filter.updateFullNode(p,g,o)}else{const g=Ke(t);let v=o0(i,g,e.serverCache);v==null&&e.serverCache.isCompleteForChild(g)&&(v=p.getImmediateChild(g)),v!=null?m=n.filter.updateChild(p,g,v,bt(t),h,o):e.eventCache.getNode().hasChild(g)?m=n.filter.updateChild(p,g,Ne.EMPTY_NODE,bt(t),h,o):m=p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=cp(i,bo(e)),u.isLeafNode()&&(m=n.filter.updateFullNode(m,u,o)))}return u=e.serverCache.isFullyInitialized()||hp(i,ut())!=null,Lc(e,m,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new n0(i.getIndex()),o=I6(i);this.processor_=tV(o);const u=t.serverCache,h=t.eventCache,p=a.updateFullNode(Ne.EMPTY_NODE,u.getNode(),null),m=o.updateFullNode(Ne.EMPTY_NODE,h.getNode(),null),g=new Ca(p,u.isFullyInitialized(),a.filtersNodes()),v=new Ca(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=Wp(v,g),this.eventGenerator_=new P6(this.query_)}get query(){return this.query_}}function cV(n){return n.viewCache_.serverCache.getNode()}function hV(n){return up(n.viewCache_)}function fV(n,e){const t=bo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$e(e)&&!t.getImmediateChild(Ke(e)).isEmpty())?t.getChild(e):null}function cb(n){return n.eventRegistrations_.length===0}function dV(n,e){n.eventRegistrations_.push(e)}function hb(n,e,t){const i=[];if(t){fe(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,a);u&&i.push(u)})}if(e){let a=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function fb(n,e,t,i){e.type===Gi.MERGE&&e.source.queryId!==null&&(fe(bo(n.viewCache_),"We should always have a full cache before handling merges"),fe(up(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,o=iV(n.processor_,a,e,t,i);return nV(n.processor_,o.viewCache),fe(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,SI(n,o.changes,o.viewCache.eventCache.getNode(),null)}function pV(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ut,(o,u)=>{i.push(Kl(o,u))}),t.isFullyInitialized()&&i.push(fI(t.getNode())),SI(n,i,t.getNode(),e)}function SI(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return L6(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp;class bI{constructor(){this.views=new Map}}function mV(n){fe(!dp,"__referenceConstructor has already been defined"),dp=n}function _V(){return fe(dp,"Reference.ts has not been loaded"),dp}function gV(n){return n.views.size===0}function u0(n,e,t,i){const a=e.source.queryId;if(a!==null){const o=n.views.get(a);return fe(o!=null,"SyncTree gave us an op for an invalid query."),fb(o,e,t,i)}else{let o=[];for(const u of n.views.values())o=o.concat(fb(u,e,t,i));return o}}function AI(n,e,t,i,a){const o=e._queryIdentifier,u=n.views.get(o);if(!u){let h=cp(t,a?i:null),p=!1;h?p=!0:i instanceof Ne?(h=a0(t,i),p=!1):(h=Ne.EMPTY_NODE,p=!1);const m=Wp(new Ca(h,p,!1),new Ca(i,a,!1));return new uV(e,m)}return u}function yV(n,e,t,i,a,o){const u=AI(n,e,i,a,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),dV(u,t),pV(u,t)}function vV(n,e,t,i){const a=e._queryIdentifier,o=[];let u=[];const h=Ra(n);if(a==="default")for(const[p,m]of n.views.entries())u=u.concat(hb(m,t,i)),cb(m)&&(n.views.delete(p),m.query._queryParams.loadsAllData()||o.push(m.query));else{const p=n.views.get(a);p&&(u=u.concat(hb(p,t,i)),cb(p)&&(n.views.delete(a),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!Ra(n)&&o.push(new(_V())(e._repo,e._path)),{removed:o,events:u}}function CI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function da(n,e){let t=null;for(const i of n.views.values())t=t||fV(i,e);return t}function RI(n,e){if(e._queryParams.loadsAllData())return Xp(n);{const i=e._queryIdentifier;return n.views.get(i)}}function II(n,e){return RI(n,e)!=null}function Ra(n){return Xp(n)!=null}function Xp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pp;function EV(n){fe(!pp,"__referenceConstructor has already been defined"),pp=n}function TV(){return fe(pp,"Reference.ts has not been loaded"),pp}let wV=1;class db{constructor(e){this.listenProvider_=e,this.syncPointTree_=new At(null),this.pendingWriteTree_=X6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function NI(n,e,t,i,a){return z6(n.pendingWriteTree_,e,t,i,a),a?Rh(n,new So(pI(),e,t)):[]}function mo(n,e,t=!1){const i=F6(n.pendingWriteTree_,e);if(B6(n.pendingWriteTree_,e)){let o=new At(null);return i.snap!=null?o=o.set(ut(),!0):ni(i.children,u=>{o=o.set(new Tt(u),!0)}),Rh(n,new lp(i.path,o,t))}else return[]}function Ch(n,e,t){return Rh(n,new So(r0(),e,t))}function SV(n,e,t){const i=At.fromObject(t);return Rh(n,new ah(r0(),e,i))}function bV(n,e){return Rh(n,new sh(r0(),e))}function AV(n,e,t){const i=h0(n,t);if(i){const a=f0(i),o=a.path,u=a.queryId,h=Bn(o,e),p=new sh(s0(u),h);return d0(n,o,p)}else return[]}function xI(n,e,t,i,a=!1){const o=e._path,u=n.syncPointTree_.get(o);let h=[];if(u&&(e._queryIdentifier==="default"||II(u,e))){const p=vV(u,e,t,i);gV(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const m=p.removed;if(h=p.events,!a){const g=m.findIndex(S=>S._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(o,(S,I)=>Ra(I));if(g&&!v){const S=n.syncPointTree_.subtree(o);if(!S.isEmpty()){const I=NV(S);for(let x=0;x<I.length;++x){const U=I[x],k=U.query,H=MI(n,U);n.listenProvider_.startListening(Uc(k),oh(n,k),H.hashFn,H.onComplete)}}}!v&&m.length>0&&!i&&(g?n.listenProvider_.stopListening(Uc(e),null):m.forEach(S=>{const I=n.queryToTagMap.get(Zp(S));n.listenProvider_.stopListening(Uc(S),I)}))}xV(n,m)}return h}function OI(n,e,t,i){const a=h0(n,i);if(a!=null){const o=f0(a),u=o.path,h=o.queryId,p=Bn(u,e),m=new So(s0(h),p,t);return d0(n,u,m)}else return[]}function CV(n,e,t,i){const a=h0(n,i);if(a){const o=f0(a),u=o.path,h=o.queryId,p=Bn(u,e),m=At.fromObject(t),g=new ah(s0(h),p,m);return d0(n,u,g)}else return[]}function RV(n,e,t,i=!1){const a=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(a,(S,I)=>{const x=Bn(S,a);o=o||da(I,x),u=u||Ra(I)});let h=n.syncPointTree_.get(a);h?(u=u||Ra(h),o=o||da(h,ut())):(h=new bI,n.syncPointTree_=n.syncPointTree_.set(a,h));let p;o!=null?p=!0:(p=!1,o=Ne.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((I,x)=>{const U=da(x,ut());U&&(o=o.updateImmediateChild(I,U))}));const m=II(h,e);if(!m&&!e._queryParams.loadsAllData()){const S=Zp(e);fe(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const I=OV();n.queryToTagMap.set(S,I),n.tagToQueryMap.set(I,S)}const g=Yp(n.pendingWriteTree_,a);let v=yV(h,e,t,g,o,p);if(!m&&!u&&!i){const S=RI(h,e);v=v.concat(DV(n,e,S))}return v}function c0(n,e,t){const a=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const p=Bn(u,e),m=da(h,p);if(m)return m});return yI(a,e,o,t,!0)}function IV(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(m,g)=>{const v=Bn(m,t);i=i||da(g,v)});let a=n.syncPointTree_.get(t);a?i=i||da(a,ut()):(a=new bI,n.syncPointTree_=n.syncPointTree_.set(t,a));const o=i!=null,u=o?new Ca(i,!0,!1):null,h=Yp(n.pendingWriteTree_,e._path),p=AI(a,e,h,o?u.getNode():Ne.EMPTY_NODE,o);return hV(p)}function Rh(n,e){return DI(e,n.syncPointTree_,null,Yp(n.pendingWriteTree_,ut()))}function DI(n,e,t,i){if($e(n.path))return kI(n,e,t,i);{const a=e.get(ut());t==null&&a!=null&&(t=da(a,ut()));let o=[];const u=Ke(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const m=t?t.getImmediateChild(u):null,g=vI(i,u);o=o.concat(DI(h,p,m,g))}return a&&(o=o.concat(u0(a,n,i,t))),o}}function kI(n,e,t,i){const a=e.get(ut());t==null&&a!=null&&(t=da(a,ut()));let o=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,m=vI(i,u),g=n.operationForChild(u);g&&(o=o.concat(kI(g,h,p,m)))}),a&&(o=o.concat(u0(a,n,i,t))),o}function MI(n,e){const t=e.query,i=oh(n,t);return{hashFn:()=>(cV(e)||Ne.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?AV(n,t._path,i):bV(n,t._path);{const o=RL(a,t);return xI(n,t,null,o)}}}}function oh(n,e){const t=Zp(e);return n.queryToTagMap.get(t)}function Zp(n){return n._path.toString()+"$"+n._queryIdentifier}function h0(n,e){return n.tagToQueryMap.get(e)}function f0(n){const e=n.indexOf("$");return fe(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Tt(n.substr(0,e))}}function d0(n,e,t){const i=n.syncPointTree_.get(e);fe(i,"Missing sync point for query tag that we're tracking");const a=Yp(n.pendingWriteTree_,e);return u0(i,t,a,null)}function NV(n){return n.fold((e,t,i)=>{if(t&&Ra(t))return[Xp(t)];{let a=[];return t&&(a=CI(t)),ni(i,(o,u)=>{a=a.concat(u)}),a}})}function Uc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(TV())(n._repo,n._path):n}function xV(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=Zp(i),o=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(o)}}}function OV(){return wV++}function DV(n,e,t){const i=e._path,a=oh(n,e),o=MI(n,t),u=n.listenProvider_.startListening(Uc(e),a,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(a)fe(!Ra(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((m,g,v)=>{if(!$e(m)&&g&&Ra(g))return[Xp(g).query];{let S=[];return g&&(S=S.concat(CI(g).map(I=>I.query))),ni(v,(I,x)=>{S=S.concat(x)}),S}});for(let m=0;m<p.length;++m){const g=p[m];n.listenProvider_.stopListening(Uc(g),oh(n,g))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new p0(t)}node(){return this.node_}}class m0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=on(this.path_,e);return new m0(this.syncTree_,t)}node(){return c0(this.syncTree_,this.path_)}}const kV=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},pb=function(n,e,t){if(!n||typeof n!="object")return n;if(fe(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return MV(n[".sv"],e,t);if(typeof n[".sv"]=="object")return PV(n[".sv"],e);fe(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},MV=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:fe(!1,"Unexpected server value: "+n)}},PV=function(n,e,t){n.hasOwnProperty("increment")||fe(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&fe(!1,"Unexpected increment value: "+i);const a=e.node();if(fe(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},LV=function(n,e,t,i){return _0(e,new m0(t,n),i)},PI=function(n,e,t){return _0(n,new p0(e),t)};function _0(n,e,t){const i=n.getPriority().val(),a=pb(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=pb(u.getValue(),e,t);return h!==u.getValue()||a!==u.getPriority().val()?new gn(h,En(a)):n}else{const u=n;return o=u,a!==u.getPriority().val()&&(o=o.updatePriority(new gn(a))),u.forEachChild(Ut,(h,p)=>{const m=_0(p,e.getImmediateChild(h),t);m!==p&&(o=o.updateImmediateChild(h,m))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function y0(n,e){let t=e instanceof Tt?e:new Tt(e),i=n,a=Ke(t);for(;a!==null;){const o=Ul(i.node.children,a)||{children:{},childCount:0};i=new g0(a,i,o),t=bt(t),a=Ke(t)}return i}function lu(n){return n.node.value}function LI(n,e){n.node.value=e,Dy(n)}function VI(n){return n.node.childCount>0}function VV(n){return lu(n)===void 0&&!VI(n)}function Jp(n,e){ni(n.node.children,(t,i)=>{e(new g0(t,n,i))})}function UI(n,e,t,i){t&&e(n),Jp(n,a=>{UI(a,e,!0)})}function UV(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ih(n){return new Tt(n.parent===null?n.name:Ih(n.parent)+"/"+n.name)}function Dy(n){n.parent!==null&&jV(n.parent,n.name,n)}function jV(n,e,t){const i=VV(t),a=_s(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,Dy(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,Dy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=/[\[\].#$\/\u0000-\u001F\u007F]/,FV=/[\[\].#$\u0000-\u001F\u007F]/,Mg=10*1024*1024,jI=function(n){return typeof n=="string"&&n.length!==0&&!zV.test(n)},zI=function(n){return typeof n=="string"&&n.length!==0&&!FV.test(n)},BV=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zI(n)},qV=function(n,e,t,i){v0(Xy(n,"value"),e,t)},v0=function(n,e,t){const i=t instanceof Tt?new a6(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ho(i));if(typeof e=="function")throw new Error(n+"contains a function "+ho(i)+" with contents = "+e.toString());if(PR(e))throw new Error(n+"contains "+e.toString()+" "+ho(i));if(typeof e=="string"&&e.length>Mg/3&&Rp(e)>Mg)throw new Error(n+"contains a string greater than "+Mg+" utf8 bytes "+ho(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,o=!1;if(ni(e,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!jI(u)))throw new Error(n+" contains an invalid key ("+u+") "+ho(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);o6(i,u),v0(n,h,i),l6(i)}),a&&o)throw new Error(n+' contains ".value" child '+ho(i)+" in addition to actual children.")}},FI=function(n,e,t,i){if(!zI(t))throw new Error(Xy(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},HV=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),FI(n,e,t)},BI=function(n,e){if(Ke(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},GV=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!BV(t))throw new Error(Xy(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qI(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],o=a.getPath();t!==null&&!sI(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(a)}t&&n.eventLists_.push(t)}function Sr(n,e,t){qI(n,t),KV(n,i=>Hi(i,e)||Hi(e,i))}function KV(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const o=a.path;e(o)?(QV(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function QV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Mc&&kn("event: "+t.toString()),ou(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="repo_interrupt",YV=25;class XV{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $V,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=op(),this.transactionQueueTree_=new g0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ZV(n,e,t){if(n.stats_=Zv(n.repoInfo_),n.forceRestClient_||OL())n.server_=new ap(n.repoInfo_,(i,a,o,u)=>{mb(n,i,a,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>_b(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ls(n.repoInfo_,e,(i,a,o,u)=>{mb(n,i,a,o,u)},i=>{_b(n,i)},i=>{eU(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=LL(n.repoInfo_,()=>new M6(n.stats_,n.server_)),n.infoData_=new N6,n.infoSyncTree_=new db({startListening:(i,a,o,u)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=Ch(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),T0(n,"connected",!1),n.serverSyncTree_=new db({startListening:(i,a,o,u)=>(n.server_.listen(i,o,a,(h,p)=>{const m=u(h,p);Sr(n.eventQueue_,i._path,m)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function JV(n){const t=n.infoData_.getNode(new Tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function E0(n){return kV({timestamp:JV(n)})}function mb(n,e,t,i,a){n.dataUpdateCount++;const o=new Tt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const p=Ld(t,m=>En(m));u=CV(n.serverSyncTree_,o,p,a)}else{const p=En(t);u=OI(n.serverSyncTree_,o,p,a)}else if(i){const p=Ld(t,m=>En(m));u=SV(n.serverSyncTree_,o,p)}else{const p=En(t);u=Ch(n.serverSyncTree_,o,p)}let h=o;u.length>0&&(h=tm(n,o)),Sr(n.eventQueue_,h,u)}function _b(n,e){T0(n,"connected",e),e===!1&&iU(n)}function eU(n,e){ni(e,(t,i)=>{T0(n,t,i)})}function T0(n,e,t){const i=new Tt("/.info/"+e),a=En(t);n.infoData_.updateSnapshot(i,a);const o=Ch(n.infoSyncTree_,i,a);Sr(n.eventQueue_,i,o)}function HI(n){return n.nextWriteId_++}function tU(n,e,t){const i=IV(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const o=En(a).withIndex(e._queryParams.getIndex());RV(n.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=Ch(n.serverSyncTree_,e._path,o);else{const h=oh(n.serverSyncTree_,e);u=OI(n.serverSyncTree_,e._path,o,h)}return Sr(n.eventQueue_,e._path,u),xI(n.serverSyncTree_,e,t,null,!0),o},a=>(em(n,"get for query "+an(e)+" failed: "+a),Promise.reject(new Error(a))))}function nU(n,e,t,i,a){em(n,"set",{path:e.toString(),value:t,priority:i});const o=E0(n),u=En(t,i),h=c0(n.serverSyncTree_,e),p=PI(u,h,o),m=HI(n),g=NI(n.serverSyncTree_,e,p,m,!0);qI(n.eventQueue_,g),n.server_.put(e.toString(),u.val(!0),(S,I)=>{const x=S==="ok";x||ei("set at "+e+" failed: "+S);const U=mo(n.serverSyncTree_,m,!x);Sr(n.eventQueue_,e,U),sU(n,a,S,I)});const v=WI(n,e);tm(n,v),Sr(n.eventQueue_,v,[])}function iU(n){em(n,"onDisconnectEvents");const e=E0(n),t=op();Ry(n.onDisconnect_,ut(),(a,o)=>{const u=LV(a,o,n.serverSyncTree_,e);dI(t,a,u)});let i=[];Ry(t,ut(),(a,o)=>{i=i.concat(Ch(n.serverSyncTree_,a,o));const u=WI(n,a);tm(n,u)}),n.onDisconnect_=op(),Sr(n.eventQueue_,ut(),i)}function rU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(WV)}function em(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),kn(t,...e)}function sU(n,e,t,i){e&&ou(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let o=a;i&&(o+=": "+i);const u=new Error(o);u.code=a,e(u)}})}function GI(n,e,t){return c0(n.serverSyncTree_,e,t)||Ne.EMPTY_NODE}function w0(n,e=n.transactionQueueTree_){if(e||nm(n,e),lu(e)){const t=KI(n,e);fe(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&aU(n,Ih(e),t)}else VI(e)&&Jp(e,t=>{w0(n,t)})}function aU(n,e,t){const i=t.map(m=>m.currentWriteId),a=GI(n,e,i);let o=a;const u=a.hash();for(let m=0;m<t.length;m++){const g=t[m];fe(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const v=Bn(e,g.path);o=o.updateChild(v,g.currentOutputSnapshotRaw)}const h=o.val(!0),p=e;n.server_.put(p.toString(),h,m=>{em(n,"transaction put response",{path:p.toString(),status:m});let g=[];if(m==="ok"){const v=[];for(let S=0;S<t.length;S++)t[S].status=2,g=g.concat(mo(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&v.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();nm(n,y0(n.transactionQueueTree_,e)),w0(n,n.transactionQueueTree_),Sr(n.eventQueue_,e,g);for(let S=0;S<v.length;S++)ou(v[S])}else{if(m==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{ei("transaction at "+p.toString()+" failed: "+m);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=m}tm(n,e)}},u)}function tm(n,e){const t=$I(n,e),i=Ih(t),a=KI(n,t);return oU(n,a,i),i}function oU(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],m=Bn(t,p.path);let g=!1,v;if(fe(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)g=!0,v=p.abortReason,a=a.concat(mo(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=YV)g=!0,v="maxretry",a=a.concat(mo(n.serverSyncTree_,p.currentWriteId,!0));else{const S=GI(n,p.path,u);p.currentInputSnapshot=S;const I=e[h].update(S.val());if(I!==void 0){v0("transaction failed: Data returned ",I,p.path);let x=En(I);typeof I=="object"&&I!=null&&_s(I,".priority")||(x=x.updatePriority(S.getPriority()));const k=p.currentWriteId,H=E0(n),Y=PI(x,S,H);p.currentOutputSnapshotRaw=x,p.currentOutputSnapshotResolved=Y,p.currentWriteId=HI(n),u.splice(u.indexOf(k),1),a=a.concat(NI(n.serverSyncTree_,p.path,Y,p.currentWriteId,p.applyLocally)),a=a.concat(mo(n.serverSyncTree_,k,!0))}else g=!0,v="nodata",a=a.concat(mo(n.serverSyncTree_,p.currentWriteId,!0))}Sr(n.eventQueue_,t,a),a=[],g&&(e[h].status=2,function(S){setTimeout(S,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(v),!1,null))))}nm(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)ou(i[h]);w0(n,n.transactionQueueTree_)}function $I(n,e){let t,i=n.transactionQueueTree_;for(t=Ke(e);t!==null&&lu(i)===void 0;)i=y0(i,t),e=bt(e),t=Ke(e);return i}function KI(n,e){const t=[];return QI(n,e,t),t.sort((i,a)=>i.order-a.order),t}function QI(n,e,t){const i=lu(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Jp(e,a=>{QI(n,a,t)})}function nm(n,e){const t=lu(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,LI(e,t.length>0?t:void 0)}Jp(e,i=>{nm(n,i)})}function WI(n,e){const t=Ih($I(n,e)),i=y0(n.transactionQueueTree_,e);return UV(i,a=>{Pg(n,a)}),Pg(n,i),UI(i,a=>{Pg(n,a)}),t}function Pg(n,e){const t=lu(e);if(t){const i=[];let a=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(fe(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(fe(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(mo(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?LI(e,void 0):t.length=o+1,Sr(n.eventQueue_,Ih(e),a);for(let u=0;u<i.length;u++)ou(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function uU(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ei(`Invalid query segment '${t}' in query '${n}'`)}return e}const gb=function(n,e){const t=cU(n),i=t.namespace;t.domain==="firebase.com"&&ms(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ms("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||wL();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new KR(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new Tt(t.pathString)}},cU=function(n){let e="",t="",i="",a="",o="",u=!0,h="https",p=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let g=n.indexOf("/");g===-1&&(g=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(g,v)),g<v&&(a=lU(n.substring(g,v)));const S=uU(n.substring(Math.min(n.length,v)));m=e.indexOf(":"),m>=0?(u=h==="https"||h==="wss",p=parseInt(e.substring(m+1),10)):m=e.length;const I=e.slice(0,m);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const x=e.indexOf(".");i=e.substring(0,x).toLowerCase(),t=e.substring(x+1),o=i}"ns"in S&&(o=S.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:u,scheme:h,pathString:a,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+an(this.snapshot.exportVal())}}class fU{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return fe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return $e(this._path)?null:nI(this._path)}get ref(){return new gs(this._repo,this._path)}get _queryIdentifier(){const e=nb(this._queryParams),t=Yv(e);return t==="{}"?"default":t}get _queryObject(){return nb(this._queryParams)}isEqual(e){if(e=Dt(e),!(e instanceof S0))return!1;const t=this._repo===e._repo,i=sI(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+s6(this._path)}}class gs extends S0{constructor(e,t){super(e,t,new i0,!1)}get parent(){const e=rI(this._path);return e===null?null:new gs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class lh{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Tt(e),i=ky(this.ref,e);return new lh(this._node.getChild(t),i,Ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new lh(a,ky(this.ref,i),Ut)))}hasChild(e){const t=new Tt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function b0(n,e){return n=Dt(n),n._checkNotDeleted("ref"),e!==void 0?ky(n._root,e):n._root}function ky(n,e){return n=Dt(n),Ke(n._path)===null?HV("child","path",e):FI("child","path",e),new gs(n._repo,on(n._path,e))}function pU(n){return BI("remove",n._path),A0(n,null)}function A0(n,e){n=Dt(n),BI("set",n._path),qV("set",e,n._path);const t=new Cp;return nU(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function YI(n){n=Dt(n);const e=new dU(()=>{}),t=new C0(e);return tU(n._repo,n,t).then(i=>new lh(i,new gs(n._repo,n._path),n._queryParams.getIndex()))}class C0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new hU("value",this,new lh(e.snapshotNode,new gs(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fU(this,e,t):null}matches(e){return e instanceof C0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}mV(gs);EV(gs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="FIREBASE_DATABASE_EMULATOR_HOST",My={};let _U=!1;function gU(n,e,t,i){n.repoInfo_=new KR(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function yU(n,e,t,i,a){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||ms("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=gb(o,a),h=u.repoInfo,p;typeof process<"u"&&US&&(p=US[mU]),p?(o=`http://${p}?ns=${h.namespace}`,u=gb(o,a),h=u.repoInfo):u.repoInfo.secure;const m=new kL(n.name,n.options,e);GV("Invalid Firebase Database URL",u),$e(u.path)||ms("Database URL must point to the root of a Firebase Database (not including a child path).");const g=EU(h,n,m,new DL(n,t));return new TU(g,n)}function vU(n,e){const t=My[e];(!t||t[n.key]!==n)&&ms(`Database ${e}(${n.repoInfo_}) has already been deleted.`),rU(n),delete t[n.key]}function EU(n,e,t,i){let a=My[e.name];a||(a={},My[e.name]=a);let o=a[n.toURLString()];return o&&ms("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new XV(n,_U,t,i),a[n.toURLString()]=o,o}class TU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ZV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gs(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ms("Cannot call "+e+" on a deleted database.")}}function wU(n=Np(),e){const t=dh(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Qy("database");i&&SU(t,...i)}return t}function SU(n,e,t,i={}){n=Dt(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&_a(i,o.repoInfo_.emulatorOptions))return;ms("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&ms('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new wd(wd.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:Wy(i.mockUserToken,n.app.options.projectId);u=new wd(h)}gU(o,a,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(n){_L(Na),ga(new cs("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return yU(i,a,o,t)},"PUBLIC").setMultipleInstances(!0)),xi(jS,zS,n),xi(jS,zS,"esm2017")}ls.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ls.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};bU();const AU={apiKey:"AIzaSyCOBlr4IVMUZP7gqI706ZjiEEDcE8l4t4s",authDomain:"my-electronics-store.firebaseapp.com",projectId:"my-electronics-store",storageBucket:"my-electronics-store.appspot.com",messagingSenderId:"602301372699",appId:"1:602301372699:web:08ae7f5163dafb249f1bbe",databaseURL:"https://my-electronics-store-default-rtdb.firebaseio.com"},CU="b7636e548e191116b0f327bdc1e07423",im=cA(AU),qn=f3(im);Z3(im);const Sd=pL(im),R0=wU(im),RU=n=>n9(Sd,n),bd=Co("products/fetchProducts",async()=>{const n=await HC(yh(qn,"products")),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}),XI=Co("products/deleteProduct",async n=>(await GC(Ki(qn,"products",n)),n)),ZI=Co("products/addProduct",async n=>({id:(await $C(yh(qn,"products"),{...n,price:Number(n.price)})).id,...n})),IU=Ia({name:"products",initialState:{items:[],status:"idle",error:null},reducers:{},extraReducers:n=>{n.addCase(bd.pending,e=>{e.status="loading"}).addCase(bd.fulfilled,(e,t)=>{e.status="succeeded",e.items=t.payload}).addCase(bd.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(XI.fulfilled,(e,t)=>{e.items=e.items.filter(i=>i.id!==t.payload)}).addCase(ZI.fulfilled,(e,t)=>{e.items.push(t.payload)})}}),NU=IU.reducer,JI=Ia({name:"auth",initialState:{user:null,isAdmin:!1},reducers:{setUser:(n,e)=>{const{user:t,role:i}=e.payload;n.user=t,n.isAdmin=i==="admin"},clearUser:n=>{n.user=null,n.isAdmin=!1}}}),{setUser:Py,clearUser:e2}=JI.actions,xU=JI.reducer,Ad=Co("categories/fetchCategories",async()=>{const n=await HC(yh(qn,"products")),e=new Set;return n.forEach(t=>{const i=t.data();i.category&&e.add(i.category)}),["Все товары",...Array.from(e)]}),t2=Ia({name:"categories",initialState:{selectedCategory:"Все товары",categories:[],status:"idle",error:null},reducers:{setSelectedCategory:(n,e)=>{n.selectedCategory=e.payload}},extraReducers:n=>{n.addCase(Ad.pending,e=>{e.status="loading"}).addCase(Ad.fulfilled,(e,t)=>{e.status="succeeded",e.categories=t.payload}).addCase(Ad.rejected,(e,t)=>{e.status="failed",e.error=t.error.message})}}),{setSelectedCategory:n2}=t2.actions,OU=t2.reducer,Nh=Co("favorite/fetchFavorites",async(n,{getState:e})=>{var o;const t=(o=e().auth.user)==null?void 0:o.uid;if(!t)return[];const i=b0(R0,`favorites/${t}`),a=await YI(i);return a.exists()?Object.entries(a.val()).map(([u,h])=>({productId:u,quantity:h.quantity})):[]}),mp=Co("favorite/toggleFavorite",async(n,{getState:e,dispatch:t})=>{var u;const i=(u=e().auth.user)==null?void 0:u.uid;if(!i)return{productId:n,action:"none"};const a=b0(R0,`favorites/${i}/${n}`);return(await YI(a)).exists()?await pU(a):await A0(a,{quantity:1}),await t(Nh()),{productId:n}}),DU=Co("favorite/updateFavoriteQuantity",async({productId:n,quantity:e},{getState:t,dispatch:i})=>{var u;const a=(u=t().auth.user)==null?void 0:u.uid;if(!a)return;const o=b0(R0,`favorites/${a}/${n}`);return await A0(o,{quantity:e}),await i(Nh()),{productId:n,quantity:e}}),i2=Ia({name:"favorite",initialState:{items:[]},reducers:{clearFavorites:n=>{n.items=[]}},extraReducers:n=>{n.addCase(Nh.fulfilled,(e,t)=>{e.items=t.payload}).addCase(mp.fulfilled,()=>{}).addCase(mp.rejected,(e,t)=>{console.error("🔥 Ошибка toggleFavorite:",t.error)})}}),{clearFavorites:kU}=i2.actions,MU=i2.reducer,r2=Ia({name:"search",initialState:{query:""},reducers:{setSearchQuery:(n,e)=>{n.query=e.payload}}}),{setSearchQuery:yb}=r2.actions,PU=r2.reducer,s2=Ia({name:"sidePanel",initialState:{isOpen:!1},reducers:{togglePanel:n=>{n.isOpen=!n.isOpen}}}),{togglePanel:xl}=s2.actions,LU=s2.reducer,a2=Ia({name:"news",initialState:{news:[],viewedLoaded:!1,newNewsCount:0,viewedNewsIds:[]},reducers:{setNews:(n,e)=>{n.news=e.payload},setNewNewsCount:(n,e)=>{n.newNewsCount=e.payload},setViewedNewsIds:(n,e)=>{n.viewedNewsIds=e.payload},addViewedNewsId:(n,e)=>{n.viewedNewsIds.includes(e.payload)||n.viewedNewsIds.push(e.payload)},markAllNewsAsViewed:n=>{const e=n.news.map(t=>t.id);n.viewedNewsIds=[...new Set([...n.viewedNewsIds,...e])],n.newNewsCount=0},clearViewedNews:n=>{n.viewedNewsIds=[],n.newNewsCount=0}}}),{setNews:VU,setNewNewsCount:UU,setViewedNewsIds:Lg,addViewedNewsId:X8,markAllNewsAsViewed:jU,clearViewedNews:zU}=a2.actions,FU=a2.reducer,BU=dD({reducer:{menu:MD,products:NU,auth:xU,categories:OU,favorite:MU,search:PU,sidePanel:LU,news:FU}});var o2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vb=aa.createContext&&aa.createContext(o2),qU=["attr","size","title"];function HU(n,e){if(n==null)return{};var t=GU(n,e),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)i=o[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function GU(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function _p(){return _p=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_p.apply(this,arguments)}function Eb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function gp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Eb(Object(t),!0).forEach(function(i){$U(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Eb(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function $U(n,e,t){return e=KU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KU(n){var e=QU(n,"string");return typeof e=="symbol"?e:e+""}function QU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function l2(n){return n&&n.map((e,t)=>aa.createElement(e.tag,gp({key:t},e.attr),l2(e.child)))}function jt(n){return e=>aa.createElement(WU,_p({attr:gp({},n.attr)},e),l2(n.child))}function WU(n){var e=t=>{var{attr:i,size:a,title:o}=n,u=HU(n,qU),h=a||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),aa.createElement("svg",_p({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:p,style:gp(gp({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&aa.createElement("title",null,o),n.children)};return vb!==void 0?aa.createElement(vb.Consumer,null,t=>e(t)):e(o2)}function YU(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2zm3.564 1.426L5.596 5 8 5.961 14.154 3.5zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464z"},child:[]}]})(n)}function XU(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.5 7a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"},child:[]},{tag:"path",attr:{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(n)}function ZU(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"},child:[]}]})(n)}function JU(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"},child:[]},{tag:"path",attr:{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"},child:[]}]})(n)}function e7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m7.5-6.923c-.67.204-1.335.82-1.887 1.855q-.215.403-.395.872c.705.157 1.472.257 2.282.287zM4.249 3.539q.214-.577.481-1.078a7 7 0 0 1 .597-.933A7 7 0 0 0 3.051 3.05q.544.277 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9 9 0 0 1-1.565-.667A6.96 6.96 0 0 0 1.018 7.5zm1.4-2.741a12.3 12.3 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332M8.5 5.09V7.5h2.99a12.3 12.3 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.6 13.6 0 0 1 7.5 10.91V8.5zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741zm-3.282 3.696q.18.469.395.872c.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a7 7 0 0 1-.598-.933 9 9 0 0 1-.481-1.079 8.4 8.4 0 0 0-1.198.49 7 7 0 0 0 2.276 1.522zm-1.383-2.964A13.4 13.4 0 0 1 3.508 8.5h-2.49a6.96 6.96 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667m6.728 2.964a7 7 0 0 0 2.275-1.521 8.4 8.4 0 0 0-1.197-.49 9 9 0 0 1-.481 1.078 7 7 0 0 1-.597.933M8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855q.216-.403.395-.872A12.6 12.6 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.96 6.96 0 0 0 14.982 8.5h-2.49a13.4 13.4 0 0 1-.437 3.008M14.982 7.5a6.96 6.96 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008zM11.27 2.461q.266.502.482 1.078a8.4 8.4 0 0 0 1.196-.49 7 7 0 0 0-2.275-1.52c.218.283.418.597.597.932m-.488 1.343a8 8 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"},child:[]}]})(n)}function t7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"},child:[]}]})(n)}function n7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"},child:[]}]})(n)}function i7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.37 2.37 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0M1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5M4 15h3v-5H4zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3 0h-2v3h2z"},child:[]}]})(n)}function r7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.048 3.323c.022.277-.13.523-.338.55-.21.026-.397-.176-.419-.453s.13-.523.338-.55c.21-.026.397.176.42.453Zm2.265-.24c-.603-.146-.894.256-.936.333-.027.048-.008.117.037.15.045.035.092.025.119-.003.361-.39.751-.172.829-.129l.011.007c.053.024.147.028.193-.098.023-.063.017-.11-.006-.142-.016-.023-.089-.08-.247-.118"},child:[]},{tag:"path",attr:{d:"M11.727 6.719c0-.022.01-.375.01-.557 0-3.07-1.45-6.156-5.015-6.156S1.708 3.092 1.708 6.162c0 .182.01.535.01.557l-.72 1.795a26 26 0 0 0-.534 1.508c-.68 2.187-.46 3.093-.292 3.113.36.044 1.401-1.647 1.401-1.647 0 .979.504 2.256 1.594 3.179-.408.126-.907.319-1.228.556-.29.213-.253.43-.201.518.228.386 3.92.246 4.985.126 1.065.12 4.756.26 4.984-.126.052-.088.088-.305-.2-.518-.322-.237-.822-.43-1.23-.557 1.09-.922 1.594-2.2 1.594-3.178 0 0 1.041 1.69 1.401 1.647.168-.02.388-.926-.292-3.113a26 26 0 0 0-.534-1.508l-.72-1.795ZM9.773 5.53a.1.1 0 0 1-.009.096c-.109.159-1.554.943-3.033.943h-.017c-1.48 0-2.925-.784-3.034-.943a.1.1 0 0 1-.018-.055q0-.022.01-.04c.13-.287 1.43-.606 3.042-.606h.017c1.611 0 2.912.319 3.042.605m-4.32-.989c-.483.022-.896-.529-.922-1.229s.344-1.286.828-1.308c.483-.022.896.529.922 1.23.027.7-.344 1.286-.827 1.307Zm2.538 0c-.484-.022-.854-.607-.828-1.308.027-.7.44-1.25.923-1.23.483.023.853.608.827 1.309-.026.7-.439 1.251-.922 1.23ZM2.928 8.99q.32.063.639.117v2.336s1.104.222 2.21.068V9.363q.49.027.937.023h.017c1.117.013 2.474-.136 3.786-.396.097.622.151 1.386.097 2.284-.146 2.45-1.6 3.99-3.846 4.012h-.091c-2.245-.023-3.7-1.562-3.846-4.011-.054-.9 0-1.663.097-2.285"},child:[]}]})(n)}function s7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},child:[]},{tag:"path",attr:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},child:[]}]})(n)}function a7(n){return jt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"},child:[]}]})(n)}function u2(n){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(n)}function o7(n){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"},child:[]}]})(n)}function l7(n){return jt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 3H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM9 9H5V5h4v4zm11-6h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-1 6h-4V5h4v4zm-9 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm-1 6H5v-4h4v4zm8-6c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(n)}function u7(n){return jt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"},child:[]}]})(n)}function c7(n){return jt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"},child:[]}]})(n)}function h7(n){return jt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412l7.332 7.332c.17.299.498.492.875.492a.99.99 0 0 0 .792-.409l7.415-7.415c2.354-2.354 2.354-6.049-.002-8.416a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595zm6.791 1.61c1.563 1.571 1.564 4.025.002 5.588L12 18.586l-6.793-6.793c-1.562-1.563-1.561-4.017-.002-5.584.76-.756 1.754-1.172 2.799-1.172s2.035.416 2.789 1.17l.5.5a.999.999 0 0 0 1.414 0l.5-.5c1.512-1.509 4.074-1.505 5.584-.002z"},child:[]}]})(n)}function c2(n){return jt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.205 4.791a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412L12 21.414l8.207-8.207c2.354-2.353 2.355-6.049-.002-8.416z"},child:[]}]})(n)}const f7="_header__wrap_1mmvc_1",d7="_header_1mmvc_1",p7="_icon_1mmvc_61",m7="_header__center_1mmvc_77",_7="_logo__header_1mmvc_107",g7="_searchContainer_1mmvc_115",y7="_searchInput_1mmvc_137",v7="_searchButton_1mmvc_157",E7="_darkOverlay_1mmvc_185",T7="_show_1mmvc_211",w7="_header__left_1mmvc_243",S7="_header__right_1mmvc_247",b7="_hideOnMobile_1mmvc_275",sn={header__wrap:f7,header:d7,icon:p7,header__center:m7,logo__header:_7,searchContainer:g7,searchInput:y7,searchButton:v7,darkOverlay:E7,show:T7,"icon-favorites":"_icon-favorites_1mmvc_221","header__favorite-count":"_header__favorite-count_1mmvc_227",header__left:w7,header__right:S7,"icon-account":"_icon-account_1mmvc_257","icon-cart":"_icon-cart_1mmvc_261",hideOnMobile:b7},h2=()=>{const n=Gn(),e=_t(i=>i.favorite.items.length),t=_t(i=>i.auth.user);return A.jsxs("div",{className:sn.header__right,children:[A.jsxs("div",{className:`${sn.icon} ${sn["icon-account"]}`,onClick:()=>n(kD()),children:[A.jsx(o7,{size:24}),A.jsx("span",{children:"Кабинет"})]}),A.jsxs("div",{className:`${sn.icon} ${sn["icon-favorites"]}`,onClick:()=>{n(t?kd():xl())},children:[e?A.jsx(c2,{style:{fill:"red",stroke:"black",strokeWidth:"2px"},size:24}):A.jsx(u2,{size:24}),A.jsx("span",{children:"Избранное"}),A.jsx("div",{className:sn["header__favorite-count"],children:e||""})]}),A.jsxs("div",{className:`${sn.icon} ${sn["icon-cart"]}`,children:[A.jsx(XU,{size:24}),A.jsx("span",{children:"Корзина"})]})]})},A7=()=>{const[n,e]=B.useState(!1),t=Gn();_t(u=>u.favorite.items.length);const i=_t(u=>u.search.query);_t(u=>u.auth.user);const a=()=>{e(!0)},o=()=>{e(!1)};return A.jsx("div",{className:sn.header,children:A.jsxs("div",{className:sn.header__wrap,children:[A.jsx("div",{className:sn.header__left,children:A.jsx("div",{className:sn.logo__header,onClick:()=>{t(n2("Все товары")),t(yb(""))},children:A.jsx(By,{to:"/",children:A.jsxs("svg",{width:"100",height:"50",viewBox:"0 -10 150 100",children:[A.jsx("text",{x:"10",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"S"}),A.jsx("text",{x:"140",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"H"}),A.jsx("text",{x:"35",y:"70",fontSize:"90",fontFamily:"Arial",fill:"#6e41e2",children:"O"}),A.jsx("text",{x:"110",y:"50",fontSize:"30",fontFamily:"Arial",fill:"black",fontWeight:"bold",children:"P"})]})})})}),A.jsxs("div",{className:sn.header__center,children:[A.jsxs("div",{className:sn.searchContainer,children:[A.jsx("input",{type:"text",placeholder:"Поиск...",className:sn.searchInput,onFocus:a,value:i,onChange:u=>t(yb(u.target.value))}),A.jsx("div",{className:sn.searchButton,children:"Найти"})]}),A.jsx("div",{className:`${sn.darkOverlay} ${n?sn.show:""}`,onClick:o})]}),A.jsx("div",{className:sn.hideOnMobile,children:A.jsx(h2,{})})]})})};function f2(n){return jt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M223.41,32.09,80,134.87,21,123.3A6.23,6.23,0,0,1,20,111.38L222.63,32.07A1,1,0,0,1,223.41,32.09ZM80,200a8,8,0,0,0,13.76,5.56l30.61-31.76L80,134.87Z",opacity:"0.2"},child:[]},{tag:"path",attr:{d:"M228.88,26.19a9,9,0,0,0-9.16-1.57L17.06,103.93a14.22,14.22,0,0,0,2.43,27.21L72,141.45V200a15.92,15.92,0,0,0,10,14.83,15.91,15.91,0,0,0,17.51-3.73l25.32-26.26L165,220a15.88,15.88,0,0,0,10.51,4,16.3,16.3,0,0,0,5-.79,15.85,15.85,0,0,0,10.67-11.63L231.77,35A9,9,0,0,0,228.88,26.19ZM78.15,126.35l-49.61-9.73,139.2-54.48ZM88,200V152.52l24.79,21.74Zm87.53,8L92.85,135.5l119-85.29Z"},child:[]}]})(n)}const C7="_footer_1hhll_1",Bt={"footer-wrap":"_footer-wrap_1hhll_1",footer:C7,"footer-content":"_footer-content_1hhll_31","footer-section":"_footer-section_1hhll_49","footer-title":"_footer-title_1hhll_59","footer-text":"_footer-text_1hhll_71","footer-icons":"_footer-icons_1hhll_81","footer-icon":"_footer-icon_1hhll_81","footer-bottom":"_footer-bottom_1hhll_119"},R7=()=>A.jsx("div",{className:Bt["footer-wrap"],children:A.jsxs("div",{className:Bt.footer,children:[A.jsxs("div",{className:Bt["footer-content"],children:[A.jsxs("div",{className:Bt["footer-section"],children:[A.jsx("h3",{className:Bt["footer-title"],children:"О нас"}),A.jsx("p",{className:Bt["footer-text"],children:"Мы предлагаем лучшие товары по отличным ценам. Подписывайтесь на нас в соцсетях!"})]}),A.jsxs("div",{className:Bt["footer-section"],children:[A.jsx("h3",{className:Bt["footer-title"],children:"Контакты"}),A.jsx("p",{className:Bt["footer-text"],children:"Email: support@example.com"}),A.jsx("p",{className:Bt["footer-text"],children:"Телефон: +38 555 555 555"})]}),A.jsxs("div",{className:Bt["footer-section"],children:[A.jsx("h3",{className:Bt["footer-title"],children:"Социальные сети"}),A.jsxs("div",{className:Bt["footer-icons"],children:[A.jsx("a",{href:"https://t.me/your_telegram_link",target:"_blank",className:Bt["footer-icon"],children:A.jsx(f2,{className:Bt["telegram-icon"]})}),A.jsx("a",{href:"https://www.instagram.com/your_instagram_link",target:"_blank",className:Bt["footer-icon"],children:A.jsx(t7,{className:Bt["instagram-icon"]})}),A.jsx("a",{href:"https://wa.me/your_viber_link",target:"_blank",className:Bt["footer-icon"],children:A.jsx(a7,{className:Bt["whatsapp-icon"]})})]})]})]}),A.jsx("div",{className:Bt["footer-bottom"],children:A.jsx("p",{className:Bt["footer-text"],children:"© 2025 Все права защищены."})})]})}),I7=n=>{B.useLayoutEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth;return n?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${e}px`,document.documentElement.style.setProperty("--scrollbar-width",`${e}px`)):(document.body.style.overflow="auto",document.body.style.paddingRight="0",document.documentElement.style.setProperty("--scrollbar-width","0")),()=>{document.body.style.overflow="auto",document.body.style.paddingRight="0",document.documentElement.style.setProperty("--scrollbar-width","0")}},[n])},N7="_defaultButton_1uah1_1",Tb={defaultButton:N7};var Vg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var wb;function x7(){return wb||(wb=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",u=0;u<arguments.length;u++){var h=arguments[u];h&&(o=a(o,i(h)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var u="";for(var h in o)e.call(o,h)&&o[h]&&(u=a(u,h));return u}function a(o,u){return u?o?o+" "+u:o+u:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Vg)),Vg.exports}var O7=x7();const D7=Ly(O7);function ti({children:n,onClick:e,className:t="",customStyle:i,overrideDefault:a=!1}){const o=Tb.defaultButton,u=i?Tb[i]:null,h=D7(!a&&o,u,t);return A.jsx("div",{className:h,onClick:e,children:n})}const k7="_visible_wna0z_99",Rt={"auth-form-container":"_auth-form-container_wna0z_1","auth-form-container__value":"_auth-form-container__value_wna0z_35","auth-form":"_auth-form_wna0z_1","auth-form-title":"_auth-form-title_wna0z_53","auth-form-group":"_auth-form-group_wna0z_61","auth-form-group__email":"_auth-form-group__email_wna0z_73","auth-form-group__password":"_auth-form-group__password_wna0z_75","auth-form-error":"_auth-form-error_wna0z_89",visible:k7,"auth-form-button":"_auth-form-button_wna0z_107","auth-form-toggle":"_auth-form-toggle_wna0z_129","auth-form-toggle-link":"_auth-form-toggle-link_wna0z_139","auth-form-container__welcome-emoji-img":"_auth-form-container__welcome-emoji-img_wna0z_159","auth-form-container__wrap-emoji-pointer":"_auth-form-container__wrap-emoji-pointer_wna0z_169","auth-form-container__emoji-pointer":"_auth-form-container__emoji-pointer_wna0z_177"},M7=()=>{const[n,e]=B.useState(!0),[t,i]=B.useState({email:"",password:"",confirmPassword:""}),[a,o]=B.useState(""),[u,h]=B.useState(""),{user:p,isAdmin:m}=_t(U=>U.auth),g=Gn(),v=Xl();B.useEffect(()=>{i({email:"",password:"",confirmPassword:""}),o(""),h("")},[n]);const S=async()=>{try{await i9(Sd),g(zU()),g(kU()),g(e2()),i({email:"",password:"",confirmPassword:""}),h(""),v("/")}catch(U){console.error("Ошибка при выходе:",U)}},I=U=>{const{name:k,value:H}=U.target;i(Y=>({...Y,[k]:H}))},x=async U=>{if(U.preventDefault(),o(""),h(""),!n&&t.password!==t.confirmPassword){o("Пароли не совпадают");return}try{let k;n?k=await J5(Sd,t.email,t.password):(k=await Z5(Sd,t.email,t.password),await jv(Ki(qn,"users",k.user.uid),{email:t.email,role:"user"}));const H=await Zc(Ki(qn,"myStores","admin-1"));if(H.exists()&&H.data().email===t.email)g(Py({user:{email:t.email,uid:k.user.uid},role:"admin"}));else{const Y=await Zc(Ki(qn,"users",k.user.uid));if(!Y.exists())throw new Error("Данные пользователя не найдены в Firestore.");const F=Y.data().role;g(Py({user:{email:t.email,uid:k.user.uid},role:F}))}h(n?`Вы вошли как ${t.email}`:`Пользователь ${t.email} успешно зарегистрирован`),i({email:"",password:"",confirmPassword:""})}catch(k){switch(console.error("Ошибка аутентификации:",k),k.code){case"auth/email-already-in-use":o("Пользователь с таким email уже существует.");break;case"auth/invalid-email":o("Некорректный email.");break;case"auth/weak-password":o("Пароль должен содержать не менее 6 символов.");break;case"auth/user-not-found":o("Пользователь с таким email не найден.");break;case"auth/wrong-password":o("Неверный пароль.");break;default:o("Неправельный email или password")}}};return B.useEffect(()=>{p&&g(Nh())},[p,g]),p?A.jsxs("div",{className:Rt["auth-form-container"],children:[A.jsx("div",{className:"auth-form-container__wrap-welcome-emoji-img",children:A.jsx("img",{className:Rt["auth-form-container__welcome-emoji-img"],src:"/welcome-emoji.png",alt:"веселый смайлик"})}),A.jsx("h2",{className:Rt["auth-form-title"],children:"Вы вошли в систему"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Email:"}),A.jsx("span",{className:Rt["auth-form-container__value"],children:p.email})]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Пользователь:"}),A.jsx("span",{className:Rt["auth-form-container__value"],children:m?"admin":"user"})]}),A.jsx("button",{onClick:S,className:Rt["auth-form-button"],children:"Выйти"})]}):A.jsxs("div",{className:Rt["auth-form-container"],children:[A.jsxs("form",{onSubmit:x,className:Rt["auth-form"],children:[A.jsx("div",{className:Rt["auth-form-container__wrap-emoji-pointer"],children:A.jsx("img",{src:"/emoji-pointer.png",alt:"смайлик регистрации или входа",className:Rt["auth-form-container__emoji-pointer"]})}),A.jsx("h2",{className:Rt["auth-form-title"],children:n?"Вход":"Регистрация"}),A.jsx("p",{className:`${Rt["auth-form-error"]} ${a?Rt.visible:""}`,children:a?`${a}`:""}),u&&A.jsx("p",{className:Rt["auth-form-success"],children:u}),A.jsxs("div",{className:Rt["auth-form-group"],children:[A.jsx("label",{children:"Email:"}),A.jsx("input",{className:Rt["auth-form-group__email"],type:"email",name:"email",placeholder:"Email",value:t.email,onChange:I,required:!0})]}),A.jsxs("div",{className:Rt["auth-form-group"],children:[A.jsx("label",{children:"Пароль:"}),A.jsx("input",{className:Rt["auth-form-group__password"],type:"password",name:"password",placeholder:"Пароль",value:t.password,onChange:I,required:!0})]}),!n&&A.jsxs("div",{className:Rt["auth-form-group"],children:[A.jsx("label",{children:"Подтвердите пароль:"}),A.jsx("input",{className:Rt["auth-form-group__password"],type:"password",name:"confirmPassword",placeholder:"Подтвердите пароль",value:t.confirmPassword,onChange:I,required:!0})]}),A.jsx("button",{type:"submit",className:Rt["auth-form-button"],children:n?"Войти":"Зарегистрироваться"})]}),A.jsx("div",{className:Rt["auth-form-toggle"],children:n?A.jsxs("p",{children:["Нет аккаунта?",A.jsx("span",{className:Rt["auth-form-toggle-link"],onClick:()=>e(!1),children:"Зарегистрироваться"})]}):A.jsxs("p",{children:["Уже есть аккаунт?",A.jsx("span",{className:Rt["auth-form-toggle-link"],onClick:()=>e(!0),children:"Войти"})]})})]})};function P7(n){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(n)}const L7="_visible_1n1ih_27",Ug={"menu-registration":"_menu-registration_1n1ih_1",visible:L7,"menu-registration__btn":"_menu-registration__btn_1n1ih_35"},V7=B.forwardRef(({isVisible:n},e)=>{const t=Gn(),i=()=>{t(Bc(!1))};return A.jsxs("div",{ref:e,className:`${Ug["menu-registration"]} ${n?Ug.visible:""}`,children:[A.jsxs(ti,{onClick:i,className:Ug["menu-registration__btn"],children:[A.jsx(P7,{color:"white",size:30}),A.jsx("span",{children:"Закрыть"})]}),A.jsx("div",{children:A.jsx(M7,{})})]})}),U7="_visible_1p26w_27",od={"news-section":"_news-section_1p26w_1",visible:U7,"news-section__custom-button-close":"_news-section__custom-button-close_1p26w_35","news-section__wrap":"_news-section__wrap_1p26w_55"},Tl={"news-feed":"_news-feed_14pbg_1","news-item":"_news-item_14pbg_9","news-title":"_news-title_14pbg_21","news-content":"_news-content_14pbg_33","news-date":"_news-date_14pbg_41","delete-button":"_delete-button_14pbg_51"},j7=()=>{const n=Gn(),e=_t(h=>h.auth.isAdmin),t=_t(h=>h.auth.userId),i=_t(h=>h.news.news),a=_t(h=>h.news.viewedNewsIds);B.useEffect(()=>{const h=w3(yh(qn,"news"),S3("createdAt","desc")),p=C3(h,m=>{const g=m.docs.map(v=>{var I;const S=v.data();return{id:v.id,...S,createdAt:((I=S.createdAt)==null?void 0:I.toDate().getTime())||null}});n(VU(g))});return()=>p()},[n]),B.useEffect(()=>{if(!t)return;(async()=>{try{const p=Ki(qn,"users",t),m=await Zc(p);if(m.exists()){const g=m.data(),v=Array.isArray(g.viewedNews)?g.viewedNews:[];n(Lg(v))}else n(Lg([]))}catch(p){console.error("Ошибка при загрузке viewedNews:",p),n(Lg([]))}})()},[t,n]),B.useEffect(()=>{const h=i.filter(p=>!a.includes(p.id));n(UU(h.length))},[i,a,n]),B.useEffect(()=>{if(!t||a.length===0)return;(async()=>{try{await jv(Ki(qn,"users",t),{viewedNews:a},{merge:!0})}catch(p){console.error("Ошибка при сохранении viewedNews:",p)}})()},[t,a]);const o=async h=>{if(window.confirm("Удалить эту новость?"))try{await GC(Ki(qn,"news",h)),alert("Удалено")}catch(m){console.error("Ошибка при удалении:",m),alert("Ошибка при удалении")}},u=h=>h.charAt(0).toUpperCase()+h.slice(1);return A.jsx("div",{className:Tl["news-feed"],children:i.map(h=>A.jsxs("div",{className:Tl["news-item"],children:[A.jsx("h3",{className:Tl["news-title"],children:u(h.title.length>30?h.title.slice(0,35)+"...":h.title)}),A.jsx("p",{className:Tl["news-content"],children:u(h.content.length>150?h.content.slice(0,135)+"...":h.content)}),A.jsx("small",{className:Tl["news-date"],children:h.createdAt?new Date(h.createdAt).toLocaleString():"Дата не указана"}),e&&A.jsx("button",{onClick:()=>o(h.id),className:Tl["delete-button"],children:"Удалить"})]},h.id))})},z7=B.forwardRef(({isVisible:n},e)=>{const t=Gn(),i=()=>{t(Kg(!1))};return A.jsx("div",{ref:e,className:`${od["news-section"]} ${n?od.visible:""}`,children:A.jsxs("div",{children:[A.jsx(ti,{className:od["news-section__custom-button-close"],onClick:i,children:"✖ закрыть"}),A.jsxs("div",{className:od["news-section__wrap"],children:[A.jsx("strong",{children:"Новости"}),A.jsx(j7,{})]})]})})}),F7="_visible_1eeds_43",B7="_active_1eeds_95",wl={"category-list__section":"_category-list__section_1eeds_1",visible:F7,"category-list__container":"_category-list__container_1eeds_51","category-button":"_category-button_1eeds_65",active:B7,"close-button":"_close-button_1eeds_107"},q7=aa.forwardRef(({isVisible:n},e)=>{const t=Gn(),{categories:i,selectedCategory:a,status:o}=_t(m=>m.categories),u=[...new Set(i)];B.useEffect(()=>{t(Ad())},[t]);const h=()=>{t(Qg(!1))},p=m=>{t(n2(m))};return A.jsxs("div",{ref:e,className:`${wl["category-list__section"]} ${n?wl.visible:""}`,children:[A.jsx(ti,{className:wl["close-button"],onClick:h,children:"✖ закрыть"}),A.jsx("div",{className:wl["category-list__container"],children:o==="loading"?A.jsx("p",{children:"Загрузка..."}):o==="failed"?A.jsx("p",{children:"Ошибка загрузки категорий"}):u.map(m=>A.jsx("button",{className:`${wl["category-button"]} ${a===m?wl.active:""}`,onClick:()=>p(m),children:m},m))})]})});function H7(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"},child:[]},{tag:"path",attr:{d:"M18 14h-8"},child:[]},{tag:"path",attr:{d:"M15 18h-5"},child:[]},{tag:"path",attr:{d:"M10 6h8v4h-8V6Z"},child:[]}]})(n)}const G7="_visible_twsjw_27",Xr={"order-history__section":"_order-history__section_twsjw_1",visible:G7,"order-history__custom-button-close":"_order-history__custom-button-close_twsjw_35","order-history__wrap":"_order-history__wrap_twsjw_55","order-history__animation-blok":"_order-history__animation-blok_twsjw_77","order-history__wrap-loading-smile-img":"_order-history__wrap-loading-smile-img_twsjw_87","order-history__loading-smile-img":"_order-history__loading-smile-img_twsjw_95","order-history__wrap-hourglass-img":"_order-history__wrap-hourglass-img_twsjw_105","order-history__hourglass-img":"_order-history__hourglass-img_twsjw_125"},$7=B.forwardRef(({isVisible:n},e)=>{const t=Gn(),i=()=>{t(Yg(!1))};return A.jsx("div",{ref:e,className:`${Xr["order-history__section"]} ${n?Xr.visible:""}`,children:A.jsxs("div",{children:[A.jsx(ti,{className:Xr["order-history__custom-button-close"],onClick:i,children:"✖ закрыть"}),A.jsxs("div",{className:Xr["order-history__wrap"],children:[A.jsx("h3",{children:"Мои заказы:"}),A.jsxs("div",{className:Xr["order-history__animation-blok"],children:[A.jsx("div",{className:Xr["order-history__wrap-loading-smile-img"],children:A.jsx("img",{className:Xr["order-history__loading-smile-img"],src:"/loading-smile.png",alt:"смайлик с часами"})}),A.jsx("div",{className:Xr["order-history__wrap-hourglass-img"],children:A.jsx("img",{className:Xr["order-history__hourglass-img"],src:"/hourglass.png",alt:"песочные часы"})})]}),A.jsx("p",{children:"Заказов нет ... "})]})]})})}),K7="_visible_xfth0_69",ld={"settings-panel__section":"_settings-panel__section_xfth0_1","settings-panel__wrap":"_settings-panel__wrap_xfth0_31","settings-panel__custom-button-close":"_settings-panel__custom-button-close_xfth0_41",visible:K7},Q7=B.forwardRef(({isVisible:n},e)=>{const t=Gn(),i=()=>{t(Wg(!1))};return A.jsxs("div",{ref:e,className:`${ld["settings-panel__section"]} ${n?ld.visible:""}`,children:[A.jsx(ti,{className:ld["settings-panel__custom-button-close"],onClick:i,children:"✖ закрыть"}),A.jsxs("div",{className:ld["settings-panel__wrap"],children:[A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"}),A.jsx("p",{children:"Настройки"})]})]})}),W7="_visible_kvgmw_27",Y7="_favorite__delete_kvgmw_139",X7="_favorite__icon_kvgmw_163",Z7="_favorite__things_kvgmw_191",Yn={"favorite-list":"_favorite-list_kvgmw_1",visible:W7,"favorite-list__custom-button-close":"_favorite-list__custom-button-close_kvgmw_35","favorite-list__wrap":"_favorite-list__wrap_kvgmw_55","favorite-list__card-wrap":"_favorite-list__card-wrap_kvgmw_79","favorite-item__cards":"_favorite-item__cards_kvgmw_87","favorite-item__card":"_favorite-item__card_kvgmw_87","favorite__quantity-controls":"_favorite__quantity-controls_kvgmw_107","favorite__quantity-box":"_favorite__quantity-box_kvgmw_127",favorite__delete:Y7,favorite__icon:X7,favorite__things:Z7,"favorite-list__total":"_favorite-list__total_kvgmw_203"},J7=B.forwardRef(({isVisible:n},e)=>{const t=Gn(),i=Xl(),a=_t(S=>S.auth.user),o=_t(S=>S.products.items),u=_t(S=>S.favorite.items);B.useEffect(()=>{a&&t(Nh())},[a,t]);const h=B.useMemo(()=>u.map(S=>{const I=o.find(x=>x.id===S.productId);return I?{...I,quantity:S.quantity}:null}).filter(Boolean),[o,u]),p=(S,I,x)=>{x.stopPropagation();const U=h.find(H=>H.id===S);if(!U)return;const k=(U.quantity||1)+I;k<=0||t(DU({productId:S,quantity:k}))},m=(S,I)=>{I.stopPropagation(),t(mp(S))},g=S=>{i(`/product/${S}`)},v=h.reduce((S,I)=>S+(I.price||0)*(I.quantity||1),0);return A.jsxs("div",{ref:e,className:`${Yn["favorite-list"]} ${n?Yn.visible:""}`,children:[A.jsx(ti,{className:Yn["favorite-list__custom-button-close"],onClick:()=>t(kd(!1)),children:"✖ закрыть"}),A.jsxs("div",{className:Yn["favorite-list__wrap"],children:[A.jsx("strong",{children:"Избранное"}),h.length===0?A.jsx("p",{children:"Список избранного пуст"}):A.jsx("ul",{className:Yn["favorite-list__card-wrap"],children:h.map(S=>{var I,x;return A.jsxs("li",{className:Yn["favorite-item__cards"],onClick:()=>g(S.id),children:[A.jsxs("div",{className:Yn["favorite-item__card"],children:[A.jsx("img",{src:((I=S.imageUrl)==null?void 0:I.split(",")[0])||"/logo.png",alt:S.name,width:50}),A.jsxs("div",{children:[A.jsx("p",{children:S.name.length>50?`${S.name.slice(0,50)}...`:S.name}),A.jsxs("strong",{children:[(x=S.price)==null?void 0:x.toLocaleString("uk-UA")," ₴"]})]})]}),A.jsxs("div",{className:Yn["favorite__quantity-controls"],children:[A.jsxs("div",{className:Yn["favorite__quantity-box"],children:[A.jsx(ZU,{className:Yn.favorite__icon,onClick:U=>p(S.id,-1,U)}),A.jsx("div",{className:Yn.favorite__things,children:S.quantity||1}),A.jsx(n7,{className:Yn.favorite__icon,onClick:U=>p(S.id,1,U)})]}),A.jsx(s7,{className:Yn.favorite__delete,onClick:U=>m(S.id,U)})]})]},S.id)})}),A.jsxs("div",{className:Yn["favorite-list__total"],children:[A.jsx("strong",{children:"К оплате без доставки:"}),A.jsxs("strong",{children:[v.toLocaleString("uk-UA")," ₴"]})]})]})]})}),e8="_menu_1h3qc_1",t8="_menu__collection_1h3qc_33",n8="_visible_1h3qc_51",i8="_overlay_1h3qc_61",r8="_active_1h3qc_87",s8="_customButtonMenu_1h3qc_97",Le={menu:e8,menu__collection:t8,visible:n8,overlay:i8,active:r8,customButtonMenu:s8,"menu__custom-button-close":"_menu__custom-button-close_1h3qc_111","menu-language":"_menu-language_1h3qc_145","shop-soon":"_shop-soon_1h3qc_155","category-panel":"_category-panel_1h3qc_171","news-panel":"_news-panel_1h3qc_173","settings-panel":"_settings-panel_1h3qc_175","orders-panel":"_orders-panel_1h3qc_177","shop-panel":"_shop-panel_1h3qc_179","telegram-panel":"_telegram-panel_1h3qc_181","favorites-panel":"_favorites-panel_1h3qc_183","admin-panel":"_admin-panel_1h3qc_187","category-icon":"_category-icon_1h3qc_223","news-icon":"_news-icon_1h3qc_225","settings-icon":"_settings-icon_1h3qc_227","orders-icon":"_orders-icon_1h3qc_229","shop-icon":"_shop-icon_1h3qc_231","telegram-icon":"_telegram-icon_1h3qc_233","favorites-icon":"_favorites-icon_1h3qc_235","admin-icon":"_admin-icon_1h3qc_237","globe-icon":"_globe-icon_1h3qc_239","category-text":"_category-text_1h3qc_247","news-text":"_news-text_1h3qc_249","settings-text":"_settings-text_1h3qc_251","orders-text":"_orders-text_1h3qc_253","shop-text":"_shop-text_1h3qc_255","telegram-text":"_telegram-text_1h3qc_257","favorites-text":"_favorites-text_1h3qc_259","admin-text":"_admin-text_1h3qc_261","language-text":"_language-text_1h3qc_263","favorites-panel__box":"_favorites-panel__box_1h3qc_281","news-text-wrapper":"_news-text-wrapper_1h3qc_283","favorites-count":"_favorites-count_1h3qc_295","news-count":"_news-count_1h3qc_297"},a8=()=>{const n=_t(ae=>ae.favorite.items.length),e=_t(ae=>ae.news.newNewsCount),t=_t(ae=>ae.auth.user),i=_t(ae=>ae.auth.isAdmin),{isMenuVisible:a,isRegistrationVisible:o,isNewsSectionVisible:u,isCategoryListVisible:h,isSettingsVisible:p,isOrderHistoryVisible:m,isFavoritesVisible:g}=_t(ae=>ae.menu),v=Gn(),S=Xl(),I=B.useRef(null),x=B.useRef(null),U=B.useRef(null),k=B.useRef(null),H=B.useRef(null),Y=B.useRef(null),F=B.useRef(null);I7(a);const ie=ae=>{var P,b,w,R,D,L,O;(P=x.current)!=null&&P.contains(ae.target)||(b=U.current)!=null&&b.contains(ae.target)||(w=k.current)!=null&&w.contains(ae.target)||(R=H.current)!=null&&R.contains(ae.target)||(D=Y.current)!=null&&D.contains(ae.target)||(L=F.current)!=null&&L.contains(ae.target)||(O=I.current)!=null&&O.contains(ae.target)||(g?v(kd(!1)):m?v(Yg(!1)):p?v(Wg(!1)):h?v(Qg(!1)):u?v(Kg(!1)):o?v(Bc(!1)):a&&v(rw()))};B.useEffect(()=>(document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie)}),[a,o,u,h,p,m,g]);const re=()=>{window.open("https://t.me/Student_JS","_blank")};return A.jsxs("div",{className:Le.menu__wrap,children:[A.jsxs("div",{ref:x,className:`${Le.menu} ${a?Le.visible:""}`,children:[A.jsx(ti,{className:Le["menu__custom-button-close"],accordion:!0,onClick:()=>v(rw()),children:"✖ закрыть"}),A.jsxs("div",{className:Le.menu__collection,children:[t?A.jsxs("p",{children:["Привет, ",t.name||"как ты","! 🎉🎉🎉"]}):A.jsx("p",{children:"Вы не авторизированы"}),A.jsx(ti,{className:Le.customButtonMenu,onClick:()=>v(Bc()),children:t?"Личные данные":"Войти или зарегистрироваться"}),A.jsxs("div",{className:Le["menu-language"],children:[A.jsx(e7,{className:Le["globe-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["language-text"],children:"Русский"})})]}),i&&A.jsxs("div",{className:Le["admin-panel"],onClick:()=>S("/product-form"),children:[A.jsx(r7,{className:Le["admin-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["admin-text"],children:"Панель администратора"})})]}),A.jsxs("div",{className:Le["category-panel"],onClick:()=>v(Qg()),children:[A.jsx(l7,{className:Le["category-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["category-text"],children:"Категории"})})]}),A.jsxs("div",{className:Le["telegram-panel"],onClick:re,children:[A.jsx(f2,{className:Le["telegram-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["telegram-text"],children:"Telegram"})})]}),A.jsxs("div",{className:Le["favorites-panel"],onClick:()=>v(kd()),children:[A.jsx(u2,{className:Le["favorites-icon"]}),A.jsxs("div",{className:Le["favorites-panel__box"],children:[A.jsx("p",{className:Le["favorites-text"],children:"избранное"}),n>0&&A.jsx("span",{className:Le["favorites-count"],children:n})]})]}),A.jsxs("div",{className:Le["shop-panel"],children:[A.jsx(i7,{className:Le["shop-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["shop-text"],children:"Создать свой магазин"})}),A.jsx("p",{className:Le["shop-soon"],children:"soon"})]}),A.jsxs("div",{className:Le["orders-panel"],onClick:()=>v(Yg()),children:[A.jsx(YU,{className:Le["orders-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["orders-text"],children:"Мои заказы"})})]}),A.jsxs("div",{className:Le["settings-panel"],onClick:()=>v(Wg()),children:[A.jsx(JU,{className:Le["settings-icon"]}),A.jsx("div",{children:A.jsx("p",{className:Le["settings-text"],children:"Настройки"})})]}),A.jsxs("div",{className:Le["news-panel"],onClick:()=>{v(Kg()),v(jU())},children:[A.jsx(H7,{className:Le["news-icon"]}),A.jsxs("div",{className:Le["news-text-wrapper"],children:[A.jsx("p",{className:Le["news-text"],children:"Новости"}),e>0&&A.jsx("span",{className:Le["news-count"],children:e})]})]})]})]}),A.jsx(V7,{isVisible:o,ref:U}),A.jsx(J7,{isVisible:g,ref:I}),A.jsx(q7,{isVisible:h,ref:k}),A.jsx(z7,{isVisible:u,ref:H}),A.jsx($7,{isVisible:m,ref:F}),A.jsx(Q7,{isVisible:p,ref:Y}),A.jsx("div",{className:`${Le.overlay} ${a||o||u||p||m?Le.active:""}`})]})},o8="_visible_rpnw4_33",l8="_overlay_rpnw4_41",ji={"side-panel__wrap":"_side-panel__wrap_rpnw4_1",visible:o8,overlay:l8,"side-panel__close-button":"_side-panel__close-button_rpnw4_77","side-panel__container":"_side-panel__container_rpnw4_97","side-panel__wrap-small":"_side-panel__wrap-small_rpnw4_125","side-panel__small-img":"_side-panel__small-img_rpnw4_133","side-panel__custom-button-enter":"_side-panel__custom-button-enter_rpnw4_143","side-panel__custom-button-registration":"_side-panel__custom-button-registration_rpnw4_159"},u8=()=>{const n=_t(t=>t.sidePanel.isOpen),e=Gn();return A.jsxs("div",{className:ji["side-panel"],children:[A.jsx("div",{className:`${ji.overlay} ${n?ji.visible:""}`,onClick:()=>e(xl())}),A.jsxs("div",{className:`${ji["side-panel__wrap"]} ${n?ji.visible:""}`,onClick:t=>t.stopPropagation(),children:[A.jsx(ti,{className:ji["side-panel__close-button"],onClick:()=>e(xl()),children:"✖ закрыть"}),A.jsxs("div",{className:ji["side-panel__container"],children:[A.jsx("div",{className:ji["side-panel__wrap-small"],children:A.jsx("img",{className:ji["side-panel__small-img"],src:"/happySmile.png",alt:"смайлик"})}),A.jsx("h3",{children:"Хороший выбор! Сохраняем?"}),A.jsx("p",{children:"Войди или зарегистрируйся, чтобы сохранять товары в Избранное"}),A.jsx(ti,{onClick:()=>{e(Bc()),e(xl())},className:ji["side-panel__custom-button-enter"],children:"Войти"}),A.jsx(ti,{onClick:()=>{e(Bc()),e(xl())},className:ji["side-panel__custom-button-registration"],children:"Зарегестрироваться"})]})]})]})},c8="_container_1fyev_1",h8="_footer_1fyev_15",f8="_stickyBottomMobile_1fyev_61",Sl={container:c8,"header-wrapper":"_header-wrapper_1fyev_13","footer-wrapper":"_footer-wrapper_1fyev_15",footer:h8,"main-content":"_main-content_1fyev_41",stickyBottomMobile:f8},d8=()=>{const[n,e]=B.useState(!0);return B.useEffect(()=>{const t=()=>{const i=window.scrollY+window.innerHeight;document.documentElement.scrollHeight-i<=20?e(!1):e(!0)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),A.jsxs("div",{className:Sl.container,children:[A.jsx("div",{className:Sl["header-wrapper"],children:A.jsx(A7,{})}),A.jsx(a8,{}),A.jsx(u8,{}),A.jsx("main",{className:Sl["main-content"],children:A.jsx(Fx,{})}),n&&A.jsx("div",{className:Sl.stickyBottomMobile,children:A.jsx(h2,{})}),A.jsx("div",{className:Sl["footer-wrapper"],children:A.jsx(R7,{className:Sl.footer})})]})},p8=async n=>{const e=new FormData;e.append("image",n);try{const i=await(await fetch(`https://api.imgbb.com/1/upload?key=${CU}`,{method:"POST",body:e})).json();if(i.success)return i.data.url;throw new Error("Ошибка загрузки изображения")}catch(t){throw console.error(t),t}};function m8(n){return jt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(n)}var Cd={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var _8=Cd.exports,Sb;function g8(){return Sb||(Sb=1,function(n,e){((t,i)=>{n.exports=i()})(_8,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},a,o=!i.document&&!!i.postMessage,u=i.IS_PAPA_WORKER||!1,h={},p=0,m={};function g(b){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(w){var R=re(w);R.chunkSize=parseInt(R.chunkSize),w.step||w.chunk||(R.chunkSize=null),this._handle=new U(R),(this._handle.streamer=this)._config=R}).call(this,b),this.parseChunk=function(w,R){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let O=this._config.newline;O||(L=this._config.quoteChar||'"',O=this._handle.guessLineEndings(w,L)),w=[...w.split(O).slice(D)].join(O)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(w))!==void 0&&(w=L),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+w,L=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(w=L.meta.cursor,D=(this._finished||(this._partialLine=D.substring(w-this._baseIndex),this._baseIndex=w),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)i.postMessage({results:L,workerId:m.WORKER_ID,finished:D});else if(P(this._config.chunk)&&!R){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!D||!P(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(w){P(this._config.error)?this._config.error(w):u&&this._config.error&&i.postMessage({workerId:m.WORKER_ID,error:w,finished:!1})}}function v(b){var w;(b=b||{}).chunkSize||(b.chunkSize=m.RemoteChunkSize),g.call(this,b),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(R){this._input=R,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(w=new XMLHttpRequest,this._config.withCredentials&&(w.withCredentials=this._config.withCredentials),o||(w.onload=ae(this._chunkLoaded,this),w.onerror=ae(this._chunkError,this)),w.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var R,D=this._config.downloadRequestHeaders;for(R in D)w.setRequestHeader(R,D[R])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,w.setRequestHeader("Range","bytes="+this._start+"-"+L));try{w.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}o&&w.status===0&&this._chunkError()}},this._chunkLoaded=function(){w.readyState===4&&(w.status<200||400<=w.status?this._chunkError():(this._start+=this._config.chunkSize||w.responseText.length,this._finished=!this._config.chunkSize||this._start>=(R=>(R=R.getResponseHeader("Content-Range"))!==null?parseInt(R.substring(R.lastIndexOf("/")+1)):-1)(w),this.parseChunk(w.responseText)))},this._chunkError=function(R){R=w.statusText||R,this._sendError(new Error(R))}}function S(b){(b=b||{}).chunkSize||(b.chunkSize=m.LocalChunkSize),g.call(this,b);var w,R,D=typeof FileReader<"u";this.stream=function(L){this._input=L,R=L.slice||L.webkitSlice||L.mozSlice,D?((w=new FileReader).onload=ae(this._chunkLoaded,this),w.onerror=ae(this._chunkError,this)):w=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,O=(this._config.chunkSize&&(O=Math.min(this._start+this._config.chunkSize,this._input.size),L=R.call(L,this._start,O)),w.readAsText(L,this._config.encoding));D||this._chunkLoaded({target:{result:O}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(w.error)}}function I(b){var w;g.call(this,b=b||{}),this.stream=function(R){return w=R,this._nextChunk()},this._nextChunk=function(){var R,D;if(!this._finished)return R=this._config.chunkSize,w=R?(D=w.substring(0,R),w.substring(R)):(D=w,""),this._finished=!w,this.parseChunk(D)}}function x(b){g.call(this,b=b||{});var w=[],R=!0,D=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&w.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),w.length?this.parseChunk(w.shift()):R=!0},this._streamData=ae(function(L){try{w.push(typeof L=="string"?L:L.toString(this._config.encoding)),R&&(R=!1,this._checkIsFinished(),this.parseChunk(w.shift()))}catch(O){this._streamError(O)}},this),this._streamError=ae(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=ae(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=ae(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function U(b){var w,R,D,L,O=Math.pow(2,53),Ve=-O,nt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,le=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ce=this,de=0,pe=0,V=!1,W=!1,oe=[],Z={data:[],errors:[],meta:{}};function ue(me){return b.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function ve(){if(Z&&D&&(it("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),D=!1),b.skipEmptyLines&&(Z.data=Z.data.filter(function(Xe){return!ue(Xe)})),Ee()){let Xe=function(ct,rt){P(b.transformHeader)&&(ct=b.transformHeader(ct,rt)),oe.push(ct)};var Ae=Xe;if(Z)if(Array.isArray(Z.data[0])){for(var me=0;Ee()&&me<Z.data.length;me++)Z.data[me].forEach(Xe);Z.data.splice(0,1)}else Z.data.forEach(Xe)}function Se(Xe,ct){for(var rt=b.header?{}:[],Be=0;Be<Xe.length;Be++){var Oe=Be,kt=Xe[Be],kt=((qe,ht)=>(vt=>(b.dynamicTypingFunction&&b.dynamicTyping[vt]===void 0&&(b.dynamicTyping[vt]=b.dynamicTypingFunction(vt)),(b.dynamicTyping[vt]||b.dynamicTyping)===!0))(qe)?ht==="true"||ht==="TRUE"||ht!=="false"&&ht!=="FALSE"&&((vt=>{if(nt.test(vt)&&(vt=parseFloat(vt),Ve<vt&&vt<O))return 1})(ht)?parseFloat(ht):le.test(ht)?new Date(ht):ht===""?null:ht):ht)(Oe=b.header?Be>=oe.length?"__parsed_extra":oe[Be]:Oe,kt=b.transform?b.transform(kt,Oe):kt);Oe==="__parsed_extra"?(rt[Oe]=rt[Oe]||[],rt[Oe].push(kt)):rt[Oe]=kt}return b.header&&(Be>oe.length?it("FieldMismatch","TooManyFields","Too many fields: expected "+oe.length+" fields but parsed "+Be,pe+ct):Be<oe.length&&it("FieldMismatch","TooFewFields","Too few fields: expected "+oe.length+" fields but parsed "+Be,pe+ct)),rt}var Ce;Z&&(b.header||b.dynamicTyping||b.transform)&&(Ce=1,!Z.data.length||Array.isArray(Z.data[0])?(Z.data=Z.data.map(Se),Ce=Z.data.length):Z.data=Se(Z.data,0),b.header&&Z.meta&&(Z.meta.fields=oe),pe+=Ce)}function Ee(){return b.header&&oe.length===0}function it(me,Se,Ce,Ae){me={type:me,code:Se,message:Ce},Ae!==void 0&&(me.row=Ae),Z.errors.push(me)}P(b.step)&&(L=b.step,b.step=function(me){Z=me,Ee()?ve():(ve(),Z.data.length!==0&&(de+=me.data.length,b.preview&&de>b.preview?R.abort():(Z.data=Z.data[0],L(Z,ce))))}),this.parse=function(me,Se,Ce){var Ae=b.quoteChar||'"',Ae=(b.newline||(b.newline=this.guessLineEndings(me,Ae)),D=!1,b.delimiter?P(b.delimiter)&&(b.delimiter=b.delimiter(me),Z.meta.delimiter=b.delimiter):((Ae=((Xe,ct,rt,Be,Oe)=>{var kt,qe,ht,vt;Oe=Oe||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var ii=0;ii<Oe.length;ii++){for(var $n,Di=Oe[ii],ft=0,Pn=0,je=0,st=(ht=void 0,new H({comments:Be,delimiter:Di,newline:ct,preview:10}).parse(Xe)),Xt=0;Xt<st.data.length;Xt++)rt&&ue(st.data[Xt])?je++:($n=st.data[Xt].length,Pn+=$n,ht===void 0?ht=$n:0<$n&&(ft+=Math.abs($n-ht),ht=$n));0<st.data.length&&(Pn/=st.data.length-je),(qe===void 0||ft<=qe)&&(vt===void 0||vt<Pn)&&1.99<Pn&&(qe=ft,kt=Di,vt=Pn)}return{successful:!!(b.delimiter=kt),bestDelimiter:kt}})(me,b.newline,b.skipEmptyLines,b.comments,b.delimitersToGuess)).successful?b.delimiter=Ae.bestDelimiter:(D=!0,b.delimiter=m.DefaultDelimiter),Z.meta.delimiter=b.delimiter),re(b));return b.preview&&b.header&&Ae.preview++,w=me,R=new H(Ae),Z=R.parse(w,Se,Ce),ve(),V?{meta:{paused:!0}}:Z||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,R.abort(),w=P(b.chunk)?"":w.substring(R.getCharIndex())},this.resume=function(){ce.streamer._halted?(V=!1,ce.streamer.parseChunk(w,!0)):setTimeout(ce.resume,3)},this.aborted=function(){return W},this.abort=function(){W=!0,R.abort(),Z.meta.aborted=!0,P(b.complete)&&b.complete(Z),w=""},this.guessLineEndings=function(Xe,Ae){Xe=Xe.substring(0,1048576);var Ae=new RegExp(k(Ae)+"([^]*?)"+k(Ae),"gm"),Ce=(Xe=Xe.replace(Ae,"")).split("\r"),Ae=Xe.split(`
`),Xe=1<Ae.length&&Ae[0].length<Ce[0].length;if(Ce.length===1||Xe)return`
`;for(var ct=0,rt=0;rt<Ce.length;rt++)Ce[rt][0]===`
`&&ct++;return ct>=Ce.length/2?`\r
`:"\r"}}function k(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(b){var w=(b=b||{}).delimiter,R=b.newline,D=b.comments,L=b.step,O=b.preview,Ve=b.fastMode,nt=null,le=!1,ce=b.quoteChar==null?'"':b.quoteChar,de=ce;if(b.escapeChar!==void 0&&(de=b.escapeChar),(typeof w!="string"||-1<m.BAD_DELIMITERS.indexOf(w))&&(w=","),D===w)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<m.BAD_DELIMITERS.indexOf(D))&&(D=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var pe=0,V=!1;this.parse=function(W,oe,Z){if(typeof W!="string")throw new Error("Input must be a string");var ue=W.length,ve=w.length,Ee=R.length,it=D.length,me=P(L),Se=[],Ce=[],Ae=[],Xe=pe=0;if(!W)return ft();if(Ve||Ve!==!1&&W.indexOf(ce)===-1){for(var ct=W.split(R),rt=0;rt<ct.length;rt++){if(Ae=ct[rt],pe+=Ae.length,rt!==ct.length-1)pe+=R.length;else if(Z)return ft();if(!D||Ae.substring(0,it)!==D){if(me){if(Se=[],vt(Ae.split(w)),Pn(),V)return ft()}else vt(Ae.split(w));if(O&&O<=rt)return Se=Se.slice(0,O),ft(!0)}}return ft()}for(var Be=W.indexOf(w,pe),Oe=W.indexOf(R,pe),kt=new RegExp(k(de)+k(ce),"g"),qe=W.indexOf(ce,pe);;)if(W[pe]===ce)for(qe=pe,pe++;;){if((qe=W.indexOf(ce,qe+1))===-1)return Z||Ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Se.length,index:pe}),$n();if(qe===ue-1)return $n(W.substring(pe,qe).replace(kt,ce));if(ce===de&&W[qe+1]===de)qe++;else if(ce===de||qe===0||W[qe-1]!==de){Be!==-1&&Be<qe+1&&(Be=W.indexOf(w,qe+1));var ht=ii((Oe=Oe!==-1&&Oe<qe+1?W.indexOf(R,qe+1):Oe)===-1?Be:Math.min(Be,Oe));if(W.substr(qe+1+ht,ve)===w){Ae.push(W.substring(pe,qe).replace(kt,ce)),W[pe=qe+1+ht+ve]!==ce&&(qe=W.indexOf(ce,pe)),Be=W.indexOf(w,pe),Oe=W.indexOf(R,pe);break}if(ht=ii(Oe),W.substring(qe+1+ht,qe+1+ht+Ee)===R){if(Ae.push(W.substring(pe,qe).replace(kt,ce)),Di(qe+1+ht+Ee),Be=W.indexOf(w,pe),qe=W.indexOf(ce,pe),me&&(Pn(),V))return ft();if(O&&Se.length>=O)return ft(!0);break}Ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Se.length,index:pe}),qe++}}else if(D&&Ae.length===0&&W.substring(pe,pe+it)===D){if(Oe===-1)return ft();pe=Oe+Ee,Oe=W.indexOf(R,pe),Be=W.indexOf(w,pe)}else if(Be!==-1&&(Be<Oe||Oe===-1))Ae.push(W.substring(pe,Be)),pe=Be+ve,Be=W.indexOf(w,pe);else{if(Oe===-1)break;if(Ae.push(W.substring(pe,Oe)),Di(Oe+Ee),me&&(Pn(),V))return ft();if(O&&Se.length>=O)return ft(!0)}return $n();function vt(je){Se.push(je),Xe=pe}function ii(je){var st=0;return st=je!==-1&&(je=W.substring(qe+1,je))&&je.trim()===""?je.length:st}function $n(je){return Z||(je===void 0&&(je=W.substring(pe)),Ae.push(je),pe=ue,vt(Ae),me&&Pn()),ft()}function Di(je){pe=je,vt(Ae),Ae=[],Oe=W.indexOf(R,pe)}function ft(je){if(b.header&&!oe&&Se.length&&!le){var st=Se[0],Xt={},ys=new Set(st);let vs=!1;for(let Zi=0;Zi<st.length;Zi++){let un=st[Zi];if(Xt[un=P(b.transformHeader)?b.transformHeader(un,Zi):un]){let Kn,Zt=Xt[un];for(;Kn=un+"_"+Zt,Zt++,ys.has(Kn););ys.add(Kn),st[Zi]=Kn,Xt[un]++,vs=!0,(nt=nt===null?{}:nt)[Kn]=un}else Xt[un]=1,st[Zi]=un;ys.add(un)}vs&&console.warn("Duplicate headers found and renamed."),le=!0}return{data:Se,errors:Ce,meta:{delimiter:w,linebreak:R,aborted:V,truncated:!!je,cursor:Xe+(oe||0),renamedHeaders:nt}}}function Pn(){L(ft()),Se=[],Ce=[]}},this.abort=function(){V=!0},this.getCharIndex=function(){return pe}}function Y(b){var w=b.data,R=h[w.workerId],D=!1;if(w.error)R.userError(w.error,w.file);else if(w.results&&w.results.data){var L={abort:function(){D=!0,F(w.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ie,resume:ie};if(P(R.userStep)){for(var O=0;O<w.results.data.length&&(R.userStep({data:w.results.data[O],errors:w.results.errors,meta:w.results.meta},L),!D);O++);delete w.results}else P(R.userChunk)&&(R.userChunk(w.results,L,w.file),delete w.results)}w.finished&&!D&&F(w.workerId,w.results)}function F(b,w){var R=h[b];P(R.userComplete)&&R.userComplete(w),R.terminate(),delete h[b]}function ie(){throw new Error("Not implemented.")}function re(b){if(typeof b!="object"||b===null)return b;var w,R=Array.isArray(b)?[]:{};for(w in b)R[w]=re(b[w]);return R}function ae(b,w){return function(){b.apply(w,arguments)}}function P(b){return typeof b=="function"}return m.parse=function(b,w){var R=(w=w||{}).dynamicTyping||!1;if(P(R)&&(w.dynamicTypingFunction=R,R={}),w.dynamicTyping=R,w.transform=!!P(w.transform)&&w.transform,!w.worker||!m.WORKERS_SUPPORTED)return R=null,m.NODE_STREAM_INPUT,typeof b=="string"?(b=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(b),R=new(w.download?v:I)(w)):b.readable===!0&&P(b.read)&&P(b.on)?R=new x(w):(i.File&&b instanceof File||b instanceof Object)&&(R=new S(w)),R.stream(b);(R=(()=>{var D;return!!m.WORKERS_SUPPORTED&&(D=(()=>{var L=i.URL||i.webkitURL||null,O=t.toString();return m.BLOB_URL||(m.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))})(),(D=new i.Worker(D)).onmessage=Y,D.id=p++,h[D.id]=D)})()).userStep=w.step,R.userChunk=w.chunk,R.userComplete=w.complete,R.userError=w.error,w.step=P(w.step),w.chunk=P(w.chunk),w.complete=P(w.complete),w.error=P(w.error),delete w.worker,R.postMessage({input:b,config:w,workerId:R.id})},m.unparse=function(b,w){var R=!1,D=!0,L=",",O=`\r
`,Ve='"',nt=Ve+Ve,le=!1,ce=null,de=!1,pe=((()=>{if(typeof w=="object"){if(typeof w.delimiter!="string"||m.BAD_DELIMITERS.filter(function(oe){return w.delimiter.indexOf(oe)!==-1}).length||(L=w.delimiter),typeof w.quotes!="boolean"&&typeof w.quotes!="function"&&!Array.isArray(w.quotes)||(R=w.quotes),typeof w.skipEmptyLines!="boolean"&&typeof w.skipEmptyLines!="string"||(le=w.skipEmptyLines),typeof w.newline=="string"&&(O=w.newline),typeof w.quoteChar=="string"&&(Ve=w.quoteChar),typeof w.header=="boolean"&&(D=w.header),Array.isArray(w.columns)){if(w.columns.length===0)throw new Error("Option columns is empty");ce=w.columns}w.escapeChar!==void 0&&(nt=w.escapeChar+Ve),w.escapeFormulae instanceof RegExp?de=w.escapeFormulae:typeof w.escapeFormulae=="boolean"&&w.escapeFormulae&&(de=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(Ve),"g"));if(typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){if(!b.length||Array.isArray(b[0]))return V(null,b,le);if(typeof b[0]=="object")return V(ce||Object.keys(b[0]),b,le)}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields||ce),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:typeof b.data[0]=="object"?Object.keys(b.data[0]):[]),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),V(b.fields||[],b.data||[],le);throw new Error("Unable to serialize unrecognized input");function V(oe,Z,ue){var ve="",Ee=(typeof oe=="string"&&(oe=JSON.parse(oe)),typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(oe)&&0<oe.length),it=!Array.isArray(Z[0]);if(Ee&&D){for(var me=0;me<oe.length;me++)0<me&&(ve+=L),ve+=W(oe[me],me);0<Z.length&&(ve+=O)}for(var Se=0;Se<Z.length;Se++){var Ce=(Ee?oe:Z[Se]).length,Ae=!1,Xe=Ee?Object.keys(Z[Se]).length===0:Z[Se].length===0;if(ue&&!Ee&&(Ae=ue==="greedy"?Z[Se].join("").trim()==="":Z[Se].length===1&&Z[Se][0].length===0),ue==="greedy"&&Ee){for(var ct=[],rt=0;rt<Ce;rt++){var Be=it?oe[rt]:rt;ct.push(Z[Se][Be])}Ae=ct.join("").trim()===""}if(!Ae){for(var Oe=0;Oe<Ce;Oe++){0<Oe&&!Xe&&(ve+=L);var kt=Ee&&it?oe[Oe]:Oe;ve+=W(Z[Se][kt],Oe)}Se<Z.length-1&&(!ue||0<Ce&&!Xe)&&(ve+=O)}}return ve}function W(oe,Z){var ue,ve;return oe==null?"":oe.constructor===Date?JSON.stringify(oe).slice(1,25):(ve=!1,de&&typeof oe=="string"&&de.test(oe)&&(oe="'"+oe,ve=!0),ue=oe.toString().replace(pe,nt),(ve=ve||R===!0||typeof R=="function"&&R(oe,Z)||Array.isArray(R)&&R[Z]||((Ee,it)=>{for(var me=0;me<it.length;me++)if(-1<Ee.indexOf(it[me]))return!0;return!1})(ue,m.BAD_DELIMITERS)||-1<ue.indexOf(L)||ue.charAt(0)===" "||ue.charAt(ue.length-1)===" ")?Ve+ue+Ve:ue)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!o&&!!i.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=H,m.ParserHandle=U,m.NetworkStreamer=v,m.FileStreamer=S,m.StringStreamer=I,m.ReadableStreamStreamer=x,i.jQuery&&((a=i.jQuery).fn.parse=function(b){var w=b.config||{},R=[];return this.each(function(O){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Ve=0;Ve<this.files.length;Ve++)R.push({file:this.files[Ve],inputElem:this,instanceConfig:a.extend({},w)})}),D(),this;function D(){if(R.length===0)P(b.complete)&&b.complete();else{var O,Ve,nt,le,ce=R[0];if(P(b.before)){var de=b.before(ce.file,ce.inputElem);if(typeof de=="object"){if(de.action==="abort")return O="AbortError",Ve=ce.file,nt=ce.inputElem,le=de.reason,void(P(b.error)&&b.error({name:O},Ve,nt,le));if(de.action==="skip")return void L();typeof de.config=="object"&&(ce.instanceConfig=a.extend(ce.instanceConfig,de.config))}else if(de==="skip")return void L()}var pe=ce.instanceConfig.complete;ce.instanceConfig.complete=function(V){P(pe)&&pe(V,ce.file,ce.inputElem),L()},m.parse(ce.file,ce.instanceConfig)}}function L(){R.splice(0,1),D()}}),u&&(i.onmessage=function(b){b=b.data,m.WORKER_ID===void 0&&b&&(m.WORKER_ID=b.workerId),typeof b.input=="string"?i.postMessage({workerId:m.WORKER_ID,results:m.parse(b.input,b.config),finished:!0}):(i.File&&b.input instanceof File||b.input instanceof Object)&&(b=m.parse(b.input,b.config))&&i.postMessage({workerId:m.WORKER_ID,results:b,finished:!0})}),(v.prototype=Object.create(g.prototype)).constructor=v,(S.prototype=Object.create(g.prototype)).constructor=S,(I.prototype=Object.create(I.prototype)).constructor=I,(x.prototype=Object.create(g.prototype)).constructor=x,m})}(Cd)),Cd.exports}var y8=g8();const v8=Ly(y8),E8=()=>{const[n,e]=B.useState(""),t=i=>{const a=i.target.files[0];a&&v8.parse(a,{header:!0,skipEmptyLines:!0,complete:async o=>{const u=o.data;e("Загрузка...");for(const h of u)try{await jv(Ki(qn,"products",h.Артикул),{name:h["Название товара"],sku:h.Артикул,price:Number(h["Рекомендовання розничная цена"]),purchase:Number(h["Дроп цена для партнера"]),stock:h.Наличие==="instock",imageUrl:h.Изображения,description:h["Описание товара"],category:h["Категории товара"],subcategory:h.Подкатегории})}catch(p){console.error("Ошибка загрузки:",h,p)}e("✅ Загрузка завершена")}})};return A.jsxs("div",{children:[A.jsx("input",{type:"file",accept:".csv",onChange:t}),A.jsx("p",{children:n})]})},T8="_form_1rx3x_27",w8="_form__field_1rx3x_69",S8="_form__label_1rx3x_81",b8="_form__input_1rx3x_91",A8="_form__fileInput_1rx3x_105",C8="_form__image_1rx3x_135",R8="_form__error_1rx3x_145",I8="_form__success_1rx3x_155",mt={"product-form":"_product-form_1rx3x_1","product-form__title":"_product-form__title_1rx3x_13","form__up-load":"_form__up-load_1rx3x_27","form__up-load--component":"_form__up-load--component_1rx3x_41",form:T8,form__field:w8,form__label:S8,form__input:b8,form__fileInput:A8,"form-wrap__add-img":"_form-wrap__add-img_1rx3x_115",form__image:C8,form__error:R8,form__success:I8,"form__input--error":"_form__input--error_1rx3x_197","form__fileInput--error":"_form__fileInput--error_1rx3x_205"},vc={"editor-container":"_editor-container_1upn8_1","editor-title":"_editor-title_1upn8_19","editor-input":"_editor-input_1upn8_31","editor-textarea":"_editor-textarea_1upn8_33","editor-button":"_editor-button_1upn8_63"},N8=()=>{const[n,e]=B.useState(""),[t,i]=B.useState(""),a=async()=>{if(!n||!t)return alert("Заполни все поля");try{await $C(yh(qn,"news"),{title:n,content:t,createdAt:Wt.now()}),e(""),i(""),alert("Новость опубликована")}catch(o){console.error("Ошибка публикации:",o),alert("Ошибка при публикации")}};return A.jsxs("div",{className:vc["editor-container"],children:[A.jsx("h2",{className:vc["editor-title"],children:"Создать новость"}),A.jsx("input",{type:"text",placeholder:"Заголовок",value:n,onChange:o=>e(o.target.value),className:vc["editor-input"]}),A.jsx("textarea",{placeholder:"Текст новости",value:t,onChange:o=>i(o.target.value),className:vc["editor-textarea"]}),A.jsx("button",{onClick:a,className:vc["editor-button"],children:"Опубликовать"})]})},x8=()=>{const n=Gn(),[e,t]=B.useState({category:"Все товары",imageUrl:"",name:"",description:"",price:""}),[i,a]=B.useState(!1),[o,u]=B.useState(null),[h,p]=B.useState({category:!1,name:!1,description:!1,price:!1,imageUrl:!1}),m=B.useRef(null),g=I=>{const{name:x,value:U}=I.target;t({...e,[x]:U})},v=async I=>{const x=I.target.files[0];if(x)try{const U=await p8(x);t({...e,imageUrl:U})}catch{u("Ошибка загрузки изображения")}},S=async I=>{I.preventDefault();let x={category:!e.category,name:!e.name,description:!e.description,price:isNaN(e.price)||e.price<=0,imageUrl:!e.imageUrl};if(p(x),Object.values(x).includes(!0)){u("Пожалуйста, заполните все поля корректно.");return}u(null);try{await n(ZI({...e,price:Number(e.price)})),a(!0),alert("Товар добавлен!"),t({name:"",description:"",price:"",imageUrl:"",category:""}),m.current&&(m.current.value="")}catch(U){console.error("Ошибка при добавлении товара:",U),u("Ошибка при добавлении товара в базу.")}};return A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:mt["product-form__title"],children:"Admin room"}),A.jsxs("div",{className:mt["product-form"],children:[A.jsxs("form",{className:mt.form,onSubmit:S,children:[A.jsx("h4",{children:A.jsx("u",{children:"Загрузка индивидуального товара"})}),A.jsxs("div",{className:mt.form__field,children:[A.jsx("label",{className:mt.form__label,children:"Категория:"}),A.jsxs("select",{className:`${mt.form__input} ${h.category?mt["form__input--error"]:""}`,name:"category",value:e.category,onChange:g,children:[A.jsx("option",{value:"Все товары",children:"Все товары"}),A.jsx("option",{value:"Машины",children:"Машины"}),A.jsx("option",{value:"Аксессуары",children:"Аксессуары"}),A.jsx("option",{value:"Смартфоны",children:"Смартфоны"}),A.jsx("option",{value:"Ноутбуки",children:"Ноутбуки"}),A.jsx("option",{value:"Носки",children:"Носки"})]})]}),A.jsxs("div",{className:mt.form__field,children:[A.jsx("label",{className:mt.form__label,children:"Название товара:"}),A.jsx("input",{className:`${mt.form__input} ${h.name?mt["form__input--error"]:""}`,type:"text",name:"name",placeholder:"Название товара",value:e.name,onChange:g})]}),A.jsxs("div",{className:mt.form__field,children:[A.jsx("label",{className:mt.form__label,children:"Описание товара:"}),A.jsx("input",{className:`${mt.form__input} ${h.description?mt["form__input--error"]:""}`,type:"text",name:"description",placeholder:"Описание товара",value:e.description,onChange:g})]}),A.jsxs("div",{className:mt.form__field,children:[A.jsx("label",{className:mt.form__label,children:"Цена:"}),A.jsx("input",{className:`${mt.form__input} ${h.price?mt["form__input--error"]:""}`,type:"number",name:"price",placeholder:"Цена",value:e.price,onChange:g})]}),A.jsxs("div",{className:mt.form__field,children:[A.jsx("label",{className:mt.form__label,children:"Изображение товара:"}),A.jsx("input",{ref:m,className:`${mt.form__fileInput} ${h.imageUrl?mt["form__fileInput--error"]:""}`,type:"file",accept:"image/*",onChange:v}),A.jsx("div",{className:mt["form-wrap__add-img"],children:e.imageUrl?A.jsx("img",{className:mt.form__image,src:e.imageUrl,alt:"Uploaded"}):A.jsx(m8,{})})]}),o&&A.jsx("p",{className:mt.form__error,children:o}),i&&A.jsx("p",{className:mt.form__success,children:"Товар успешно добавлен!"}),A.jsx(ti,{onClick:S,children:"Добавить товар"})]}),A.jsxs("div",{className:mt["form__up-load"],children:[A.jsx("h4",{children:A.jsx("u",{children:"Загрузка файлов типов .CSV"})}),A.jsx("div",{className:mt["form__up-load--component"],children:A.jsx(E8,{})})]}),A.jsx("div",{children:A.jsx("div",{children:A.jsx(N8,{})})})]})]})},O8="_spinner_1t56x_3",D8="_circle_1t56x_25",k8="_little_1t56x_47",M8="_small_1t56x_63",P8="_medium_1t56x_79",L8="_large_1t56x_95",Zr={spinner:O8,circle:D8,little:k8,small:M8,medium:P8,large:L8},d2=()=>A.jsxs("div",{className:Zr.spinner,children:[A.jsx("div",{className:`${Zr.circle} ${Zr.little}`}),A.jsx("div",{className:`${Zr.circle} ${Zr.small}`}),A.jsx("div",{className:`${Zr.circle} ${Zr.medium}`}),A.jsx("div",{className:`${Zr.circle} ${Zr.large}`})]}),ud={"confirm-modal":"_confirm-modal_9tqup_1","confirm-modal__buttons-wrap":"_confirm-modal__buttons-wrap_9tqup_25","confirm-modal__button":"_confirm-modal__button_9tqup_25"},V8=({handleDelete:n,product:e,setIsModalOpen:t})=>A.jsxs("div",{className:ud["confirm-modal"],children:[A.jsx("p",{children:"Вы уверены, что хотите удалить?"}),A.jsxs("div",{className:ud["confirm-modal__buttons-wrap"],children:[A.jsx("div",{className:ud["confirm-modal__button"],onClick:()=>{n(e.id,e.imageUrl),t(!1)},children:"Да"}),A.jsx("div",{className:ud["confirm-modal__button"],onClick:()=>t(!1),children:"Нет"})]})]}),U8="_preloader_1as5n_121",Fn={"product-list__box":"_product-list__box_1as5n_1","product-list__ul":"_product-list__ul_1as5n_11","product-list__card":"_product-list__card_1as5n_29","product-list__name":"_product-list__name_1as5n_55","product-list__description":"_product-list__description_1as5n_75","product-ist__custom-button":"_product-ist__custom-button_1as5n_87","product-list__img-wrap":"_product-list__img-wrap_1as5n_95","product-list__img":"_product-list__img_1as5n_95",preloader:U8,"product-ist__delete-button":"_product-ist__delete-button_1as5n_139","product-ist__custom-button--add-product":"_product-ist__custom-button--add-product_1as5n_149","product-list__favorite-icon":"_product-list__favorite-icon_1as5n_169","product-ist__wrap-button":"_product-ist__wrap-button_1as5n_195"},j8=()=>{const[n,e]=B.useState(null),[t,i]=B.useState(!1),[a,o]=B.useState(36);_t(F=>F.auth.user);const u=_t(F=>F.search.query),h=_t(F=>F.favorite.items),{isAdmin:p}=_t(F=>F.auth),m=_t(F=>!!F.auth.user),g=Gn(),v=Xl(),{items:S,status:I,error:x}=_t(F=>F.products),U=_t(F=>F.categories.selectedCategory);B.useEffect(()=>{g(bd())},[g]);let k=[];u.trim()?k=S.filter(F=>F.name.toLowerCase().includes(u.toLowerCase())):k=U==="Все товары"?S:S.filter(F=>F.category===U);const H=async(F,ie)=>{try{await g(XI(F)),console.log(`Изображение для удаления: ${ie}`)}catch(re){console.error("Ошибка при удалении продукта: ",re)}},Y=()=>{o(F=>F+36)};return A.jsxs("div",{className:Fn["product-list__box"],children:[t&&A.jsx(V8,{handleDelete:H,product:n,setIsModalOpen:i}),I==="loading"?A.jsx("div",{className:Fn.preloader,children:A.jsx(d2,{})}):I==="failed"?A.jsxs("div",{children:["Error: ",x]}):k.length===0?A.jsx("div",{className:Fn["product-list__box"],children:A.jsx("p",{children:"Товаров нет."})}):A.jsx("ul",{className:Fn["product-list__ul"],children:k.slice(0,a).map(F=>{var P,b;const ie=h.some(w=>w.productId===F.id),re=F.name,ae=re.charAt(0).toUpperCase()+re.slice(1);return A.jsxs("li",{className:Fn["product-list__card"],onClick:()=>v(`/product/${F.id}`),children:[A.jsxs("div",{className:Fn["product-list__img-wrap"],children:[A.jsx("img",{src:F.imageUrl?F.imageUrl.split(",")[0]:"/logo.png",alt:"логотип",className:Fn["product-list__img"]}),A.jsx("div",{className:Fn["product-list__favorite-icon"],onClick:w=>{w.preventDefault(),w.stopPropagation(),g(m?mp(F.id):xl())},children:ie?A.jsx(c2,{style:{fill:"red",stroke:"black",strokeWidth:"1px"}}):A.jsx(h7,{})})]}),A.jsx("div",{children:A.jsxs("ul",{className:Fn["product-list__wrap-title"],children:[A.jsx("li",{className:Fn["product-list__name"],children:ae}),A.jsx("li",{className:Fn["product-list__description"]}),A.jsx("li",{children:A.jsxs("strong",{children:["Цена  ",(P=F.price)==null?void 0:P.toLocaleString("uk-UA")," ₴"]})}),A.jsxs("li",{style:{color:"red"},children:["Дроп  ",(b=F.purchase)==null?void 0:b.toLocaleString("uk-UA")," ₴"]})]})}),A.jsxs("div",{className:Fn["product-ist__wrap-button"],children:[p&&A.jsx("button",{className:Fn["product-ist__delete-button"],onClick:w=>{w.stopPropagation(),i(!0),e(F)},children:"delete"}),A.jsx(ti,{className:Fn["product-ist__custom-button"],onClick:w=>{w.stopPropagation(),console.log("Купить")},children:"Купить"})]})]},F.id)})}),U==="Все товары"&&!u.trim()&&A.jsx(ti,{onClick:Y,className:Fn["product-ist__custom-button--add-product"],children:"Показать еще"})]})};function z8(){return A.jsx("div",{children:A.jsx(j8,{})})}const F8="_slide_1x74w_53",B8="_dot_1x74w_193",_n={"product-details":"_product-details_1x74w_1","product-content":"_product-content_1x74w_13","wrap-slider":"_wrap-slider_1x74w_25","product-image-box":"_product-image-box_1x74w_39","slider-container":"_slider-container_1x74w_53","image-slider":"_image-slider_1x74w_67",slide:F8,"main-image":"_main-image_1x74w_95","arrow-left":"_arrow-left_1x74w_109","arrow-right":"_arrow-right_1x74w_139","image-dots":"_image-dots_1x74w_179",dot:B8,"active-dot":"_active-dot_1x74w_219","product-info":"_product-info_1x74w_227","product-name":"_product-name_1x74w_245","product-description":"_product-description_1x74w_255","product-price":"_product-price_1x74w_267","error-message":"_error-message_1x74w_279"},q8=()=>{const{id:n}=Rx(),[e,t]=B.useState(null),[i,a]=B.useState(!0),[o,u]=B.useState(null),[h,p]=B.useState([]),[m,g]=B.useState(0),[v,S]=B.useState(!0);B.useEffect(()=>{(async()=>{try{const k=Ki(qn,"products",n),H=await Zc(k);if(H.exists()){const Y=H.data(),F=Y.imageUrl.split(",").slice(0,15);t(Y),p(F),g(0)}else u("Товар не найден")}catch{u("Ошибка загрузки данных")}finally{a(!1)}})()},[n]);const I=U=>{S(!0),g(U==="left"?k=>k===0?h.length-1:k-1:k=>k===h.length-1?0:k+1)},x=U=>{S(!0),g(U)};return i?A.jsx(d2,{}):o?A.jsx("p",{className:_n["error-message"],children:o}):A.jsx("div",{className:_n["product-details"],children:A.jsxs("div",{className:_n["product-content"],children:[A.jsxs("div",{className:_n["wrap-slider"],children:[A.jsxs("div",{className:_n["product-image-box"],children:[h.length>1&&A.jsx(u7,{className:_n["arrow-left"],onClick:()=>I("left")}),A.jsx("div",{className:_n["slider-container"],children:A.jsx("div",{className:_n["image-slider"],style:{transform:`translateX(-${m*100}%)`,transition:v?"transform 0.5s ease-in-out":"none"},children:h.map((U,k)=>A.jsx("div",{className:_n.slide,children:A.jsx("img",{src:U,alt:`${e.name} ${k+1}`,className:_n["main-image"]})},k))})}),h.length>1&&A.jsx(c7,{className:_n["arrow-right"],onClick:()=>I("right")})]}),h.length>1&&A.jsx("div",{className:_n["image-dots"],children:h.map((U,k)=>A.jsx("span",{className:`${_n.dot} ${k===m?_n["active-dot"]:""}`,onClick:()=>x(k)},k))})]}),A.jsxs("div",{className:_n["product-info"],children:[A.jsx("h2",{className:_n["product-name"],children:e.name}),A.jsx("p",{className:_n["product-description"],children:e.description}),A.jsxs("p",{className:_n["product-price"],children:["Цена: $",e.price]})]})]})})};function H8({children:n}){const e=_t(a=>a.auth.user),t=_t(a=>a.auth.isAdmin),i=Xl();return B.useEffect(()=>{(!e||!t)&&i("/")},[t,e]),e&&t?n:null}const G8=()=>A.jsx(qx,{children:A.jsxs(Ec,{path:"/",element:A.jsx(d8,{}),children:[A.jsx(Ec,{index:!0,element:A.jsx(z8,{})}),A.jsx(Ec,{path:"product-form",element:A.jsx(H8,{children:A.jsx(x8,{})})}),A.jsx(Ec,{path:"/product/:id",element:A.jsx(q8,{})})]})}),$8=({children:n})=>{const e=Gn();return B.useEffect(()=>{const t=RU(async i=>{if(i)try{const a=Ki(qn,"users",i.uid),o=await Zc(a),u=o.exists()?o.data():{};e(Py({user:{email:i.email,uid:i.uid},role:u.role||"user"}))}catch(a){console.error("Ошибка при получении роли из Firestore:",a)}else e(e2())});return()=>t()},[e]),n},K8=()=>A.jsx(VO,{store:BU,children:A.jsx(dO,{children:A.jsx($8,{children:A.jsx(G8,{})})})});WN.createRoot(document.getElementById("root")).render(A.jsx(B.StrictMode,{children:A.jsx(K8,{})}));
